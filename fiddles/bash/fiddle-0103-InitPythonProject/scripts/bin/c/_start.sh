#!/usr/bin/env bash
# ---------------------------------------------------------------------------------------------------|
#  Repo                    : https://github.com/bradyhouse/house_____________________________________|
#  Specification           : N/A_____________________________________________________________________|
#  Specification Path      : N/A_____________________________________________________________________|
#  Author                  : brady house_____________________________________________________________|
#  Create date             : 11/28/2016______________________________________________________________|
#  Description             : MASTER C STARTUP FUNCTION_______________________________________________|
#  Entry Point             : gccStart________________________________________________________________|
#  Input Parameters        : N/A_____________________________________________________________________|
#  Initial Consumer        : ../fiddle-start.sh______________________________________________________|
# ---------------------------------------------------------------------------------------------------|
#  Revision History::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::|
# ---------------------------------------------------------------------------------------------------|
# Baseline Ver - CHANGELOG @ 201611280420
# ---------------------------------------------------------------------------------------------------|



function gccBuild() {
    if [[ -e ${__COMPILED_FILE__} ]]
    then
        rm -rf ${__COMPILED_FILE__};
    fi
    ${__C_COMPILER__} ${__SOURCE_FILE__} -o ${__COMPILED_FILE__};

}

function gccStart() {
  groupLog "gccStart";
  if [[ ! -e ".fiddlerc" ]]; then exit -1; fi
  source ".fiddlerc";
  if [[ -d "${__PROJECT_DIR__}" ]]
  then
    cd ${__PROJECT_DIR__};
    if [[ -d "target" ]]
    then
        rm -rf target;
    fi
    mkdir target;

    gccBuild || exit $?;
    if [[ ! -e ${__COMPILED_FILE__} ]]
    then
        exit -1;
    fi
    groupLog "Invoking executable";
    ./${__COMPILED_FILE__};
  fi
}
