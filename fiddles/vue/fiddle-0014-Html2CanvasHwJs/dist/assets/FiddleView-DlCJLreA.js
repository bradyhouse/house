import{o as n,c as r,H as M,k as Z,I as S,a as e,q as h,r as c,f as H,l as x,T as C,F as Y,m as F,u as W,J as A,G as V,O as J,K as U,L as Q}from"./@vue-DnbhPWbx.js";import{u as E,b as X}from"./vue-router-BPWuWD7h.js";import{h as $}from"./html2canvas-BfYXEYrK.js";import{l as j}from"./lodash-Dvv8_0_Q.js";import{_ as z}from"./index-CFrt_U_c.js";import{E as O,a as q}from"./element-plus-C2L3fE-j.js";import"./dayjs-CZnAS8i4.js";import"./pinia-BmT9gVvm.js";/* empty css                   */import"./lodash-es-Dx9PT-t0.js";import"./@element-plus-KYHrHXYF.js";const K={},ee={src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxlbGxpcHNlIGN4PSIxMiIgY3k9IjUiIGZpbGw9ImN1cnJlbnRDb2xvciIgcng9IjQiIHJ5PSI0Ij48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnNCb3VuY2luZ0JhbGwwIiBmaWxsPSJmcmVlemUiIGF0dHJpYnV0ZU5hbWU9ImN5IiBiZWdpbj0iMDtzdmdTcGlubmVyc0JvdW5jaW5nQmFsbDIuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBkdXI9IjAuMzc1cyIga2V5U3BsaW5lcz0iLjMzLDAsLjY2LC4zMyIgdmFsdWVzPSI1OzIwIi8+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0icngiIGJlZ2luPSJzdmdTcGlubmVyc0JvdW5jaW5nQmFsbDAuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBkdXI9IjAuMDVzIiBrZXlTcGxpbmVzPSIuMzMsMCwuNjYsLjMzOy4zMywuNjYsLjY2LDEiIHZhbHVlcz0iNDs0Ljg7NCIvPjxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InJ5IiBiZWdpbj0ic3ZnU3Bpbm5lcnNCb3VuY2luZ0JhbGwwLmVuZCIgY2FsY01vZGU9InNwbGluZSIgZHVyPSIwLjA1cyIga2V5U3BsaW5lcz0iLjMzLDAsLjY2LC4zMzsuMzMsLjY2LC42NiwxIiB2YWx1ZXM9IjQ7Mzs0Ii8+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzQm91bmNpbmdCYWxsMSIgYXR0cmlidXRlTmFtZT0iY3kiIGJlZ2luPSJzdmdTcGlubmVyc0JvdW5jaW5nQmFsbDAuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBkdXI9IjAuMDI1cyIga2V5U3BsaW5lcz0iLjMzLDAsLjY2LC4zMyIgdmFsdWVzPSIyMDsyMC41Ii8+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzQm91bmNpbmdCYWxsMiIgYXR0cmlidXRlTmFtZT0iY3kiIGJlZ2luPSJzdmdTcGlubmVyc0JvdW5jaW5nQmFsbDEuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBkdXI9IjAuNHMiIGtleVNwbGluZXM9Ii4zMywuNjYsLjY2LDEiIHZhbHVlcz0iMjAuNTs1Ii8+PC9lbGxpcHNlPjwvc3ZnPg=="};function te(o,_){return n(),r("img",ee)}const ae=z(K,[["render",te]]),ie={components:{ElSkeleton:O,ElSkeletonItem:q},data(){return{isLoading:!0}}},ne={style:{width:"100%",height:"100%",display:"flex","align-items":"center"}},le={style:{width:"168px",height:"100%",padding:"10px"}},se={style:{width:"calc(100%)",height:"100%",padding:"10px"}};function oe(o,_,k,N,b,G){const i=M("el-skeleton-item"),v=M("el-skeleton");return n(),Z(v,{loading:b.isLoading,style:{width:"100%",height:"100%",padding:"5px",opacity:"0.9"},animated:"",throttle:500},{template:S(()=>[e("div",ne,[e("div",le,[h(i,{variant:"rect",style:{width:"100%",height:"100%"}})]),e("div",se,[h(i,{variant:"rect",style:{width:"100%",height:"100%"}})])])]),_:1},8,["loading"])}const de=z(ie,[["render",oe]]),f=o=>(U("data-v-1a33b455"),o=o(),Q(),o),ce={key:0,class:"dashboards"},re={style:{"text-align":"center","padding-top":"10px"}},ue=f(()=>e("img",{style:{width:"100%"},src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiI+PGVsbGlwc2UgY3g9IjEyIiBjeT0iNSIgcng9IjkiIHJ5PSIzIi8+PHBhdGggZD0iTTIxIDEyYzAgMS42Ni00IDMtOSAzcy05LTEuMzQtOS0zIi8+PHBhdGggZD0iTTMgNXYxNGMwIDEuNjYgNCAzIDkgM3M5LTEuMzQgOS0zVjUiLz48L2c+PC9zdmc+"},null,-1)),me=[ue],ge={key:1},pe=f(()=>e("h3",null,"Generting previews ...",-1)),Ie={style:{padding:"10px"}},he={style:{width:"100%"}},_e={style:{border:"dotted 2px gray",width:"60%","min-width":"1024px"}},be=f(()=>e("thead",{style:{padding:"10px"}},[e("th",{style:{border:"solid 1px gainsboro","text-align":"left","vertical-align":"middle",padding:"10px",filter:"invert(100%)"}},[e("h5",null,"I F R A M E")]),e("th",{style:{border:"solid 1px gainsboro","text-align":"right","vertical-align":"middle",padding:"10px",filter:"invert(100%)"}},[e("h5",null,"P R E V I E W ")])],-1)),ve={style:{"vertical-align":"top","text-align":"left"}},ye=["src"],we={style:{"vertical-align":"top","text-align":"right"}},xe=["src"],We={__name:"FiddleView",setup(o){const _=E(),k=window.location.pathname,N=_.path,b=k.replace(N,""),G=X(),i=c(null),v=c(null),y=c(null),u=c(!1),d=c(!0),T=G.getRoutes().filter(t=>t.name!==void 0&&t.name!=="404"&&t.name!=="fiddle");let m=[],g=[],p=null,I=null;const B=j.debounce(async t=>{await R(p),setTimeout(()=>{D()},8e3)},500),L=()=>{localStorage.clear(),window.location.reload()},R=j.debounce(async t=>{if(t){const l=document.getElementById("targetPage"),s=await $(l.contentWindow.document.body),a=s.getContext("2d");a.filter="blur(5px) grayscale(100%) contrast(200%)",a.drawImage(s,0,0,s.width,s.height);debugger;const w=s.toDataURL("image/png");y.value=w,localStorage.setItem(t,w),m.push({name:String(I.name),preview:String(w),path:String(I.path)})}},4e3),P=()=>{m=[],g=[],T.forEach(t=>{const l=localStorage.getItem(t.name+"-preview");if(l)m.push({name:String(t.name),preview:String(l),path:String(t.path)});else{debugger;g.push({name:String(t.name),preview:null,path:String(t.path)})}})},D=j.debounce(()=>{if(g.length){const t=g.pop();u.value=!0,d.value=!1,t.name?(I=t,p=t.name+"-preview",i.value=window.location.protocol+"//"+window.location.host+"/"+b+t.name,y.value=null,console.log(p,i.value)):(console.log("targetRoute",t),I=null,p=null,i.value=null)}else P(),u.value=!1,d.value=!1},1e3);return H(()=>{P(),D()}),(t,l)=>{const s=M("router-link");return n(),r(Y,null,[d.value?(n(),Z(de,{key:0})):x("",!0),h(C,{name:"fade",mode:"out-in"},{default:S(()=>[e("div",null,[!u.value&&!d.value?(n(),r("div",ce,[(n(!0),r(Y,null,F(W(m),a=>(n(),Z(s,{key:a.path,to:a.path},{default:S(()=>[e("div",{class:"dashboard square",style:J({backgroundImage:`url(${a.preview})`,backgroundRepeat:"no-repeat",backgroundSize:"100% auto",border:"dashed 1px gray"})},null,4),e("h4",re,V(a.name),1)]),_:2},1032,["to"]))),128)),e("div",null,[e("div",{class:"dashboard square",style:{border:"dashed 1px gray"},onClick:L},me),e("h4",{class:"psuedoLink",style:{"text-align":"center","padding-top":"10px"},onClick:L},"Clear Local Storage")])])):x("",!0),u.value&&!d.value?(n(),r("div",ge,[e("p",null,[h(ae),A(" Â "),pe]),e("div",Ie,[e("div",he,[e("i",null,V(i.value),1)]),e("table",_e,[be,e("tbody",null,[e("tr",null,[e("td",ve,[e("iframe",{id:"targetPage",ref_key:"elFrame",ref:v,style:{height:"400px",width:"600px"},onLoad:l[0]||(l[0]=(...a)=>W(B)&&W(B)(...a)),src:i.value},null,40,ye)]),e("td",we,[e("img",{src:y.value,style:{width:"200px"}},null,8,xe)])])])])])])):x("",!0)])]),_:1})],64)}}},Pe=z(We,[["__scopeId","data-v-1a33b455"]]);export{Pe as default};
