import{P as pu,B as be,a as pe,A as D,R as B,b as te,C as oe,M as Ce,c as Ts,_ as E,E as V,K as ve,F as qy,d as Zy,O as zr,e as mv,f as Mt,g as Cr,h as Ad,i as Wo,j as Dd,D as Gn,k as Et,T as _l,l as Md,V as Rd,m as br,N as xr,n as Uo,o as Sv,p as Cv,q as Id,r as $e,s as xv,t as Jy,u as Ke,v as Vc,w as Ua,x as Qy,y as wv,z as em,G as tm,H as rm,I as hn,J as nm,L as bv,Q as jc,S as im,U as sn,W as _v,X as gh,Y as ml,Z as Lu,$ as om,a0 as pi,a1 as Bc,a2 as am,a3 as vu,a4 as sm,a5 as lm,a6 as Ov,a7 as um,a8 as cm,a9 as Gi,aa as ir,ab as dm,ac as Hc,ad as zc,ae as wt,af as hm,ag as Ev,ah as fm}from"./ag-grid-community-01293653.js";/**
          * @ag-grid-enterprise/all-modules - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.1.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */var pm=function(){function o(){this.ieCompatibility=!1}return o.prototype.init=function(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"},o.prototype.md5cycle=function(t,e){var r=t[0],n=t[1],i=t[2],a=t[3];r=this.ff(r,n,i,a,e[0],7,-680876936),a=this.ff(a,r,n,i,e[1],12,-389564586),i=this.ff(i,a,r,n,e[2],17,606105819),n=this.ff(n,i,a,r,e[3],22,-1044525330),r=this.ff(r,n,i,a,e[4],7,-176418897),a=this.ff(a,r,n,i,e[5],12,1200080426),i=this.ff(i,a,r,n,e[6],17,-1473231341),n=this.ff(n,i,a,r,e[7],22,-45705983),r=this.ff(r,n,i,a,e[8],7,1770035416),a=this.ff(a,r,n,i,e[9],12,-1958414417),i=this.ff(i,a,r,n,e[10],17,-42063),n=this.ff(n,i,a,r,e[11],22,-1990404162),r=this.ff(r,n,i,a,e[12],7,1804603682),a=this.ff(a,r,n,i,e[13],12,-40341101),i=this.ff(i,a,r,n,e[14],17,-1502002290),n=this.ff(n,i,a,r,e[15],22,1236535329),r=this.gg(r,n,i,a,e[1],5,-165796510),a=this.gg(a,r,n,i,e[6],9,-1069501632),i=this.gg(i,a,r,n,e[11],14,643717713),n=this.gg(n,i,a,r,e[0],20,-373897302),r=this.gg(r,n,i,a,e[5],5,-701558691),a=this.gg(a,r,n,i,e[10],9,38016083),i=this.gg(i,a,r,n,e[15],14,-660478335),n=this.gg(n,i,a,r,e[4],20,-405537848),r=this.gg(r,n,i,a,e[9],5,568446438),a=this.gg(a,r,n,i,e[14],9,-1019803690),i=this.gg(i,a,r,n,e[3],14,-187363961),n=this.gg(n,i,a,r,e[8],20,1163531501),r=this.gg(r,n,i,a,e[13],5,-1444681467),a=this.gg(a,r,n,i,e[2],9,-51403784),i=this.gg(i,a,r,n,e[7],14,1735328473),n=this.gg(n,i,a,r,e[12],20,-1926607734),r=this.hh(r,n,i,a,e[5],4,-378558),a=this.hh(a,r,n,i,e[8],11,-2022574463),i=this.hh(i,a,r,n,e[11],16,1839030562),n=this.hh(n,i,a,r,e[14],23,-35309556),r=this.hh(r,n,i,a,e[1],4,-1530992060),a=this.hh(a,r,n,i,e[4],11,1272893353),i=this.hh(i,a,r,n,e[7],16,-155497632),n=this.hh(n,i,a,r,e[10],23,-1094730640),r=this.hh(r,n,i,a,e[13],4,681279174),a=this.hh(a,r,n,i,e[0],11,-358537222),i=this.hh(i,a,r,n,e[3],16,-722521979),n=this.hh(n,i,a,r,e[6],23,76029189),r=this.hh(r,n,i,a,e[9],4,-640364487),a=this.hh(a,r,n,i,e[12],11,-421815835),i=this.hh(i,a,r,n,e[15],16,530742520),n=this.hh(n,i,a,r,e[2],23,-995338651),r=this.ii(r,n,i,a,e[0],6,-198630844),a=this.ii(a,r,n,i,e[7],10,1126891415),i=this.ii(i,a,r,n,e[14],15,-1416354905),n=this.ii(n,i,a,r,e[5],21,-57434055),r=this.ii(r,n,i,a,e[12],6,1700485571),a=this.ii(a,r,n,i,e[3],10,-1894986606),i=this.ii(i,a,r,n,e[10],15,-1051523),n=this.ii(n,i,a,r,e[1],21,-2054922799),r=this.ii(r,n,i,a,e[8],6,1873313359),a=this.ii(a,r,n,i,e[15],10,-30611744),i=this.ii(i,a,r,n,e[6],15,-1560198380),n=this.ii(n,i,a,r,e[13],21,1309151649),r=this.ii(r,n,i,a,e[4],6,-145523070),a=this.ii(a,r,n,i,e[11],10,-1120210379),i=this.ii(i,a,r,n,e[2],15,718787259),n=this.ii(n,i,a,r,e[9],21,-343485551),t[0]=this.add32(r,t[0]),t[1]=this.add32(n,t[1]),t[2]=this.add32(i,t[2]),t[3]=this.add32(a,t[3])},o.prototype.cmn=function(t,e,r,n,i,a){return e=this.add32(this.add32(e,t),this.add32(n,a)),this.add32(e<<i|e>>>32-i,r)},o.prototype.ff=function(t,e,r,n,i,a,s){return this.cmn(e&r|~e&n,t,e,i,a,s)},o.prototype.gg=function(t,e,r,n,i,a,s){return this.cmn(e&n|r&~n,t,e,i,a,s)},o.prototype.hh=function(t,e,r,n,i,a,s){return this.cmn(e^r^n,t,e,i,a,s)},o.prototype.ii=function(t,e,r,n,i,a,s){return this.cmn(r^(e|~n),t,e,i,a,s)},o.prototype.md51=function(t){var e=t.length,r=[1732584193,-271733879,-1732584194,271733878],n;for(n=64;n<=t.length;n+=64)this.md5cycle(r,this.md5blk(t.substring(n-64,n)));t=t.substring(n-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<t.length;n++)i[n>>2]|=t.charCodeAt(n)<<(n%4<<3);if(i[n>>2]|=128<<(n%4<<3),n>55)for(this.md5cycle(r,i),n=0;n<16;n++)i[n]=0;return i[14]=e*8,this.md5cycle(r,i),r},o.prototype.md5blk=function(t){for(var e=[],r=0;r<64;r+=4)e[r>>2]=t.charCodeAt(r)+(t.charCodeAt(r+1)<<8)+(t.charCodeAt(r+2)<<16)+(t.charCodeAt(r+3)<<24);return e},o.prototype.rhex=function(t){for(var e="0123456789abcdef".split(""),r="",n=0;n<4;n++)r+=e[t>>n*8+4&15]+e[t>>n*8&15];return r},o.prototype.hex=function(t){for(var e=0;e<t.length;e++)t[e]=this.rhex(t[e]);return t.join("")},o.prototype.md5=function(t){return this.hex(this.md51(t))},o.prototype.add32=function(t,e){return this.ieCompatibility?this.add32Compat(t,e):this.add32Std(t,e)},o.prototype.add32Std=function(t,e){return t+e&4294967295},o.prototype.add32Compat=function(t,e){var r=(t&65535)+(e&65535),n=(t>>16)+(e>>16)+(r>>16);return n<<16|r&65535},o}(),vm=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i};function yh(o){return o==null||o.length===0}function gm(o,t){return t===void 0&&(t=!1),o!=null&&(o!==""||t)}var Fu=function(){function o(t){this.watermarkMessage=void 0,this.document=t,this.md5=new pm,this.md5.init()}return o.prototype.validateLicense=function(){if(yh(o.licenseKey))(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey();else if(o.licenseKey.length>32)if(o.licenseKey.indexOf("For_Trialing_ag-Grid_Only")!==-1)this.outputInvalidLicenseKey();else{var t=o.extractLicenseComponents(o.licenseKey),e=t.md5,r=t.license,n=t.version,i=t.isTrial;e===this.md5.md5(r)?gm(n)&&n?this.validateLicenseKeyForVersion(n,!!i,r):this.validateLegacyKey(r):this.outputInvalidLicenseKey()}else this.outputInvalidLicenseKey()},o.extractExpiry=function(t){var e=t.substring(t.lastIndexOf("_")+1,t.length);return new Date(parseInt(o.decode(e),10))},o.extractLicenseComponents=function(t){var e=t.replace(/[\u200B-\u200D\uFEFF]/g,"");e=e.replace(/\r?\n|\r/g,"");var r=e.length-32,n=e.substring(r),i=e.substring(0,r),a=vm(o.extractBracketedInformation(e),2),s=a[0],l=a[1];return{md5:n,license:i,version:s,isTrial:l}},o.prototype.getLicenseDetails=function(t){var e=o.extractLicenseComponents(t),r=e.md5,n=e.license,i=e.version,a=e.isTrial,s=r===this.md5.md5(n)&&t.indexOf("For_Trialing_ag-Grid_Only")===-1,l=null,u=null;if(s&&(u=o.extractExpiry(n),s=!isNaN(u.getTime()),a)){var c=new Date;l=u<c}return{licenseKey:t,valid:s,expiry:s?o.formatDate(u):null,version:i||"legacy",isTrial:a,trialExpired:l}},o.prototype.isDisplayWatermark=function(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!yh(this.watermarkMessage)},o.prototype.getWatermarkMessage=function(){return this.watermarkMessage||""},o.prototype.getHostname=function(){var t=this.document.defaultView||window,e=t.location,r=e.hostname,n=r===void 0?"":r;return n},o.prototype.isForceWatermark=function(){var t=this.document.defaultView||window,e=t.location,r=e.pathname;return r?r.indexOf("forceWatermark")!==-1:!1},o.prototype.isWebsiteUrl=function(){var t=this.getHostname();return t.match(/^((?:\w+\.)?ag-grid\.com)$/)!==null},o.prototype.isLocalhost=function(){var t=this.getHostname();return t.match(/^(?:127\.0\.0\.1|localhost)$/)!==null},o.formatDate=function(t){var e=["January","February","March","April","May","June","July","August","September","October","November","December"],r=t.getDate(),n=t.getMonth(),i=t.getFullYear();return r+" "+e[n]+" "+i},o.getGridReleaseDate=function(){return new Date(parseInt(o.decode(o.RELEASE_INFORMATION),10))},o.decode=function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="",n,i,a,s,l,u,c,d=0,h=t.replace(/[^A-Za-z0-9+/=]/g,"");d<h.length;)s=e.indexOf(h.charAt(d++)),l=e.indexOf(h.charAt(d++)),u=e.indexOf(h.charAt(d++)),c=e.indexOf(h.charAt(d++)),n=s<<2|l>>4,i=(l&15)<<4|u>>2,a=(u&3)<<6|c,r=r+String.fromCharCode(n),u!=64&&(r=r+String.fromCharCode(i)),c!=64&&(r=r+String.fromCharCode(a));return r=o.utf8_decode(r),r},o.utf8_decode=function(t){t=t.replace(/rn/g,"n");for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(n&63|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(n&63|128))}return e},o.setLicenseKey=function(t){this.licenseKey=t},o.extractBracketedInformation=function(t){var e=t.split("[").filter(function(i){return i.indexOf("]")>-1}).map(function(i){return i.split("]")[0]});if(!e||e.length===0)return[null,null];var r=e.filter(function(i){return i==="TRIAL"}).length===1,n=e.filter(function(i){return i.indexOf("v")===0}).map(function(i){return i.replace(/^v/,"")})[0];return[n,r]},o.prototype.validateLicenseKeyForVersion=function(t,e,r){t==="2"&&(e?this.validateForTrial(r):this.validateLegacyKey(r))},o.prototype.validateLegacyKey=function(t){var e=o.getGridReleaseDate(),r=o.extractExpiry(t),n=!1,i=!1;if(isNaN(r.getTime())||(n=!0,i=e<r),!n)this.outputInvalidLicenseKey();else if(!i){var a=o.formatDate(r),s=o.formatDate(e);this.outputIncompatibleVersion(a,s)}},o.prototype.validateForTrial=function(t){var e=o.extractExpiry(t),r=new Date,n=!1,i=!1;if(isNaN(e.getTime())||(n=!0,i=e>r),!n)this.outputInvalidLicenseKey();else if(!i){var a=o.formatDate(e);this.outputExpiredTrialKey(a)}},o.prototype.outputInvalidLicenseKey=function(){console.error("*****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License ********************************************"),console.error("********************************************* Invalid License ***************************************************"),console.error("* Your license for AG Grid Enterprise is not valid - please contact info@ag-grid.com to obtain a valid license. *"),console.error("*****************************************************************************************************************"),console.error("*****************************************************************************************************************"),this.watermarkMessage="Invalid License"},o.prototype.outputExpiredTrialKey=function(t){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("*****************************************   Trial Period Expired.    *******************************************"),console.error("* Your license for AG Grid Enterprise expired on "+t+".                                                *"),console.error("* Please email info@ag-grid.com to purchase a license.                                                         *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="Trial Period Expired"},o.prototype.outputMissingLicenseKey=function(){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("****************************************** License Key Not Found ***********************************************"),console.error("* All AG Grid Enterprise features are unlocked.                                                                *"),console.error("* This is an evaluation only version, it is not licensed for development projects intended for production.     *"),console.error("* If you want to hide the watermark, please email info@ag-grid.com for a trial license.                        *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="For Trial Use Only"},o.prototype.outputIncompatibleVersion=function(t,e){console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),console.error("*                                             AG Grid Enterprise License                                                   *"),console.error("*                           License not compatible with installed version of AG Grid Enterprise.                           *"),console.error("*                                                                                                                          *"),console.error("* Your AG Grid License entitles you to all versions of AG Grid that we release within the time covered by your license     *"),console.error("* - typically we provide one year licenses which entitles you to all releases / updates of AG Grid within that year.       *"),console.error("* Your license has an end (expiry) date which stops the license key working with versions of AG Grid released after the    *"),console.error("* license end date. The license key that you have expires on "+t+", however the version of AG Grid you    *"),console.error("* are trying to use was released on "+e+".                                                               *"),console.error("*                                                                                                                          *"),console.error("* Please contact info@ag-grid.com to renew your subscription to new versions and get a new license key to work with this   *"),console.error("* version of AG Grid.                                                                                                      *"),console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),this.watermarkMessage="License Expired"},o.RELEASE_INFORMATION="MTY5MjU1NDg5NTU1NA==",o}(),ym=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mh=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},mm=function(o){ym(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.validateLicense=function(){this.licenseManager=new Fu(this.gridOptionsService.getDocument()),this.licenseManager.validateLicense()},t.getLicenseDetails=function(e){return new Fu(null).getLicenseDetails(e)},t.prototype.isDisplayWatermark=function(){return this.licenseManager.isDisplayWatermark()},t.prototype.getWatermarkMessage=function(){return this.licenseManager.getWatermarkMessage()},t.setLicenseKey=function(e){Fu.setLicenseKey(e)},mh([pu],t.prototype,"validateLicense",null),t=mh([be("licenseManager")],t),t}(pe),Sm=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ku=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Cm=function(o){Sm(t,o);function t(){return o.call(this,`<div class="ag-watermark">
                <div ref="eLicenseTextRef" class="ag-watermark-text"></div>
            </div>`)||this}return t.prototype.postConstruct=function(){var e=this,r=this.shouldDisplayWatermark();this.setDisplayed(r),r&&(this.eLicenseTextRef.innerText=this.licenseManager.getWatermarkMessage(),window.setTimeout(function(){return e.addCssClass("ag-opacity-zero")},0),window.setTimeout(function(){return e.setDisplayed(!1)},5e3))},t.prototype.shouldDisplayWatermark=function(){return this.licenseManager.isDisplayWatermark()},ku([D("licenseManager")],t.prototype,"licenseManager",void 0),ku([B("eLicenseTextRef")],t.prototype,"eLicenseTextRef",void 0),ku([te],t.prototype,"postConstruct",null),t}(oe),xm="30.1.0",lt={version:xm,moduleName:Ce.EnterpriseCoreModule,beans:[mm],agStackComponents:[{componentName:"AgWatermark",componentClass:Cm}]},wm=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),da=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ld=function(o){wm(t,o);function t(){var e=o.call(this,`
            <div class="ag-advanced-filter" role="presentation" tabindex="-1">
                <ag-autocomplete ref="eAutocomplete"></ag-autocomplete>
                <button class="ag-button ag-standard-button ag-advanced-filter-apply-button" ref="eApplyFilterButton"></button>
            </div>`)||this;return e.expressionParser=null,e.isApplyDisabled=!0,e}return t.prototype.postConstruct=function(){var e=this;this.eAutocomplete.setListGenerator(function(r,n){return e.generateAutocompleteListParams(n)}).setValidator(function(){return e.validateValue()}).setForceLastSelection(function(r,n){return e.forceLastSelection(r,n)}).setInputAriaLabel(this.advancedFilterService.translate("ariaAdvancedFilterInput")).setListAriaLabel(this.advancedFilterService.translate("ariaLabelAdvancedFilterAutocomplete")),this.refresh(),this.addManagedListener(this.eAutocomplete,Ts.EVENT_VALUE_CHANGED,function(r){var n=r.value;return e.onValueChanged(n)}),this.addManagedListener(this.eAutocomplete,Ts.EVENT_VALUE_CONFIRMED,function(r){var n=r.isValid;return e.onValueConfirmed(n)}),this.addManagedListener(this.eAutocomplete,Ts.EVENT_OPTION_SELECTED,function(r){var n=r.position,i=r.updateEntry,a=r.autocompleteType;return e.onOptionSelected(n,i,a)}),this.addManagedListener(this.eAutocomplete,Ts.EVENT_VALID_CHANGED,function(r){var n=r.isValid,i=r.validationMessage;return e.onValidChanged(n,i)}),this.eApplyFilterButton.innerText=this.advancedFilterService.translate("advancedFilterApply"),this.activateTabIndex([this.eApplyFilterButton]),this.eApplyFilterButton.addEventListener("click",function(){return e.onValueConfirmed(e.eAutocomplete.isValid())}),E.setDisabled(this.eApplyFilterButton,this.isApplyDisabled)},t.prototype.refresh=function(){var e=this.advancedFilterService.getExpressionDisplayValue();this.eAutocomplete.setValue({value:e??"",position:e==null?void 0:e.length,updateListOnlyIfOpen:!0})},t.prototype.setInputDisabled=function(e){this.eAutocomplete.setInputDisabled(e)},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="advancedFilter",e},t.prototype.onValueChanged=function(e){var r;this.advancedFilterService.setExpressionDisplayValue(e),this.expressionParser=this.advancedFilterService.createExpressionParser(e);var n=(r=this.expressionParser)===null||r===void 0?void 0:r.parseExpression();n&&n!==e&&this.eAutocomplete.setValue({value:n,silent:!0,restoreFocus:!0})},t.prototype.onValueConfirmed=function(e){!e||this.isApplyDisabled||(E.setDisabled(this.eApplyFilterButton,!0),this.advancedFilterService.applyExpression(),this.filterManager.onFilterChanged({source:"advancedFilter"}))},t.prototype.onOptionSelected=function(e,r,n){var i=this.updateExpression(e,r,n),a=i.updatedValue,s=i.updatedPosition,l=i.hideAutocomplete;this.eAutocomplete.setValue({value:a,position:s,updateListOnlyIfOpen:l,restoreFocus:!0})},t.prototype.validateValue=function(){var e,r,n;return!((e=this.expressionParser)===null||e===void 0)&&e.isValid()?null:(n=(r=this.expressionParser)===null||r===void 0?void 0:r.getValidationMessage())!==null&&n!==void 0?n:null},t.prototype.onValidChanged=function(e,r){this.isApplyDisabled=!e||this.advancedFilterService.isCurrentExpressionApplied(),E.setDisabled(this.eApplyFilterButton,this.isApplyDisabled),this.setTooltip(r,1e3)},t.prototype.generateAutocompleteListParams=function(e){return this.expressionParser?this.expressionParser.getAutocompleteListParams(e):this.advancedFilterService.getDefaultAutocompleteListParams("")},t.prototype.updateExpression=function(e,r,n){var i,a;return this.advancedFilterService.updateAutocompleteCache(r,n),(a=(i=this.expressionParser)===null||i===void 0?void 0:i.updateExpression(e,r,n))!==null&&a!==void 0?a:this.advancedFilterService.getDefaultExpression(r)},t.prototype.forceLastSelection=function(e,r){var n=e.key,i=e.displayValue;return!!r.toLocaleLowerCase().match("^"+(i??n).toLocaleLowerCase()+"\\s*$")},da([B("eAutocomplete")],t.prototype,"eAutocomplete",void 0),da([B("eApplyFilterButton")],t.prototype,"eApplyFilterButton",void 0),da([D("advancedFilterService")],t.prototype,"advancedFilterService",void 0),da([D("filterManager")],t.prototype,"filterManager",void 0),da([te],t.prototype,"postConstruct",null),t}(oe);function Wc(o,t,e){if(!o)return"";var r=e-t;return r?o.slice(0,o.length-r):o}function Fn(o,t,e,r,n,i){var a=e+(o.length?1:0),s=0;n&&(o[a]===" "?s=1:(r+=" ",i&&(r+='"')));var l=o.slice(0,t)+r+o.slice(a);return{updatedValue:l,updatedPosition:t+r.length+s}}function bm(o,t,e){for(var r=t;r<e;){var n=o[r];if(n!==" ")break;r++}return r}function Uc(o,t){for(var e=t;e<o.length;){var r=o[e];if(r===" "){e=e-1;break}e++}return e}function Fd(o,t,e,r){e!==t&&(o.expression=Fn(o.expression,r-t.length+1,r,e).updatedValue)}function _m(o){return o.replace(/(['"])/,"\\$1")}var Ol=function(){return Ol=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Ol.apply(this,arguments)},Om=function(){function o(t,e){this.params=t,this.startPosition=e,this.type="column",this.valid=!0,this.hasStartChar=!1,this.hasEndChar=!1,this.colName=""}return o.prototype.parse=function(t,e){if(t===xi.COL_START_CHAR&&!this.colName)this.hasStartChar=!0;else if(t===xi.COL_END_CHAR&&this.hasStartChar){var r=this.parseColumn(!1,e);if(r)return this.hasEndChar=!0,!1;this.colName+=t}else this.colName+=t},o.prototype.getDisplayValue=function(){return(this.hasStartChar?xi.COL_START_CHAR:"")+this.colName+(this.hasEndChar?xi.COL_END_CHAR:"")},o.prototype.getColId=function(){return this.colId},o.prototype.complete=function(t){this.parseColumn(!0,t)},o.prototype.getValidationError=function(){var t;return this.valid?null:{message:this.params.translate("advancedFilterValidationInvalidColumn"),startPosition:this.startPosition,endPosition:(t=this.endPosition)!==null&&t!==void 0?t:this.params.expression.length-1}},o.prototype.parseColumn=function(t,e){var r;this.endPosition=e;var n=this.params.colIdResolver(this.colName);return n&&this.hasStartChar&&(this.colId=n.colId,Fd(this.params,this.colName,n.columnName,e-1),this.colName=n.columnName,this.column=this.params.columnModel.getPrimaryColumn(this.colId),this.column)?(this.baseCellDataType=(r=this.params.dataTypeService.getBaseDataType(this.column))!==null&&r!==void 0?r:"text",!0):(t&&(this.valid=!1),this.baseCellDataType="text",!1)},o}(),Em=function(){function o(t,e,r){this.params=t,this.startPosition=e,this.baseCellDataType=r,this.type="operator",this.valid=!0,this.expectedNumOperands=0,this.operator=""}return o.prototype.parse=function(t,e){if(t===" "||t===")"){var r=this.parseOperator(!1,e-1);if(r)return!0;this.operator+=t}else this.operator+=t},o.prototype.complete=function(t){this.parseOperator(!0,t)},o.prototype.getValidationError=function(){var t;return this.valid?null:{message:this.params.translate("advancedFilterValidationInvalidOption"),startPosition:this.startPosition,endPosition:(t=this.endPosition)!==null&&t!==void 0?t:this.params.expression.length-1}},o.prototype.getDisplayValue=function(){return this.operator},o.prototype.getOperatorKey=function(){return this.parsedOperator},o.prototype.parseOperator=function(t,e){var r=this.params.operators[this.baseCellDataType],n=r.findOperator(this.operator);if(this.endPosition=e,n){this.parsedOperator=n;var i=r.operators[n];this.expectedNumOperands=i.numOperands;var a=i.displayValue;return Fd(this.params,this.operator,a,e),this.operator=a,!0}var s=n===null;return(t||!s)&&(this.valid=!1),!1},o}(),Tm=function(){function o(t,e,r,n){this.params=t,this.startPosition=e,this.baseCellDataType=r,this.column=n,this.type="operand",this.valid=!0,this.operand="",this.validationMessage=null}return o.prototype.parse=function(t,e){if(t===" ")if(this.quotes)this.operand+=t;else return this.parseOperand(!1,e),!0;else if(t===")"){if(this.baseCellDataType==="number"||!this.quotes)return this.parseOperand(!1,e-1),!0;this.operand+=t}else if(!this.operand&&!this.quotes&&(t==="'"||t==='"'))this.quotes=t;else{if(this.quotes&&t===this.quotes)return this.parseOperand(!1,e),!1;this.operand+=t}},o.prototype.complete=function(t){this.parseOperand(!0,t)},o.prototype.getValidationError=function(){var t;return this.validationMessage?{message:this.validationMessage,startPosition:this.startPosition,endPosition:(t=this.endPosition)!==null&&t!==void 0?t:this.params.expression.length-1}:null},o.prototype.getRawValue=function(){return this.operand},o.prototype.getModelValue=function(){return this.modelValue},o.prototype.parseOperand=function(t,e){this.endPosition=e,this.modelValue=this.operand,t&&this.quotes?(this.valid=!1,this.validationMessage=this.params.translate("advancedFilterValidationMissingQuote")):this.baseCellDataType==="number"&&(this.modelValue=this.params.valueParserService.parseValue(this.column,null,this.operand,void 0),isNaN(this.modelValue)&&(this.valid=!1,this.validationMessage=this.params.translate("advancedFilterValidationNotANumber")))},o}(),xi=function(){function o(t,e){this.params=t,this.startPosition=e,this.isAwaiting=!0}return o.prototype.parseExpression=function(){for(var t,e,r=this.startPosition,n=this.params.expression;r<n.length;){var i=n[r];if(!(i===" "&&this.isAwaiting)){if(this.isAwaiting=!1,!this.parser){var a=void 0;this.columnParser?this.operatorParser?(this.operandParser=new Tm(this.params,r,this.columnParser.baseCellDataType,this.columnParser.column),a=this.operandParser):(this.operatorParser=new Em(this.params,r,this.columnParser.baseCellDataType),a=this.operatorParser):(this.columnParser=new Om(this.params,r),a=this.columnParser),this.parser=a}var s=this.parser.parse(i,r);if(s!=null){if(this.isComplete())return this.returnEndPosition(s?r-1:r,!0);this.parser=void 0,this.isAwaiting=!0}}r++}return(e=(t=this.parser)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t,r-1),this.returnEndPosition(r)},o.prototype.isValid=function(){return this.isComplete()&&this.columnParser.valid&&this.operatorParser.valid&&(!this.operandParser||this.operandParser.valid)},o.prototype.getValidationError=function(){var t,e,r,n,i,a=(n=(e=(t=this.columnParser)===null||t===void 0?void 0:t.getValidationError())!==null&&e!==void 0?e:(r=this.operatorParser)===null||r===void 0?void 0:r.getValidationError())!==null&&n!==void 0?n:(i=this.operandParser)===null||i===void 0?void 0:i.getValidationError();if(a)return a;var s=this.params.expression.length,l;return this.columnParser?this.operatorParser?this.operatorParser.expectedNumOperands&&!this.operandParser&&(l="advancedFilterValidationMissingValue"):l="advancedFilterValidationMissingOption":l="advancedFilterValidationMissingColumn",l?{message:this.params.translate(l),startPosition:s,endPosition:s}:null},o.prototype.getFunction=function(t){var e,r,n=this.columnParser.getColId(),i=_m(n),a=(e=this.operatorParser)===null||e===void 0?void 0:e.getOperatorKey(),s;if(((r=this.operatorParser)===null||r===void 0?void 0:r.expectedNumOperands)===0)s="";else{var l=t.length;t.push(this.getOperandValue()),s=", args["+l+"]"}return"expressionProxy.operators."+this.columnParser.baseCellDataType+".operators."+a+".evaluator(expressionProxy.getValue('"+i+"', node), node, expressionProxy.getParams('"+i+"')"+s+")"},o.prototype.getAutocompleteListParams=function(t){if(this.isColumnPosition(t))return this.params.columnAutocompleteTypeGenerator(this.getColumnSearchString(t));if(this.isOperatorPosition(t))return this.getOperatorAutocompleteListParams(t);if(!this.isBeyondEndPosition(t))return{enabled:!1}},o.prototype.updateExpression=function(t,e,r){var n,i,a,s,l,u=this.params.expression;if(this.isColumnPosition(t))return Fn(this.params.expression,this.startPosition,!((n=this.columnParser)===null||n===void 0)&&n.getColId()?this.columnParser.endPosition:Uc(u,t),this.params.columnValueCreator(e),!0);if(this.isOperatorPosition(t)){var c=this.getBaseCellDataTypeFromOperatorAutocompleteType(r),d=this.hasOperand(c,e.key),h=d&&this.doesOperandNeedQuotes(c),f=void 0;if(((i=this.operatorParser)===null||i===void 0?void 0:i.startPosition)!=null&&t<this.operatorParser.startPosition)f=Fn(u,t,t,(a=e.displayValue)!==null&&a!==void 0?a:e.key,d,h);else{var p=!((s=this.operatorParser)===null||s===void 0)&&s.getOperatorKey()?this.operatorParser.endPosition:Uc(u,t);f=Fn(u,bm(u,this.columnParser.endPosition+1,p),p,(l=e.displayValue)!==null&&l!==void 0?l:e.key,d,h)}return Ol(Ol({},f),{hideAutocomplete:!d})}return null},o.prototype.getModel=function(){var t=this.columnParser.getColId(),e={filterType:this.columnParser.baseCellDataType,colId:t,type:this.operatorParser.getOperatorKey()};return this.operatorParser.expectedNumOperands&&(e.filter=this.operandParser.getModelValue()),e},o.prototype.getOperandValue=function(){var t=this.operandParser.getRawValue(),e=this.columnParser,r=e.baseCellDataType,n=e.column;switch(r){case"number":case"boolean":case"date":case"dateString":t=this.params.valueParserService.parseValue(n,null,t,void 0)}return r==="dateString"?this.params.dataTypeService.getDateParserFunction()(t):t},o.prototype.isComplete=function(){return!!(this.operatorParser&&(!this.operatorParser.expectedNumOperands||this.operatorParser.expectedNumOperands&&this.operandParser))},o.prototype.isColumnPosition=function(t){return!this.columnParser||this.columnParser.endPosition==null||t<=this.columnParser.endPosition+1},o.prototype.isOperatorPosition=function(t){return!this.operatorParser||this.operatorParser.endPosition==null||t<=this.operatorParser.endPosition+1},o.prototype.isBeyondEndPosition=function(t){return this.isComplete()&&this.endPosition!=null&&t>this.endPosition+1&&this.endPosition+1<this.params.expression.length},o.prototype.returnEndPosition=function(t,e){return this.endPosition=e?t:t-1,t},o.prototype.getColumnSearchString=function(t){var e,r,n,i,a,s=(r=(e=this.columnParser)===null||e===void 0?void 0:e.getDisplayValue())!==null&&r!==void 0?r:"",l=Wc(s,t,((n=this.columnParser)===null||n===void 0?void 0:n.endPosition)==null?this.params.expression.length:this.columnParser.endPosition+1),u=((i=this.columnParser)===null||i===void 0?void 0:i.hasStartChar)&&l.length>0,c=((a=this.columnParser)===null||a===void 0?void 0:a.hasEndChar)&&l.length===s.length+2;return u?l.slice(1,c?-1:void 0):l},o.prototype.getOperatorAutocompleteListParams=function(t){var e,r,n,i,a,s=(e=this.columnParser)===null||e===void 0?void 0:e.column;if(!s)return{enabled:!1};var l=this.getActiveOperators(s),u=this.columnParser.baseCellDataType,c=this.params.operators[u].getEntries(l),d=((r=this.operatorParser)===null||r===void 0?void 0:r.startPosition)!=null&&t<this.operatorParser.startPosition?"":Wc((i=(n=this.operatorParser)===null||n===void 0?void 0:n.getDisplayValue())!==null&&i!==void 0?i:"",t,((a=this.operatorParser)===null||a===void 0?void 0:a.endPosition)==null?this.params.expression.length:this.operatorParser.endPosition+1);return{enabled:!0,type:"operator-"+u,searchString:d,entries:c}},o.prototype.getActiveOperators=function(t){var e,r=(e=t.getColDef().filterParams)===null||e===void 0?void 0:e.filterOptions;if(r){var n=r.every(function(i){return typeof i=="string"});return n?r:void 0}},o.prototype.getBaseCellDataTypeFromOperatorAutocompleteType=function(t){return t==null?void 0:t.replace("operator-","")},o.prototype.hasOperand=function(t,e){var r,n,i;return!t||!e||((i=(n=(r=this.params.operators[t])===null||r===void 0?void 0:r.operators)===null||n===void 0?void 0:n[e])===null||i===void 0?void 0:i.numOperands)>0},o.prototype.doesOperandNeedQuotes=function(t){return t!=="number"},o.COL_START_CHAR="[",o.COL_END_CHAR="]",o}(),Pm=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i};function gu(o,t,e){var r=!1,n=o.toLocaleLowerCase(),i=n+" ",a=Object.entries(t).find(function(s){var l=Pm(s,2);l[0];var u=l[1],c=e(u).toLocaleLowerCase();return c.startsWith(i)&&(r=!0),c===n});return a?a[0]:r?null:void 0}function kd(o,t){var e=t??Object.keys(o);return e.map(function(r){return{key:r,displayValue:o[r].displayValue}})}var Sh=function(){function o(t){this.params=t,this.initOperators()}return o.prototype.getEntries=function(t){return kd(this.operators,t)},o.prototype.findOperator=function(t){return gu(t,this.operators,function(e){var r=e.displayValue;return r})},o.prototype.initOperators=function(){var t=this,e=this.params.translate;this.operators={contains:{displayValue:e("advancedFilterContains"),evaluator:function(r,n,i,a){return t.evaluateExpression(r,n,i,a,!1,function(s,l){return s.includes(l)})},numOperands:1},notContains:{displayValue:e("advancedFilterNotContains"),evaluator:function(r,n,i,a){return t.evaluateExpression(r,n,i,a,!0,function(s,l){return!s.includes(l)})},numOperands:1},equals:{displayValue:e("advancedFilterTextEquals"),evaluator:function(r,n,i,a){return t.evaluateExpression(r,n,i,a,!1,function(s,l){return s===l})},numOperands:1},notEqual:{displayValue:e("advancedFilterTextNotEqual"),evaluator:function(r,n,i,a){return t.evaluateExpression(r,n,i,a,!0,function(s,l){return s!=l})},numOperands:1},startsWith:{displayValue:e("advancedFilterStartsWith"),evaluator:function(r,n,i,a){return t.evaluateExpression(r,n,i,a,!1,function(s,l){return s.startsWith(l)})},numOperands:1},endsWith:{displayValue:e("advancedFilterEndsWith"),evaluator:function(r,n,i,a){return t.evaluateExpression(r,n,i,a,!1,function(s,l){return s.endsWith(l)})},numOperands:1},blank:{displayValue:e("advancedFilterBlank"),evaluator:function(r){return r==null||typeof r=="string"&&r.trim().length===0},numOperands:0},notBlank:{displayValue:e("advancedFilterNotBlank"),evaluator:function(r){return r!=null&&(typeof r!="string"||r.trim().length>0)},numOperands:0}}},o.prototype.evaluateExpression=function(t,e,r,n,i,a){return t==null?i:r.caseSensitive?a(r.valueConverter(t,e),n):a(r.valueConverter(t,e).toLocaleLowerCase(),n.toLocaleLowerCase())},o}(),Nu=function(){function o(t){this.params=t,this.initOperators()}return o.prototype.getEntries=function(t){return kd(this.operators,t)},o.prototype.findOperator=function(t){return gu(t,this.operators,function(e){var r=e.displayValue;return r})},o.prototype.initOperators=function(){var t=this,e=this.params,r=e.translate,n=e.equals;this.operators={equals:{displayValue:r("advancedFilterEquals"),evaluator:function(i,a,s,l){return t.evaluateSingleOperandExpression(i,a,s,l,!!s.includeBlanksInEquals,n)},numOperands:1},notEqual:{displayValue:r("advancedFilterNotEqual"),evaluator:function(i,a,s,l){return t.evaluateSingleOperandExpression(i,a,s,l,!!s.includeBlanksInEquals,function(u,c){return!n(u,c)})},numOperands:1},greaterThan:{displayValue:r("advancedFilterGreaterThan"),evaluator:function(i,a,s,l){return t.evaluateSingleOperandExpression(i,a,s,l,!!s.includeBlanksInGreaterThan,function(u,c){return u>c})},numOperands:1},greaterThanOrEqual:{displayValue:r("advancedFilterGreaterThanOrEqual"),evaluator:function(i,a,s,l){return t.evaluateSingleOperandExpression(i,a,s,l,!!s.includeBlanksInGreaterThan,function(u,c){return u>=c})},numOperands:1},lessThan:{displayValue:r("advancedFilterLessThan"),evaluator:function(i,a,s,l){return t.evaluateSingleOperandExpression(i,a,s,l,!!s.includeBlanksInLessThan,function(u,c){return u<c})},numOperands:1},lessThanOrEqual:{displayValue:r("advancedFilterLessThanOrEqual"),evaluator:function(i,a,s,l){return t.evaluateSingleOperandExpression(i,a,s,l,!!s.includeBlanksInLessThan,function(u,c){return u<=c})},numOperands:1},blank:{displayValue:r("advancedFilterBlank"),evaluator:function(i){return i==null},numOperands:0},notBlank:{displayValue:r("advancedFilterNotBlank"),evaluator:function(i){return i!=null},numOperands:0}}},o.prototype.evaluateSingleOperandExpression=function(t,e,r,n,i,a){return t==null?i:a(r.valueConverter(t,e),n)},o}(),Am=function(){function o(t){this.params=t,this.initOperators()}return o.prototype.getEntries=function(t){return kd(this.operators,t)},o.prototype.findOperator=function(t){return gu(t,this.operators,function(e){var r=e.displayValue;return r})},o.prototype.initOperators=function(){var t=this.params.translate;this.operators={true:{displayValue:t("advancedFilterTrue"),evaluator:function(e){return!!e},numOperands:0},false:{displayValue:t("advancedFilterFalse"),evaluator:function(e){return e===!1},numOperands:0},blank:{displayValue:t("advancedFilterBlank"),evaluator:function(e){return e==null},numOperands:0},notBlank:{displayValue:t("advancedFilterNotBlank"),evaluator:function(e){return e!=null},numOperands:0}}},o}(),Dm=function(){function o(t){this.params=t,this.operators=[],this.operatorStartPositions=[],this.operatorEndPositions=[],this.activeOperator=0,this.validationError=null}return o.prototype.parseExpression=function(t){this.operators.push(""),this.operatorStartPositions.push(t),this.operatorEndPositions.push(void 0);for(var e=this.params.expression;t<e.length;){var r=e[t];if(r===" "){var n=this.parseOperator(t-1);if(n)return this.activeOperator++,t-1;this.operators[this.activeOperator]+=r}else this.operators[this.activeOperator]+=r;t++}return this.parseOperator(t-1),t},o.prototype.isValid=function(){return!this.validationError&&(!this.operators.length||!!this.parsedOperator)},o.prototype.getValidationError=function(){return this.validationError},o.prototype.getFunction=function(){return this.parsedOperator==="or"?"||":"&&"},o.prototype.getModel=function(){return this.parsedOperator==="or"?"OR":"AND"},o.prototype.getAutocompleteListParams=function(t,e){var r;if(e==null)r="";else{var n=this.operators[e],i=this.operatorEndPositions[e];r=Wc(n,t,i==null?this.params.expression.length:i+1)}var a=e||e==null&&this.activeOperator?[{key:this.parsedOperator,displayValue:this.params.joinOperators[this.parsedOperator]}]:[{key:"and",displayValue:this.params.joinOperators.and},{key:"or",displayValue:this.params.joinOperators.or}];return{enabled:!0,type:"join",searchString:r,entries:a}},o.prototype.updateExpression=function(t,e,r){var n,i,a=this.params.expression,s=(n=e.displayValue)!==null&&n!==void 0?n:e.key;if(r===0)for(var l=this.operatorEndPositions.length-1;l>0;l--){var u=this.operatorEndPositions[l];u!=null&&(a=Fn(a,this.operatorStartPositions[l],u,s).updatedValue)}var c=this.operatorStartPositions.length>r?this.operatorStartPositions[r]:a.length,d=(i=this.operatorEndPositions.length>r?this.operatorEndPositions[r]:void 0)!==null&&i!==void 0?i:Uc(a,t);return Fn(a,c,d,s,!0)},o.prototype.getNumOperators=function(){return this.operators.length},o.prototype.getLastOperatorEndPosition=function(){return this.operatorEndPositions[this.operatorEndPositions.length-1]},o.prototype.parseOperator=function(t){var e=this.operators.length>this.activeOperator?this.operators[this.activeOperator]:"",r=gu(e,this.params.joinOperators,function(i){return i});if(r){this.operatorEndPositions[this.activeOperator]=t;var n=this.params.joinOperators[r];if(this.activeOperator){if(r!==this.parsedOperator)return this.validationError||(this.validationError={message:this.params.translate("advancedFilterValidationJoinOperatorMismatch"),startPosition:t-e.length+1,endPosition:t}),!1}else this.parsedOperator=r;return e!==n&&(Fd(this.params,e,n,t),this.operators[this.activeOperator]=n),!0}else return r===null?!1:(this.validationError||(this.validationError={message:this.params.translate("advancedFilterValidationInvalidJoinOperator"),startPosition:t-e.length+1,endPosition:t}),!0)},o}(),Mm=function(){function o(t,e){this.params=t,this.startPosition=e,this.expectingExpression=!0,this.expectingOperator=!1,this.expressionParsers=[],this.operatorParser=new Dm(this.params),this.missingEndBracket=!1,this.extraEndBracket=!1}return o.prototype.parseExpression=function(){for(var t=this.startPosition,e=this.params.expression;t<e.length;){var r=e[t];if(r==="("&&!this.expectingOperator){var n=new o(this.params,t+1);t=n.parseExpression(),this.expressionParsers.push(n),this.expectingExpression=!1,this.expectingOperator=!0}else{if(r===")")return this.endPosition=t-1,this.startPosition===0&&(this.extraEndBracket=!0),t;if(r!==" ")if(this.expectingExpression){var n=new xi(this.params,t);t=n.parseExpression(),this.expressionParsers.push(n),this.expectingExpression=!1,this.expectingOperator=!0}else this.expectingOperator&&(t=this.operatorParser.parseExpression(t),this.expectingOperator=!1,this.expectingExpression=!0)}t++}return this.startPosition>0&&(this.missingEndBracket=!0),t},o.prototype.isValid=function(){return!this.missingEndBracket&&!this.extraEndBracket&&this.expressionParsers.length===this.operatorParser.getNumOperators()+1&&this.operatorParser.isValid()&&this.expressionParsers.every(function(t){return t.isValid()})},o.prototype.getValidationError=function(){for(var t=this.operatorParser.getValidationError(),e=0;e<this.expressionParsers.length;e++){var r=this.expressionParsers[e].getValidationError();if(r)return t&&t.startPosition<r.startPosition?t:r}if(t)return t;if(this.extraEndBracket)return{message:this.params.translate("advancedFilterValidationExtraEndBracket"),startPosition:this.endPosition+1,endPosition:this.endPosition+1};var n;return this.expressionParsers.length===this.operatorParser.getNumOperators()?n="advancedFilterValidationMissingCondition":this.missingEndBracket&&(n="advancedFilterValidationMissingEndBracket"),n?{message:this.params.translate(n),startPosition:this.params.expression.length,endPosition:this.params.expression.length}:null},o.prototype.getFunction=function(t){var e=this.expressionParsers.length>1,r=this.expressionParsers.map(function(n){return n.getFunction(t)}).join(" "+this.operatorParser.getFunction()+" ");return e?"("+r+")":r},o.prototype.getAutocompleteListParams=function(t){if(!(this.endPosition!=null&&t>this.endPosition+1)){if(!this.expressionParsers.length)return this.params.columnAutocompleteTypeGenerator("");var e=this.getExpressionParserIndex(t);if(e==null)return this.params.expression[t]==="("?{enabled:!1}:this.params.columnAutocompleteTypeGenerator("");var r=this.expressionParsers[e],n=r.getAutocompleteListParams(t);if(!n){if(e<this.expressionParsers.length-1)return this.operatorParser.getAutocompleteListParams(t,e);if(this.expressionParsers.length===this.operatorParser.getNumOperators()){var i=this.operatorParser.getLastOperatorEndPosition();return i==null||t<=i+1?this.operatorParser.getAutocompleteListParams(t,this.operatorParser.getNumOperators()-1):this.params.columnAutocompleteTypeGenerator("")}return this.params.expression[t-1]===")"?{enabled:!1}:this.operatorParser.getAutocompleteListParams(t)}return n}},o.prototype.updateExpression=function(t,e,r){var n,i=this.params.expression,a=this.getExpressionParserIndex(t);if(a==null){var s=r==="column"?this.params.columnValueCreator(e):(n=e.displayValue)!==null&&n!==void 0?n:e.key;return Fn(i,this.startPosition,this.startPosition,s,!0)}var l=this.expressionParsers[a],u=l.updateExpression(t,e,r);return u??(r==="column"?Fn(i,t,i.length-1,this.params.columnValueCreator(e),!0):this.operatorParser.updateExpression(t,e,a))},o.prototype.getModel=function(){return this.expressionParsers.length>1?{filterType:"join",type:this.operatorParser.getModel(),conditions:this.expressionParsers.map(function(t){return t.getModel()})}:this.expressionParsers[0].getModel()},o.prototype.getExpressionParserIndex=function(t){for(var e,r=0;r<this.expressionParsers.length;r++){var n=this.expressionParsers[r];if(n.startPosition>t)break;e=r}return e},o}(),Rm=function(){function o(t){this.params=t,this.valid=!1}return o.prototype.parseExpression=function(){this.joinExpressionParser=new Mm(this.params,0);var t=this.joinExpressionParser.parseExpression();return this.valid=t>=this.params.expression.length-1&&this.joinExpressionParser.isValid(),this.params.expression},o.prototype.isValid=function(){return this.valid},o.prototype.getValidationMessage=function(){var t=this.joinExpressionParser.getValidationError();if(!t)return null;var e=t.message,r=t.startPosition,n=t.endPosition;return r<this.params.expression.length?this.params.translate("advancedFilterValidationMessage",[e,this.params.expression.slice(r,n+1).trim()]):this.params.translate("advancedFilterValidationMessageAtEnd",[e])},o.prototype.getFunction=function(){var t=[],e="return "+this.joinExpressionParser.getFunction(t)+";";return{functionBody:e,args:t}},o.prototype.getAutocompleteListParams=function(t){var e;return(e=this.joinExpressionParser.getAutocompleteListParams(t))!==null&&e!==void 0?e:{enabled:!1}},o.prototype.updateExpression=function(t,e,r){return this.joinExpressionParser.updateExpression(t,e,r)},o.prototype.getModel=function(){return this.isValid()?this.joinExpressionParser.getModel():null},o}(),Im=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ha=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Lm=function(o){Im(t,o);function t(e){var r=o.call(this,`
            <div class="ag-advanced-filter-header" role="row">
            </div>`)||this;return r.enabled=e,r}return t.prototype.postConstruct=function(){var e=this;this.setupAdvancedFilter(this.enabled),this.addDestroyFunc(function(){return e.destroyBean(e.eAdvancedFilter)}),this.addManagedListener(this.eventService,V.EVENT_GRID_COLUMNS_CHANGED,function(){return e.onGridColumnsChanged()}),this.addGuiEventListener("keydown",function(r){return e.onKeyDown(r)}),this.addGuiEventListener("focusout",function(r){e.getFocusableElement().contains(r.relatedTarget)||e.focusService.clearAdvancedFilterColumn()})},t.prototype.getFocusableElement=function(){var e,r;return(r=(e=this.eAdvancedFilter)===null||e===void 0?void 0:e.getGui())!==null&&r!==void 0?r:this.getGui()},t.prototype.setEnabled=function(e){e!==this.enabled&&this.setupAdvancedFilter(e)},t.prototype.refresh=function(){var e;(e=this.eAdvancedFilter)===null||e===void 0||e.refresh()},t.prototype.getHeight=function(){return this.height},t.prototype.setInputDisabled=function(e){var r;(r=this.eAdvancedFilter)===null||r===void 0||r.setInputDisabled(e)},t.prototype.setupAdvancedFilter=function(e){var r=this.getGui();if(e){this.eAdvancedFilter=this.createBean(new Ld);var n=this.eAdvancedFilter.getGui();this.eAdvancedFilter.addCssClass("ag-advanced-filter-header-cell"),this.height=this.columnModel.getFloatingFiltersHeight();var i=this.height+"px";r.style.height=i,r.style.minHeight=i,this.setAriaRowIndex(),E.setAriaRole(n,"gridcell"),E.setAriaColIndex(n,1),this.setAriaColumnCount(n),r.appendChild(n)}else E.clearElement(r),this.destroyBean(this.eAdvancedFilter),this.height=0;E.setDisplayed(r,e),this.enabled=e},t.prototype.setAriaColumnCount=function(e){var r,n;E.setAriaColSpan(e,(n=(r=this.columnModel.getAllGridColumns())===null||r===void 0?void 0:r.length)!==null&&n!==void 0?n:0)},t.prototype.setAriaRowIndex=function(){E.setAriaRowIndex(this.getGui(),this.headerNavigationService.getHeaderRowCount())},t.prototype.onGridColumnsChanged=function(){this.eAdvancedFilter&&(this.setAriaColumnCount(this.eAdvancedFilter.getGui()),this.setAriaRowIndex())},t.prototype.onKeyDown=function(e){switch(e.key){case ve.ENTER:{this.hasFocus()&&this.focusService.focusInto(this.getFocusableElement())&&e.preventDefault();break}case ve.ESCAPE:this.hasFocus()||this.getFocusableElement().focus();break;case ve.UP:this.navigateUpDown(!0,e);break;case ve.DOWN:this.navigateUpDown(!1,e);break;case ve.TAB:if(this.hasFocus())this.navigateLeftRight(e);else{var r=this.focusService.findNextFocusableElement(this.getFocusableElement(),null,e.shiftKey);r?(e.preventDefault(),r.focus()):this.navigateLeftRight(e)}break}},t.prototype.navigateUpDown=function(e,r){this.hasFocus()&&this.focusService.focusNextFromAdvancedFilter(e)&&r.preventDefault()},t.prototype.navigateLeftRight=function(e){(e.shiftKey?this.focusService.focusLastHeader():this.focusService.focusNextFromAdvancedFilter(!1,!0))&&e.preventDefault()},t.prototype.hasFocus=function(){var e=this.gridOptionsService.getDocument();return e.activeElement===this.getFocusableElement()},ha([D("filterManager")],t.prototype,"filterManager",void 0),ha([D("columnModel")],t.prototype,"columnModel",void 0),ha([D("focusService")],t.prototype,"focusService",void 0),ha([D("headerNavigationService")],t.prototype,"headerNavigationService",void 0),ha([te],t.prototype,"postConstruct",null),t}(oe),Fm=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Gu=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},km=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Nm=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Gm=function(o){Fm(t,o);function t(e){var r=o.call(this)||this;return r.enabled=e,r}return t.prototype.postConstruct=function(){var e=this;this.hasAdvancedFilterParent=!!this.gridOptionsService.get("advancedFilterParent"),this.ctrlsService.whenReady(function(){return e.setAdvancedFilterComp()}),this.addManagedListener(this.eventService,V.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,function(r){var n=r.enabled;return e.onEnabledChanged(n)}),this.addManagedPropertyListener("advancedFilterParent",function(){return e.updateComps()}),this.addDestroyFunc(function(){return e.destroyAdvancedFilterComp()})},t.prototype.setupHeaderComp=function(e){this.eAdvancedFilterHeaderComp=this.createManagedBean(new Lm(this.enabled&&!this.hasAdvancedFilterParent)),e.insertAdjacentElement("beforebegin",this.eAdvancedFilterHeaderComp.getGui())},t.prototype.focusHeaderComp=function(){return this.eAdvancedFilterHeaderComp?(this.eAdvancedFilterHeaderComp.getFocusableElement().focus(),!0):!1},t.prototype.refreshComp=function(){var e,r;(e=this.eAdvancedFilterComp)===null||e===void 0||e.refresh(),(r=this.eAdvancedFilterHeaderComp)===null||r===void 0||r.refresh()},t.prototype.getHeaderHeight=function(){var e,r;return(r=(e=this.eAdvancedFilterHeaderComp)===null||e===void 0?void 0:e.getHeight())!==null&&r!==void 0?r:0},t.prototype.setInputDisabled=function(e){var r,n;(r=this.eAdvancedFilterComp)===null||r===void 0||r.setInputDisabled(e),(n=this.eAdvancedFilterHeaderComp)===null||n===void 0||n.setInputDisabled(e)},t.prototype.onEnabledChanged=function(e){this.enabled=e,this.updateComps()},t.prototype.updateComps=function(){this.setAdvancedFilterComp(),this.setHeaderCompEnabled(),this.eventService.dispatchEvent({type:V.EVENT_HEADER_HEIGHT_CHANGED})},t.prototype.setAdvancedFilterComp=function(){var e;if(this.destroyAdvancedFilterComp(),!!this.enabled){var r=this.gridOptionsService.get("advancedFilterParent");if(this.hasAdvancedFilterParent=!!r,r){var n=this.createBean(new Ld),i=n.getGui(),a=this.environment.getTheme().allThemes;a.length&&(e=i.classList).add.apply(e,Nm([],km(a))),i.classList.add(this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr"),this.focusService.isKeyboardMode()&&i.classList.add(qy.AG_KEYBOARD_FOCUS),r.appendChild(i),this.eAdvancedFilterComp=n}}},t.prototype.setHeaderCompEnabled=function(){var e;(e=this.eAdvancedFilterHeaderComp)===null||e===void 0||e.setEnabled(this.enabled&&!this.hasAdvancedFilterParent)},t.prototype.destroyAdvancedFilterComp=function(){this.eAdvancedFilterComp&&(E.removeFromParent(this.eAdvancedFilterComp.getGui()),this.destroyBean(this.eAdvancedFilterComp))},Gu([D("focusService")],t.prototype,"focusService",void 0),Gu([D("ctrlsService")],t.prototype,"ctrlsService",void 0),Gu([te],t.prototype,"postConstruct",null),t}(pe),Vm={ariaAdvancedFilterInput:"Advanced Filter Input",ariaLabelAdvancedFilterAutocomplete:"Advanced Filter Autocomplete",advancedFilterContains:"contains",advancedFilterNotContains:"does not contain",advancedFilterTextEquals:"equals",advancedFilterTextNotEqual:"does not equal",advancedFilterStartsWith:"starts with",advancedFilterEndsWith:"ends with",advancedFilterBlank:"is blank",advancedFilterNotBlank:"is not blank",advancedFilterEquals:"=",advancedFilterNotEqual:"!=",advancedFilterGreaterThan:">",advancedFilterGreaterThanOrEqual:">=",advancedFilterLessThan:"<",advancedFilterLessThanOrEqual:"<=",advancedFilterTrue:"is true",advancedFilterFalse:"is false",advancedFilterAnd:"AND",advancedFilterOr:"OR",advancedFilterApply:"Apply",advancedFilterValidationMissingColumn:"Column is missing",advancedFilterValidationMissingOption:"Option is missing",advancedFilterValidationMissingValue:"Value is missing",advancedFilterValidationInvalidColumn:"Column not found",advancedFilterValidationInvalidOption:"Option not found",advancedFilterValidationMissingQuote:"Value is missing an end quote",advancedFilterValidationNotANumber:"Value is not a number",advancedFilterValidationMissingCondition:"Condition is missing",advancedFilterValidationJoinOperatorMismatch:"Join operators within a condition must be the same",advancedFilterValidationInvalidJoinOperator:"Join operator not found",advancedFilterValidationMissingEndBracket:"Missing end bracket",advancedFilterValidationExtraEndBracket:"Too many end brackets",advancedFilterValidationMessage:function(o){return"Expression has an error. "+o[0]+" - "+o[1]+"."},advancedFilterValidationMessageAtEnd:function(o){return"Expression has an error. "+o[0]+" at end of expression."}},jm=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mn=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Bm=function(o){jm(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.includeHiddenColumns=!1,e.appliedExpression=null,e.expression=null,e.isValid=!0,e.columnAutocompleteEntries=null,e.columnNameToIdMap={},e.expressionEvaluatorParams={},e}return t.prototype.postConstruct=function(){var e=this;this.setEnabled(this.gridOptionsService.is("enableAdvancedFilter"),!0),this.ctrl=this.createManagedBean(new Gm(this.enabled)),this.expressionOperators=this.getExpressionOperators(),this.expressionJoinOperators=this.getExpressionJoinOperators(),this.expressionProxy={getValue:function(r,n){var i=e.columnModel.getPrimaryColumn(r);return i?e.valueService.getValue(i,n,!0):void 0},getParams:function(r){return e.getExpressionEvaluatorParams(r)},operators:this.expressionOperators},this.includeHiddenColumns=this.gridOptionsService.is("includeHiddenColumnsInAdvancedFilter"),this.addManagedPropertyListener("enableAdvancedFilter",function(r){return e.setEnabled(!!r.currentValue)}),this.addManagedListener(this.eventService,V.EVENT_GRID_COLUMNS_CHANGED,function(){return e.resetColumnCaches()}),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,function(r){return e.onNewColumnsLoaded(r)}),this.addManagedPropertyListener("includeHiddenColumnsInAdvancedFilter",function(r){e.includeHiddenColumns=!!r.currentValue,e.resetColumnCaches()})},t.prototype.isEnabled=function(){return this.enabled},t.prototype.isFilterPresent=function(){return!!this.expressionFunction},t.prototype.doesFilterPass=function(e){return this.expressionFunction(this.expressionProxy,e,this.expressionArgs)},t.prototype.getModel=function(){var e,r=this.createExpressionParser(this.expression);return r==null||r.parseExpression(),(e=r==null?void 0:r.getModel())!==null&&e!==void 0?e:null},t.prototype.setModel=function(e){var r=this,n=function(a,s){var l,u,c,d,h,f;if(a.filterType==="join"){var p=a.type==="OR"?r.expressionJoinOperators.or:r.expressionJoinOperators.and,v=a.conditions.map(function(_){return n(_)}).join(" "+p+" ");return s?v:"("+v+")"}else{var g=a.colId,m=r.getColumnAutocompleteEntries(),y=m.find(function(T){var O=T.key;return O===g}),S=void 0;y?(S=y.displayValue,r.columnNameToIdMap[S.toLocaleUpperCase()]={colId:g,columnName:S}):S=g;var p=(d=(c=(u=(l=r.expressionOperators[a.filterType])===null||l===void 0?void 0:l.operators)===null||u===void 0?void 0:u[a.type])===null||c===void 0?void 0:c.displayValue)!==null&&d!==void 0?d:a.type,C=a.filter,w=r.columnModel.getPrimaryColumn(g),x="";if(C!=null){var b=void 0;a.filterType==="number"?b=(h=E.toStringOrNull(C))!==null&&h!==void 0?h:"":(b=w?r.valueFormatterService.formatValue(w,null,C):C,b='"'+((f=b??E.toStringOrNull(C))!==null&&f!==void 0?f:"")+'"'),x=" "+b}return"["+S+"] "+p+x}},i=e?n(e,!0):null;this.setExpressionDisplayValue(i),this.applyExpression(),this.ctrl.refreshComp()},t.prototype.getExpressionDisplayValue=function(){return this.expression},t.prototype.setExpressionDisplayValue=function(e){this.expression=e},t.prototype.isCurrentExpressionApplied=function(){return this.appliedExpression===this.expression},t.prototype.createExpressionParser=function(e){var r=this;return e?new Rm({expression:e,columnModel:this.columnModel,dataTypeService:this.dataTypeService,valueParserService:this.valueParserService,columnAutocompleteTypeGenerator:function(n){return r.getDefaultAutocompleteListParams(n)},colIdResolver:function(n){return r.getColId(n)},columnValueCreator:function(n){return r.getColumnValue(n)},operators:this.expressionOperators,joinOperators:this.expressionJoinOperators,translate:function(n,i){return r.translate(n,i)}}):null},t.prototype.getDefaultAutocompleteListParams=function(e){return{enabled:!0,type:"column",searchString:e,entries:this.getColumnAutocompleteEntries()}},t.prototype.getColumnValue=function(e){var r=e.displayValue;return""+xi.COL_START_CHAR+r+xi.COL_END_CHAR},t.prototype.getDefaultExpression=function(e){var r=this.getColumnValue(e)+" ";return{updatedValue:r,updatedPosition:r.length}},t.prototype.updateAutocompleteCache=function(e,r){if(r==="column"){var n=e.key,i=e.displayValue;this.columnNameToIdMap[e.displayValue.toLocaleUpperCase()]={colId:n,columnName:i}}},t.prototype.isHeaderActive=function(){return!this.gridOptionsService.get("advancedFilterParent")},t.prototype.getCtrl=function(){return this.ctrl},t.prototype.setEnabled=function(e,r){var n=this.enabled,i=this.rowModel.getType()==="clientSide";if(e&&!i&&E.doOnce(function(){console.warn("AG Grid: Advanced Filter is only supported with the Client-Side Row Model.")},"advancedFilterCSRM"),this.enabled=e&&i,!r&&this.enabled!==n){var a={type:V.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,enabled:this.enabled};this.eventService.dispatchEvent(a)}},t.prototype.applyExpression=function(){var e=this.createExpressionParser(this.expression);e==null||e.parseExpression(),this.applyExpressionFromParser(e)},t.prototype.applyExpressionFromParser=function(e){if(this.isValid=!e||e.isValid(),!e||!this.isValid){this.expressionFunction=null,this.expressionArgs=null,this.appliedExpression=null;return}var r=e.getFunction(),n=r.functionBody,i=r.args;this.expressionFunction=new Function("expressionProxy","node","args",n),this.expressionArgs=i,this.appliedExpression=this.expression},t.prototype.translate=function(e,r){var n=Vm[e];return typeof n=="function"&&(n=n(r)),this.localeService.getLocaleTextFunc()(e,n,r)},t.prototype.updateValidity=function(){var e=this.createExpressionParser(this.expression);e==null||e.parseExpression();var r=!e||e.isValid();return r===this.isValid?!1:(this.applyExpressionFromParser(e),this.ctrl.refreshComp(),!0)},t.prototype.getColumnAutocompleteEntries=function(){var e=this,r;if(this.columnAutocompleteEntries)return this.columnAutocompleteEntries;var n=(r=this.columnModel.getAllPrimaryColumns())!==null&&r!==void 0?r:[],i=[];return n.forEach(function(a){a.getColDef().filter&&(e.includeHiddenColumns||a.isVisible()||a.isRowGroupActive())&&i.push({key:a.getColId(),displayValue:e.columnModel.getDisplayNameForColumn(a,"advancedFilter")})}),i.sort(function(a,s){var l,u,c=(l=a.displayValue)!==null&&l!==void 0?l:"",d=(u=s.displayValue)!==null&&u!==void 0?u:"";return c<d?-1:d>c?1:0}),i},t.prototype.getColId=function(e){var r=e.toLocaleUpperCase(),n=this.columnNameToIdMap[r];if(n)return n;var i=this.getColumnAutocompleteEntries(),a=i.find(function(c){var d=c.displayValue;return d.toLocaleUpperCase()===r});if(a){var s=a.key,l=a.displayValue,u={colId:s,columnName:l};return this.columnNameToIdMap[r]=u,u}return null},t.prototype.getExpressionOperators=function(){var e=this,r=function(n,i){return e.translate(n,i)};return{text:new Sh({translate:r}),boolean:new Am({translate:r}),object:new Sh({translate:r}),number:new Nu({translate:r,equals:function(n,i){return n===i}}),date:new Nu({translate:r,equals:function(n,i){return n.getTime()===i.getTime()}}),dateString:new Nu({translate:r,equals:function(n,i){return n.getTime()===i.getTime()}})}},t.prototype.getExpressionJoinOperators=function(){return{and:this.translate("advancedFilterAnd"),or:this.translate("advancedFilterOr")}},t.prototype.getExpressionEvaluatorParams=function(e){var r=this,n=this.expressionEvaluatorParams[e];if(!n){var i=this.columnModel.getPrimaryColumn(e);if(i){var a=this.dataTypeService.getBaseDataType(i);switch(a){case"dateString":n={valueConverter:this.dataTypeService.getDateParserFunction()};break;case"object":n={valueConverter:function(l,u){var c;return(c=r.valueFormatterService.formatValue(i,u,l))!==null&&c!==void 0?c:typeof l.toString=="function"?l.toString():""}};break;case"text":case void 0:n={valueConverter:function(l){return E.toStringOrNull(l)}};break;default:n={valueConverter:function(l){return l}};break}var s=i.getColDef().filterParams;s&&["caseSensitive","includeBlanksInEquals","includeBlanksInLessThan","includeBlanksInGreaterThan"].forEach(function(l){var u=s[l];u&&(n[l]=u)}),this.expressionEvaluatorParams[e]=n}else n={valueConverter:function(l){return l}}}return n},t.prototype.resetColumnCaches=function(){this.columnAutocompleteEntries=null,this.columnNameToIdMap={}},t.prototype.onNewColumnsLoaded=function(e){var r=this;if(e.source==="gridInitializing"){var n=function(){var a;return r.setModel((a=r.gridOptionsService.get("advancedFilterModel"))!==null&&a!==void 0?a:null)};if(this.dataTypeService.isPendingInference()){this.ctrl.setInputDisabled(!0);var i=this.addManagedListener(this.eventService,V.EVENT_DATA_TYPES_INFERRED,function(){i==null||i(),n(),r.ctrl.setInputDisabled(!1)})}else n()}},mn([D("valueService")],t.prototype,"valueService",void 0),mn([D("columnModel")],t.prototype,"columnModel",void 0),mn([D("dataTypeService")],t.prototype,"dataTypeService",void 0),mn([D("valueFormatterService")],t.prototype,"valueFormatterService",void 0),mn([D("valueParserService")],t.prototype,"valueParserService",void 0),mn([D("rowModel")],t.prototype,"rowModel",void 0),mn([te],t.prototype,"postConstruct",null),t=mn([be("advancedFilterService")],t),t}(pe),Hm="30.1.0",zm={version:Hm,moduleName:Ce.AdvancedFilterModule,beans:[Bm],agStackComponents:[{componentName:"agAdvancedFilter",componentClass:Ld}],dependantModules:[lt]},Wm=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ct=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Um=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Km=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Ch=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Vu="paste",ju="dragCopy",xh="clipboard",vi;(function(o){o[o.CellRange=0]="CellRange",o[o.SelectedRows=1]="SelectedRows",o[o.FocusedCell=2]="FocusedCell"})(vi||(vi={}));var $m=function(o){Wm(t,o);function t(){var r=o!==null&&o.apply(this,arguments)||this;return r.lastPasteOperationTime=0,r.navigatorApiFailed=!1,r}e=t,t.prototype.init=function(){var r=this;this.logger=this.loggerFactory.create("ClipboardService"),this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(function(n){r.gridCtrl=n.gridCtrl})},t.prototype.pasteFromClipboard=function(){var r=this;this.logger.log("pasteFromClipboard");var n=!this.gridOptionsService.is("suppressClipboardApi");n&&!this.navigatorApiFailed&&navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch(function(i){E.doOnce(function(){console.warn(i),console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.readText()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API")},"clipboardApiError"),r.navigatorApiFailed=!0,r.pasteFromClipboardLegacy()}):this.pasteFromClipboardLegacy()},t.prototype.pasteFromClipboardLegacy=function(){var r=this,n=!1,i=function(a){var s=new Date().getTime();s-r.lastPasteOperationTime<50&&(n=!0,a.preventDefault()),r.lastPasteOperationTime=s};this.executeOnTempElement(function(a){a.addEventListener("paste",i),a.focus({preventScroll:!0})},function(a){var s=a.value;n?r.refocusLastFocusedCell():r.processClipboardData(s),a.removeEventListener("paste",i)})},t.prototype.refocusLastFocusedCell=function(){var r=this.focusService.getFocusedCell();r&&this.focusService.setFocusedCell({rowIndex:r.rowIndex,column:r.column,rowPinned:r.rowPinned,forceBrowserFocus:!0})},t.prototype.getClipboardDelimiter=function(){var r=this.gridOptionsService.get("clipboardDelimiter");return E.exists(r)?r:"	"},t.prototype.processClipboardData=function(r){var n=this;if(r!=null){var i=e.stringToArray(r,this.getClipboardDelimiter()),a=this.gridOptionsService.getCallback("processDataFromClipboard");if(a&&(i=a({data:i})),i!=null){this.gridOptionsService.is("suppressLastEmptyLineOnPaste")&&this.removeLastLineIfBlank(i);var s=function(l,u,c,d){var h=n.rangeService&&n.rangeService.isMoreThanOneCell(),f=h&&!n.hasOnlyOneValueToPaste(i);f?n.pasteIntoActiveRange(i,l,u,d):n.pasteStartingFromFocusedCell(i,l,u,c,d)};this.doPasteOperation(s)}}},t.stringToArray=function(r,n){n===void 0&&(n=",");var i=[],a=function(v){return v==="\r"||v===`
`},s=!1;if(r==="")return[[""]];for(var l=function(v,g,m){var y=r[m-1],S=r[m],C=r[m+1],w=function(){i[v]||(i[v]=[]),i[v][g]||(i[v][g]="")};if(w(),S==='"'&&(s?C==='"'?(i[v][g]+='"',m++):s=!1:(y===void 0||y===n||a(y))&&(s=!0)),!s&&S!=='"'){if(S===n)return g++,w(),u=v,c=g,d=m,"continue";if(a(S))return g=0,v++,w(),S==="\r"&&C===`
`&&m++,u=v,c=g,d=m,"continue"}i[v][g]+=S,u=v,c=g,d=m},u,c,d,h=0,f=0,p=0;p<r.length;p++)l(h,f,p),h=u,f=c,p=d;return i},t.prototype.doPasteOperation=function(r){var n=this.gridOptionsService.api,i=this.gridOptionsService.columnApi,a="clipboard";this.eventService.dispatchEvent({type:V.EVENT_PASTE_START,api:n,columnApi:i,source:a});var s;if(this.clientSideRowModel){var l=this.gridOptionsService.is("aggregateOnlyChangedColumns");s=new Zy(l,this.clientSideRowModel.getRootNode())}var u={},c=[],d=this.focusService.getFocusedCell();r(u,c,d,s);var h=Km([],Um(c));s&&(this.clientSideRowModel.doAggregate(s),s.forEachChangedNodeDepthFirst(function(p){h.push(p)})),this.rowRenderer.refreshCells({rowNodes:h}),this.dispatchFlashCells(u),this.fireRowChanged(c),this.refocusLastFocusedCell();var f={type:V.EVENT_PASTE_END,source:a};this.eventService.dispatchEvent(f)},t.prototype.pasteIntoActiveRange=function(r,n,i,a){var s=this,l=this.getRangeSize()%r.length!=0,u=0,c=0,d=function(h,f,p,v){var g=v-u>=r.length;if(g){if(l)return;u+=c,c=0}var m=r[v-u];i.push(f);var y=s.gridOptionsService.getCallback("processCellFromClipboard");p.forEach(function(S,C){if(!(!S.isCellEditable(f)||S.isSuppressPaste(f))){C>=m.length&&(C=C%m.length);var w=s.processCell(f,S,m[C],ju,y,!0);f.setDataValue(S,w,Vu),a&&a.addParentNode(f.parent,[S]);var x=h.rowIndex,b=h.rowPinned,_=s.cellPositionUtils.createIdFromValues({rowIndex:x,column:S,rowPinned:b});n[_]=!0}}),c++};this.iterateActiveRanges(!1,d)},t.prototype.pasteStartingFromFocusedCell=function(r,n,i,a,s){if(a){var l={rowIndex:a.rowIndex,rowPinned:a.rowPinned},u=this.columnModel.getDisplayedColumnsStartingAt(a.column);this.isPasteSingleValueIntoRange(r)?this.pasteSingleValueIntoRange(r,i,n,s):this.pasteMultipleValues(r,l,i,u,n,xh,s)}},t.prototype.isPasteSingleValueIntoRange=function(r){return this.hasOnlyOneValueToPaste(r)&&this.rangeService!=null&&!this.rangeService.isEmpty()},t.prototype.pasteSingleValueIntoRange=function(r,n,i,a){var s=this,l=r[0][0],u=function(c,d,h){n.push(d),h.forEach(function(f){return s.updateCellValue(d,f,l,i,xh,a)})};this.iterateActiveRanges(!1,u)},t.prototype.hasOnlyOneValueToPaste=function(r){return r.length===1&&r[0].length===1},t.prototype.copyRangeDown=function(){var r=this;if(!(!this.rangeService||this.rangeService.isEmpty())){var n=[],i=function(a,s,l,u){var c=r.gridOptionsService.getCallback("processCellForClipboard"),d=r.gridOptionsService.getCallback("processCellFromClipboard"),h=function(f,p,v){n.length?(s.push(p),v.forEach(function(g,m){if(!(!g.isCellEditable(p)||g.isSuppressPaste(p))){var y=r.processCell(p,g,n[m],ju,d,!0);p.setDataValue(g,y,Vu),u&&u.addParentNode(p.parent,[g]);var S=f.rowIndex,C=f.rowPinned,w=r.cellPositionUtils.createIdFromValues({rowIndex:S,column:g,rowPinned:C});a[w]=!0}})):v.forEach(function(g){var m=r.processCell(p,g,r.valueService.getValue(g,p),ju,c,!1,!0);n.push(m)})};r.iterateActiveRanges(!0,h)};this.doPasteOperation(i)}},t.prototype.removeLastLineIfBlank=function(r){var n=E.last(r),i=n&&n.length===1&&n[0]==="";if(i){if(r.length===1)return;E.removeFromArray(r,n)}},t.prototype.fireRowChanged=function(r){var n=this;this.gridOptionsService.get("editType")==="fullRow"&&r.forEach(function(i){var a={type:V.EVENT_ROW_VALUE_CHANGED,node:i,data:i.data,rowIndex:i.rowIndex,rowPinned:i.rowPinned};n.eventService.dispatchEvent(a)})},t.prototype.pasteMultipleValues=function(r,n,i,a,s,l,u){var c=this,d=n,h=this.clientSideRowModel!=null&&!this.gridOptionsService.is("enableGroupEdit")&&!this.gridOptionsService.isTreeData(),f=function(){for(;;){if(!d)return null;var p=c.rowPositionUtils.getRowNode(d);if(d=c.cellNavigationService.getRowBelow({rowPinned:d.rowPinned,rowIndex:d.rowIndex}),p==null)return null;var v=p.detail||p.footer||h&&p.group;if(!v)return p}};r.forEach(function(p){var v=f();v&&(p.forEach(function(g,m){return c.updateCellValue(v,a[m],g,s,l,u)}),i.push(v))})},t.prototype.updateCellValue=function(r,n,i,a,s,l){if(!(!r||!n||!n.isCellEditable(r)||n.isSuppressPaste(r))&&!(r.group&&n.isValueActive())){var u=this.processCell(r,n,i,s,this.gridOptionsService.getCallback("processCellFromClipboard"),!0);r.setDataValue(n,u,Vu);var c=r.rowIndex,d=r.rowPinned,h=this.cellPositionUtils.createIdFromValues({rowIndex:c,column:n,rowPinned:d});a[h]=!0,l&&l.addParentNode(r.parent,[n])}},t.prototype.copyToClipboard=function(r){r===void 0&&(r={}),this.copyOrCutToClipboard(r)},t.prototype.cutToClipboard=function(r,n){if(r===void 0&&(r={}),n===void 0&&(n="api"),!this.gridOptionsService.is("suppressCutToClipboard")){var i={type:V.EVENT_CUT_START,source:n};this.eventService.dispatchEvent(i),this.copyOrCutToClipboard(r,!0);var a={type:V.EVENT_CUT_END,source:n};this.eventService.dispatchEvent(a)}},t.prototype.copyOrCutToClipboard=function(r,n){var i=r.includeHeaders,a=r.includeGroupHeaders;this.logger.log("copyToClipboard: includeHeaders = "+i),i==null&&(i=this.gridOptionsService.is("copyHeadersToClipboard")),a==null&&(a=this.gridOptionsService.is("copyGroupHeadersToClipboard"));var s={includeHeaders:i,includeGroupHeaders:a},l=!this.gridOptionsService.is("suppressCopyRowsToClipboard"),u=null;this.rangeService&&!this.rangeService.isEmpty()&&!this.shouldSkipSingleCellRange()?(this.copySelectedRangeToClipboard(s),u=vi.CellRange):l&&!this.selectionService.isEmpty()?(this.copySelectedRowsToClipboard(s),u=vi.SelectedRows):this.focusService.isAnyCellFocused()&&(this.copyFocusedCellToClipboard(s),u=vi.FocusedCell),n&&u!==null&&this.clearCellsAfterCopy(u)},t.prototype.clearCellsAfterCopy=function(r){if(this.eventService.dispatchEvent({type:V.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),r===vi.CellRange)this.rangeService.clearCellRangeCellValues({cellEventSource:"clipboardService"});else if(r===vi.SelectedRows)this.clearSelectedRows();else{var n=this.focusService.getFocusedCell();if(n==null)return;var i=this.rowPositionUtils.getRowNode(n);i&&this.clearCellValue(i,n.column)}this.eventService.dispatchEvent({type:V.EVENT_KEY_SHORTCUT_CHANGED_CELL_END})},t.prototype.clearSelectedRows=function(){var r,n,i,a,s=this.selectionService.getSelectedNodes(),l=this.columnModel.getAllDisplayedColumns();try{for(var u=Ch(s),c=u.next();!c.done;c=u.next()){var d=c.value;try{for(var h=(i=void 0,Ch(l)),f=h.next();!f.done;f=h.next()){var p=f.value;this.clearCellValue(d,p)}}catch(v){i={error:v}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}}}catch(v){r={error:v}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}},t.prototype.clearCellValue=function(r,n){n.isCellEditable(r)&&r.setDataValue(n,null,"clipboardService")},t.prototype.shouldSkipSingleCellRange=function(){return this.gridOptionsService.is("suppressCopySingleCellRanges")&&!this.rangeService.isMoreThanOneCell()},t.prototype.iterateActiveRanges=function(r,n,i){var a=this;if(!(!this.rangeService||this.rangeService.isEmpty())){var s=this.rangeService.getCellRanges();r?this.iterateActiveRange(s[0],n,i,!0):s.forEach(function(l,u){return a.iterateActiveRange(l,n,i,u===s.length-1)})}},t.prototype.iterateActiveRange=function(r,n,i,a){if(this.rangeService){var s=this.rangeService.getRangeStartRow(r),l=this.rangeService.getRangeEndRow(r);i&&r.columns&&i(r.columns);for(var u=0,c=!1;!c&&s!=null;){var d=this.rowPositionUtils.getRowNode(s);c=this.rowPositionUtils.sameRow(s,l),n(s,d,r.columns,u++,c&&a),s=this.cellNavigationService.getRowBelow(s)}}},t.prototype.copySelectedRangeToClipboard=function(r){if(r===void 0&&(r={}),!(!this.rangeService||this.rangeService.isEmpty())){var n=this.rangeService.areAllRangesAbleToMerge(),i=n?this.buildDataFromMergedRanges(r):this.buildDataFromRanges(r),a=i.data,s=i.cellsToFlash;this.copyDataToClipboard(a),this.dispatchFlashCells(s)}},t.prototype.buildDataFromMergedRanges=function(r){var n=this,i=new Set,a=this.rangeService.getCellRanges(),s=new Map,l=[],u={};a.forEach(function(f){f.columns.forEach(function(m){return i.add(m)});var p=n.getRangeRowPositionsAndCellsToFlash(f),v=p.rowPositions,g=p.cellsToFlash;v.forEach(function(m){var y=m.rowIndex+"-"+(m.rowPinned||"null");s.get(y)||(s.set(y,!0),l.push(m))}),Object.assign(u,g)});var c=this.columnModel.getAllDisplayedColumns(),d=Array.from(i);d.sort(function(f,p){var v=c.indexOf(f),g=c.indexOf(p);return v-g});var h=this.buildExportParams({columns:d,rowPositions:l,includeHeaders:r.includeHeaders,includeGroupHeaders:r.includeGroupHeaders});return{data:h,cellsToFlash:u}},t.prototype.buildDataFromRanges=function(r){var n=this,i=this.rangeService.getCellRanges(),a=[],s={};return i.forEach(function(l){var u=n.getRangeRowPositionsAndCellsToFlash(l),c=u.rowPositions,d=u.cellsToFlash;Object.assign(s,d),a.push(n.buildExportParams({columns:l.columns,rowPositions:c,includeHeaders:r.includeHeaders,includeGroupHeaders:r.includeGroupHeaders}))}),{data:a.join(`
`),cellsToFlash:s}},t.prototype.getRangeRowPositionsAndCellsToFlash=function(r){for(var n=this,i=[],a={},s=this.rangeService.getRangeStartRow(r),l=this.rangeService.getRangeEndRow(r),u=s;u&&(i.push(u),r.columns.forEach(function(c){var d=u,h=d.rowIndex,f=d.rowPinned,p=n.cellPositionUtils.createIdFromValues({rowIndex:h,column:c,rowPinned:f});a[p]=!0}),!this.rowPositionUtils.sameRow(u,l));)u=this.cellNavigationService.getRowBelow(u);return{rowPositions:i,cellsToFlash:a}},t.prototype.copyFocusedCellToClipboard=function(r){var n;r===void 0&&(r={});var i=this.focusService.getFocusedCell();if(i!=null){var a=this.cellPositionUtils.createId(i),s={rowPinned:i.rowPinned,rowIndex:i.rowIndex},l=i.column,u=this.buildExportParams({columns:[l],rowPositions:[s],includeHeaders:r.includeHeaders,includeGroupHeaders:r.includeGroupHeaders});this.copyDataToClipboard(u),this.dispatchFlashCells((n={},n[a]=!0,n))}},t.prototype.copySelectedRowsToClipboard=function(r){r===void 0&&(r={});var n=r.columnKeys,i=r.includeHeaders,a=r.includeGroupHeaders,s=this.buildExportParams({columns:n,includeHeaders:i,includeGroupHeaders:a});this.copyDataToClipboard(s)},t.prototype.buildExportParams=function(r){var n=this,i=r.columns,a=r.rowPositions,s=r.includeHeaders,l=s===void 0?!1:s,u=r.includeGroupHeaders,c=u===void 0?!1:u,d={columnKeys:i,rowPositions:a,skipColumnHeaders:!l,skipColumnGroupHeaders:!c,suppressQuotes:!0,columnSeparator:this.getClipboardDelimiter(),onlySelected:!a,processCellCallback:this.gridOptionsService.getCallback("processCellForClipboard"),processRowGroupCallback:function(h){return n.processRowGroupCallback(h)},processHeaderCallback:this.gridOptionsService.getCallback("processHeaderForClipboard"),processGroupHeaderCallback:this.gridOptionsService.getCallback("processGroupHeaderForClipboard")};return this.csvCreator.getDataAsCsv(d,!0)},t.prototype.processRowGroupCallback=function(r){var n=this,i=r.node,a=i.key,s=a??"";if(r.node.footer){var l="";a&&a.length&&(l=" "+a),s="Total"+l}var u=this.gridOptionsService.getCallback("processCellForClipboard");if(u){var c=i.rowGroupColumn;return!c&&i.footer&&i.level===-1&&(c=this.columnModel.getRowGroupColumns()[0]),u({value:s,node:i,column:c,type:"clipboard",formatValue:function(d){var h;return(h=n.valueFormatterService.formatValue(c,i,d))!==null&&h!==void 0?h:d},parseValue:function(d){return n.valueParserService.parseValue(c,i,d,n.valueService.getValue(c,i))}})}return s},t.prototype.dispatchFlashCells=function(r){var n=this;window.setTimeout(function(){var i={type:V.EVENT_FLASH_CELLS,cells:r};n.eventService.dispatchEvent(i)},0)},t.prototype.processCell=function(r,n,i,a,s,l,u){var c=this,d;if(s){var h={column:n,node:r,value:i,type:a,formatValue:function(f){var p;return(p=c.valueFormatterService.formatValue(n,r??null,f))!==null&&p!==void 0?p:f},parseValue:function(f){return c.valueParserService.parseValue(n,r??null,f,c.valueService.getValue(n,r))}};return s(h)}return l&&n.getColDef().useValueParserForImport?this.valueParserService.parseValue(n,r??null,i,this.valueService.getValue(n,r)):u&&n.getColDef().useValueFormatterForExport&&(d=this.valueFormatterService.formatValue(n,r??null,i))!==null&&d!==void 0?d:i},t.prototype.copyDataToClipboard=function(r){var n=this,i=this.gridOptionsService.getCallback("sendToClipboard");if(i){i({data:r});return}var a=!this.gridOptionsService.is("suppressClipboardApi");if(a&&navigator.clipboard){navigator.clipboard.writeText(r).catch(function(s){E.doOnce(function(){console.warn(s),console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.writeText()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.")},"clipboardApiError"),n.copyDataToClipboardLegacy(r)});return}this.copyDataToClipboardLegacy(r)},t.prototype.copyDataToClipboardLegacy=function(r){var n=this;this.executeOnTempElement(function(i){var a=n.gridOptionsService.getDocument(),s=a.activeElement;i.value=r||" ",i.select(),i.focus({preventScroll:!0});var l=a.execCommand("copy");l||console.warn("AG Grid: Browser did not allow document.execCommand('copy'). Ensure api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons."),s!=null&&s.focus!=null&&s.focus({preventScroll:!0})})},t.prototype.executeOnTempElement=function(r,n){var i=this.gridOptionsService.getDocument(),a=i.createElement("textarea");a.style.width="1px",a.style.height="1px",a.style.top=i.documentElement.scrollTop+"px",a.style.left=i.documentElement.scrollLeft+"px",a.style.position="absolute",a.style.opacity="0";var s=this.gridCtrl.getGui();s.appendChild(a);try{r(a)}catch{console.warn("AG Grid: Browser does not support document.execCommand('copy') for clipboard operations")}n?window.setTimeout(function(){n(a),s.removeChild(a)},100):s.removeChild(a)},t.prototype.getRangeSize=function(){var r=this.rangeService.getCellRanges(),n=0,i=0;return r.length>0&&(n=this.rangeService.getRangeStartRow(r[0]).rowIndex,i=this.rangeService.getRangeEndRow(r[0]).rowIndex),n-i+1};var e;return ct([D("csvCreator")],t.prototype,"csvCreator",void 0),ct([D("loggerFactory")],t.prototype,"loggerFactory",void 0),ct([D("selectionService")],t.prototype,"selectionService",void 0),ct([zr("rangeService")],t.prototype,"rangeService",void 0),ct([D("rowModel")],t.prototype,"rowModel",void 0),ct([D("ctrlsService")],t.prototype,"ctrlsService",void 0),ct([D("valueService")],t.prototype,"valueService",void 0),ct([D("focusService")],t.prototype,"focusService",void 0),ct([D("rowRenderer")],t.prototype,"rowRenderer",void 0),ct([D("columnModel")],t.prototype,"columnModel",void 0),ct([D("cellNavigationService")],t.prototype,"cellNavigationService",void 0),ct([D("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),ct([D("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),ct([D("valueFormatterService")],t.prototype,"valueFormatterService",void 0),ct([D("valueParserService")],t.prototype,"valueParserService",void 0),ct([te],t.prototype,"init",null),t=e=ct([be("clipboardService")],t),t}(pe),Xm="30.1.0",Ym={version:Xm,moduleName:Ce.ClipboardModule,beans:[$m],dependantModules:[lt,mv]},qm=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),fa=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Gr;(function(o){o[o.EXPANDED=0]="EXPANDED",o[o.COLLAPSED=1]="COLLAPSED",o[o.INDETERMINATE=2]="INDETERMINATE"})(Gr||(Gr={}));var Zm=function(o){qm(t,o);function t(){return o.call(this,t.TEMPLATE)||this}return t.prototype.postConstruct=function(){var e=this;this.createExpandIcons(),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eExpand,"keydown",function(n){n.key===ve.SPACE&&(n.preventDefault(),e.onExpandClicked())}),this.addManagedListener(this.eSelect.getInputElement(),"click",this.onSelectClicked.bind(this)),this.eFilterTextField.onValueChange(function(){return e.onFilterTextChanged()}),this.addManagedListener(this.eFilterTextField.getInputElement(),"keydown",this.onMiniFilterKeyDown.bind(this)),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this));var r=this.localeService.getLocaleTextFunc();this.eSelect.setInputAriaLabel(r("ariaColumnSelectAll","Toggle Select All Columns")),this.eFilterTextField.setInputAriaLabel(r("ariaFilterColumnsInput","Filter Columns Input")),this.activateTabIndex([this.eExpand])},t.prototype.init=function(e){this.params=e,this.columnModel.isReady()&&this.showOrHideOptions()},t.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=E.createIconNoSpan("columnSelectOpen",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandUnchecked=E.createIconNoSpan("columnSelectClosed",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandIndeterminate=E.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsService)),this.setExpandState(Gr.EXPANDED)},t.prototype.showOrHideOptions=function(){var e=!this.params.suppressColumnFilter,r=!this.params.suppressColumnSelectAll,n=!this.params.suppressColumnExpandAll,i=this.columnModel.isPrimaryColumnGroupsPresent(),a=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(a("searchOoo","Search...")),E.setDisplayed(this.eFilterTextField.getGui(),e),E.setDisplayed(this.eSelect.getGui(),r),E.setDisplayed(this.eExpand,n&&i)},t.prototype.onFilterTextChanged=function(){var e=this;this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=E.debounce(function(){var r=e.eFilterTextField.getValue();e.dispatchEvent({type:"filterChanged",filterText:r})},t.DEBOUNCE_DELAY)),this.onFilterTextChangedDebounced()},t.prototype.onMiniFilterKeyDown=function(e){var r=this;e.key===ve.ENTER&&setTimeout(function(){return r.onSelectClicked()},t.DEBOUNCE_DELAY)},t.prototype.onSelectClicked=function(){this.dispatchEvent({type:this.selectState?"unselectAll":"selectAll"})},t.prototype.onExpandClicked=function(){this.dispatchEvent({type:this.expandState===Gr.EXPANDED?"collapseAll":"expandAll"})},t.prototype.setExpandState=function(e){this.expandState=e,E.setDisplayed(this.eExpandChecked,this.expandState===Gr.EXPANDED),E.setDisplayed(this.eExpandUnchecked,this.expandState===Gr.COLLAPSED),E.setDisplayed(this.eExpandIndeterminate,this.expandState===Gr.INDETERMINATE)},t.prototype.setSelectionState=function(e){this.selectState=e,this.eSelect.setValue(this.selectState)},t.DEBOUNCE_DELAY=300,t.TEMPLATE=`<div class="ag-column-select-header" role="presentation">
            <div ref="eExpand" class="ag-column-select-header-icon"></div>
            <ag-checkbox ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>
            <ag-input-text-field class="ag-column-select-header-filter-wrapper" ref="eFilterTextField"></ag-input-text-field>
        </div>`,fa([D("columnModel")],t.prototype,"columnModel",void 0),fa([B("eExpand")],t.prototype,"eExpand",void 0),fa([B("eSelect")],t.prototype,"eSelect",void 0),fa([B("eFilterTextField")],t.prototype,"eFilterTextField",void 0),fa([te],t.prototype,"postConstruct",null),t}(oe),Ba=function(){function o(t,e,r,n,i){n===void 0&&(n=!1),this.eventService=new Ev,this.displayName=t,this.dept=r,this.group=n,n?(this.columnGroup=e,this.expanded=i,this.children=[]):this.column=e}return o.prototype.isGroup=function(){return this.group},o.prototype.getDisplayName=function(){return this.displayName},o.prototype.getColumnGroup=function(){return this.columnGroup},o.prototype.getColumn=function(){return this.column},o.prototype.getDept=function(){return this.dept},o.prototype.isExpanded=function(){return!!this.expanded},o.prototype.getChildren=function(){return this.children},o.prototype.isPassesFilter=function(){return this.passesFilter},o.prototype.setExpanded=function(t){t!==this.expanded&&(this.expanded=t,this.eventService.dispatchEvent({type:o.EVENT_EXPANDED_CHANGED}))},o.prototype.setPassesFilter=function(t){this.passesFilter=t},o.prototype.addEventListener=function(t,e){this.eventService.addEventListener(t,e)},o.prototype.removeEventListener=function(t,e){this.eventService.removeEventListener(t,e)},o.EVENT_EXPANDED_CHANGED="expandedChanged",o}(),Jm=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ps=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Qm=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},e0=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},t0=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Tv=function(o){Jm(t,o);function t(e,r,n){var i=o.call(this,'<div class="ag-menu"></div>')||this;return i.column=e,i.mouseEvent=r,i.parentEl=n,i.displayName=null,i}return t.prototype.postConstruct=function(){this.initializeProperties(this.column),this.buildMenuItemMap(),this.column instanceof Mt?this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel"):this.displayName=this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.column,"columnToolPanel"),this.isActive()&&(this.mouseEvent.preventDefault(),this.displayContextMenu())},t.prototype.initializeProperties=function(e){e instanceof Cr?this.columns=e.getLeafColumns():this.columns=[e],this.allowGrouping=this.columns.some(function(r){return r.isPrimary()&&r.isAllowRowGroup()}),this.allowValues=this.columns.some(function(r){return r.isPrimary()&&r.isAllowValue()}),this.allowPivoting=this.columnModel.isPivotMode()&&this.columns.some(function(r){return r.isPrimary()&&r.isAllowPivot()})},t.prototype.buildMenuItemMap=function(){var e=this,r=this.localeService.getLocaleTextFunc();this.menuItemMap=new Map,this.menuItemMap.set("rowGroup",{allowedFunction:function(n){return n.isPrimary()&&n.isAllowRowGroup()},activeFunction:function(n){return n.isRowGroupActive()},activateLabel:function(){return r("groupBy","Group by")+" "+e.displayName},deactivateLabel:function(){return r("ungroupBy","Un-Group by")+" "+e.displayName},activateFunction:function(){var n=e.columnModel.getRowGroupColumns();e.columnModel.setRowGroupColumns(e.addColumnsToList(n),"toolPanelUi")},deActivateFunction:function(){var n=e.columnModel.getRowGroupColumns();e.columnModel.setRowGroupColumns(e.removeColumnsFromList(n),"toolPanelUi")},addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),this.menuItemMap.set("value",{allowedFunction:function(n){return n.isPrimary()&&n.isAllowValue()},activeFunction:function(n){return n.isValueActive()},activateLabel:function(){return r("addToValues","Add "+e.displayName+" to values",[e.displayName])},deactivateLabel:function(){return r("removeFromValues","Remove "+e.displayName+" from values",[e.displayName])},activateFunction:function(){var n=e.columnModel.getValueColumns();e.columnModel.setValueColumns(e.addColumnsToList(n),"toolPanelUi")},deActivateFunction:function(){var n=e.columnModel.getValueColumns();e.columnModel.setValueColumns(e.removeColumnsFromList(n),"toolPanelUi")},addIcon:"valuePanel",removeIcon:"valuePanel"}),this.menuItemMap.set("pivot",{allowedFunction:function(n){return e.columnModel.isPivotMode()&&n.isPrimary()&&n.isAllowPivot()},activeFunction:function(n){return n.isPivotActive()},activateLabel:function(){return r("addToLabels","Add "+e.displayName+" to labels",[e.displayName])},deactivateLabel:function(){return r("removeFromLabels","Remove "+e.displayName+" from labels",[e.displayName])},activateFunction:function(){var n=e.columnModel.getPivotColumns();e.columnModel.setPivotColumns(e.addColumnsToList(n),"toolPanelUi")},deActivateFunction:function(){var n=e.columnModel.getPivotColumns();e.columnModel.setPivotColumns(e.removeColumnsFromList(n),"toolPanelUi")},addIcon:"pivotPanel",removeIcon:"pivotPanel"})},t.prototype.addColumnsToList=function(e){return e0([],Qm(e)).concat(this.columns.filter(function(r){return e.indexOf(r)===-1}))},t.prototype.removeColumnsFromList=function(e){var r=this;return e.filter(function(n){return r.columns.indexOf(n)===-1})},t.prototype.displayContextMenu=function(){var e=this,r=this.getGui(),n=this.createBean(new Ad),i=this.getMappedMenuItems(),a=this.localeService.getLocaleTextFunc(),s=function(){};r.appendChild(n.getGui()),n.addMenuItems(i),n.addManagedListener(n,Wo.EVENT_MENU_ITEM_SELECTED,function(){e.parentEl.focus(),s()});var l=this.popupService.addPopup({modal:!0,eChild:r,closeOnEsc:!0,afterGuiAttached:function(){return e.focusService.focusInto(n.getGui())},ariaLabel:a("ariaLabelContextMenu","Context Menu"),closedCallback:function(u){u instanceof KeyboardEvent&&e.parentEl.focus(),e.destroyBean(n)}});l&&(s=l.hideFunc),this.popupService.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:r})},t.prototype.isActive=function(){return this.allowGrouping||this.allowValues||this.allowPivoting},t.prototype.getMappedMenuItems=function(){var e,r,n=[],i=function(c){var d=a.columns.some(function(f){return c.allowedFunction(f)&&!c.activeFunction(f)}),h=a.columns.some(function(f){return c.allowedFunction(f)&&c.activeFunction(f)});d&&n.push({name:c.activateLabel(a.displayName),icon:E.createIconNoSpan(c.addIcon,a.gridOptionsService,null),action:function(){return c.activateFunction()}}),h&&n.push({name:c.deactivateLabel(a.displayName),icon:E.createIconNoSpan(c.removeIcon,a.gridOptionsService,null),action:function(){return c.deActivateFunction()}})},a=this;try{for(var s=t0(this.menuItemMap.values()),l=s.next();!l.done;l=s.next()){var u=l.value;i(u)}}catch(c){e={error:c}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n},Ps([D("columnModel")],t.prototype,"columnModel",void 0),Ps([D("popupService")],t.prototype,"popupService",void 0),Ps([D("focusService")],t.prototype,"focusService",void 0),Ps([te],t.prototype,"postConstruct",null),t}(oe),r0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xr=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Pv=function(o){r0(t,o);function t(e,r,n,i){var a=o.call(this)||this;return a.modelItem=e,a.allowDragging=r,a.eventType=n,a.focusWrapper=i,a.processingColumnStateChange=!1,a.modelItem=e,a.columnGroup=e.getColumnGroup(),a.columnDept=e.getDept(),a.displayName=e.getDisplayName(),a.allowDragging=r,a}return t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE),this.eDragHandle=E.createIconNoSpan("columnDrag",this.gridOptionsService),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");var r=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();r.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1"),E.missing(this.displayName)&&(this.displayName=">>"),this.eLabel.innerHTML=this.displayName?this.displayName:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+this.columnDept),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.addManagedListener(this.cbSelect,V.EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.modelItem,Ba.EVENT_EXPANDED_CHANGED,this.onExpandChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip();var i=Dd.getToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(),this.gridOptionsService,null,this.columnGroup);i.forEach(function(a){return e.addOrRemoveCssClass(a,!0)})},t.prototype.getColumns=function(){return this.columnGroup.getLeafColumns()},t.prototype.setupTooltip=function(){var e=this,r=this.columnGroup.getColGroupDef();if(r){var n=function(){var i=r.headerTooltip;e.setTooltip(i)};n(),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,n)}},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumnGroup",e},t.prototype.handleKeyDown=function(e){switch(e.key){case ve.LEFT:e.preventDefault(),this.modelItem.setExpanded(!1);break;case ve.RIGHT:e.preventDefault(),this.modelItem.setExpanded(!0);break;case ve.SPACE:e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected());break}},t.prototype.onContextMenu=function(e){var r=this,n=this,i=n.columnGroup,a=n.gridOptionsService;if(!a.is("functionsReadOnly")){var s=this.createBean(new Tv(i,e,this.focusWrapper));this.addDestroyFunc(function(){s.isAlive()&&r.destroyBean(s)})}},t.prototype.addVisibilityListenersToAllChildren=function(){var e=this;this.columnGroup.getLeafColumns().forEach(function(r){e.addManagedListener(r,Mt.EVENT_VISIBLE_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(r,Mt.EVENT_VALUE_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(r,Mt.EVENT_PIVOT_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(r,Mt.EVENT_ROW_GROUP_CHANGED,e.onColumnStateChanged.bind(e))})},t.prototype.setupDragging=function(){var e=this;if(!this.allowDragging){E.setDisplayed(this.eDragHandle,!1);return}var r=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),n={type:Gn.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,defaultIconName:r?Et.ICON_HIDE:Et.ICON_NOT_ALLOWED,getDragItem:function(){return e.createDragItem()},onDragStarted:function(){var i={type:V.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:e.columnGroup};e.eventService.dispatchEvent(i)},onDragStopped:function(){var i={type:V.EVENT_COLUMN_PANEL_ITEM_DRAG_END};e.eventService.dispatchEvent(i)},onGridEnter:function(i){r&&e.modelItemUtils.updateColumns({columns:e.columnGroup.getLeafColumns(),visibleState:i==null?void 0:i.visibleState,pivotState:i==null?void 0:i.pivotState,eventType:e.eventType})},onGridExit:function(){r&&e.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(n,!0),this.addDestroyFunc(function(){return e.dragAndDropService.removeDragSource(n)})},t.prototype.createDragItem=function(){var e=this,r=this.columnGroup.getLeafColumns(),n={},i={};return r.forEach(function(a){var s=a.getId();n[s]=a.isVisible(),i[s]=e.modelItemUtils.createPivotState(a)}),{columns:r,visibleState:n,pivotState:i}},t.prototype.setupExpandContract=function(){this.eGroupClosedIcon.appendChild(E.createIcon("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(E.createIcon("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));var e=new _l(this.eColumnGroupIcons,!0);this.addManagedListener(e,_l.EVENT_TAP,this.onExpandOrContractClicked.bind(this)),this.addDestroyFunc(e.destroy.bind(e))},t.prototype.onLabelClicked=function(){var e=!this.cbSelect.getValue();this.onChangeCommon(e)},t.prototype.onCheckboxChanged=function(e){this.onChangeCommon(e.selected)},t.prototype.getVisibleLeafColumns=function(){var e=[],r=function(n){n.forEach(function(i){i.isPassesFilter()&&(i.isGroup()?r(i.getChildren()):e.push(i.getColumn()))})};return r(this.modelItem.getChildren()),e},t.prototype.onChangeCommon=function(e){this.refreshAriaLabel(),!this.processingColumnStateChange&&this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),e,this.eventType)},t.prototype.refreshAriaLabel=function(){var e=this.localeService.getLocaleTextFunc(),r=e("ariaColumnGroup","Column Group"),n=this.cbSelect.getValue(),i=n===void 0?e("ariaIndeterminate","indeterminate"):n?e("ariaVisible","visible"):e("ariaHidden","hidden"),a=e("ariaToggleVisibility","Press SPACE to toggle visibility");E.setAriaLabel(this.focusWrapper,this.displayName+" "+r),this.cbSelect.setInputAriaLabel(a+" ("+i+")"),E.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},t.prototype.onColumnStateChanged=function(){var e=this.workOutSelectedValue(),r=this.workOutReadOnlyValue();this.processingColumnStateChange=!0,this.cbSelect.setValue(e),this.cbSelect.setReadOnly(r),this.addOrRemoveCssClass("ag-column-select-column-group-readonly",r),this.processingColumnStateChange=!1},t.prototype.workOutSelectedValue=function(){var e=this,r=this.columnModel.isPivotMode(),n=this.getVisibleLeafColumns(),i=0,a=0;if(n.forEach(function(s){!r&&s.getColDef().lockVisible||(e.isColumnChecked(s,r)?i++:a++)}),!(i>0&&a>0))return i>0},t.prototype.workOutReadOnlyValue=function(){var e=this.columnModel.isPivotMode(),r=0;return this.columnGroup.getLeafColumns().forEach(function(n){e?n.isAnyFunctionAllowed()&&r++:n.getColDef().lockVisible||r++}),r===0},t.prototype.isColumnChecked=function(e,r){if(r){var n=e.isPivotActive(),i=e.isRowGroupActive(),a=e.isValueActive();return n||i||a}return e.isVisible()},t.prototype.onExpandOrContractClicked=function(){var e=this.modelItem.isExpanded();this.modelItem.setExpanded(!e)},t.prototype.onExpandChanged=function(){this.setOpenClosedIcons(),this.refreshAriaExpanded()},t.prototype.setOpenClosedIcons=function(){var e=this.modelItem.isExpanded();E.setDisplayed(this.eGroupClosedIcon,!e),E.setDisplayed(this.eGroupOpenedIcon,e)},t.prototype.refreshAriaExpanded=function(){E.setAriaExpanded(this.focusWrapper,this.modelItem.isExpanded())},t.prototype.getDisplayName=function(){return this.displayName},t.prototype.onSelectAllChanged=function(e){var r=this.cbSelect.getValue(),n=this.cbSelect.isReadOnly();!n&&(e&&!r||!e&&r)&&this.cbSelect.toggle()},t.prototype.isSelected=function(){return this.cbSelect.getValue()},t.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},t.prototype.setSelected=function(e){this.cbSelect.setValue(e,!0)},t.TEMPLATE=`<div class="ag-column-select-column-group" aria-hidden="true">
            <span class="ag-column-group-icons" ref="eColumnGroupIcons" >
                <span class="ag-column-group-closed-icon" ref="eGroupClosedIcon"></span>
                <span class="ag-column-group-opened-icon" ref="eGroupOpenedIcon"></span>
            </span>
            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>
            <span class="ag-column-select-column-label" ref="eLabel"></span>
        </div>`,Xr([D("columnModel")],t.prototype,"columnModel",void 0),Xr([D("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Xr([D("modelItemUtils")],t.prototype,"modelItemUtils",void 0),Xr([B("cbSelect")],t.prototype,"cbSelect",void 0),Xr([B("eLabel")],t.prototype,"eLabel",void 0),Xr([B("eGroupOpenedIcon")],t.prototype,"eGroupOpenedIcon",void 0),Xr([B("eGroupClosedIcon")],t.prototype,"eGroupClosedIcon",void 0),Xr([B("eColumnGroupIcons")],t.prototype,"eColumnGroupIcons",void 0),Xr([te],t.prototype,"init",null),t}(oe),n0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Bu=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Hu="ag-list-item-hovered",i0=function(o){n0(t,o);function t(e,r){var n=o.call(this)||this;return n.comp=e,n.virtualList=r,n.currentDragColumn=null,n.lastHoveredColumnItem=null,n}return t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,V.EVENT_COLUMN_PANEL_ITEM_DRAG_START,this.columnPanelItemDragStart.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PANEL_ITEM_DRAG_END,this.columnPanelItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()},t.prototype.columnPanelItemDragStart=function(e){var r=e.column;this.currentDragColumn=r;var n=this.getCurrentColumns(),i=n.find(function(a){var s=a.getColDef();return!!s.suppressMovable||!!s.lockPosition});i&&(this.moveBlocked=!0)},t.prototype.columnPanelItemDragEnd=function(){var e=this;window.setTimeout(function(){e.currentDragColumn=null,e.moveBlocked=!1},10)},t.prototype.createDropTarget=function(){var e=this,r={isInterestedIn:function(n){return n===Gn.ToolPanel},getIconName:function(){return Et[e.moveBlocked?"ICON_NOT_ALLOWED":"ICON_MOVE"]},getContainer:function(){return e.comp.getGui()},onDragging:function(n){return e.onDragging(n)},onDragStop:function(){return e.onDragStop()},onDragLeave:function(){return e.onDragLeave()}};this.dragAndDropService.addDropTarget(r)},t.prototype.createAutoScrollService=function(){var e=this.virtualList.getGui();this.autoScrollService=new Md({scrollContainer:e,scrollAxis:"y",getVerticalPosition:function(){return e.scrollTop},setVerticalPosition:function(r){return e.scrollTop=r}})},t.prototype.onDragging=function(e){if(!(!this.currentDragColumn||this.moveBlocked)){var r=this.getDragColumnItem(e),n=this.virtualList.getComponentAt(r.rowIndex);if(n){var i=n.getGui().parentElement;this.lastHoveredColumnItem&&this.lastHoveredColumnItem.rowIndex===r.rowIndex&&this.lastHoveredColumnItem.position===r.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredColumnItem=r,E.radioCssClass(i,""+Hu),E.radioCssClass(i,"ag-item-highlight-"+r.position))}}},t.prototype.getDragColumnItem=function(e){var r=this.virtualList.getGui(),n=parseFloat(window.getComputedStyle(r).paddingTop),i=this.virtualList.getRowHeight(),a=this.virtualList.getScrollTop(),s=Math.max(0,(e.y-n+a)/i),l=this.comp.getDisplayedColsList().length-1,u=Math.min(l,s)|0;return{rowIndex:u,position:Math.round(s)>s||s>l?"bottom":"top",component:this.virtualList.getComponentAt(u)}},t.prototype.onDragStop=function(){if(!this.moveBlocked){var e=this.getTargetIndex(),r=this.getCurrentColumns();e!=null&&this.columnModel.moveColumns(r,e,"toolPanelUi"),this.clearHoveredItems(),this.autoScrollService.ensureCleared()}},t.prototype.getMoveDiff=function(e){var r=this.columnModel.getAllGridColumns(),n=this.getCurrentColumns(),i=n[0],a=n.length,s=r.indexOf(i);return s<e?a:0},t.prototype.getCurrentColumns=function(){return this.currentDragColumn instanceof Cr?this.currentDragColumn.getLeafColumns():[this.currentDragColumn]},t.prototype.getTargetIndex=function(){if(!this.lastHoveredColumnItem)return null;var e=this.lastHoveredColumnItem.component,r=this.lastHoveredColumnItem.position==="top",n;if(e instanceof Pv){var i=e.getColumns();n=i[0],r=!0}else n=e.getColumn();var a=this.columnModel.getAllGridColumns().indexOf(n),s=r?a:a+1,l=this.getMoveDiff(s);return s-l},t.prototype.onDragLeave=function(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()},t.prototype.clearHoveredItems=function(){var e=this.virtualList.getGui();e.querySelectorAll("."+Hu).forEach(function(r){[Hu,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(function(n){r.classList.remove(n)})}),this.lastHoveredColumnItem=null},Bu([D("columnModel")],t.prototype,"columnModel",void 0),Bu([D("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Bu([te],t.prototype,"postConstruct",null),t}(pe),o0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vi=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},a0=function(o){o0(t,o);function t(e,r,n,i){var a=o.call(this)||this;return a.allowDragging=r,a.groupsExist=n,a.focusWrapper=i,a.processingColumnStateChange=!1,a.column=e.getColumn(),a.columnDept=e.getDept(),a.displayName=e.getDisplayName(),a}return t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE),this.eDragHandle=E.createIconNoSpan("columnDrag",this.gridOptionsService),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");var r=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();r.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1");var i=E.escapeString(this.displayName);this.eLabel.innerHTML=i;var a=this.columnDept;this.groupsExist&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass("ag-column-select-indent-"+a),this.setupDragging(),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,Mt.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,Mt.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,Mt.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,Mt.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.addManagedPropertyListener("functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListener(this.cbSelect,V.EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip();var s=Dd.getToolPanelClassesFromColDef(this.column.getColDef(),this.gridOptionsService,this.column,null);s.forEach(function(l){return e.addOrRemoveCssClass(l,!0)})},t.prototype.getColumn=function(){return this.column},t.prototype.setupTooltip=function(){var e=this,r=function(){var n=e.column.getColDef().headerTooltip;e.setTooltip(n)};r(),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,r)},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumn",e.colDef=this.column.getColDef(),e},t.prototype.onContextMenu=function(e){var r=this,n=this,i=n.column,a=n.gridOptionsService;if(!a.is("functionsReadOnly")){var s=this.createBean(new Tv(i,e,this.focusWrapper));this.addDestroyFunc(function(){s.isAlive()&&r.destroyBean(s)})}},t.prototype.handleKeyDown=function(e){e.key===ve.SPACE&&(e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))},t.prototype.onLabelClicked=function(){if(!this.gridOptionsService.is("functionsReadOnly")){var e=!this.cbSelect.getValue();this.onChangeCommon(e)}},t.prototype.onCheckboxChanged=function(e){this.onChangeCommon(e.selected)},t.prototype.onChangeCommon=function(e){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),!this.processingColumnStateChange&&this.modelItemUtils.setColumn(this.column,e,"toolPanelUi"))},t.prototype.refreshAriaLabel=function(){var e=this.localeService.getLocaleTextFunc(),r=e("ariaColumn","Column"),n=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden"),i=e("ariaToggleVisibility","Press SPACE to toggle visibility");E.setAriaLabel(this.focusWrapper,this.displayName+" "+r),this.cbSelect.setInputAriaLabel(i+" ("+n+")"),E.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},t.prototype.setupDragging=function(){var e=this;if(!this.allowDragging){E.setDisplayed(this.eDragHandle,!1);return}var r=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),n={type:Gn.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,defaultIconName:r?Et.ICON_HIDE:Et.ICON_NOT_ALLOWED,getDragItem:function(){return e.createDragItem()},onDragStarted:function(){var i={type:V.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:e.column};e.eventService.dispatchEvent(i)},onDragStopped:function(){var i={type:V.EVENT_COLUMN_PANEL_ITEM_DRAG_END};e.eventService.dispatchEvent(i)},onGridEnter:function(i){r&&e.modelItemUtils.updateColumns({columns:[e.column],visibleState:i==null?void 0:i.visibleState,pivotState:i==null?void 0:i.pivotState,eventType:"toolPanelUi"})},onGridExit:function(){r&&e.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(n,!0),this.addDestroyFunc(function(){return e.dragAndDropService.removeDragSource(n)})},t.prototype.createDragItem=function(){var e,r,n=this.column.getColId(),i=(e={},e[n]=this.column.isVisible(),e),a=(r={},r[n]=this.modelItemUtils.createPivotState(this.column),r);return{columns:[this.column],visibleState:i,pivotState:a}},t.prototype.onColumnStateChanged=function(){this.processingColumnStateChange=!0;var e=this.columnModel.isPivotMode();if(e){var r=this.column.isAnyFunctionActive();this.cbSelect.setValue(r)}else this.cbSelect.setValue(this.column.isVisible());var n=!0,i=!0;if(e){var a=this.gridOptionsService.is("functionsReadOnly"),s=!this.column.isAnyFunctionAllowed();n=!a&&!s,i=n}else{var l=this.column.getColDef(),u=l.enableRowGroup,c=l.enableValue,d=l.lockPosition,h=l.suppressMovable,f=l.lockVisible,p=!!u||!!c,v=!!d||!!h;n=!f,i=p||!v}this.cbSelect.setReadOnly(!n),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!i),this.addOrRemoveCssClass("ag-column-select-column-readonly",!i&&!n);var g=e&&this.gridOptionsService.is("functionsPassive");this.cbSelect.setPassive(g),this.processingColumnStateChange=!1},t.prototype.getDisplayName=function(){return this.displayName},t.prototype.onSelectAllChanged=function(e){e!==this.cbSelect.getValue()&&(this.cbSelect.isReadOnly()||this.cbSelect.toggle())},t.prototype.isSelected=function(){return this.cbSelect.getValue()},t.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},t.prototype.isExpandable=function(){return!1},t.prototype.setExpanded=function(e){console.warn("AG Grid: can not expand a column item that does not represent a column group header")},t.TEMPLATE=`<div class="ag-column-select-column" aria-hidden="true">
            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>
            <span class="ag-column-select-column-label" ref="eLabel"></span>
        </div>`,Vi([D("columnModel")],t.prototype,"columnModel",void 0),Vi([D("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Vi([D("modelItemUtils")],t.prototype,"modelItemUtils",void 0),Vi([B("eLabel")],t.prototype,"eLabel",void 0),Vi([B("cbSelect")],t.prototype,"cbSelect",void 0),Vi([te],t.prototype,"init",null),t}(oe),s0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),As=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},l0=function(){function o(t){this.items=t}return o.prototype.getRowCount=function(){return this.items.length},o.prototype.getRow=function(t){return this.items[t]},o}(),u0="ag-column-select-list",c0=function(o){s0(t,o);function t(){var e=o.call(this,t.TEMPLATE)||this;return e.destroyColumnItemFuncs=[],e}return t.prototype.destroyColumnTree=function(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach(function(e){return e()}),this.destroyColumnItemFuncs=[]},t.prototype.init=function(e,r,n){var i=this;this.params=e,this.allowDragging=r,this.eventType=n,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,V.EVENT_COLUMN_MOVED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.onColumnsChanged.bind(this));var a=[V.EVENT_COLUMN_PIVOT_CHANGED,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,V.EVENT_COLUMN_ROW_GROUP_CHANGED,V.EVENT_COLUMN_VALUE_CHANGED,V.EVENT_COLUMN_VISIBLE,V.EVENT_NEW_COLUMNS_LOADED];a.forEach(function(u){i.addManagedListener(i.eventService,u,i.fireSelectionChangedEvent.bind(i))}),this.expandGroupsByDefault=!this.params.contractColumnSelection;var s=this.localeService.getLocaleTextFunc(),l=s("ariaColumnList","Column List");this.virtualList=this.createManagedBean(new Rd({cssIdentifier:"column-select",ariaRole:"tree",listName:l})),this.appendChild(this.virtualList.getGui()),this.virtualList.setComponentCreator(function(u,c){return E.setAriaLevel(c,u.getDept()+1),i.createComponentFromItem(u,c)}),this.columnModel.isReady()&&this.onColumnsChanged(),!e.suppressColumnMove&&!this.gridOptionsService.is("suppressMovableColumns")&&this.createManagedBean(new i0(this,this.virtualList))},t.prototype.createComponentFromItem=function(e,r){if(e.isGroup()){var n=new Pv(e,this.allowDragging,this.eventType,r);return this.getContext().createBean(n),n}var i=new a0(e,this.allowDragging,this.groupsExist,r);return this.getContext().createBean(i),i},t.prototype.onColumnsChanged=function(){var e=this.getExpandedStates(),r=this.columnModel.isPivotMode(),n=!this.params.suppressSyncLayoutWithGrid&&!r;n?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(e),this.markFilteredColumns(),this.flattenAndFilterModel()},t.prototype.getDisplayedColsList=function(){return this.displayedColsList},t.prototype.getExpandedStates=function(){if(!this.allColsTree)return{};var e={};return this.forEachItem(function(r){if(r.isGroup()){var n=r.getColumnGroup();n&&(e[n.getId()]=r.isExpanded())}}),e},t.prototype.setExpandedStates=function(e){this.allColsTree&&this.forEachItem(function(r){if(r.isGroup()){var n=r.getColumnGroup();if(n){var i=e[n.getId()],a=i!=null;a&&r.setExpanded(i)}}})},t.prototype.buildTreeFromWhatGridIsDisplaying=function(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))},t.prototype.setColumnLayout=function(e){var r=this.colDefService.createColumnTree(e);this.buildListModel(r),this.groupsExist=e.some(function(n){return n&&typeof n.children<"u"}),this.markFilteredColumns(),this.flattenAndFilterModel()},t.prototype.buildTreeFromProvidedColumnDefs=function(){this.buildListModel(this.columnModel.getPrimaryColumnTree()),this.groupsExist=this.columnModel.isPrimaryColumnGroupsPresent()},t.prototype.buildListModel=function(e){var r=this,n=this.onColumnExpanded.bind(this),i=function(u){u.addEventListener(Ba.EVENT_EXPANDED_CHANGED,n);var c=u.removeEventListener.bind(u,Ba.EVENT_EXPANDED_CHANGED,n);r.destroyColumnItemFuncs.push(c)},a=function(u,c,d){u.forEach(function(h){h instanceof Cr?s(h,c,d):l(h,c,d)})},s=function(u,c,d){var h=u.getColGroupDef(),f=h&&h.suppressColumnsToolPanel;if(!f){if(u.isPadding()){a(u.getChildren(),c,d);return}var p=r.columnModel.getDisplayNameForProvidedColumnGroup(null,u,"columnToolPanel"),v=new Ba(p,u,c,!0,r.expandGroupsByDefault);d.push(v),i(v),a(u.getChildren(),c+1,v.getChildren())}},l=function(u,c,d){var h=u.getColDef()&&u.getColDef().suppressColumnsToolPanel;if(!h){var f=r.columnModel.getDisplayNameForColumn(u,"columnToolPanel");d.push(new Ba(f,u,c))}};this.destroyColumnTree(),a(e,0,this.allColsTree)},t.prototype.onColumnExpanded=function(){this.flattenAndFilterModel()},t.prototype.flattenAndFilterModel=function(){var e=this;this.displayedColsList=[];var r=function(i){i.isPassesFilter()&&(e.displayedColsList.push(i),i.isGroup()&&i.isExpanded()&&i.getChildren().forEach(r))};this.allColsTree.forEach(r),this.virtualList.setModel(new l0(this.displayedColsList));var n=this.virtualList.getLastFocusedRow();this.virtualList.refresh(),n!=null&&this.focusRowIfAlive(n),this.notifyListeners()},t.prototype.focusRowIfAlive=function(e){var r=this;window.setTimeout(function(){r.isAlive()&&r.virtualList.focusRow(e)},0)},t.prototype.forEachItem=function(e){var r=function(n){n.forEach(function(i){e(i),i.isGroup()&&r(i.getChildren())})};r(this.allColsTree)},t.prototype.doSetExpandedAll=function(e){this.forEachItem(function(r){r.isGroup()&&r.setExpanded(e)})},t.prototype.setGroupsExpanded=function(e,r){if(!r){this.doSetExpandedAll(e);return}var n=[];this.forEachItem(function(a){if(a.isGroup()){var s=a.getColumnGroup().getId();r.indexOf(s)>=0&&(a.setExpanded(e),n.push(s))}});var i=r.filter(function(a){return!E.includes(n,a)});i.length>0&&console.warn("AG Grid: unable to find group(s) for supplied groupIds:",i)},t.prototype.getExpandState=function(){var e=0,r=0;return this.forEachItem(function(n){n.isGroup()&&(n.isExpanded()?e++:r++)}),e>0&&r>0?Gr.INDETERMINATE:r>0?Gr.COLLAPSED:Gr.EXPANDED},t.prototype.doSetSelectedAll=function(e){this.modelItemUtils.selectAllChildren(this.allColsTree,e,this.eventType)},t.prototype.getSelectionState=function(){var e=0,r=0,n=this.columnModel.isPivotMode();if(this.forEachItem(function(i){if(!i.isGroup()&&i.isPassesFilter()){var a=i.getColumn(),s=a.getColDef(),l;if(n){var u=!a.isAllowPivot()&&!a.isAllowRowGroup()&&!a.isAllowValue();if(u)return;l=a.isValueActive()||a.isPivotActive()||a.isRowGroupActive()}else{if(s.lockVisible)return;l=a.isVisible()}l?e++:r++}}),!(e>0&&r>0))return!(e===0||r>0)},t.prototype.setFilterText=function(e){this.filterText=E.exists(e)?e.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()},t.prototype.markFilteredColumns=function(){var e=this,r=function(i){if(!E.exists(e.filterText))return!0;var a=i.getDisplayName();return a==null||a.toLowerCase().indexOf(e.filterText)!==-1},n=function(i,a){var s=!1;if(i.isGroup()){var l=r(i);i.getChildren().forEach(function(c){var d=n(c,l||a);d&&(s=d)})}var u=a||s?!0:r(i);return i.setPassesFilter(u),u};this.allColsTree.forEach(function(i){return n(i,!1)})},t.prototype.notifyListeners=function(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()},t.prototype.fireGroupExpandedEvent=function(){var e=this.getExpandState();this.dispatchEvent({type:"groupExpanded",state:e})},t.prototype.fireSelectionChangedEvent=function(){var e=this.getSelectionState();this.dispatchEvent({type:"selectionChanged",state:e})},t.TEMPLATE='<div class="'+u0+'" role="presentation"></div>',As([D("columnModel")],t.prototype,"columnModel",void 0),As([D("toolPanelColDefService")],t.prototype,"colDefService",void 0),As([D("modelItemUtils")],t.prototype,"modelItemUtils",void 0),As([br],t.prototype,"destroyColumnTree",null),t}(oe),d0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zu=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},wh=function(o){d0(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.createTemplate=function(){return`<div class="ag-pivot-mode-panel">
                <ag-toggle-button ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>
            </div>`},t.prototype.init=function(){this.setTemplate(this.createTemplate()),this.cbPivotMode.setValue(this.columnModel.isPivotMode());var e=this.localeService.getLocaleTextFunc();this.cbPivotMode.setLabel(e("pivotMode","Pivot Mode")),this.addManagedListener(this.cbPivotMode,V.EVENT_FIELD_VALUE_CHANGED,this.onBtPivotMode.bind(this)),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this))},t.prototype.onBtPivotMode=function(){var e=!!this.cbPivotMode.getValue();if(e!==this.columnModel.isPivotMode()){this.columnModel.setPivotMode(e,"toolPanelUi");var r=this.gridOptionsService.api;r&&r.refreshHeader()}},t.prototype.onPivotModeChanged=function(){var e=this.columnModel.isPivotMode();this.cbPivotMode.setValue(e)},zu([D("columnModel")],t.prototype,"columnModel",void 0),zu([B("cbPivotMode")],t.prototype,"cbPivotMode",void 0),zu([pu],t.prototype,"init",null),t}(oe),h0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),$n=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},f0=function(o){h0(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.init=function(){var e=this;this.alwaysAggregateAtRootLevel=this.gridOptionsService.is("alwaysAggregateAtRootLevel"),this.addManagedPropertyListener("alwaysAggregateAtRootLevel",function(r){return e.alwaysAggregateAtRootLevel=r.currentValue}),this.groupIncludeTotalFooter=this.gridOptionsService.is("groupIncludeTotalFooter"),this.addManagedPropertyListener("groupIncludeTotalFooter",function(r){return e.groupIncludeTotalFooter=r.currentValue})},t.prototype.execute=function(e){var r=E.missingOrEmpty(this.columnModel.getValueColumns()),n=!this.gridOptionsService.getCallback("getGroupRowAgg"),i=e.changedPath&&e.changedPath.isActive();if(!(r&&n&&i)){var a=this.createAggDetails(e);this.recursivelyCreateAggData(a)}},t.prototype.createAggDetails=function(e){var r=this.columnModel.isPivotActive(),n=this.columnModel.getValueColumns(),i=r?this.columnModel.getPivotColumns():[],a={changedPath:e.changedPath,valueColumns:n,pivotColumns:i};return a},t.prototype.isSuppressAggFilteredOnly=function(){var e=this.gridOptionsService.getGroupAggFiltering()!==void 0;return e||this.gridOptionsService.is("suppressAggFilteredOnly")},t.prototype.recursivelyCreateAggData=function(e){var r=this;this.filteredOnly=!this.isSuppressAggFilteredOnly();var n=function(i){var a=!i.hasChildren();if(a){i.aggData&&i.setAggData(null);return}var s=i.level===-1;if(s&&!r.groupIncludeTotalFooter){var l=!r.columnModel.isPivotMode();if(!r.alwaysAggregateAtRootLevel&&l)return}r.aggregateRowNode(i,e)};e.changedPath.forEachChangedNodeDepthFirst(n,!0)},t.prototype.aggregateRowNode=function(e,r){var n=r.valueColumns.length===0,i=r.pivotColumns.length===0,a=this.gridOptionsService.getCallback("getGroupRowAgg"),s;if(a){var l={nodes:e.childrenAfterFilter};s=a(l)}else n?s=null:i?s=this.aggregateRowNodeUsingValuesOnly(e,r):s=this.aggregateRowNodeUsingValuesAndPivot(e);e.setAggData(s),e.sibling&&e.sibling.setAggData(s)},t.prototype.aggregateRowNodeUsingValuesAndPivot=function(e){var r=this,n,i={},a=(n=this.columnModel.getSecondaryColumns())!==null&&n!==void 0?n:[];return a.forEach(function(s){var l=s.getColDef(),u=l.pivotValueColumn,c=l.pivotTotalColumnIds,d=l.colId,h=l.pivotKeys;if(!E.exists(c)){var f=h??[],p;e.leafGroup?p=r.getValuesFromMappedSet(e.childrenMapped,f,u):p=r.getValuesPivotNonLeaf(e,d),i[d]=r.aggregateValues(p,u.getAggFunc(),u,e,s)}}),a.forEach(function(s){var l=s.getColDef(),u=l.pivotValueColumn,c=l.pivotTotalColumnIds,d=l.colId;if(E.exists(c)){var h=[];!c||!c.length||(c.forEach(function(f){h.push(i[f])}),i[d]=r.aggregateValues(h,u.getAggFunc(),u,e,s))}}),i},t.prototype.aggregateRowNodeUsingValuesOnly=function(e,r){var n=this,i={},a=r.changedPath.isActive()?r.changedPath.getValueColumnsForNode(e,r.valueColumns):r.valueColumns,s=r.changedPath.isActive()?r.changedPath.getNotValueColumnsForNode(e,r.valueColumns):null,l=this.getValuesNormal(e,a),u=e.aggData;return a.forEach(function(c,d){i[c.getId()]=n.aggregateValues(l[d],c.getAggFunc(),c,e)}),s&&u&&s.forEach(function(c){i[c.getId()]=u[c.getId()]}),i},t.prototype.getValuesPivotNonLeaf=function(e,r){var n=[];return e.childrenAfterFilter.forEach(function(i){var a=i.aggData[r];n.push(a)}),n},t.prototype.getValuesFromMappedSet=function(e,r,n){var i=this,a=e;if(r.forEach(function(l){return a=a?a[l]:null}),!a)return[];var s=[];return a.forEach(function(l){var u=i.valueService.getValue(n,l);s.push(u)}),s},t.prototype.getValuesNormal=function(e,r){var n=[];r.forEach(function(){return n.push([])});for(var i=r.length,a=this.filteredOnly?e.childrenAfterFilter:e.childrenAfterGroup,s=a.length,l=0;l<s;l++)for(var u=a[l],c=0;c<i;c++){var d=r[c],h=this.valueService.getValue(d,u);n[c].push(h)}return n},t.prototype.aggregateValues=function(e,r,n,i,a){var s=typeof r=="string"?this.aggFuncService.getAggFunc(r):r;if(typeof s!="function")return console.error("AG Grid: unrecognised aggregation function "+r),null;var l=s,u={values:e,column:n,colDef:n?n.getColDef():void 0,pivotResultColumn:a,rowNode:i,data:i?i.data:void 0,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};return l(u)},$n([D("columnModel")],t.prototype,"columnModel",void 0),$n([D("valueService")],t.prototype,"valueService",void 0),$n([D("aggFuncService")],t.prototype,"aggFuncService",void 0),$n([D("gridApi")],t.prototype,"gridApi",void 0),$n([D("columnApi")],t.prototype,"columnApi",void 0),$n([te],t.prototype,"init",null),t=$n([be("aggregationStage")],t),t}(pe),Wu=function(){function o(){this.allSets={},this.allParents=[]}return o.prototype.removeFromChildrenAfterGroup=function(t,e){var r=this.getSet(t);r.removeFromChildrenAfterGroup[e.id]=!0},o.prototype.isRemoveFromAllLeafChildren=function(t,e){var r=this.getSet(t);return!!r.removeFromAllLeafChildren[e.id]},o.prototype.preventRemoveFromAllLeafChildren=function(t,e){var r=this.getSet(t);delete r.removeFromAllLeafChildren[e.id]},o.prototype.removeFromAllLeafChildren=function(t,e){var r=this.getSet(t);r.removeFromAllLeafChildren[e.id]=!0},o.prototype.getSet=function(t){return this.allSets[t.id]||(this.allSets[t.id]={removeFromAllLeafChildren:{},removeFromChildrenAfterGroup:{}},this.allParents.push(t)),this.allSets[t.id]},o.prototype.getAllParents=function(){return this.allParents},o.prototype.flush=function(){var t=this;this.allParents.forEach(function(e){var r=t.allSets[e.id];e.childrenAfterGroup=e.childrenAfterGroup.filter(function(n){return!r.removeFromChildrenAfterGroup[n.id]}),e.allLeafChildren=e.allLeafChildren.filter(function(n){return!r.removeFromAllLeafChildren[n.id]}),e.updateHasChildren(),e.sibling&&(e.sibling.childrenAfterGroup=e.childrenAfterGroup,e.sibling.allLeafChildren=e.allLeafChildren)}),this.allSets={},this.allParents.length=0},o}(),p0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xn=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},bh=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},_h=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},v0=function(o){p0(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.groupIdSequence=new xr,e}return t.prototype.postConstruct=function(){this.usingTreeData=this.gridOptionsService.isTreeData(),this.usingTreeData&&(this.getDataPath=this.gridOptionsService.get("getDataPath"))},t.prototype.execute=function(e){var r=this.createGroupingDetails(e);if(r.transactions)this.handleTransaction(r);else{var n=e.afterColumnsChanged===!0;this.shotgunResetEverything(r,n)}this.positionLeafsAndGroups(e.changedPath),this.orderGroups(r.rootNode),this.selectableService.updateSelectableAfterGrouping(r.rootNode)},t.prototype.positionLeafsAndGroups=function(e){this.usingTreeData||e.forEachChangedNodeDepthFirst(function(r){if(r.childrenAfterGroup){var n=[],i=[],a;r.childrenAfterGroup.forEach(function(s){var l;!((l=s.childrenAfterGroup)===null||l===void 0)&&l.length?s.key===""&&!a?a=s:i.push(s):n.push(s)}),a&&i.push(a),r.childrenAfterGroup=_h(_h([],bh(n)),bh(i))}},!1)},t.prototype.createGroupingDetails=function(e){var r=e.rowNode,n=e.changedPath,i=e.rowNodeTransactions,a=e.rowNodeOrder,s=this.usingTreeData?null:this.columnModel.getRowGroupColumns(),l={includeParents:!this.gridOptionsService.is("suppressParentsInRowNodes"),expandByDefault:this.gridOptionsService.getNum("groupDefaultExpanded"),groupedCols:s,rootNode:r,pivotMode:this.columnModel.isPivotMode(),groupedColCount:this.usingTreeData||!s?0:s.length,rowNodeOrder:a,transactions:i,changedPath:n};return l},t.prototype.handleTransaction=function(e){var r=this;e.transactions.forEach(function(n){var i=r.usingTreeData?void 0:new Wu;if(E.existsAndNotEmpty(n.remove)&&r.removeNodes(n.remove,e,i),E.existsAndNotEmpty(n.update)&&r.moveNodesInWrongPath(n.update,e,i),E.existsAndNotEmpty(n.add)&&r.insertNodes(n.add,e,!1),i){var a=i.getAllParents().slice();i.flush(),r.removeEmptyGroups(a,e)}}),e.rowNodeOrder&&this.sortChildren(e)},t.prototype.sortChildren=function(e){e.changedPath.forEachChangedNodeDepthFirst(function(r){if(r.childrenAfterGroup){var n=E.sortRowNodesByOrder(r.childrenAfterGroup,e.rowNodeOrder);n&&e.changedPath.addParentNode(r)}},!1,!0)},t.prototype.orderGroups=function(e){if(this.usingTreeData)return;var r=this.gridOptionsService.getCallback("initialGroupOrderComparator");E.exists(r)&&n(e);function n(i){var a=E.exists(i.childrenAfterGroup)&&!i.leafGroup;a&&(i.childrenAfterGroup.sort(function(s,l){return r({nodeA:s,nodeB:l})}),i.childrenAfterGroup.forEach(function(s){return n(s)}))}},t.prototype.getExistingPathForNode=function(e,r){for(var n=[],i=this.usingTreeData?e:e.parent;i&&i!==r.rootNode;)n.push({key:i.key,rowGroupColumn:i.rowGroupColumn,field:i.field}),i=i.parent;return n.reverse(),n},t.prototype.moveNodesInWrongPath=function(e,r,n){var i=this;e.forEach(function(a){r.changedPath.isActive()&&r.changedPath.addParentNode(a.parent);var s=function(d){return d.key},l=i.getExistingPathForNode(a,r).map(s),u=i.getGroupInfo(a,r).map(s),c=E.areEqual(l,u);c||i.moveNode(a,r,n)})},t.prototype.moveNode=function(e,r,n){if(this.removeNodesInStages([e],r,n),this.insertOneNode(e,r,!0,n),e.setData(e.data),r.changedPath.isActive()){var i=e.parent;r.changedPath.addParentNode(i)}},t.prototype.removeNodes=function(e,r,n){this.removeNodesInStages(e,r,n),r.changedPath.isActive()&&e.forEach(function(i){return r.changedPath.addParentNode(i.parent)})},t.prototype.removeNodesInStages=function(e,r,n){if(this.removeNodesFromParents(e,r,n),this.usingTreeData){this.postRemoveCreateFillerNodes(e,r);var i=e.map(function(a){return a.parent});this.removeEmptyGroups(i,r)}},t.prototype.forEachParentGroup=function(e,r,n){for(var i=r;i&&i!==e.rootNode;)n(i),i=i.parent},t.prototype.removeNodesFromParents=function(e,r,n){var i=this,a=n==null,s=n||new Wu;e.forEach(function(l){i.removeFromParent(l,s),i.forEachParentGroup(r,l.parent,function(u){s.removeFromAllLeafChildren(u,l)})}),a&&s.flush()},t.prototype.postRemoveCreateFillerNodes=function(e,r){var n=this;e.forEach(function(i){var a=i.hasChildren();if(a){var s=n.getExistingPathForNode(i,r),l=n.findParentForNode(i,s,r);l.expanded=i.expanded,l.allLeafChildren=i.allLeafChildren,l.childrenAfterGroup=i.childrenAfterGroup,l.childrenMapped=i.childrenMapped,l.updateHasChildren(),l.childrenAfterGroup.forEach(function(u){return u.parent=l})}})},t.prototype.removeEmptyGroups=function(e,r){for(var n=this,i=!0,a=function(l){var u=n.getChildrenMappedKey(l.key,l.rowGroupColumn),c=l.parent,d=c&&c.childrenMapped?!c.childrenMapped[u]:!0;return d?!1:!!l.isEmptyRowGroupNode()},s=function(){i=!1;var l=new Wu;e.forEach(function(u){n.forEachParentGroup(r,u,function(c){a(c)&&(i=!0,n.removeFromParent(c,l),c.setSelectedParams({newValue:!1,source:"rowGroupChanged"}))})}),l.flush()};i;)s()},t.prototype.removeFromParent=function(e,r){e.parent&&(r?r.removeFromChildrenAfterGroup(e.parent,e):(E.removeFromArray(e.parent.childrenAfterGroup,e),e.parent.updateHasChildren()));var n=this.getChildrenMappedKey(e.key,e.rowGroupColumn);e.parent&&e.parent.childrenMapped&&(e.parent.childrenMapped[n]=void 0),e.setRowTop(null),e.setRowIndex(null)},t.prototype.addToParent=function(e,r){var n=this.getChildrenMappedKey(e.key,e.rowGroupColumn);if(r){var i=r.childrenMapped!=null;i&&(r.childrenMapped[n]=e),r.childrenAfterGroup.push(e),r.updateHasChildren()}},t.prototype.areGroupColsEqual=function(e,r){return e==null||r==null||e.pivotMode!==r.pivotMode?!1:E.areEqual(e.groupedCols,r.groupedCols)},t.prototype.checkAllGroupDataAfterColsChanged=function(e){var r=this,n=function(i){i&&i.forEach(function(a){var s=!r.usingTreeData&&!a.group;if(!s){var l={field:a.field,key:a.key,rowGroupColumn:a.rowGroupColumn};r.setGroupData(a,l),n(a.childrenAfterGroup)}})};n(e.rootNode.childrenAfterGroup)},t.prototype.shotgunResetEverything=function(e,r){if(!this.noChangeInGroupingColumns(e,r)){this.selectionService.filterFromSelection(function(s){return s&&!s.group});var n=e.rootNode,i=e.groupedCols;n.leafGroup=this.usingTreeData?!1:i.length===0,n.childrenAfterGroup=[],n.childrenMapped={},n.updateHasChildren();var a=n.sibling;a&&(a.childrenAfterGroup=n.childrenAfterGroup,a.childrenMapped=n.childrenMapped),this.insertNodes(n.allLeafChildren,e,!1)}},t.prototype.noChangeInGroupingColumns=function(e,r){var n=!1,i=this.columnModel.getGroupDisplayColumns(),a=i?i.map(function(s){return s.getId()}).join("-"):"";return r&&(n=this.usingTreeData||this.areGroupColsEqual(e,this.oldGroupingDetails),this.oldGroupDisplayColIds!==a&&this.checkAllGroupDataAfterColsChanged(e)),this.oldGroupingDetails=e,this.oldGroupDisplayColIds=a,n},t.prototype.insertNodes=function(e,r,n){var i=this;e.forEach(function(a){i.insertOneNode(a,r,n),r.changedPath.isActive()&&r.changedPath.addParentNode(a.parent)})},t.prototype.insertOneNode=function(e,r,n,i){var a=this.getGroupInfo(e,r),s=this.findParentForNode(e,a,r,i);s.group||console.warn("AG Grid: duplicate group keys for row data, keys should be unique",[s.data,e.data]),this.usingTreeData?this.swapGroupWithUserNode(s,e,n):(e.parent=s,e.level=a.length,s.childrenAfterGroup.push(e),s.updateHasChildren())},t.prototype.findParentForNode=function(e,r,n,i){var a=this,s=n.rootNode;return r.forEach(function(l,u){s=a.getOrCreateNextNode(s,l,u,n),i!=null&&i.isRemoveFromAllLeafChildren(s,e)?i==null||i.preventRemoveFromAllLeafChildren(s,e):s.allLeafChildren.push(e)}),s},t.prototype.swapGroupWithUserNode=function(e,r,n){r.parent=e.parent,r.key=e.key,r.field=e.field,r.groupData=e.groupData,r.level=e.level,n||(r.expanded=e.expanded),r.leafGroup=e.leafGroup,r.rowGroupIndex=e.rowGroupIndex,r.allLeafChildren=e.allLeafChildren,r.childrenAfterGroup=e.childrenAfterGroup,r.childrenMapped=e.childrenMapped,r.sibling=e.sibling,r.updateHasChildren(),this.removeFromParent(e),r.childrenAfterGroup.forEach(function(i){return i.parent=r}),this.addToParent(r,e.parent)},t.prototype.getOrCreateNextNode=function(e,r,n,i){var a=this.getChildrenMappedKey(r.key,r.rowGroupColumn),s=e.childrenMapped?e.childrenMapped[a]:void 0;return s||(s=this.createGroup(r,e,n,i),this.addToParent(s,e)),s},t.prototype.createGroup=function(e,r,n,i){var a=new Uo(this.beans);return a.group=!0,a.field=e.field,a.rowGroupColumn=e.rowGroupColumn,this.setGroupData(a,e),a.id=Uo.ID_PREFIX_ROW_GROUP+this.groupIdSequence.next(),a.key=e.key,a.level=n,a.leafGroup=this.usingTreeData?!1:n===i.groupedColCount-1,a.allLeafChildren=[],a.setAllChildrenCount(0),a.rowGroupIndex=this.usingTreeData?null:n,a.childrenAfterGroup=[],a.childrenMapped={},a.updateHasChildren(),a.parent=i.includeParents?r:null,this.setExpandedInitialValue(i,a),this.gridOptionsService.is("groupIncludeFooter")&&a.createFooter(),a},t.prototype.setGroupData=function(e,r){var n=this;e.groupData={};var i=this.columnModel.getGroupDisplayColumns();i.forEach(function(a){var s=n.usingTreeData||(e.rowGroupColumn?a.isRowGroupDisplayed(e.rowGroupColumn.getId()):!1);s&&(e.groupData[a.getColId()]=r.key)})},t.prototype.getChildrenMappedKey=function(e,r){return r?r.getId()+"-"+e:e},t.prototype.setExpandedInitialValue=function(e,r){if(e.pivotMode&&r.leafGroup){r.expanded=!1;return}var n=this.gridOptionsService.getCallback("isGroupOpenByDefault");if(n){var i={rowNode:r,field:r.field,key:r.key,level:r.level,rowGroupColumn:r.rowGroupColumn};r.expanded=n(i)==!0;return}var a=e.expandByDefault;if(e.expandByDefault===-1){r.expanded=!0;return}r.expanded=r.level<a},t.prototype.getGroupInfo=function(e,r){return this.usingTreeData?this.getGroupInfoFromCallback(e):this.getGroupInfoFromGroupColumns(e,r)},t.prototype.getGroupInfoFromCallback=function(e){var r=this.getDataPath?this.getDataPath(e.data):null;(r==null||r.length===0)&&E.doOnce(function(){return console.warn("AG Grid: getDataPath() should not return an empty path for data",e.data)},"groupStage.getGroupInfoFromCallback");var n=function(i){return{key:i,field:null,rowGroupColumn:null}};return r?r.map(n):[]},t.prototype.getGroupInfoFromGroupColumns=function(e,r){var n=this,i=[];return r.groupedCols.forEach(function(a){var s=n.valueService.getKeyForNode(a,e),l=s!=null&&s!=="",u=r.pivotMode||!n.gridOptionsService.is("groupAllowUnbalanced");if(u&&!l&&(s="",l=!0),l){var c={key:s,field:a.getColDef().field,rowGroupColumn:a};i.push(c)}}),i},Xn([D("columnModel")],t.prototype,"columnModel",void 0),Xn([D("selectableService")],t.prototype,"selectableService",void 0),Xn([D("valueService")],t.prototype,"valueService",void 0),Xn([D("beans")],t.prototype,"beans",void 0),Xn([D("selectionService")],t.prototype,"selectionService",void 0),Xn([te],t.prototype,"postConstruct",null),t=Xn([be("groupStage")],t),t}(pe),g0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),El=function(){return El=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},El.apply(this,arguments)},Ds=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ms=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},ji=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},y0=function(o){g0(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}e=t,t.prototype.init=function(){var r=this,n,i;this.fieldSeparator=(n=this.gos.get("serverSidePivotResultFieldSeparator"))!==null&&n!==void 0?n:"_",this.addManagedPropertyListener("serverSidePivotResultFieldSeparator",function(a){return r.fieldSeparator=a.currentValue}),this.pivotDefaultExpanded=(i=this.gos.getNum("pivotDefaultExpanded"))!==null&&i!==void 0?i:0,this.addManagedPropertyListener("pivotDefaultExpanded",function(a){return r.pivotDefaultExpanded=a.currentValue})},t.prototype.createPivotColumnDefs=function(r){var n=this.createPivotColumnsFromUniqueValues(r);function i(l,u){return u===void 0&&(u=[]),l.forEach(function(c){c.children!==void 0?i(c.children,u):u.push(c)}),u}var a=i(n);this.addRowGroupTotals(n,a),this.addExpandablePivotGroups(n,a),this.addPivotTotalsToGroups(n,a);var s=a.map(function(l){return E.cloneObject(l)});return{pivotColumnGroupDefs:n,pivotColumnDefs:s}},t.prototype.createPivotColumnsFromUniqueValues=function(r){var n=this.columnModel.getPivotColumns(),i=n.length,a=this.recursivelyBuildGroup(0,r,[],i,n);return a},t.prototype.recursivelyBuildGroup=function(r,n,i,a,s){var l=this,u=this.columnModel.getValueColumns();if(r>=a)return this.buildMeasureCols(i);var c=s[r].getColDef(),d=this.headerNameComparator.bind(this,c.pivotComparator);if(u.length===1&&this.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn")&&r===a-1){var h=[];return E.iterateObject(n,function(p){var v=ji(ji([],Ms(i)),[p]),g=l.createColDef(u[0],p,v);g.columnGroupShow="open",h.push(g)}),h.sort(d),h}var f=[];return E.iterateObject(n,function(p,v){var g=l.pivotDefaultExpanded===-1||r<l.pivotDefaultExpanded,m=ji(ji([],Ms(i)),[p]);f.push({children:l.recursivelyBuildGroup(r+1,v,m,a,s),headerName:p,pivotKeys:m,columnGroupShow:"open",openByDefault:g,groupId:l.generateColumnGroupId(m)})}),f.sort(d),f},t.prototype.buildMeasureCols=function(r){var n=this,i=this.columnModel.getValueColumns();return i.length===0?[this.createColDef(null,"-",r)]:i.map(function(a){var s=n.columnModel.getDisplayNameForColumn(a,"header");return El(El({},n.createColDef(a,s,r)),{columnGroupShow:"open"})})},t.prototype.addExpandablePivotGroups=function(r,n){var i=this;if(!(this.gridOptionsService.is("suppressExpandablePivotGroups")||this.gridOptionsService.get("pivotColumnGroupTotals"))){var a=function(s,l,u){var c=s;if(c.children){var d=new Map;c.children.forEach(function(g){a(g,l,d)});var h=!c.children.some(function(g){return g.children});i.columnModel.getValueColumns().forEach(function(g){var m=i.columnModel.getDisplayNameForColumn(g,"header"),y=i.createColDef(g,m,s.pivotKeys);if(y.pivotTotalColumnIds=d.get(g.getColId()),y.columnGroupShow="closed",y.aggFunc=g.getAggFunc(),!h){var S=s.children;S.push(y),l.push(y)}}),i.merge(u,d)}else{var f=s;if(!f.pivotValueColumn)return;var p=f.pivotValueColumn.getColId(),v=u.has(p)?u.get(p):[];v.push(f.colId),u.set(p,v)}};r.forEach(function(s){a(s,n,new Map)})}},t.prototype.addPivotTotalsToGroups=function(r,n){var i=this;if(this.gridOptionsService.get("pivotColumnGroupTotals")){var a=this.gridOptionsService.get("pivotColumnGroupTotals")==="after",s=this.columnModel.getValueColumns(),l=s.map(function(c){return c.getAggFunc()});if(!(!l||l.length<1||!this.sameAggFuncs(l))){var u=s[0];r.forEach(function(c){i.recursivelyAddPivotTotal(c,n,u,a)})}}},t.prototype.recursivelyAddPivotTotal=function(r,n,i,a){var s=this,l=r;if(!l.children){var u=r;return u.colId?[u.colId]:null}var c=[];if(l.children.forEach(function(v){var g=s.recursivelyAddPivotTotal(v,n,i,a);g&&(c=c.concat(g))}),l.children.length>1){var d=this.localeService.getLocaleTextFunc(),h=d("pivotColumnGroupTotals","Total"),f=this.createColDef(i,h,r.pivotKeys,!0);f.pivotTotalColumnIds=c,f.aggFunc=i.getAggFunc();var p=r.children;a?p.push(f):p.unshift(f),n.push(f)}return c},t.prototype.addRowGroupTotals=function(r,n){var i=this;if(this.gridOptionsService.get("pivotRowTotals"))for(var a=this.gridOptionsService.get("pivotRowTotals")==="after",s=this.columnModel.getValueColumns(),l=a?s.slice():s.slice().reverse(),u=function(h){var f=l[h],p=[];r.forEach(function(g){p=p.concat(i.extractColIdsForValueColumn(g,f))});var v=l.length>1||!c.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn");c.createRowGroupTotal(r,n,f,p,a,v)},c=this,d=0;d<l.length;d++)u(d)},t.prototype.extractColIdsForValueColumn=function(r,n){var i=this,a=r;if(!a.children){var s=a;return s.pivotValueColumn===n&&s.colId?[s.colId]:[]}var l=[];return a.children.forEach(function(u){i.extractColIdsForValueColumn(u,n);var c=i.extractColIdsForValueColumn(u,n);l=l.concat(c)}),l},t.prototype.createRowGroupTotal=function(r,n,i,a,s,l){var u=this.columnModel.getValueColumns(),c;if(u.length===0)c=this.createColDef(null,"-",[]);else{var d=this.columnModel.getDisplayNameForColumn(i,"header");c=this.createColDef(i,d,[]),c.pivotTotalColumnIds=a}c.colId=e.PIVOT_ROW_TOTAL_PREFIX+c.colId,n.push(c);var h=l?{children:[c],pivotKeys:[],groupId:e.PIVOT_ROW_TOTAL_PREFIX+"_pivotGroup_"+i.getColId()}:c;s?r.push(h):r.unshift(h)},t.prototype.createColDef=function(r,n,i,a){a===void 0&&(a=!1);var s={};if(r){var l=r.getColDef();Object.assign(s,l),s.hide=!1}return s.headerName=n,s.colId=this.generateColumnId(i||[],r&&!a?r.getColId():""),s.field=s.colId,s.valueGetter=function(u){var c;return(c=u.data)===null||c===void 0?void 0:c[u.colDef.field]},s.pivotKeys=i,s.pivotValueColumn=r,s.filter===!0&&(s.filter="agNumberColumnFilter"),s},t.prototype.sameAggFuncs=function(r){if(r.length==1)return!0;for(var n=1;n<r.length;n++)if(r[n]!==r[0])return!1;return!0},t.prototype.headerNameComparator=function(r,n,i){return r?r(n.headerName,i.headerName):n.headerName&&!i.headerName?1:!n.headerName&&i.headerName?-1:!n.headerName||!i.headerName?0:n.headerName<i.headerName?-1:n.headerName>i.headerName?1:0},t.prototype.merge=function(r,n){n.forEach(function(i,a,s){var l=r.has(a)?r.get(a):[],u=ji(ji([],Ms(l)),Ms(i));r.set(a,u)})},t.prototype.generateColumnGroupId=function(r){var n=this.columnModel.getPivotColumns().map(function(i){return i.getColId()});return"pivotGroup_"+n.join("-")+"_"+r.join("-")},t.prototype.generateColumnId=function(r,n){var i=this.columnModel.getPivotColumns().map(function(a){return a.getColId()});return"pivot_"+i.join("-")+"_"+r.join("-")+"_"+n},t.prototype.createColDefsFromFields=function(r){for(var n=this,i={},a=0;a<r.length;a++)for(var s=r[a],l=s.split(this.fieldSeparator),u=i,c=0;c<l.length;c++){var d=l[c];u[d]==null&&(u[d]={}),u=u[d]}var h=function(m,y,S,C){var w,x=[];for(var b in S){var _=S[b],T=h(""+m+n.fieldSeparator+b,b,_,C+1);x.push(T)}if(x.length===0){var O={colId:m,headerName:y,valueGetter:function(R){var L;return(L=R.data)===null||L===void 0?void 0:L[m]}},P=n.columnModel.getPrimaryColumn(y);return P&&(O.headerName=(w=n.columnModel.getDisplayNameForColumn(P,"header"))!==null&&w!==void 0?w:y,O.aggFunc=P.getAggFunc(),O.pivotValueColumn=P),O}var M=n.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn");if(M&&x.length===1&&"colId"in x[0])return x[0].headerName=y,x[0];var I={openByDefault:n.pivotDefaultExpanded===-1||C<n.pivotDefaultExpanded,groupId:m,headerName:y,children:x};return I},f=[];for(var p in i){var v=i[p],g=h(p,p,v,0);f.push(g)}return f};var e;return t.PIVOT_ROW_TOTAL_PREFIX="PivotRowTotal_",Ds([D("columnModel")],t.prototype,"columnModel",void 0),Ds([D("gridOptionsService")],t.prototype,"gos",void 0),Ds([te],t.prototype,"init",null),t=e=Ds([be("pivotColDefService")],t),t}(pe),m0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rs=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},S0=function(o){m0(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.uniqueValues={},e}return t.prototype.execute=function(e){var r=e.changedPath;this.columnModel.isPivotActive()?this.executePivotOn(r):this.executePivotOff(r)},t.prototype.executePivotOff=function(e){this.aggregationColumnsHashLastTime=null,this.uniqueValues={},this.columnModel.isSecondaryColumnsPresent()&&(this.columnModel.setSecondaryColumns(null,"rowModelUpdated"),e&&e.setInactive())},t.prototype.executePivotOn=function(e){var r=this.bucketUpRowNodes(e),n=this.setUniqueValues(r),i=this.columnModel.getValueColumns(),a=i.map(function(v){return v.getId()+"-"+v.getColDef().headerName}).join("#"),s=i.map(function(v){return v.getAggFunc().toString()}).join("#"),l=this.aggregationColumnsHashLastTime!==a,u=this.aggregationFuncsHashLastTime!==s;this.aggregationColumnsHashLastTime=a,this.aggregationFuncsHashLastTime=s;var c=this.columnModel.getRowGroupColumns().map(function(v){return v.getId()}).join("#"),d=c!==this.groupColumnsHashLastTime;if(this.groupColumnsHashLastTime=c,n||l||d||u){var h=this.pivotColDefService.createPivotColumnDefs(this.uniqueValues),f=h.pivotColumnGroupDefs,p=h.pivotColumnDefs;this.pivotColumnDefs=p,this.columnModel.setSecondaryColumns(f,"rowModelUpdated"),e&&e.setInactive()}},t.prototype.setUniqueValues=function(e){var r=JSON.stringify(e),n=JSON.stringify(this.uniqueValues),i=r!==n;return i?(this.uniqueValues=e,!0):!1},t.prototype.bucketUpRowNodes=function(e){var r=this,n={};e.forEachChangedNodeDepthFirst(function(a){a.leafGroup&&(a.childrenMapped=null)});var i=function(a){var s;a.leafGroup?r.bucketRowNode(a,n):(s=a.childrenAfterFilter)===null||s===void 0||s.forEach(i)};return e.executeFromRootNode(i),n},t.prototype.bucketRowNode=function(e,r){var n=this.columnModel.getPivotColumns();n.length===0?e.childrenMapped=null:e.childrenMapped=this.bucketChildren(e.childrenAfterFilter,n,0,r),e.sibling&&(e.sibling.childrenMapped=e.childrenMapped)},t.prototype.bucketChildren=function(e,r,n,i){var a=this,s={},l=r[n];if(e.forEach(function(c){var d=a.valueService.getKeyForNode(l,c);E.missing(d)&&(d=""),i[d]||(i[d]={}),s[d]||(s[d]=[]),s[d].push(c)}),n===r.length-1)return s;var u={};return E.iterateObject(s,function(c,d){u[c]=a.bucketChildren(d,r,n+1,i[c])}),u},t.prototype.getPivotColumnDefs=function(){return this.pivotColumnDefs},Rs([D("valueService")],t.prototype,"valueService",void 0),Rs([D("columnModel")],t.prototype,"columnModel",void 0),Rs([D("pivotColDefService")],t.prototype,"pivotColDefService",void 0),t=Rs([be("pivotStage")],t),t}(pe),C0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Oh=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Nr=typeof BigInt>"u"?null:BigInt,x0=function(o){C0(t,o);function t(){var r=o!==null&&o.apply(this,arguments)||this;return r.aggFuncsMap={},r.initialised=!1,r}e=t,t.prototype.init=function(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gridOptionsService.get("aggFuncs")))},t.prototype.initialiseWithDefaultAggregations=function(){this.aggFuncsMap[e.AGG_SUM]=w0,this.aggFuncsMap[e.AGG_FIRST]=b0,this.aggFuncsMap[e.AGG_LAST]=_0,this.aggFuncsMap[e.AGG_MIN]=O0,this.aggFuncsMap[e.AGG_MAX]=E0,this.aggFuncsMap[e.AGG_COUNT]=T0,this.aggFuncsMap[e.AGG_AVG]=P0,this.initialised=!0},t.prototype.isAggFuncPossible=function(r,n){var i=this.getFuncNames(r),a=E.includes(i,n),s=E.exists(this.aggFuncsMap[n]);return a&&s},t.prototype.getDefaultAggFunc=function(r){var n=r.getColDef().defaultAggFunc;if(E.exists(n)&&this.isAggFuncPossible(r,n))return n;if(this.isAggFuncPossible(r,e.AGG_SUM))return e.AGG_SUM;var i=this.getFuncNames(r);return E.existsAndNotEmpty(i)?i[0]:null},t.prototype.addAggFuncs=function(r){E.iterateObject(r,this.addAggFunc.bind(this))},t.prototype.addAggFunc=function(r,n){this.init(),this.aggFuncsMap[r]=n},t.prototype.getAggFunc=function(r){return this.init(),this.aggFuncsMap[r]},t.prototype.getFuncNames=function(r){var n=r.getColDef().allowedAggFuncs;return n??Object.keys(this.aggFuncsMap).sort()},t.prototype.clear=function(){this.aggFuncsMap={}};var e;return t.AGG_SUM="sum",t.AGG_FIRST="first",t.AGG_LAST="last",t.AGG_MIN="min",t.AGG_MAX="max",t.AGG_COUNT="count",t.AGG_AVG="avg",Oh([te],t.prototype,"init",null),t=e=Oh([be("aggFuncService")],t),t}(pe);function w0(o){for(var t=o.values,e=null,r=0;r<t.length;r++){var n=t[r];typeof n=="number"?e===null?e=n:Nr?e+=typeof e=="number"?n:Nr(n):e+=n:typeof n=="bigint"&&(e===null?e=n:e=(typeof e=="bigint"?e:Nr(e))+n)}return e}function b0(o){return o.values.length>0?o.values[0]:null}function _0(o){return o.values.length>0?E.last(o.values):null}function O0(o){for(var t=o.values,e=null,r=0;r<t.length;r++){var n=t[r];(typeof n=="number"||typeof n=="bigint")&&(e===null||e>n)&&(e=n)}return e}function E0(o){for(var t=o.values,e=null,r=0;r<t.length;r++){var n=t[r];(typeof n=="number"||typeof n=="bigint")&&(e===null||e<n)&&(e=n)}return e}function T0(o){for(var t,e,r=o.values,n=0,i=0;i<r.length;i++){var a=r[i];n+=a!=null&&typeof a.value=="number"?a.value:1}var s=(e=(t=o.rowNode)===null||t===void 0?void 0:t.aggData)===null||e===void 0?void 0:e[o.column.getColId()];return s&&s.value===n?s:{value:n,toString:function(){return this.value.toString()},toNumber:function(){return this.value}}}function P0(o){for(var t,e,r,n=o.values,i=0,a=0,s=0;s<n.length;s++){var l=n[s],u=null;typeof l=="number"||typeof l=="bigint"?(u=l,a++):l!=null&&(typeof l.value=="number"||typeof l.value=="bigint")&&typeof l.count=="number"&&(Nr?u=l.value*(typeof l.value=="number"?l.count:Nr(l.count)):u=l.value*l.count,a+=l.count),typeof u=="number"?Nr?i+=typeof i=="number"?u:Nr(u):i+=u:typeof u=="bigint"&&(i=(typeof i=="bigint"?i:Nr(i))+u)}var c=null;a>0&&(Nr?c=i/(typeof i=="number"?a:Nr(a)):c=i/a);var d=(e=(t=o.rowNode)===null||t===void 0?void 0:t.aggData)===null||e===void 0?void 0:e[(r=o.column)===null||r===void 0?void 0:r.getColId()];return d&&d.count===a&&d.value===c?d:{count:a,value:c,toString:function(){return typeof this.value=="number"||typeof this.value=="bigint"?this.value.toString():""},toNumber:function(){return this.value}}}var Av=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Er=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Eh=function(o){Av(t,o);function t(e,r,n,i,a){var s=o.call(this)||this;return s.column=e,s.dragSourceDropTarget=r,s.ghost=n,s.dropZonePurpose=i,s.horizontal=a,s.popupShowing=!1,s}return t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE);var r=this.getGui(),n=this.gridOptionsService.is("functionsReadOnly");this.addElementClasses(r),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(E.createIconNoSpan("columnDrag",this.gridOptionsService)),this.eButton.appendChild(E.createIconNoSpan("cancel",this.gridOptionsService)),this.setupSort(),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnDrop"),this.setupComponents(),!this.ghost&&!n&&this.addDragSource(),this.setupAria(),this.addManagedListener(this.eventService,Mt.EVENT_SORT_CHANGED,function(){e.setupAria()}),this.setupTooltip(),this.activateTabIndex()},t.prototype.setupAria=function(){var e=this.localeService.getLocaleTextFunc(),r=this.getColumnAndAggFuncName(),n=r.name,i=r.aggFuncName,a=e("ariaDropZoneColumnComponentAggFuncSeparator"," of "),s={asc:e("ariaDropZoneColumnComponentSortAscending","ascending"),desc:e("ariaDropZoneColumnComponentSortDescending","descending")},l=this.column.getSort(),u=this.gridOptionsService.is("rowGroupPanelSuppressSort"),c=[[i&&""+i+a,n,this.isGroupingZone()&&!u&&l&&", "+s[l]].filter(function(v){return!!v}).join("")],d=this.gridOptionsService.is("functionsReadOnly");if(this.isAggregationZone()&&!d){var h=e("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");c.push(h)}if(this.isGroupingZone()&&this.column.getColDef().sortable&&!u){var f=e("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");c.push(f)}var p=e("ariaDropZoneColumnComponentDescription","Press DELETE to remove");c.push(p),E.setAriaLabel(this.getGui(),c.join(". "))},t.prototype.setupTooltip=function(){var e=this,r=function(){var n=e.column.getColDef().headerTooltip;e.setTooltip(n)};r(),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,r)},t.prototype.setupSort=function(){var e=this,r=this.column.getColDef().sortable,n=this.isGroupingZone();if(!(!r||!n)&&!this.gridOptionsService.is("rowGroupPanelSuppressSort")){this.eSortIndicator.setupSort(this.column,!0);var i=function(a){a.preventDefault();var s=e.gridOptionsService.get("multiSortKey")==="ctrl",l=s?a.ctrlKey||a.metaKey:a.shiftKey;e.sortController.progressSort(e.column,l,"uiColumnSorted")};this.addGuiEventListener("click",i),this.addGuiEventListener("keydown",function(a){var s=a.key===ve.ENTER;s&&e.isGroupingZone()&&i(a)})}},t.prototype.addDragSource=function(){var e=this,r={type:Gn.ToolPanel,eElement:this.eDragHandle,defaultIconName:Et.ICON_HIDE,getDragItem:function(){return e.createDragItem()},dragItemName:this.displayName,dragSourceDropTarget:this.dragSourceDropTarget};this.dragAndDropService.addDragSource(r,!0),this.addDestroyFunc(function(){return e.dragAndDropService.removeDragSource(r)})},t.prototype.createDragItem=function(){var e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}},t.prototype.setupComponents=function(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost"),this.isAggregationZone()&&!this.gridOptionsService.is("functionsReadOnly")&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))},t.prototype.setupRemove=function(){var e=this;E.setDisplayed(this.eButton,!this.gridOptionsService.is("functionsReadOnly"));var r={type:t.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",function(i){var a=i.key===ve.ENTER,s=i.key===ve.DELETE;s&&(i.preventDefault(),e.dispatchEvent(r)),a&&e.isAggregationZone()&&!e.gridOptionsService.is("functionsReadOnly")&&(i.preventDefault(),e.onShowAggFuncSelection())}),this.addManagedListener(this.eButton,"click",function(i){e.dispatchEvent(r),i.stopPropagation()});var n=new _l(this.eButton);this.addManagedListener(n,_l.EVENT_TAP,function(){e.dispatchEvent(r)}),this.addDestroyFunc(n.destroy.bind(n))},t.prototype.getColumnAndAggFuncName=function(){var e=this.displayName,r="";if(this.isAggregationZone()){var n=this.column.getAggFunc(),i=typeof n=="string"?n:"agg",a=this.localeService.getLocaleTextFunc();r=a(i,i)}return{name:e,aggFuncName:r}},t.prototype.setTextValue=function(){var e=this.getColumnAndAggFuncName(),r=e.name,n=e.aggFuncName,i=this.isAggregationZone()?n+"("+r+")":r,a=E.escapeString(i);this.eText.innerHTML=a},t.prototype.onShowAggFuncSelection=function(){var e=this;if(!this.popupShowing){this.popupShowing=!0;var r=new Rd({cssIdentifier:"select-agg-func"}),n=this.aggFuncService.getFuncNames(this.column),i=this.getGui(),a=r.getGui();r.setModel({getRow:function(f){return n[f]},getRowCount:function(){return n.length}}),this.getContext().createBean(r);var s=E.loadTemplate('<div class="ag-select-agg-func-popup"></div>');s.style.top="0px",s.style.left="0px",s.appendChild(a),s.style.width=i.clientWidth+"px";var l=this.addManagedListener(s,"focusout",function(f){!s.contains(f.relatedTarget)&&d&&d.hideFunc()}),u=function(f){e.destroyBean(r),e.popupShowing=!1,(f==null?void 0:f.key)==="Escape"&&i.focus(),l&&l()},c=this.localeService.getLocaleTextFunc(),d=this.popupService.addPopup({modal:!0,eChild:s,closeOnEsc:!0,closedCallback:u,ariaLabel:c("ariaLabelAggregationFunction","Aggregation Function")});d&&r.setComponentCreator(this.createAggSelect.bind(this,d.hideFunc)),r.addGuiEventListener("keydown",function(f){if(f.key===ve.ENTER||f.key===ve.SPACE){var p=r.getLastFocusedRow();if(p==null)return;var v=r.getComponentAt(p);v&&v.selectItem()}}),this.popupService.positionPopupByComponent({type:"aggFuncSelect",eventSource:i,ePopup:s,keepWithinBounds:!0,column:this.column,position:"under"}),r.refresh();var h=n.findIndex(function(f){return f===e.column.getAggFunc()});h===-1&&(h=0),r.focusRow(h)}},t.prototype.createAggSelect=function(e,r){var n=this,i=function(){if(e(),n.gridOptionsService.is("functionsPassive")){var c={type:V.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,columns:[n.column],aggFunc:r};n.eventService.dispatchEvent(c)}else n.columnModel.setColumnAggFunc(n.column,r,"toolPanelDragAndDrop")},a=this.localeService.getLocaleTextFunc(),s=r.toString(),l=a(s,s),u=new A0(i,l);return u},t.prototype.addElementClasses=function(e,r){r=r?"-"+r:"";var n=this.horizontal?"horizontal":"vertical";e.classList.add("ag-column-drop-cell"+r,"ag-column-drop-"+n+"-cell"+r)},t.prototype.isAggregationZone=function(){return this.dropZonePurpose==="aggregation"},t.prototype.isGroupingZone=function(){return this.dropZonePurpose==="rowGroup"},t.EVENT_COLUMN_REMOVE="columnRemove",t.TEMPLATE=`<span role="option">
          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>
          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>
          <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>
        </span>`,Er([D("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Er([D("columnModel")],t.prototype,"columnModel",void 0),Er([D("popupService")],t.prototype,"popupService",void 0),Er([zr("aggFuncService")],t.prototype,"aggFuncService",void 0),Er([D("sortController")],t.prototype,"sortController",void 0),Er([B("eText")],t.prototype,"eText",void 0),Er([B("eDragHandle")],t.prototype,"eDragHandle",void 0),Er([B("eButton")],t.prototype,"eButton",void 0),Er([B("eSortIndicator")],t.prototype,"eSortIndicator",void 0),Er([te],t.prototype,"init",null),t}(oe),A0=function(o){Av(t,o);function t(e,r){var n=o.call(this,'<div class="ag-select-agg-func-item"/>')||this;return n.selectItem=e,n.getGui().innerText=r,n.addGuiEventListener("click",n.selectItem),n}return t}(oe),D0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Th=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ph=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Ah=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Nd=function(o){D0(t,o);function t(e,r){var n=o.call(this,'<div class="ag-unselectable" role="presentation"></div>')||this;return n.horizontal=e,n.dropZonePurpose=r,n.state=t.STATE_NOT_DRAGGING,n.guiDestroyFunctions=[],n.childColumnComponents=[],n.resizeEnabled=!1,n.addElementClasses(n.getGui()),n.eColumnDropList=document.createElement("div"),n.addElementClasses(n.eColumnDropList,"list"),E.setAriaRole(n.eColumnDropList,"listbox"),n}return t.prototype.isHorizontal=function(){return this.horizontal},t.prototype.toggleResizable=function(e){this.positionableFeature.setResizable(e?{bottom:!0}:!1),this.resizeEnabled=e},t.prototype.setBeans=function(e){this.beans=e},t.prototype.destroy=function(){this.destroyGui(),o.prototype.destroy.call(this)},t.prototype.destroyGui=function(){this.guiDestroyFunctions.forEach(function(e){return e()}),this.guiDestroyFunctions.length=0,this.childColumnComponents.length=0,E.clearElement(this.getGui()),E.clearElement(this.eColumnDropList)},t.prototype.init=function(e){this.params=e,this.createManagedBean(new Sv(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.addManagedListener(this.beans.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.refreshGui.bind(this)),this.addManagedPropertyListener("functionsReadOnly",this.refreshGui.bind(this)),this.setupDropTarget(),this.positionableFeature=new Cv(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),E.setAriaLabel(this.eColumnDropList,this.getAriaLabel())},t.prototype.handleKeyDown=function(e){var r=!this.horizontal,n=e.key===ve.DOWN,i=e.key===ve.UP;if(!r){var a=this.gridOptionsService.is("enableRtl");n=!a&&e.key===ve.RIGHT||a&&e.key===ve.LEFT,i=!a&&e.key===ve.LEFT||a&&e.key===ve.RIGHT}if(!(!n&&!i)){var s=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,i);s&&(e.preventDefault(),s.focus())}},t.prototype.addElementClasses=function(e,r){r=r?"-"+r:"";var n=this.horizontal?"horizontal":"vertical";e.classList.add("ag-column-drop"+r,"ag-column-drop-"+n+r)},t.prototype.setupDropTarget=function(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.beans.dragAndDropService.addDropTarget(this.dropTarget)},t.prototype.isInterestedIn=function(e){return e===Gn.HeaderCell||e===Gn.ToolPanel},t.prototype.checkInsertIndex=function(e){var r=this.getNewInsertIndex(e);if(r<0)return!1;var n=r!==this.insertIndex;return n&&(this.insertIndex=r),n},t.prototype.getNewInsertIndex=function(e){var r=this,n=e.event,i=this.horizontal?n.clientX:n.clientY,a=this.childColumnComponents.map(function(d){return d.getGui().getBoundingClientRect()}),s=a.findIndex(function(d){return r.horizontal?d.right>i&&d.left<i:d.top<i&&d.bottom>i});if(s===-1){var l=this.beans.gridOptionsService.is("enableRtl"),u=a.every(function(d){return i>(r.horizontal?d.right:d.bottom)});if(u)return l&&this.horizontal?0:this.childColumnComponents.length;var c=a.every(function(d){return i<(r.horizontal?d.left:d.top)});return c?l&&this.horizontal?this.childColumnComponents.length:0:this.insertIndex}return this.insertIndex<=s?s+1:s},t.prototype.checkDragStartedBySelf=function(e){this.state===t.STATE_NOT_DRAGGING&&(this.state=t.STATE_REARRANGE_COLUMNS,this.potentialDndColumns=e.dragSource.getDragItem().columns||[],this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())},t.prototype.onDragging=function(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()},t.prototype.onDragEnter=function(e){var r=e.dragSource.getDragItem().columns||[];this.state=t.STATE_NEW_COLUMNS_IN;var n=r.filter(this.isColumnDroppable.bind(this));if(n.length>0){var i=this.isRowGroupPanel()&&!this.gridOptionsService.is("suppressRowGroupHidesColumns")&&!e.fromNudge;if(i){var a=e.dragSource.getDragItem(),s=a.columns;this.setColumnsVisible(s,!1,"uiColumnDragged")}this.potentialDndColumns=n,this.checkInsertIndex(e),this.refreshGui()}},t.prototype.setColumnsVisible=function(e,r,n){if(n===void 0&&(n="api"),e){var i=e.filter(function(a){return!a.getColDef().lockVisible});this.colModel.setColumnsVisible(i,r,n)}},t.prototype.isPotentialDndColumns=function(){return E.existsAndNotEmpty(this.potentialDndColumns)},t.prototype.isRowGroupPanel=function(){return this.dropZonePurpose==="rowGroup"},t.prototype.onDragLeave=function(e){if(this.state===t.STATE_REARRANGE_COLUMNS){var r=e.dragSource.getDragItem().columns||[];this.removeColumns(r)}if(this.isPotentialDndColumns()){var n=this.isRowGroupPanel()&&!this.gridOptionsService.is("suppressMakeColumnVisibleAfterUnGroup")&&!e.fromNudge;if(n){var i=e.dragSource.getDragItem();this.setColumnsVisible(i.columns,!0,"uiColumnDragged")}this.potentialDndColumns=[],this.refreshGui()}this.state=t.STATE_NOT_DRAGGING},t.prototype.onDragStop=function(){if(this.isPotentialDndColumns()){var e=!1;this.state===t.STATE_NEW_COLUMNS_IN?(this.addColumns(this.potentialDndColumns),e=!0):e=this.rearrangeColumns(this.potentialDndColumns),this.potentialDndColumns=[],(!this.beans.gridOptionsService.is("functionsPassive")||!e)&&this.refreshGui()}this.state=t.STATE_NOT_DRAGGING},t.prototype.removeColumns=function(e){var r=this.getExistingColumns().filter(function(n){return!E.includes(e,n)});this.updateColumns(r)},t.prototype.addColumns=function(e){if(e){var r=this.getExistingColumns().slice(),n=e.filter(function(i){return r.indexOf(i)<0});E.insertArrayIntoArray(r,n,this.insertIndex),this.updateColumns(r)}},t.prototype.rearrangeColumns=function(e){var r=this.getNonGhostColumns().slice();return E.insertArrayIntoArray(r,e,this.insertIndex),E.areEqual(r,this.getExistingColumns())?!1:(this.updateColumns(r),!0)},t.prototype.refreshGui=function(){var e=this.eColumnDropList.scrollTop,r=this.resizeEnabled,n=this.getFocusedItem(),i=this.focusService.findNextFocusableElement();i||(i=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addColumnsToGui(),this.isHorizontal()||(this.eColumnDropList.scrollTop=e),r&&this.toggleResizable(r),this.focusService.isKeyboardMode()&&this.restoreFocus(n,i)},t.prototype.getFocusedItem=function(){var e=this.getGui(),r=this.gridOptionsService.getDocument().activeElement;if(!e.contains(r))return-1;var n=Array.from(e.querySelectorAll(".ag-column-drop-cell"));return n.indexOf(r)},t.prototype.restoreFocus=function(e,r){var n=this.getGui(),i=Array.from(n.querySelectorAll(".ag-column-drop-cell"));if(e!==-1){i.length===0&&r.focus();var a=Math.min(i.length-1,e),s=i[a];s&&s.focus()}},t.prototype.getNonGhostColumns=function(){var e=this,r=this.getExistingColumns();return this.isPotentialDndColumns()?r.filter(function(n){return!E.includes(e.potentialDndColumns,n)}):r},t.prototype.addColumnsToGui=function(){var e=this,r=this.getNonGhostColumns(),n=r.map(function(a){return e.createColumnComponent(a,!1)});if(this.isPotentialDndColumns()){var i=this.potentialDndColumns.map(function(a){return e.createColumnComponent(a,!0)});this.insertIndex>=n.length?n.push.apply(n,Ah([],Ph(i))):n.splice.apply(n,Ah([this.insertIndex,0],Ph(i)))}this.appendChild(this.eColumnDropList),n.forEach(function(a,s){s>0&&e.addArrow(e.eColumnDropList),e.eColumnDropList.appendChild(a.getGui())}),this.addAriaLabelsToComponents()},t.prototype.addAriaLabelsToComponents=function(){var e=this;this.childColumnComponents.forEach(function(r,n){var i=r.getGui();E.setAriaPosInSet(i,n+1),E.setAriaSetSize(i,e.childColumnComponents.length)})},t.prototype.createColumnComponent=function(e,r){var n=this,i=new Eh(e,this.dropTarget,r,this.dropZonePurpose,this.horizontal);return i.addEventListener(Eh.EVENT_COLUMN_REMOVE,this.removeColumns.bind(this,[e])),this.beans.context.createBean(i),this.guiDestroyFunctions.push(function(){return n.destroyBean(i)}),r||this.childColumnComponents.push(i),i},t.prototype.addIconAndTitleToGui=function(){var e=this.params.icon,r=document.createElement("div");if(E.setAriaHidden(r,!0),this.addElementClasses(r,"title-bar"),this.addElementClasses(e,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingColumnsEmpty()),r.appendChild(e),!this.horizontal){var n=document.createElement("span");this.addElementClasses(n,"title"),n.innerHTML=this.params.title,r.appendChild(n)}this.appendChild(r)},t.prototype.isExistingColumnsEmpty=function(){return this.getExistingColumns().length===0},t.prototype.addEmptyMessageToGui=function(){if(!(!this.isExistingColumnsEmpty()||this.isPotentialDndColumns())){var e=document.createElement("span");e.innerHTML=this.params.emptyMessage,this.addElementClasses(e,"empty-message"),this.eColumnDropList.appendChild(e)}},t.prototype.addArrow=function(e){if(this.horizontal){var r=this.beans.gridOptionsService.is("enableRtl"),n=E.createIconNoSpan(r?"smallLeft":"smallRight",this.beans.gridOptionsService);this.addElementClasses(n,"cell-separator"),e.appendChild(n)}},t.STATE_NOT_DRAGGING="notDragging",t.STATE_NEW_COLUMNS_IN="newColumnsIn",t.STATE_REARRANGE_COLUMNS="rearrangeColumns",Th([D("columnModel")],t.prototype,"colModel",void 0),Th([D("focusService")],t.prototype,"focusService",void 0),t}(oe),M0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Is=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Kc=function(o){M0(t,o);function t(e){return o.call(this,e,"rowGroup")||this}return t.prototype.passBeansUp=function(){o.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.localeService.getLocaleTextFunc(),r=e("rowGroupColumnsEmptyMessage","Drag here to set row groups"),n=e("groups","Row Groups");o.prototype.init.call(this,{dragAndDropIcon:Et.ICON_GROUP,icon:E.createIconNoSpan("rowGroupPanel",this.gridOptionsService,null),emptyMessage:r,title:n}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,this.refreshGui.bind(this))},t.prototype.getAriaLabel=function(){var e=this.localeService.getLocaleTextFunc(),r=e("ariaRowGroupDropZonePanelLabel","Row Groups");return r},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="rowGroupColumnsList",e},t.prototype.isColumnDroppable=function(e){return this.gridOptionsService.is("functionsReadOnly")||!e.isPrimary()?!1:e.isAllowRowGroup()&&!e.isRowGroupActive()},t.prototype.updateColumns=function(e){if(this.gridOptionsService.is("functionsPassive")){var r={type:V.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:e};this.eventService.dispatchEvent(r)}else this.columnModel.setRowGroupColumns(e,"toolPanelUi")},t.prototype.getIconName=function(){return this.isPotentialDndColumns()?Et.ICON_GROUP:Et.ICON_NOT_ALLOWED},t.prototype.getExistingColumns=function(){return this.columnModel.getRowGroupColumns()},Is([D("columnModel")],t.prototype,"columnModel",void 0),Is([D("loggerFactory")],t.prototype,"loggerFactory",void 0),Is([D("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Is([te],t.prototype,"passBeansUp",null),t}(Nd),R0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ls=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},$c=function(o){R0(t,o);function t(e){return o.call(this,e,"pivot")||this}return t.prototype.passBeansUp=function(){o.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.localeService.getLocaleTextFunc(),r=e("pivotColumnsEmptyMessage","Drag here to set column labels"),n=e("pivots","Column Labels");o.prototype.init.call(this,{dragAndDropIcon:Et.ICON_GROUP,icon:E.createIconNoSpan("pivotPanel",this.gridOptionsService,null),emptyMessage:r,title:n}),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.refresh.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.checkVisibility.bind(this)),this.refresh()},t.prototype.getAriaLabel=function(){var e=this.localeService.getLocaleTextFunc(),r=e("ariaPivotDropZonePanelLabel","Column Labels");return r},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="pivotColumnsList",e},t.prototype.refresh=function(){this.checkVisibility(),this.refreshGui()},t.prototype.checkVisibility=function(){var e=this.columnModel.isPivotMode();if(this.isHorizontal())switch(this.gridOptionsService.get("pivotPanelShow")){case"always":this.setDisplayed(e);break;case"onlyWhenPivoting":var r=this.columnModel.isPivotActive();this.setDisplayed(e&&r);break;default:this.setDisplayed(!1);break}else this.setDisplayed(e)},t.prototype.isColumnDroppable=function(e){return this.gridOptionsService.is("functionsReadOnly")||!e.isPrimary()?!1:e.isAllowPivot()&&!e.isPivotActive()},t.prototype.updateColumns=function(e){if(this.gridOptionsService.is("functionsPassive")){var r={type:V.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:e};this.eventService.dispatchEvent(r)}else this.columnModel.setPivotColumns(e,"toolPanelUi")},t.prototype.getIconName=function(){return this.isPotentialDndColumns()?Et.ICON_PIVOT:Et.ICON_NOT_ALLOWED},t.prototype.getExistingColumns=function(){return this.columnModel.getPivotColumns()},Ls([D("columnModel")],t.prototype,"columnModel",void 0),Ls([D("loggerFactory")],t.prototype,"loggerFactory",void 0),Ls([D("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Ls([te],t.prototype,"passBeansUp",null),t}(Nd),I0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dh=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},L0=function(o){I0(t,o);function t(){return o.call(this)||this}return t.prototype.postConstruct=function(){this.setGui(this.createNorthPanel()),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.onRowGroupChanged.bind(this)),this.addManagedPropertyListener("rowGroupPanelShow",this.onRowGroupChanged.bind(this)),this.onRowGroupChanged()},t.prototype.createNorthPanel=function(){var e=document.createElement("div"),r=this.onDropPanelVisible.bind(this);return e.classList.add("ag-column-drop-wrapper"),E.setAriaRole(e,"presentation"),this.rowGroupComp=new Kc(!0),this.createManagedBean(this.rowGroupComp),this.pivotComp=new $c(!0),this.createManagedBean(this.pivotComp),e.appendChild(this.rowGroupComp.getGui()),e.appendChild(this.pivotComp.getGui()),this.addManagedListener(this.rowGroupComp,oe.EVENT_DISPLAYED_CHANGED,r),this.addManagedListener(this.pivotComp,oe.EVENT_DISPLAYED_CHANGED,r),this.onDropPanelVisible(),e},t.prototype.onDropPanelVisible=function(){var e=this.rowGroupComp.isDisplayed()&&this.pivotComp.isDisplayed();this.rowGroupComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e),this.pivotComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e)},t.prototype.onRowGroupChanged=function(){if(this.rowGroupComp){var e=this.gridOptionsService.get("rowGroupPanelShow");if(e==="always")this.rowGroupComp.setDisplayed(!0);else if(e==="onlyWhenGrouping"){var r=!this.columnModel.isRowGroupEmpty();this.rowGroupComp.setDisplayed(r)}else this.rowGroupComp.setDisplayed(!1)}},Dh([D("columnModel")],t.prototype,"columnModel",void 0),Dh([te],t.prototype,"postConstruct",null),t}(oe),F0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Uu=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},k0=function(o){F0(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.execute=function(e){var r=this,n=this.columnModel.isPivotMode(),i=this.filterManager.isAggregateFilterPresent()||this.filterManager.isAggregateQuickFilterPresent(),a=function(h){return!h.node.group},s=function(h){return h.node.leafGroup},l=this.gridOptionsService.getGroupAggFiltering()||(n?s:a),u=e.changedPath,c=function(h,f){f===void 0&&(f=!1),h.childrenAfterFilter&&(h.childrenAfterAggFilter=h.childrenAfterFilter,f&&h.childrenAfterAggFilter.forEach(function(p){return c(p,f)}),r.setAllChildrenCount(h)),h.sibling&&(h.sibling.childrenAfterAggFilter=h.childrenAfterAggFilter)},d=function(h){var f;h.childrenAfterAggFilter=((f=h.childrenAfterFilter)===null||f===void 0?void 0:f.filter(function(p){var v,g=l({node:p});if(g){var m=r.filterManager.doesRowPassAggregateFilters({rowNode:p});if(m)return c(p,!0),!0}var y=(v=p.childrenAfterAggFilter)===null||v===void 0?void 0:v.length;return y}))||null,r.setAllChildrenCount(h),h.sibling&&(h.sibling.childrenAfterAggFilter=h.childrenAfterAggFilter)};u.forEachChangedNodeDepthFirst(i?d:c,!0)},t.prototype.setAllChildrenCountTreeData=function(e){var r=0;e.childrenAfterAggFilter.forEach(function(n){r++,r+=n.allChildrenCount}),e.setAllChildrenCount(r)},t.prototype.setAllChildrenCountGridGrouping=function(e){var r=0;e.childrenAfterAggFilter.forEach(function(n){n.group?r+=n.allChildrenCount:r++}),e.setAllChildrenCount(r)},t.prototype.setAllChildrenCount=function(e){if(!e.hasChildren()){e.setAllChildrenCount(null);return}this.gridOptionsService.isTreeData()?this.setAllChildrenCountTreeData(e):this.setAllChildrenCountGridGrouping(e)},Uu([D("filterManager")],t.prototype,"filterManager",void 0),Uu([D("columnModel")],t.prototype,"columnModel",void 0),t=Uu([be("filterAggregatesStage")],t),t}(pe),N0="30.1.0",G0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),pa=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Xc=function(o){G0(t,o);function t(){return o.call(this,`
            <div class="ag-group-filter">
                <div ref="eGroupField"></div>
                <div ref="eUnderlyingFilter"></div>
            </div>
        `)||this}return t.prototype.postConstruct=function(){this.initialiseTabGuard({})},t.prototype.init=function(e){var r=this;return this.params=e,this.validateParams(),this.updateGroups().then(function(){r.addManagedListener(r.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return r.onColumnRowGroupChanged()})})},t.prototype.validateParams=function(){var e=this.params.colDef;e.field&&E.doOnce(function(){return console.warn('AG Grid: Group Column Filter does not work with the colDef property "field". This property will be ignored.')},"groupFilterFieldParam"),e.filterValueGetter&&E.doOnce(function(){return console.warn('AG Grid: Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.')},"groupFilterFilterValueGetterParam"),e.filterParams&&E.doOnce(function(){return console.warn('AG Grid: Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.')},"groupFilterFilterParams")},t.prototype.updateGroups=function(){var e=this.updateGroupField();return this.getUnderlyingFilters(e)},t.prototype.getSourceColumns=function(){if(this.groupColumn=this.params.column,this.gridOptionsService.is("treeData"))return E.doOnce(function(){return console.warn("AG Grid: Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.")},"groupFilterTreeData"),[];var e=this.columnModel.getSourceColumnsForGroupColumn(this.groupColumn);return e||(E.doOnce(function(){return console.warn("AG Grid: Group Column Filter only works on group columns. Please use a different filter.")},"groupFilterNotGroupColumn"),[])},t.prototype.updateGroupField=function(){var e=this;E.clearElement(this.eGroupField),this.eGroupFieldSelect&&this.destroyBean(this.eGroupFieldSelect);var r=this.getSourceColumns(),n=r.filter(function(i){return i.isFilterAllowed()});return n.length?(r.length===1?(this.selectedColumn=n[0],E.setDisplayed(this.eGroupField,!1)):((!this.selectedColumn||!n.some(function(i){return i.getId()===e.selectedColumn.getId()}))&&(this.selectedColumn=n[0]),this.createGroupFieldSelectElement(n),this.eGroupField.appendChild(this.eGroupFieldSelect.getGui()),this.eGroupField.appendChild(E.loadTemplate('<div class="ag-filter-separator"></div>')),E.setDisplayed(this.eGroupField,!0)),n):(this.selectedColumn=void 0,E.setDisplayed(this.eGroupField,!1),null)},t.prototype.createGroupFieldSelectElement=function(e){var r=this;this.eGroupFieldSelect=this.createManagedBean(new Id);var n=this.localeService.getLocaleTextFunc();this.eGroupFieldSelect.setLabel(n("groupFilterSelect","Select field:")),this.eGroupFieldSelect.setLabelAlignment("top"),this.eGroupFieldSelect.addOptions(e.map(function(i){var a;return{value:i.getId(),text:(a=r.columnModel.getDisplayNameForColumn(i,"groupFilter",!1))!==null&&a!==void 0?a:void 0}})),this.eGroupFieldSelect.setValue(this.selectedColumn.getId()),this.eGroupFieldSelect.onValueChange(function(i){return r.updateSelectedColumn(i)}),this.eGroupFieldSelect.addCssClass("ag-group-filter-field-select-wrapper"),e.length===1&&this.eGroupFieldSelect.setDisabled(!0)},t.prototype.getUnderlyingFilters=function(e){var r=this;if(!e)return this.filterColumnPairs=void 0,this.selectedFilter=void 0,this.groupColumn.setFilterActive(!1,"columnRowGroupChanged"),$e.resolve();var n=[],i=[];return e.forEach(function(a){var s=r.filterManager.getOrCreateFilterWrapper(a,"COLUMN_MENU");s!=null&&s.filterPromise&&n.push(s.filterPromise.then(function(l){return l&&i.push({filter:l,column:a}),a.getId()===r.selectedColumn.getId()&&(r.selectedFilter=l??void 0),l}))}),$e.all(n).then(function(){r.filterColumnPairs=i,r.groupColumn.setFilterActive(r.isFilterActive(),"columnRowGroupChanged")})},t.prototype.addUnderlyingFilterElement=function(){var e=this;if(E.clearElement(this.eUnderlyingFilter),!this.selectedColumn)return $e.resolve();var r=this.filterManager.getOrCreateFilterWrapper(this.selectedColumn,"COLUMN_MENU");return r?r.guiPromise.then(function(n){var i;e.eUnderlyingFilter.appendChild(n),(i=r.filterPromise)===null||i===void 0||i.then(function(a){var s,l;(s=a==null?void 0:a.afterGuiAttached)===null||s===void 0||s.call(a,e.afterGuiAttachedParams),!(!((l=e.afterGuiAttachedParams)===null||l===void 0)&&l.suppressFocus)&&e.eGroupFieldSelect&&!e.eGroupFieldSelect.isDisabled()&&e.eGroupFieldSelect.getFocusableElement().focus()})}):$e.resolve()},t.prototype.updateSelectedColumn=function(e){var r,n;if(e){(n=(r=this.selectedFilter)===null||r===void 0?void 0:r.afterGuiDetached)===null||n===void 0||n.call(r);var i=this.getFilterColumnPair(e);this.selectedColumn=i==null?void 0:i.column,this.selectedFilter=i==null?void 0:i.filter,this.dispatchEvent({type:t.EVENT_SELECTED_COLUMN_CHANGED}),this.addUnderlyingFilterElement()}},t.prototype.isFilterActive=function(){var e;return!!(!((e=this.filterColumnPairs)===null||e===void 0)&&e.some(function(r){var n=r.filter;return n.isFilterActive()}))},t.prototype.doesFilterPass=function(){return!0},t.prototype.getModel=function(){return null},t.prototype.setModel=function(){return $e.resolve()},t.prototype.afterGuiAttached=function(e){this.afterGuiAttachedParams=e,this.addUnderlyingFilterElement()},t.prototype.afterGuiDetached=function(){var e,r;E.clearElement(this.eUnderlyingFilter),(r=(e=this.selectedFilter)===null||e===void 0?void 0:e.afterGuiDetached)===null||r===void 0||r.call(e)},t.prototype.onColumnRowGroupChanged=function(){var e=this;this.updateGroups().then(function(){e.dispatchEvent({type:t.EVENT_COLUMN_ROW_GROUP_CHANGED}),e.eventService.dispatchEvent({type:"filterAllowedUpdated"})})},t.prototype.getFilterColumnPair=function(e){var r;if(e)return(r=this.filterColumnPairs)===null||r===void 0?void 0:r.find(function(n){var i=n.column;return i.getId()===e})},t.prototype.getSelectedFilter=function(){return this.selectedFilter},t.prototype.getSelectedColumn=function(){return this.selectedColumn},t.prototype.isFilterAllowed=function(){return!!this.selectedColumn},t.prototype.destroy=function(){o.prototype.destroy.call(this)},t.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",t.EVENT_SELECTED_COLUMN_CHANGED="selectedColumnChanged",pa([D("filterManager")],t.prototype,"filterManager",void 0),pa([D("columnModel")],t.prototype,"columnModel",void 0),pa([B("eGroupField")],t.prototype,"eGroupField",void 0),pa([B("eUnderlyingFilter")],t.prototype,"eUnderlyingFilter",void 0),pa([te],t.prototype,"postConstruct",null),t}(xv),V0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ku=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},j0=function(o){V0(t,o);function t(){var e=o.call(this,`
            <div ref="eFloatingFilter" class="ag-group-floating-filter ag-floating-filter-input" role="presentation"></div>
        `)||this;return e.haveAddedColumnListeners=!1,e}return t.prototype.init=function(e){var r=this;this.params=e;var n=this.gridOptionsService.get("groupDisplayType")==="multipleColumns";return new $e(function(i){r.params.parentFilterInstance(function(a){r.parentFilterInstance=a,n?r.setupUnderlyingFloatingFilterElement().then(function(){return i()}):(r.setupReadOnlyFloatingFilterElement(),i())})}).then(function(){r.addManagedListener(r.parentFilterInstance,Xc.EVENT_SELECTED_COLUMN_CHANGED,function(){return r.onSelectedColumnChanged()}),r.addManagedListener(r.parentFilterInstance,Xc.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return r.onColumnRowGroupChanged()})})},t.prototype.onParamsUpdated=function(e){this.params=e,this.setParams()},t.prototype.setParams=function(){var e,r=this.columnModel.getDisplayNameForColumn(this.params.column,"header",!0),n=this.localeService.getLocaleTextFunc();(e=this.eFloatingFilterText)===null||e===void 0||e.setInputAriaLabel(r+" "+n("ariaFilterInput","Filter Input"))},t.prototype.setupReadOnlyFloatingFilterElement=function(){var e=this;this.eFloatingFilterText||(this.eFloatingFilterText=this.createManagedBean(new Jy),this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",function(){return e.params.showParentFilter()}),this.setParams()),this.updateDisplayedValue(),this.eFloatingFilter.appendChild(this.eFloatingFilterText.getGui())},t.prototype.setupUnderlyingFloatingFilterElement=function(){var e=this;this.showingUnderlyingFloatingFilter=!1,this.underlyingFloatingFilter=void 0,E.clearElement(this.eFloatingFilter);var r=this.parentFilterInstance.getSelectedColumn();if(r&&!r.isVisible()){var n=this.filterManager.getFloatingFilterCompDetails(r,this.params.showParentFilter);if(n)return this.compDetails=n,this.haveAddedColumnListeners||(this.haveAddedColumnListeners=!0,this.addManagedListener(r,Mt.EVENT_VISIBLE_CHANGED,this.onColumnVisibleChanged.bind(this)),this.addManagedListener(r,Mt.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))),n.newAgStackInstance().then(function(i){var a,s;e.underlyingFloatingFilter=i,(a=e.underlyingFloatingFilter)===null||a===void 0||a.onParentModelChanged((s=e.parentFilterInstance.getSelectedFilter())===null||s===void 0?void 0:s.getModel()),e.appendChild(i.getGui()),e.showingUnderlyingFloatingFilter=!0})}return this.setupReadOnlyFloatingFilterElement(),$e.resolve()},t.prototype.onColumnVisibleChanged=function(){this.setupUnderlyingFloatingFilterElement()},t.prototype.onColDefChanged=function(e){var r,n;if(e.column){var i=this.filterManager.getFloatingFilterCompDetails(e.column,this.params.showParentFilter);i&&((n=(r=this.underlyingFloatingFilter)===null||r===void 0?void 0:r.onParamsUpdated)===null||n===void 0||n.call(r,i.params))}},t.prototype.onParentModelChanged=function(e,r){var n,i;this.showingUnderlyingFloatingFilter?(n=this.underlyingFloatingFilter)===null||n===void 0||n.onParentModelChanged((i=this.parentFilterInstance.getSelectedFilter())===null||i===void 0?void 0:i.getModel(),r):this.updateDisplayedValue()},t.prototype.updateDisplayedValue=function(){if(!(!this.parentFilterInstance||!this.eFloatingFilterText)){var e=this.parentFilterInstance.getSelectedFilter();if(!e){this.eFloatingFilterText.setValue(""),this.eFloatingFilterText.setDisplayed(!1);return}if(this.eFloatingFilterText.setDisplayed(!0),e.getModelAsString){var r=e.getModel();this.eFloatingFilterText.setValue(r==null?"":e.getModelAsString(r))}else this.eFloatingFilterText.setValue("")}},t.prototype.onSelectedColumnChanged=function(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()},t.prototype.onColumnRowGroupChanged=function(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()},t.prototype.destroy=function(){o.prototype.destroy.call(this)},Ku([D("columnModel")],t.prototype,"columnModel",void 0),Ku([D("filterManager")],t.prototype,"filterManager",void 0),Ku([B("eFloatingFilter")],t.prototype,"eFloatingFilter",void 0),t}(oe),Dv={version:N0,moduleName:Ce.RowGroupingModule,beans:[f0,k0,v0,y0,S0,x0],agStackComponents:[{componentName:"AgGridHeaderDropZones",componentClass:L0}],userComponents:[{componentName:"agGroupColumnFilter",componentClass:Xc},{componentName:"agGroupColumnFloatingFilter",componentClass:j0}],dependantModules:[lt]},B0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fs=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Mh=function(o){B0(t,o);function t(e){return o.call(this,e,"aggregation")||this}return t.prototype.passBeansUp=function(){o.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.localeService.getLocaleTextFunc(),r=e("valueColumnsEmptyMessage","Drag here to aggregate"),n=e("values","Values");o.prototype.init.call(this,{dragAndDropIcon:Et.ICON_AGGREGATE,icon:E.createIconNoSpan("valuePanel",this.gridOptionsService,null),emptyMessage:r,title:n}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VALUE_CHANGED,this.refreshGui.bind(this))},t.prototype.getAriaLabel=function(){var e=this.localeService.getLocaleTextFunc(),r=e("ariaValuesDropZonePanelLabel","Values");return r},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="valueColumnsList",e},t.prototype.getIconName=function(){return this.isPotentialDndColumns()?Et.ICON_AGGREGATE:Et.ICON_NOT_ALLOWED},t.prototype.isColumnDroppable=function(e){return this.gridOptionsService.is("functionsReadOnly")||!e.isPrimary()?!1:e.isAllowValue()&&!e.isValueActive()},t.prototype.updateColumns=function(e){if(this.gridOptionsService.is("functionsPassive")){var r={type:V.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:e};this.eventService.dispatchEvent(r)}else this.columnModel.setValueColumns(e,"toolPanelUi")},t.prototype.getExistingColumns=function(){return this.columnModel.getValueColumns()},Fs([D("columnModel")],t.prototype,"columnModel",void 0),Fs([D("loggerFactory")],t.prototype,"loggerFactory",void 0),Fs([D("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Fs([te],t.prototype,"passBeansUp",null),t}(Nd),H0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rh=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Gd=function(o){H0(t,o);function t(){return o.call(this,t.TEMPLATE)||this}return t.prototype.init=function(e,r,n){this.allowDragging=e,this.params=r,this.eventType=n,this.primaryColsHeaderPanel.init(this.params);var i=this.params.suppressColumnFilter,a=this.params.suppressColumnSelectAll,s=this.params.suppressColumnExpandAll;s&&i&&a&&this.primaryColsHeaderPanel.setDisplayed(!1),this.addManagedListener(this.primaryColsListPanel,"groupExpanded",this.onGroupExpanded.bind(this)),this.addManagedListener(this.primaryColsListPanel,"selectionChanged",this.onSelectionChange.bind(this)),this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType),this.addManagedListener(this.primaryColsHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"selectAll",this.onSelectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"unselectAll",this.onUnselectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"filterChanged",this.onFilterChanged.bind(this)),this.positionableFeature=new Cv(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature)},t.prototype.toggleResizable=function(e){this.positionableFeature.setResizable(e?{bottom:!0}:!1)},t.prototype.onExpandAll=function(){this.primaryColsListPanel.doSetExpandedAll(!0)},t.prototype.onCollapseAll=function(){this.primaryColsListPanel.doSetExpandedAll(!1)},t.prototype.expandGroups=function(e){this.primaryColsListPanel.setGroupsExpanded(!0,e)},t.prototype.collapseGroups=function(e){this.primaryColsListPanel.setGroupsExpanded(!1,e)},t.prototype.setColumnLayout=function(e){this.primaryColsListPanel.setColumnLayout(e)},t.prototype.onFilterChanged=function(e){this.primaryColsListPanel.setFilterText(e.filterText)},t.prototype.syncLayoutWithGrid=function(){this.primaryColsListPanel.onColumnsChanged()},t.prototype.onSelectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!0)},t.prototype.onUnselectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!1)},t.prototype.onGroupExpanded=function(e){this.primaryColsHeaderPanel.setExpandState(e.state)},t.prototype.onSelectionChange=function(e){this.primaryColsHeaderPanel.setSelectionState(e.state)},t.TEMPLATE=`<div class="ag-column-select">
            <ag-primary-cols-header ref="primaryColsHeaderPanel"></ag-primary-cols-header>
            <ag-primary-cols-list ref="primaryColsListPanel"></ag-primary-cols-list>
        </div>`,Rh([B("primaryColsHeaderPanel")],t.prototype,"primaryColsHeaderPanel",void 0),Rh([B("primaryColsListPanel")],t.prototype,"primaryColsListPanel",void 0),t}(oe),z0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ka=function(){return Ka=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Ka.apply(this,arguments)},Ih=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},W0=function(o){z0(t,o);function t(){var e=o.call(this,t.TEMPLATE)||this;return e.initialised=!1,e.childDestroyFuncs=[],e}return t.prototype.setVisible=function(e){o.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},t.prototype.init=function(e){var r=this,n={suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi};if(this.params=Ka(Ka(Ka({},n),e),{context:this.gridOptionsService.context}),this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode&&(this.pivotModePanel=this.createBean(new wh),this.childDestroyFuncs.push(function(){return r.destroyBean(r.pivotModePanel)}),this.appendChild(this.pivotModePanel)),this.primaryColsPanel=this.createBean(new Gd),this.childDestroyFuncs.push(function(){return r.destroyBean(r.primaryColsPanel)}),this.primaryColsPanel.init(!0,this.params,"toolPanelUi"),this.primaryColsPanel.addCssClass("ag-column-panel-column-select"),this.appendChild(this.primaryColsPanel),this.isRowGroupingModuleLoaded()){this.params.suppressRowGroups||(this.rowGroupDropZonePanel=this.createBean(new Kc(!1)),this.childDestroyFuncs.push(function(){return r.destroyBean(r.rowGroupDropZonePanel)}),this.appendChild(this.rowGroupDropZonePanel)),this.params.suppressValues||(this.valuesDropZonePanel=this.createBean(new Mh(!1)),this.childDestroyFuncs.push(function(){return r.destroyBean(r.valuesDropZonePanel)}),this.appendChild(this.valuesDropZonePanel)),this.params.suppressPivots||(this.pivotDropZonePanel=this.createBean(new $c(!1)),this.childDestroyFuncs.push(function(){return r.destroyBean(r.pivotDropZonePanel)}),this.appendChild(this.pivotDropZonePanel)),this.setLastVisible();var i=this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){r.resetChildrenHeight(),r.setLastVisible()});this.childDestroyFuncs.push(function(){return i()})}this.initialised=!0},t.prototype.setPivotModeSectionVisible=function(e){var r=this;this.isRowGroupingModuleLoaded()&&(this.pivotModePanel?this.pivotModePanel.setDisplayed(e):e&&(this.pivotModePanel=this.createBean(new wh),this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild),this.childDestroyFuncs.push(function(){return r.destroyBean(r.pivotModePanel)})),this.setLastVisible())},t.prototype.setRowGroupsSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.rowGroupDropZonePanel?this.rowGroupDropZonePanel.setDisplayed(e):e&&(this.rowGroupDropZonePanel=this.createManagedBean(new Kc(!1)),this.appendChild(this.rowGroupDropZonePanel)),this.setLastVisible())},t.prototype.setValuesSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.valuesDropZonePanel?this.valuesDropZonePanel.setDisplayed(e):e&&(this.valuesDropZonePanel=this.createManagedBean(new Mh(!1)),this.appendChild(this.valuesDropZonePanel)),this.setLastVisible())},t.prototype.setPivotSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.pivotDropZonePanel?this.pivotDropZonePanel.setDisplayed(e):e&&(this.pivotDropZonePanel=this.createManagedBean(new $c(!1)),this.appendChild(this.pivotDropZonePanel),this.pivotDropZonePanel.setDisplayed(e)),this.setLastVisible())},t.prototype.setResizers=function(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach(function(e){if(e){var r=e.getGui();e.toggleResizable(!r.classList.contains("ag-last-column-drop")&&!r.classList.contains("ag-hidden"))}})},t.prototype.setLastVisible=function(){var e=this.getGui(),r=Array.prototype.slice.call(e.querySelectorAll(".ag-column-drop"));r.forEach(function(a){return a.classList.remove("ag-last-column-drop")});var n=e.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),i=E.last(n);i&&i.classList.add("ag-last-column-drop"),this.setResizers()},t.prototype.resetChildrenHeight=function(){for(var e=this.getGui(),r=e.children,n=0;n<r.length;n++){var i=r[n];i.style.removeProperty("height"),i.style.removeProperty("flex")}},t.prototype.isRowGroupingModuleLoaded=function(){return Ke.__assertRegistered(Ce.RowGroupingModule,"Row Grouping",this.context.getGridId())},t.prototype.expandColumnGroups=function(e){this.primaryColsPanel.expandGroups(e)},t.prototype.collapseColumnGroups=function(e){this.primaryColsPanel.collapseGroups(e)},t.prototype.setColumnLayout=function(e){this.primaryColsPanel.setColumnLayout(e)},t.prototype.syncLayoutWithGrid=function(){this.primaryColsPanel.syncLayoutWithGrid()},t.prototype.destroyChildren=function(){this.childDestroyFuncs.forEach(function(e){return e()}),this.childDestroyFuncs.length=0,E.clearElement(this.getGui())},t.prototype.refresh=function(){this.destroyChildren(),this.init(this.params)},t.prototype.destroy=function(){this.destroyChildren(),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-column-panel"></div>',Ih([D("gridApi")],t.prototype,"gridApi",void 0),Ih([D("columnApi")],t.prototype,"columnApi",void 0),t}(oe),U0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Lh=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Mv=function(o){U0(t,o);function t(){var e=o.call(this,'<div class="ag-tool-panel-horizontal-resize"></div>')||this;return e.minWidth=100,e.maxWidth=null,e}return t.prototype.setElementToResize=function(e){this.elementToResize=e},t.prototype.postConstruct=function(){var e=this.horizontalResizeService.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizeEnd.bind(this)});this.addDestroyFunc(e),this.setInverted(this.gridOptionsService.is("enableRtl"))},t.prototype.dispatchResizeEvent=function(e,r,n){var i={type:V.EVENT_TOOL_PANEL_SIZE_CHANGED,width:n,started:e,ended:r};this.eventService.dispatchEvent(i)},t.prototype.onResizeStart=function(){this.startingWidth=this.elementToResize.offsetWidth,this.dispatchResizeEvent(!0,!1,this.startingWidth)},t.prototype.onResizeEnd=function(e){return this.onResizing(e,!0)},t.prototype.onResizing=function(e,r){r===void 0&&(r=!1);var n=this.inverted?-1:1,i=Math.max(this.minWidth,Math.floor(this.startingWidth-e*n));this.maxWidth!=null&&(i=Math.min(this.maxWidth,i)),this.elementToResize.style.width=i+"px",this.dispatchResizeEvent(!1,r,i)},t.prototype.setInverted=function(e){this.inverted=e},t.prototype.setMaxWidth=function(e){this.maxWidth=e},t.prototype.setMinWidth=function(e){e!=null?this.minWidth=e:this.minWidth=100},Lh([D("horizontalResizeService")],t.prototype,"horizontalResizeService",void 0),Lh([te],t.prototype,"postConstruct",null),t}(oe),K0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ks=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Fh=function(o){K0(t,o);function t(e){var r=o.call(this)||this;return r.toolPanelDef=e,r}return t.prototype.getToolPanelId=function(){return this.toolPanelDef.id},t.prototype.postConstruct=function(){var e=this.createTemplate();this.setTemplate(e),this.setLabel(),this.setIcon(),this.addManagedListener(this.eToggleButton,"click",this.onButtonPressed.bind(this)),this.eToggleButton.setAttribute("id","ag-"+this.getCompId()+"-button")},t.prototype.createTemplate=function(){var e=`<div class="ag-side-button" role="presentation">
                <button type="button" ref="eToggleButton" tabindex="-1" role="tab" aria-expanded="false" class="ag-button ag-side-button-button">
                    <div ref="eIconWrapper" class="ag-side-button-icon-wrapper" aria-hidden="true"></div>
                    <span ref ="eLabel" class="ag-side-button-label"></span>
                </button>
            </div>`;return e},t.prototype.setLabel=function(){var e=this.localeService.getLocaleTextFunc(),r=this.toolPanelDef,n=e(r.labelKey,r.labelDefault);this.eLabel.innerText=n},t.prototype.setIcon=function(){this.eIconWrapper.insertAdjacentElement("afterbegin",E.createIconNoSpan(this.toolPanelDef.iconKey,this.gridOptionsService))},t.prototype.onButtonPressed=function(){this.dispatchEvent({type:t.EVENT_TOGGLE_BUTTON_CLICKED})},t.prototype.setSelected=function(e){this.addOrRemoveCssClass("ag-selected",e),E.setAriaExpanded(this.eToggleButton,e)},t.prototype.getButtonElement=function(){return this.eToggleButton},t.EVENT_TOGGLE_BUTTON_CLICKED="toggleButtonClicked",ks([B("eToggleButton")],t.prototype,"eToggleButton",void 0),ks([B("eIconWrapper")],t.prototype,"eIconWrapper",void 0),ks([B("eLabel")],t.prototype,"eLabel",void 0),ks([te],t.prototype,"postConstruct",null),t}(oe),$0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ns=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Rv=function(o){$0(t,o);function t(){var e=o.call(this,t.TEMPLATE)||this;return e.buttonComps=[],e}return t.prototype.postConstruct=function(){this.addManagedListener(this.getFocusableElement(),"keydown",this.handleKeyDown.bind(this))},t.prototype.handleKeyDown=function(e){if(!(e.key!==ve.TAB||!e.shiftKey)){var r=E.last(this.columnModel.getAllDisplayedColumns());this.focusService.focusGridView(r,!0)&&e.preventDefault()}},t.prototype.setActiveButton=function(e){this.buttonComps.forEach(function(r){r.setSelected(e===r.getToolPanelId())})},t.prototype.addButtonComp=function(e){var r=this,n=this.createBean(new Fh(e));return this.buttonComps.push(n),this.appendChild(n),n.addEventListener(Fh.EVENT_TOGGLE_BUTTON_CLICKED,function(){r.dispatchEvent({type:t.EVENT_SIDE_BAR_BUTTON_CLICKED,toolPanelId:e.id})}),n},t.prototype.clearButtons=function(){this.buttonComps=this.destroyBeans(this.buttonComps),E.clearElement(this.getGui())},t.EVENT_SIDE_BAR_BUTTON_CLICKED="sideBarButtonClicked",t.TEMPLATE='<div class="ag-side-buttons" role="tablist"></div>',Ns([D("focusService")],t.prototype,"focusService",void 0),Ns([D("columnModel")],t.prototype,"columnModel",void 0),Ns([te],t.prototype,"postConstruct",null),Ns([br],t.prototype,"clearButtons",null),t}(oe),X0=function(){function o(){}return o.parse=function(t){if(t){if(t===!0)return{toolPanels:[o.DEFAULT_COLUMN_COMP,o.DEFAULT_FILTER_COMP],defaultToolPanel:"columns"};if(typeof t=="string")return o.parse([t]);if(Array.isArray(t)){var e=[];return t.forEach(function(n){var i=o.DEFAULT_BY_KEY[n];if(!i){console.warn("AG Grid: the key "+n+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(o.DEFAULT_BY_KEY).join(","));return}e.push(i)}),e.length===0?void 0:{toolPanels:e,defaultToolPanel:e[0].id}}var r={toolPanels:o.parseComponents(t.toolPanels),defaultToolPanel:t.defaultToolPanel,hiddenByDefault:t.hiddenByDefault,position:t.position};return r}},o.parseComponents=function(t){var e=[];return t&&t.forEach(function(r){var n=null;if(typeof r=="string"){var i=o.DEFAULT_BY_KEY[r];if(!i){console.warn("AG Grid: the key "+r+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(o.DEFAULT_BY_KEY).join(","));return}n=i}else n=r;e.push(n)}),e},o.DEFAULT_COLUMN_COMP={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel"},o.DEFAULT_FILTER_COMP={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel"},o.DEFAULT_BY_KEY={columns:o.DEFAULT_COLUMN_COMP,filters:o.DEFAULT_FILTER_COMP},o}(),Y0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),kh=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},q0=function(o){Y0(t,o);function t(){return o.call(this,t.TEMPLATE)||this}return t.prototype.setupResize=function(){var e=this.getGui(),r=this.resizeBar=this.createManagedBean(new Mv);e.setAttribute("id","ag-"+this.getCompId()),r.setElementToResize(e),this.appendChild(r)},t.prototype.getToolPanelId=function(){return this.toolPanelId},t.prototype.setToolPanelDef=function(e){var r=e.id,n=e.minWidth,i=e.maxWidth,a=e.width;this.toolPanelId=r,this.width=a;var s={},l=this.userComponentFactory.getToolPanelCompDetails(e,s),u=l.newAgStackInstance();if(u==null){console.warn("AG Grid: error processing tool panel component "+r+". You need to specify 'toolPanel'");return}u.then(this.setToolPanelComponent.bind(this)),n!=null&&this.resizeBar.setMinWidth(n),i!=null&&this.resizeBar.setMaxWidth(i)},t.prototype.setToolPanelComponent=function(e){var r=this;this.toolPanelCompInstance=e,this.appendChild(e.getGui()),this.addDestroyFunc(function(){r.destroyBean(e)}),this.width&&(this.getGui().style.width=this.width+"px")},t.prototype.getToolPanelInstance=function(){return this.toolPanelCompInstance},t.prototype.setResizerSizerSide=function(e){var r=this.gridOptionsService.is("enableRtl"),n=e==="left",i=r?n:!n;this.resizeBar.setInverted(i)},t.prototype.refresh=function(){this.toolPanelCompInstance.refresh()},t.TEMPLATE='<div class="ag-tool-panel-wrapper" role="tabpanel"/>',kh([D("userComponentFactory")],t.prototype,"userComponentFactory",void 0),kh([te],t.prototype,"setupResize",null),t}(oe),Z0=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),va=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},J0=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Q0=function(o){Z0(t,o);function t(){var e=o.call(this,t.TEMPLATE)||this;return e.toolPanelWrappers=[],e}return t.prototype.postConstruct=function(){var e=this;this.sideBarButtonsComp.addEventListener(Rv.EVENT_SIDE_BAR_BUTTON_CLICKED,this.onToolPanelButtonClicked.bind(this)),this.setSideBarDef(),this.addManagedPropertyListener("sideBar",function(){e.clearDownUi(),e.setSideBarDef()}),this.gridApi.registerSideBarComp(this),this.createManagedBean(new Sv(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))},t.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented){var r=this,n=r.focusService,i=r.sideBarButtonsComp,a=this.getGui(),s=i.getGui(),l=this.gridOptionsService.getDocument(),u=l.activeElement,c=a.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)"),d=e.target;if(c){if(s.contains(u)){n.focusInto(c,e.shiftKey)&&e.preventDefault();return}if(e.shiftKey){var h=null;c.contains(u)?h=this.focusService.findNextFocusableElement(c,void 0,!0):n.isTargetUnderManagedComponent(c,d)&&e.shiftKey&&(h=this.focusService.findFocusableElementBeforeTabGuard(c,d)),h||(h=s.querySelector(".ag-selected button")),h&&(e.preventDefault(),h.focus())}}}},t.prototype.handleKeyDown=function(e){var r=this.gridOptionsService.getDocument();if(this.sideBarButtonsComp.getGui().contains(r.activeElement)){var n=this.sideBarButtonsComp.getGui(),i=Array.prototype.slice.call(n.querySelectorAll(".ag-side-button")),a=r.activeElement,s=i.findIndex(function(c){return c.contains(a)}),l=null;switch(e.key){case ve.LEFT:case ve.UP:l=Math.max(0,s-1);break;case ve.RIGHT:case ve.DOWN:l=Math.min(s+1,i.length-1);break}if(l!==null){var u=i[l].querySelector("button");u&&(u.focus(),e.preventDefault())}}},t.prototype.onToolPanelButtonClicked=function(e){var r=e.toolPanelId,n=this.openedItem();n===r?this.openToolPanel(void 0,"sideBarButtonClicked"):this.openToolPanel(r,"sideBarButtonClicked")},t.prototype.clearDownUi=function(){this.sideBarButtonsComp.clearButtons(),this.destroyToolPanelWrappers()},t.prototype.setSideBarDef=function(){this.setDisplayed(!1);var e=this.gridOptionsService.get("sideBar");if(this.sideBar=X0.parse(e),this.sideBar&&this.sideBar.toolPanels){var r=this.sideBar.toolPanels;if(this.createToolPanelsAndSideButtons(r),!this.toolPanelWrappers.length)return;var n=!this.sideBar.hiddenByDefault;this.setDisplayed(n),this.setSideBarPosition(this.sideBar.position),this.sideBar.hiddenByDefault||this.openToolPanel(this.sideBar.defaultToolPanel,"sideBarInitializing")}},t.prototype.getDef=function(){return this.sideBar},t.prototype.setSideBarPosition=function(e){e||(e="right");var r=e==="left",n=r?"right":"left";return this.addOrRemoveCssClass("ag-side-bar-left",r),this.addOrRemoveCssClass("ag-side-bar-right",!r),this.toolPanelWrappers.forEach(function(i){i.setResizerSizerSide(n)}),this},t.prototype.createToolPanelsAndSideButtons=function(e){var r,n;try{for(var i=J0(e),a=i.next();!a.done;a=i.next()){var s=a.value;this.createToolPanelAndSideButton(s)}}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.validateDef=function(e){if(e.id==null)return console.warn("AG Grid: please review all your toolPanel components, it seems like at least one of them doesn't have an id"),!1;if(e.toolPanel==="agColumnsToolPanel"){var r=!Ke.__assertRegistered(Ce.ColumnsToolPanelModule,"Column Tool Panel",this.context.getGridId());if(r)return!1}if(e.toolPanel==="agFiltersToolPanel"){var r=!Ke.__assertRegistered(Ce.FiltersToolPanelModule,"Filters Tool Panel",this.context.getGridId());if(r)return!1;if(this.filterManager.isAdvancedFilterEnabled())return E.doOnce(function(){console.warn("AG Grid: Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.")},"advancedFilterToolPanel"),!1}return!0},t.prototype.createToolPanelAndSideButton=function(e){if(this.validateDef(e)){var r=this.sideBarButtonsComp.addButtonComp(e),n=this.getContext().createBean(new q0);n.setToolPanelDef(e),n.setDisplayed(!1);var i=n.getGui();this.appendChild(i),this.toolPanelWrappers.push(n),E.setAriaControls(r.getButtonElement(),i)}},t.prototype.refresh=function(){this.toolPanelWrappers.forEach(function(e){return e.refresh()})},t.prototype.openToolPanel=function(e,r){r===void 0&&(r="api");var n=this.openedItem();if(n!==e){this.toolPanelWrappers.forEach(function(s){var l=e===s.getToolPanelId();s.setDisplayed(l)});var i=this.openedItem(),a=n!==i;a&&(this.sideBarButtonsComp.setActiveButton(e),this.raiseToolPanelVisibleEvent(e,n??void 0,r))}},t.prototype.getToolPanelInstance=function(e){var r=this.toolPanelWrappers.filter(function(n){return n.getToolPanelId()===e})[0];if(!r){console.warn("AG Grid: unable to lookup Tool Panel as invalid key supplied: "+e);return}return r.getToolPanelInstance()},t.prototype.raiseToolPanelVisibleEvent=function(e,r,n){var i=!!e&&!!r;if(r){var a={type:V.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:n,key:r,visible:!1,switchingToolPanel:i};this.eventService.dispatchEvent(a)}if(e){var s={type:V.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:n,key:e,visible:!0,switchingToolPanel:i};this.eventService.dispatchEvent(s)}},t.prototype.close=function(e){e===void 0&&(e="api"),this.openToolPanel(void 0,e)},t.prototype.isToolPanelShowing=function(){return!!this.openedItem()},t.prototype.openedItem=function(){var e=null;return this.toolPanelWrappers.forEach(function(r){r.isDisplayed()&&(e=r.getToolPanelId())}),e},t.prototype.destroyToolPanelWrappers=function(){var e=this;this.toolPanelWrappers.forEach(function(r){E.removeFromParent(r.getGui()),e.destroyBean(r)}),this.toolPanelWrappers.length=0},t.prototype.destroy=function(){this.destroyToolPanelWrappers(),o.prototype.destroy.call(this)},t.TEMPLATE=`<div class="ag-side-bar ag-unselectable">
            <ag-side-bar-buttons ref="sideBarButtons"></ag-side-bar-buttons>
        </div>`,va([D("gridApi")],t.prototype,"gridApi",void 0),va([D("focusService")],t.prototype,"focusService",void 0),va([D("filterManager")],t.prototype,"filterManager",void 0),va([B("sideBarButtons")],t.prototype,"sideBarButtonsComp",void 0),va([te],t.prototype,"postConstruct",null),t}(oe),eS=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Nh=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},tS=function(o){eS(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.isColGroupDef=function(r){return r&&typeof r.children<"u"},e.getId=function(r){return e.isColGroupDef(r)?r.groupId:r.colId},e}return t.prototype.createColumnTree=function(e){var r=this,n=[],i=function(s,l){if(r.isColGroupDef(s)){var u=s,c=typeof u.groupId<"u"?u.groupId:u.headerName,d=new Cr(u,c,!1,l),h=[];return u.children.forEach(function(g){var m=i(g,l+1);m&&h.push(m)}),d.setChildren(h),d}else{var f=s,p=f.colId?f.colId:f.field,v=r.columnModel.getPrimaryColumn(p);return v||n.push(f),v}},a=[];return e.forEach(function(s){var l=i(s,0);l&&a.push(l)}),n.length>0&&console.warn("AG Grid: unable to find grid columns for the supplied colDef(s):",n),a},t.prototype.syncLayoutWithGrid=function(e){var r=this.getLeafPathTrees(),n=this.mergeLeafPathTrees(r);e(n)},t.prototype.getLeafPathTrees=function(){var e=function(i,a){var s;if(i instanceof Cr)if(i.isPadding())s=a;else{var l=Object.assign({},i.getColGroupDef());l.groupId=i.getGroupId(),l.children=[a],s=l}else{var u=Object.assign({},i.getColDef());u.colId=i.getColId(),s=u}var c=i.getOriginalParent();return c?e(c,s):s},r=this.columnModel.getAllGridColumns(),n=r.filter(function(i){var a=i.getColDef();return i.isPrimary()&&!a.showRowGroup});return n.map(function(i){return e(i,i.getColDef())})},t.prototype.mergeLeafPathTrees=function(e){for(var r=this,n=function(c,d){var h=r.isColGroupDef(c)&&r.isColGroupDef(d);return h&&r.getId(c)===r.getId(d)},i=function(c,d){if(!r.isColGroupDef(d))return c;var h=c,f=d;if(f.children&&f.groupId){var p=r.addChildrenToGroup(h,f.groupId,f.children[0]);if(p)return h}return f.children.forEach(function(v){return i(h,v)}),h},a=[],s=1;s<=e.length;s++){var l=e[s-1],u=e[s];n(l,u)?e[s]=i(l,u):a.push(l)}return a},t.prototype.addChildrenToGroup=function(e,r,n){var i=this,a=function(d,h){var f=d.children.map(i.getId),p=E.includes(f,i.getId(h)),v=E.last(d.children),g=v&&i.getId(v)!==i.getId(h);return p&&g};if(!this.isColGroupDef(e))return!0;var s=e,l=n;if(a(s,l))return s.children.push(l),!0;if(s.groupId===r){var u=s.children.map(this.getId),c=E.includes(u,this.getId(l));if(!c)return s.children.push(l),!0}return s.children.forEach(function(d){return i.addChildrenToGroup(d,r,n)}),!1},Nh([D("columnModel")],t.prototype,"columnModel",void 0),t=Nh([be("toolPanelColDefService")],t),t}(pe),rS="30.1.0",Vd={version:rS,moduleName:Ce.SideBarModule,beans:[tS],agStackComponents:[{componentName:"AgHorizontalResize",componentClass:Mv},{componentName:"AgSideBar",componentClass:Q0},{componentName:"AgSideBarButtons",componentClass:Rv}],dependantModules:[lt]},ga=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},nS=function(){function o(){}return o.prototype.selectAllChildren=function(t,e,r){var n=this.extractAllLeafColumns(t);this.setAllColumns(n,e,r)},o.prototype.setColumn=function(t,e,r){this.setAllColumns([t],e,r)},o.prototype.setAllColumns=function(t,e,r){this.columnModel.isPivotMode()?this.setAllPivot(t,e,r):this.setAllVisible(t,e,r)},o.prototype.extractAllLeafColumns=function(t){var e=[],r=function(n){n.forEach(function(i){i.isPassesFilter()&&(i.isGroup()?r(i.getChildren()):e.push(i.getColumn()))})};return r(t),e},o.prototype.setAllVisible=function(t,e,r){var n=[];t.forEach(function(i){i.getColDef().lockVisible||i.isVisible()!=e&&n.push({colId:i.getId(),hide:!e})}),n.length>0&&this.columnModel.applyColumnState({state:n},r)},o.prototype.setAllPivot=function(t,e,r){this.gridOptionsService.is("functionsPassive")?this.setAllPivotPassive(t,e):this.setAllPivotActive(t,e,r)},o.prototype.setAllPivotPassive=function(t,e){var r=this.columnModel.getPivotColumns().slice(),n=this.columnModel.getValueColumns().slice(),i=this.columnModel.getRowGroupColumns().slice(),a=!1,s=!1,l=!1,u=function(v){v.isAnyFunctionActive()||(v.isAllowValue()?(n.push(v),s=!0):v.isAllowRowGroup()?(i.push(v),a=!0):v.isAllowPivot()&&(r.push(v),l=!0))},c=function(v){v.isAnyFunctionActive()&&(r.indexOf(v)>=0&&(E.removeFromArray(r,v),a=!0),n.indexOf(v)>=0&&(E.removeFromArray(n,v),s=!0),i.indexOf(v)>=0&&(E.removeFromArray(i,v),l=!0))},d=e?u:c;if(t.forEach(d),a){var h={type:V.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:r};this.eventService.dispatchEvent(h)}if(l){var f={type:V.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:i};this.eventService.dispatchEvent(f)}if(s){var p={type:V.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:i};this.eventService.dispatchEvent(p)}},o.prototype.setAllPivotActive=function(t,e,r){var n=this,i=[],a=function(u){if(!u.isAnyFunctionActive())if(u.isAllowValue()){var c=typeof u.getAggFunc()=="string"?u.getAggFunc():n.aggFuncService.getDefaultAggFunc(u);i.push({colId:u.getId(),aggFunc:c})}else u.isAllowRowGroup()?i.push({colId:u.getId(),rowGroup:!0}):u.isAllowPivot()&&i.push({colId:u.getId(),pivot:!0})},s=function(u){var c=u.isPivotActive()||u.isRowGroupActive()||u.isValueActive();c&&i.push({colId:u.getId(),pivot:!1,rowGroup:!1,aggFunc:null})},l=e?a:s;t.forEach(l),i.length>0&&this.columnModel.applyColumnState({state:i},r)},o.prototype.updateColumns=function(t){var e=this,r=t.columns,n=t.visibleState,i=t.pivotState,a=t.eventType,s=r.map(function(l){var u=l.getColId();if(e.columnModel.isPivotMode()){var c=i==null?void 0:i[u];return{colId:u,pivot:c==null?void 0:c.pivot,rowGroup:c==null?void 0:c.rowGroup,aggFunc:c==null?void 0:c.aggFunc}}else return{colId:u,hide:!(n!=null&&n[u])}});this.columnModel.applyColumnState({state:s},a)},o.prototype.createPivotState=function(t){return{pivot:t.isPivotActive(),rowGroup:t.isRowGroupActive(),aggFunc:t.isValueActive()?t.getAggFunc():void 0}},ga([D("aggFuncService")],o.prototype,"aggFuncService",void 0),ga([D("columnModel")],o.prototype,"columnModel",void 0),ga([D("gridOptionsService")],o.prototype,"gridOptionsService",void 0),ga([D("eventService")],o.prototype,"eventService",void 0),o=ga([be("modelItemUtils")],o),o}(),iS="30.1.0",oS={version:iS,moduleName:Ce.ColumnsToolPanelModule,beans:[nS],agStackComponents:[{componentName:"AgPrimaryColsHeader",componentClass:Zm},{componentName:"AgPrimaryColsList",componentClass:c0},{componentName:"AgPrimaryCols",componentClass:Gd}],userComponents:[{componentName:"agColumnsToolPanel",componentClass:W0}],dependantModules:[lt,Dv,Vd]},aS={getTemplate:function(){return{name:"Workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",html:"http://www.w3.org/TR/REC-html40"}}],rawMap:{xmlns:"urn:schemas-microsoft-com:office:spreadsheet"}}}}},sS={getTemplate:function(){return{name:"ExcelWorkbook",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:excel"}},children:[{name:"WindowHeight",textNode:"8130"},{name:"WindowWidth",textNode:"15135"},{name:"WindowHeight",textNode:"8130"},{name:"WindowTopX",textNode:"120"},{name:"WindowTopY",textNode:"45"},{name:"ProtectStructure",textNode:"False"},{name:"ProtectWindow",textNode:"False"}]}}},lS={getTemplate:function(o){var t=o.width;return{name:"Column",properties:{prefixedAttributes:[{prefix:"ss:",map:{Width:t}}]}}}},uS={getTemplate:function(o){var t=o.mergeAcross,e=o.styleId,r=o.data,n={};return t&&(n.MergeAcross=t),e&&(n.StyleID=e),{name:"Cell",properties:{prefixedAttributes:[{prefix:"ss:",map:n}]},children:[{name:"Data",properties:{prefixedAttributes:[{prefix:"ss:",map:{Type:r==null?void 0:r.type}}]},textNode:r==null?void 0:r.value}]}}},cS={getTemplate:function(o){var t=o.cells;return{name:"Row",children:t.map(function(e){return uS.getTemplate(e)})}}},dS={getTemplate:function(o){var t=o.table,e=o.name,r=t.columns,n=t.rows,i=r.map(function(s){return lS.getTemplate(s)}),a=n.map(function(s){return cS.getTemplate(s)});return{name:"Worksheet",children:[{name:"Table",children:i.concat(a)}],properties:{prefixedAttributes:[{prefix:"ss:",map:{Name:e}}]}}}},hS={getTemplate:function(){return{name:"DocumentProperties",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:office"}},children:[{name:"Version",textNode:"12.00"}]}}},fS={getTemplate:function(o){var t=o.alignment,e=t.vertical,r=t.horizontal,n=t.indent,i=t.readingOrder,a=t.rotate,s=t.shrinkToFit,l=t.verticalText,u=t.wrapText;return{name:"Alignment",properties:{prefixedAttributes:[{prefix:"ss:",map:{Vertical:e,Horizontal:r,Indent:n,ReadingOrder:i,Rotate:a,ShrinkToFit:s,VerticalText:l,WrapText:u}}]}}}},pS={getTemplate:function(o){var t=o.borders,e=t.borderBottom,r=t.borderLeft,n=t.borderRight,i=t.borderTop;return{name:"Borders",children:[e,r,n,i].map(function(a,s){var l=s==0?"Bottom":s==1?"Left":s==2?"Right":"Top";return{name:"Border",properties:{prefixedAttributes:[{prefix:"ss:",map:{Position:l,LineStyle:a.lineStyle,Weight:a.weight,Color:a.color}}]}}})}}},vS={getTemplate:function(o){var t=o.font,e=t.bold,r=t.fontName,n=t.italic,i=t.color,a=t.outline,s=t.shadow,l=t.size,u=t.strikeThrough,c=t.underline,d=t.verticalAlign,h=t.charSet,f=t.family;return{name:"Font",properties:{prefixedAttributes:[{prefix:"ss:",map:{Bold:e,FontName:r,Italic:n,Color:i,Outline:a,Shadow:s,Size:l,StrikeThrough:u,Underline:c,VerticalAlign:d}},{prefix:"x:",map:{CharSet:h,Family:f}}]}}}},gS={getTemplate:function(o){var t=o.interior,e=t.color,r=t.pattern,n=t.patternColor;return{name:"Interior",properties:{prefixedAttributes:[{prefix:"ss:",map:{Color:e,Pattern:r,PatternColor:n}}]}}}},yS={getTemplate:function(o){return{name:"Protection",properties:{prefixedAttributes:[{prefix:"ss:",map:{Protected:o.protection.protected,HideFormula:o.protection.hideFormula}}]}}}},mS={getTemplate:function(o){var t=o.numberFormat.format;return{name:"NumberFormat",properties:{prefixedAttributes:[{prefix:"ss:",map:{Format:t}}]}}}},SS={getTemplate:function(o){var t=o.id,e=o.name;return{name:"Style",properties:{prefixedAttributes:[{prefix:"ss:",map:{ID:t,Name:e||t}}]}}}},Yc=function(){function o(){}return o.createExcel=function(t,e){var r=this.excelXmlHeader(),n=hS.getTemplate(),i=sS.getTemplate(),a=this.workbook(n,i,t,e);return""+r+zc.createXml(a,function(s){return s?"1":"0"})},o.workbook=function(t,e,r,n){var i=[t,e,this.stylesXmlElement(r)].concat(dS.getTemplate(n));return Object.assign({},aS.getTemplate(),{children:i})},o.excelXmlHeader=function(){return`<?xml version="1.0" ?>
        <?mso-application progid="Excel.Sheet" ?>
        `},o.stylesXmlElement=function(t){var e=this;return{name:"Styles",children:t?t.map(function(r){return e.styleXmlElement(r)}):[]}},o.styleXmlElement=function(t){var e=E.compose(this.addProperty("alignment",t),this.addProperty("borders",t),this.addProperty("font",t),this.addProperty("interior",t),this.addProperty("protection",t),this.addProperty("numberFormat",t))([]);return Object.assign({},SS.getTemplate(t),{children:e})},o.addProperty=function(t,e){return function(r){if(!e[t])return r;var n={alignment:fS,borders:pS,font:vS,interior:gS,numberFormat:mS,protection:yS};return r.concat(n[t].getTemplate(e))}},o.factoryMode=Vc.SINGLE_SHEET,o}(),CS=9525,Gh={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},xS=function(o){return Math.round(o*72/96)},wS=function(o){return Math.round(o*96/72)},Bi=function(o){return Math.ceil(o*CS)},bS=function(o){if(o!==void 0){var t=["Automatic","Roman","Swiss","Modern","Script","Decorative"],e=t.indexOf(o||"Automatic");return Math.max(e,0)}},Sl=function(o,t){if(t){var e;if(typeof t=="number")e=t;else{var r=t;e=r({rowIndex:o})}return xS(e)}},_S=function(o,t){var e=o.position,r=e.colSpan,n=e.column;if(o.width)if(r)for(var i=t.slice(n-1,n+r-1),a=0,s=0;s<i.length;s++){var l=i[s].getActualWidth();if(o.width<a+l){o.position.colSpan=s+1,o.totalWidth=o.width,o.width=o.totalWidth-a;break}a+=l}else o.totalWidth=o.width},OS=function(o,t){var e=o.position,r=e.rowSpan,n=e.row;if(o.height)if(r)for(var i=0,a=0,s=n;s<n+r;s++){var l=wS(Sl(s,t)||20);if(o.height<i+l){o.position.rowSpan=a+1,o.totalHeight=o.height,o.height=o.totalHeight-i;break}i+=l,a++}else o.totalHeight=o.height},Yt=function(o){var t=zc.createHeader({encoding:"UTF-8",standalone:"yes"}),e=zc.createXml(o);return""+t+e},as=function(o){var t=65,e=26,r=String.fromCharCode,n=Math.floor(o/e),i=o%e;return!n||o===e?r(t+o-1):i?n<e?r(t+n-1)+r(t+i-1):as(n)+r(t+i-1):as(n-1)+"Z"},ES=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tl=function(){return Tl=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Tl.apply(this,arguments)},Vh=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},jh=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Iv=function(o){ES(t,o);function t(e){var r=o.call(this,e)||this;return r.mixedStyles={},r.mixedStyleCounter=0,r.rows=[],r.config=Object.assign({},e),r.stylesByIds={},r.config.baseExcelStyles.forEach(function(n){r.stylesByIds[n.id]=n}),r.excelStyles=jh([],Vh(r.config.baseExcelStyles)),r}return t.prototype.addCustomContent=function(e){var r=this;e.forEach(function(n){var i=r.rows.length+1,a;!r.config.suppressRowOutline&&n.outlineLevel!=null&&(a=n.outlineLevel);var s={height:Sl(i,n.height||r.config.rowHeight),cells:(n.cells||[]).map(function(l,u){var c,d,h,f=r.addImage(i,r.columnsToExport[u],(c=l.data)===null||c===void 0?void 0:c.value),p=null;l.styleId&&(p=typeof l.styleId=="string"?[l.styleId]:l.styleId);var v=r.getStyleId(p);if(f)return r.createCell(v,r.getDataTypeForValue(f.value),f.value==null?"":f.value);var g=(h=(d=l.data)===null||d===void 0?void 0:d.value)!==null&&h!==void 0?h:"",m=r.getDataTypeForValue(g);return l.mergeAcross?r.createMergedCell(v,m,g,l.mergeAcross):r.createCell(v,m,g)}),outlineLevel:a};n.collapsed!=null&&(s.collapsed=n.collapsed),n.hidden!=null&&(s.hidden=n.hidden),r.rows.push(s)})},t.prototype.onNewHeaderGroupingRow=function(){var e=this,r=[];return this.rows.push({cells:r,height:Sl(this.rows.length+1,this.config.headerRowHeight)}),{onColumn:function(n,i,a,s,l){var u=e.config.styleLinker({rowType:Ua.HEADER_GROUPING,rowIndex:1,value:"grouping-"+i,columnGroup:n});r.push(Tl(Tl({},e.createMergedCell(e.getStyleId(u),e.getDataTypeForValue("string"),i,s)),{collapsibleRanges:l}))}}},t.prototype.onNewHeaderRow=function(){return this.onNewRow(this.onNewHeaderColumn,this.config.headerRowHeight)},t.prototype.onNewBodyRow=function(e){var r=this.onNewRow(this.onNewBodyColumn,this.config.rowHeight);return e&&this.addRowOutlineIfNecessary(e),r},t.prototype.addRowOutlineIfNecessary=function(e){var r=this.config,n=r.gridOptionsService,i=r.suppressRowOutline,a=r.rowGroupExpandState,s=a===void 0?"expanded":a,l=n.is("groupHideOpenParents");if(!(l||i||e.level==null)){var u=e.footer?1:0,c=E.last(this.rows);if(c.outlineLevel=e.level+u,s!=="expanded"){var d=s==="collapsed";if(e.isExpandable()){var h=!d&&e.expanded;c.collapsed=!h}c.hidden=!!e.parent&&e.parent.level!==-1&&(d||this.isAnyParentCollapsed(e.parent))}}},t.prototype.isAnyParentCollapsed=function(e){for(;e&&e.level!==-1;){if(!e.expanded)return!0;e=e.parent}return!1},t.prototype.prepare=function(e){var r=this;o.prototype.prepare.call(this,e),this.columnsToExport=jh([],Vh(e)),this.cols=e.map(function(n,i){return r.convertColumnToExcel(n,i)})},t.prototype.parse=function(){for(var e=this.rows.reduce(function(n,i){return Math.max(n,i.cells.length)},0);this.cols.length<e;)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));var r={name:this.config.sheetName,table:{columns:this.cols,rows:this.rows}};return this.createExcel(r)},t.prototype.isFormula=function(e){return e==null?!1:this.config.autoConvertFormulas&&e.toString().startsWith("=")},t.prototype.isNumerical=function(e){return typeof e=="bigint"?!0:isFinite(e)&&e!==""&&!isNaN(parseFloat(e))},t.prototype.getStyleById=function(e){return e==null?null:this.stylesByIds[e]||null},t.prototype.convertColumnToExcel=function(e,r){var n=this.config.columnWidth;if(n)return typeof n=="number"?{width:n}:{width:n({column:e,index:r})};if(e){var i=75;return{width:Math.max(e.getActualWidth(),i)}}return{}},t.prototype.onNewHeaderColumn=function(e,r){var n=this;return function(i,a){var s=n.extractHeaderValue(i),l=n.config.styleLinker({rowType:Ua.HEADER,rowIndex:e,value:s,column:i});r.push(n.createCell(n.getStyleId(l),n.getDataTypeForValue("string"),s))}},t.prototype.onNewRow=function(e,r){var n=[];return this.rows.push({cells:n,height:Sl(this.rows.length+1,r)}),{onColumn:e.bind(this,this.rows.length,n)()}},t.prototype.onNewBodyColumn=function(e,r){var n=this,i=0;return function(a,s,l){if(i>0){i-=1;return}var u=n.extractRowCellValue(a,s,e,"excel",l),c=u.value,d=u.valueFormatted,h=n.config.styleLinker({rowType:Ua.BODY,rowIndex:e,value:c,column:a,node:l}),f=n.getStyleId(h),p=a.getColSpan(l),v=n.addImage(e,a,c);v?r.push(n.createCell(f,n.getDataTypeForValue(v.value),v.value==null?"":v.value)):p>1?(i=p-1,r.push(n.createMergedCell(f,n.getDataTypeForValue(c),c,p-1))):r.push(n.createCell(f,n.getDataTypeForValue(c),c,d))}},t.prototype.getStyleId=function(e){if(!e||!e.length)return null;if(e.length===1)return e[0];var r=e.join("-");return this.mixedStyles[r]||this.addNewMixedStyle(e),this.mixedStyles[r].excelID},t.prototype.addNewMixedStyle=function(e){var r=this;this.mixedStyleCounter+=1;var n="mixedStyle"+this.mixedStyleCounter,i={};e.forEach(function(s){r.excelStyles.forEach(function(l){l.id===s&&E.mergeDeep(i,E.deepCloneObject(l))})}),i.id=n,i.name=n;var a=e.join("-");this.mixedStyles[a]={excelID:n,key:a,result:i},this.excelStyles.push(i),this.stylesByIds[n]=i},t}(Qy),TS=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),PS=function(o){TS(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.createExcel=function(e){return Yc.createExcel(this.excelStyles,e)},t.prototype.getDataTypeForValue=function(e){return this.isNumerical(e)?"Number":"String"},t.prototype.getType=function(e,r,n){if(this.isFormula(n))return"Formula";if(r&&r.dataType)switch(r.dataType.toLocaleLowerCase()){case"string":return"Formula";case"number":return"Number";case"datetime":return"DateTime";case"error":return"Error";case"boolean":return"Boolean";default:console.warn("AG Grid: Unrecognized data type for excel export ["+r.id+".dataType="+r.dataType+"]")}return e},t.prototype.addImage=function(){},t.prototype.createCell=function(e,r,n,i){var a=this.getStyleById(e);!(a!=null&&a.dataType)&&r==="String"&&i&&(n=i);var s=this.getType(r,a,n)||r;return{styleId:a?e:void 0,data:{type:s,value:this.getValueTransformed(s,n)}}},t.prototype.getValueTransformed=function(e,r){var n=this,i=function(s){if(n.config.suppressTextAsCDATA)return E.escapeString(s);var l="<![CDATA[",u="]]>",c=new RegExp(u,"g");return l+String(s).replace(c,"]]"+u+l+">")+u},a=function(s){return!s||s==="0"||s==="false"?"0":"1"};switch(e){case"String":return i(r);case"Number":return Number(r).valueOf()+"";case"Boolean":return a(r);default:return r}},t.prototype.createMergedCell=function(e,r,n,i){return{styleId:this.getStyleById(e)?e:void 0,data:{type:r,value:n},mergeAcross:i}},t}(Iv),AS={getTemplate:function(o){var t=new Date,e=t.toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:o},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:e},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:e}]}}},DS={getTemplate:function(o){var t=o.name,e=o.ContentType,r=o.Extension,n=o.PartName;return{name:t,properties:{rawMap:{Extension:r,PartName:n,ContentType:e}}}}},$u=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Hi=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},MS={getTemplate:function(o){var t=new Array(o).fill(void 0).map(function(s,l){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:"/xl/worksheets/sheet"+(l+1)+".xml"}}),e=Ae.worksheetImages.size,r={};Ae.workbookImageIds.forEach(function(s){r[s.type]=!0});var n=new Array(e).fill(void 0).map(function(s,l){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:"/xl/drawings/drawing"+(l+1)+".xml"}}),i=Object.keys(r).map(function(s){return{name:"Default",ContentType:"image/"+s,Extension:s}}),a=Hi(Hi(Hi(Hi(Hi(Hi([],$u(i)),[{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"}]),$u(t)),[{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"}]),$u(n)),[{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}]).map(function(s){return DS.getTemplate(s)});return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:a}}},Bh=function(o,t){return{name:"xdr:"+o,children:[{name:"xdr:col",textNode:t.col.toString()},{name:"xdr:colOff",textNode:t.offsetX.toString()},{name:"xdr:row",textNode:t.row.toString()},{name:"xdr:rowOff",textNode:t.offsetY.toString()}]}},RS=function(o){var t=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}],e=o.recolor&&o.recolor.toLowerCase();switch(e){case"grayscale":case"sepia":case"washout":t.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:t}},IS=function(o,t){return{name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:t,name:o.id,descr:o.altText!=null?o.altText:void 0}},children:[RS(o)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}},Hh=function(o){if(!(!o.saturation&&!o.tint)){var t=[];return o.saturation&&t.push({name:"a:satMod",properties:{rawMap:{val:o.saturation*1e3}}}),o.tint&&t.push({name:"a:tint",properties:{rawMap:{val:o.tint*1e3}}}),t}},LS=function(o,t){return{name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:o.color}},children:Hh(o)},{name:"a:srgbClr",properties:{rawMap:{val:t.color}},children:Hh(t)}]}},FS=function(o,t){var e;if(o.transparency){var r=Math.min(Math.max(o.transparency,0),100);e=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(r*1e3)}}}]}if(o.recolor)switch(e||(e=[]),o.recolor.toLocaleLowerCase()){case"grayscale":e.push({name:"a:grayscl"});break;case"sepia":e.push(LS({color:"black"},{color:"D9C3A5",tint:50,saturation:180}));break;case"washout":e.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}});break}return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":"rId"+t,"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:e},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},kS=function(o,t){var e={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:t.width,cy:t.height}}}]};if(o.rotation){var r=o.rotation;e.properties={rawMap:{rot:Math.min(Math.max(r,0),360)*6e4}}}var n={name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]},i={name:"xdr:spPr",children:[e,n]};return i},NS=function(o){o.fitCell=!!o.fitCell||!o.width||!o.height;var t=o.position,e=t===void 0?{}:t,r=o.fitCell,n=o.width,i=n===void 0?0:n,a=o.height,s=a===void 0?0:a,l=o.totalHeight,u=o.totalWidth,c=e.offsetX,d=c===void 0?0:c,h=e.offsetY,f=h===void 0?0:h,p=e.row,v=p===void 0?1:p,g=e.rowSpan,m=g===void 0?1:g,y=e.column,S=y===void 0?1:y,C=e.colSpan,w=C===void 0?1:C;return{from:{row:v-1,col:S-1,offsetX:Bi(d),offsetY:Bi(f)},to:{row:v-1+(r?1:m-1),col:S-1+(r?1:w-1),offsetX:Bi(i+d),offsetY:Bi(s+f)},height:Bi(l||s),width:Bi(u||i)}},GS=function(o,t,e,r){return{name:"xdr:pic",children:[IS(o,t+1),FS(o,e+1),kS(o,r)]}},VS={getTemplate:function(o){var t=o.sheetIndex,e=Ae.worksheetImages.get(t),r=Ae.worksheetImageIds.get(t),n=e.map(function(i,a){var s=NS(i);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[Bh("from",s.from),Bh("to",s.to),GS(i,a,r.get(i.id).index,s),{name:"xdr:clientData"}]}});return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:n}}},jS=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},qt=function(o){var t=jS(o,4),e=t[0],r=t[1],n=t[2],i=t[3];return{name:"a:"+e,children:[{name:"a:"+r,properties:{rawMap:{val:n,lastClr:i}}}]}},BS={getTemplate:function(){return{name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[qt(["dk1","sysClr","windowText","000000"]),qt(["lt1","sysClr","window","FFFFFF"]),qt(["dk2","srgbClr","44546A"]),qt(["lt2","srgbClr","E7E6E6"]),qt(["accent1","srgbClr","4472C4"]),qt(["accent2","srgbClr","ED7D31"]),qt(["accent3","srgbClr","A5A5A5"]),qt(["accent4","srgbClr","FFC000"]),qt(["accent5","srgbClr","5B9BD5"]),qt(["accent6","srgbClr","70AD47"]),qt(["hlink","srgbClr","0563C1"]),qt(["folHlink","srgbClr","954F72"])]}}},HS=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},X=function(o){var t=HS(o,4),e=t[0],r=t[1],n=t[2],i=t[3];return{name:"a:"+e,properties:{rawMap:{script:n,typeface:r,panose:i}}}},zS={getTemplate:function(){var o=E.utf8_encode;return{name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[X(["latin","Calibri Light",void 0,"020F0302020204030204"]),X(["ea",""]),X(["cs",""]),X(["font",o("游ゴシック Light"),"Jpan"]),X(["font",o("맑은 고딕"),"Hang"]),X(["font",o("等线 Light"),"Hans"]),X(["font",o("新細明體"),"Hant"]),X(["font","Times New Roman","Arab"]),X(["font","Times New Roman","Hebr"]),X(["font","Tahoma","Thai"]),X(["font","Nyala","Ethi"]),X(["font","Vrinda","Beng"]),X(["font","Shruti","Gujr"]),X(["font","MoolBoran","Khmr"]),X(["font","Tunga","Knda"]),X(["font","Raavi","Guru"]),X(["font","Euphemia","Cans"]),X(["font","Plantagenet Cherokee","Cher"]),X(["font","Microsoft Yi Baiti","Yiii"]),X(["font","Microsoft Himalaya","Tibt"]),X(["font","MV Boli","Thaa"]),X(["font","Mangal","Deva"]),X(["font","Gautami","Telu"]),X(["font","Latha","Taml"]),X(["font","Estrangelo Edessa","Syrc"]),X(["font","Kalinga","Orya"]),X(["font","Kartika","Mlym"]),X(["font","DokChampa","Laoo"]),X(["font","Iskoola Pota","Sinh"]),X(["font","Mongolian Baiti","Mong"]),X(["font","Times New Roman","Viet"]),X(["font","Microsoft Uighur","Uigh"]),X(["font","Sylfaen","Geor"]),X(["font","Arial","Armn"]),X(["font","Leelawadee UI","Bugi"]),X(["font","Microsoft JhengHei","Bopo"]),X(["font","Javanese Text","Java"]),X(["font","Segoe UI","Lisu"]),X(["font","Myanmar Text","Mymr"]),X(["font","Ebrima","Nkoo"]),X(["font","Nirmala UI","Olck"]),X(["font","Ebrima","Osma"]),X(["font","Phagspa","Phag"]),X(["font","Estrangelo Edessa","Syrn"]),X(["font","Estrangelo Edessa","Syrj"]),X(["font","Estrangelo Edessa","Syre"]),X(["font","Nirmala UI","Sora"]),X(["font","Microsoft Tai Le","Tale"]),X(["font","Microsoft New Tai Lue","Talu"]),X(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[X(["latin","Calibri",void 0,"020F0502020204030204"]),X(["ea",""]),X(["cs",""]),X(["font",o("游ゴシック"),"Jpan"]),X(["font",o("맑은 고딕"),"Hang"]),X(["font",o("等线"),"Hans"]),X(["font",o("新細明體"),"Hant"]),X(["font","Arial","Arab"]),X(["font","Arial","Hebr"]),X(["font","Tahoma","Thai"]),X(["font","Nyala","Ethi"]),X(["font","Vrinda","Beng"]),X(["font","Shruti","Gujr"]),X(["font","DaunPenh","Khmr"]),X(["font","Tunga","Knda"]),X(["font","Raavi","Guru"]),X(["font","Euphemia","Cans"]),X(["font","Plantagenet Cherokee","Cher"]),X(["font","Microsoft Yi Baiti","Yiii"]),X(["font","Microsoft Himalaya","Tibt"]),X(["font","MV Boli","Thaa"]),X(["font","Mangal","Deva"]),X(["font","Gautami","Telu"]),X(["font","Latha","Taml"]),X(["font","Estrangelo Edessa","Syrc"]),X(["font","Kalinga","Orya"]),X(["font","Kartika","Mlym"]),X(["font","DokChampa","Laoo"]),X(["font","Iskoola Pota","Sinh"]),X(["font","Mongolian Baiti","Mong"]),X(["font","Arial","Viet"]),X(["font","Microsoft Uighur","Uigh"]),X(["font","Sylfaen","Geor"]),X(["font","Arial","Armn"]),X(["font","Leelawadee UI","Bugi"]),X(["font","Microsoft JhengHei","Bopo"]),X(["font","Javanese Text","Java"]),X(["font","Segoe UI","Lisu"]),X(["font","Myanmar Text","Mymr"]),X(["font","Ebrima","Nkoo"]),X(["font","Nirmala UI","Olck"]),X(["font","Ebrima","Osma"]),X(["font","Phagspa","Phag"]),X(["font","Estrangelo Edessa","Syrn"]),X(["font","Estrangelo Edessa","Syrj"]),X(["font","Estrangelo Edessa","Syre"]),X(["font","Nirmala UI","Sora"]),X(["font","Microsoft Tai Le","Tale"]),X(["font","Microsoft New Tai Lue","Talu"]),X(["font","Ebrima","Tfng"])]}]}}},ss=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Br=function(o,t,e){return{name:"a:"+o,properties:{rawMap:{val:t}},children:e}},Xu=function(o){var t=ss(o,6),e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],s=t[5],l=[];return l.push(Br("satMod",n)),i&&l.push(Br("lumMod",i)),a&&l.push(Br("tint",a)),s&&l.push(Br("shade",s)),{name:"a:gs",properties:{rawMap:{pos:e}},children:[{name:"a:schemeClr",properties:{rawMap:{val:r}},children:l}]}},Pl=function(o,t){return{name:"a:solidFill",children:[Br("schemeClr",o,t)]}},qc=function(o){var t=ss(o,5),e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],s=ss(a,2),l=s[0],u=s[1];return{name:"a:gradFill",properties:{rawMap:{rotWithShape:e}},children:[{name:"a:gsLst",children:[Xu(r),Xu(n),Xu(i)]},{name:"a:lin",properties:{rawMap:{ang:l,scaled:u}}}]}},Yu=function(o){var t=ss(o,4),e=t[0],r=t[1],n=t[2],i=t[3];return{name:"a:ln",properties:{rawMap:{w:e,cap:r,cmpd:n,algn:i}},children:[Pl("phClr"),Br("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},qu=function(o){var t=[];if(o){var e=ss(o,5),r=e[0],n=e[1],i=e[2],a=e[3],s=e[4];t.push({name:"a:outerShdw",properties:{rawMap:{blurRad:r,dist:n,dir:i,algn:a,rotWithShape:s}},children:[Br("srgbClr","000000",[Br("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},t.length?{children:t}:{})]}},WS=function(){return{name:"a:fillStyleLst",children:[Pl("phClr"),qc(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),qc(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]}},US=function(){return{name:"a:lnStyleLst",children:[Yu(["6350","flat","sng","ctr"]),Yu(["12700","flat","sng","ctr"]),Yu(["19050","flat","sng","ctr"])]}},KS=function(){return{name:"a:effectStyleLst",children:[qu(),qu(),qu(["57150","19050","5400000","ctr","0"])]}},$S=function(){return{name:"a:bgFillStyleLst",children:[Pl("phClr"),Pl("phClr",[Br("tint","95000"),Br("satMod","170000")]),qc(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}},XS={getTemplate:function(){return{name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[WS(),US(),KS(),$S()]}}},YS={getTemplate:function(){return{name:"a:themeElements",children:[BS.getTemplate(),zS.getTemplate(),XS.getTemplate()]}}},qS={getTemplate:function(){return{name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[YS.getTemplate(),{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]}}},ZS=function(o){var t=[];return o.forEach(function(e,r){var n=r.toString(),i={name:"t",textNode:E.utf8_encode(E.escapeString(n))},a=n.trim().length!==n.length;a&&(i.properties={rawMap:{"xml:space":"preserve"}}),t.push({name:"si",children:[i]})}),t},JS={getTemplate:function(o){return{name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:o.size,uniqueCount:o.size}},children:ZS(o)}}};function QS(o){for(var t=o.split(/(\[[^\]]*\])/),e=0;e<t.length;e++){var r=t[e];r.length&&(r.startsWith("[")||(r=r.replace(/\$/g,'"$"')),t[e]=E.escapeString(r))}return t.join("")}var eC={getTemplate:function(o){var t=o.formatCode,e=o.numFmtId;return t.length&&(t=QS(t)),{name:"numFmt",properties:{rawMap:{formatCode:t,numFmtId:e}}}}},tC={getTemplate:function(o){return{name:"numFmts",properties:{rawMap:{count:o.length}},children:o.map(function(t){return eC.getTemplate(t)})}}},rC={getTemplate:function(o){var t=o.size,e=o.colorTheme,r=o.color,n=r===void 0?"FF000000":r,i=o.fontName,a=i===void 0?"Calibri":i,s=o.family,l=o.scheme,u=o.italic,c=o.bold,d=o.strikeThrough,h=o.outline,f=o.shadow,p=o.underline,v=o.verticalAlign,g=[{name:"sz",properties:{rawMap:{val:t}}},{name:"color",properties:{rawMap:{theme:e,rgb:n}}},{name:"name",properties:{rawMap:{val:a}}}];return s&&g.push({name:"family",properties:{rawMap:{val:s}}}),l&&g.push({name:"scheme",properties:{rawMap:{val:l}}}),u&&g.push({name:"i"}),c&&g.push({name:"b"}),d&&g.push({name:"strike"}),h&&g.push({name:"outline"}),f&&g.push({name:"shadow"}),p&&g.push({name:"u",properties:{rawMap:{val:p}}}),v&&g.push({name:"vertAlign",properties:{rawMap:{val:v}}}),{name:"font",children:g}}},nC={getTemplate:function(o){return{name:"fonts",properties:{rawMap:{count:o.length}},children:o.map(function(t){return rC.getTemplate(t)})}}},iC={getTemplate:function(o){var t=o.patternType,e=o.fgTheme,r=o.fgTint,n=o.fgRgb,i=o.bgRgb,a=o.bgIndexed,s={name:"patternFill",properties:{rawMap:{patternType:t}}};return(e||r||n)&&(s.children=[{name:"fgColor",properties:{rawMap:{theme:e,tint:r,rgb:n}}}]),(a||i)&&(s.children||(s.children=[]),s.children.push({name:"bgColor",properties:{rawMap:{indexed:a,rgb:i}}})),{name:"fill",children:[s]}}},oC={getTemplate:function(o){return{name:"fills",properties:{rawMap:{count:o.length}},children:o.map(function(t){return iC.getTemplate(t)})}}},aC=function(o){switch(o){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}},sC={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot"},lC=["Dashed","DashDot","DashDotDot"],uC={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},cC={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},dC={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},hC=function(o){return o?uC[o]||o:"none"},Rn=function(o){return o==null?o:(o.charAt(0)==="#"&&(o=o.substr(1)),o.length===6?"FF"+o:o)},Gs=function(o,t){if(!o)return"thin";var e=aC(t),r=sC[o];return o==="Continuous"?e:e==="medium"&&lC.indexOf(r)!==-1?"medium"+r:r.charAt(0).toLowerCase()+r.substr(1)},fC=function(o){return cC[o]||"general"},pC=function(o){return dC[o]||void 0},ya=function(o){return{name:"color",properties:{rawMap:{rgb:Rn(o||"#000000")}}}},vC={getTemplate:function(o){var t=o.left,e=o.right,r=o.top,n=o.bottom,i=o.diagonal,a=t?[ya(t.color)]:void 0,s=e?[ya(e.color)]:void 0,l=r?[ya(r.color)]:void 0,u=n?[ya(n.color)]:void 0,c=i?[ya(i.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:t&&t.style}},children:a},{name:"right",properties:{rawMap:{style:e&&e.style}},children:s},{name:"top",properties:{rawMap:{style:r&&r.style}},children:l},{name:"bottom",properties:{rawMap:{style:n&&n.style}},children:u},{name:"diagonal",properties:{rawMap:{style:i&&i.style}},children:c}]}}},gC={getTemplate:function(o){return{name:"borders",properties:{rawMap:{count:o.length}},children:o.map(function(t){return vC.getTemplate(t)})}}},yC=function(o){var t=["Context","LeftToRight","RightToLeft"],e=t.indexOf(o);return Math.max(e,0)},mC={getTemplate:function(o){var t=o.horizontal,e=o.indent,r=o.readingOrder,n=o.rotate,i=o.shrinkToFit,a=o.vertical,s=o.wrapText;return{name:"alignment",properties:{rawMap:{horizontal:t&&fC(t),indent:e,readingOrder:r&&yC(r),textRotation:n,shrinkToFit:i,vertical:a&&pC(a),wrapText:s}}}}},SC={getTemplate:function(o){var t=o.protected===!1?0:1,e=o.hideFormula===!0?1:0;return{name:"protection",properties:{rawMap:{hidden:e,locked:t}}}}},Lv={getTemplate:function(o){var t=o.alignment,e=o.borderId,r=o.fillId,n=o.fontId,i=o.numFmtId,a=o.protection,s=o.xfId,l=[];return t&&l.push(mC.getTemplate(t)),a&&l.push(SC.getTemplate(a)),{name:"xf",properties:{rawMap:{applyAlignment:t?1:void 0,applyProtection:a?1:void 0,applyBorder:e?1:void 0,applyFill:r?1:void 0,borderId:e,fillId:r,applyFont:n?1:void 0,fontId:n,applyNumberFormat:i?1:void 0,numFmtId:i,xfId:s}},children:l.length?l:void 0}}},CC={getTemplate:function(o){return{name:"cellStyleXfs",properties:{rawMap:{count:o.length}},children:o.map(function(t){return Lv.getTemplate(t)})}}},xC={getTemplate:function(o){return{name:"cellXfs",properties:{rawMap:{count:o.length}},children:o.map(function(t){return Lv.getTemplate(t)})}}},wC={getTemplate:function(o){var t=o.builtinId,e=o.name,r=o.xfId;return{name:"cellStyle",properties:{rawMap:{builtinId:t,name:e,xfId:r}}}}},bC={getTemplate:function(o){return{name:"cellStyles",properties:{rawMap:{count:o.length}},children:o.map(function(t){return wC.getTemplate(t)})}}},Al=function(){return Al=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Al.apply(this,arguments)},Dl,Ao,$a,Xa,Ya,Fv,Ml,kv,Zc,Nv=function(o,t){return o.indexOf("mixedStyle")!==-1&&t>1&&(o+="_"+t),o},Gv=function(){Dl={base:0},Ao=[],$a=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],Xa=[{patternType:"none"},{patternType:"gray125"}],Ya=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],Fv=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],Ml=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],kv=[{builtinId:0,name:"Normal",xfId:0}]},_C=function(o){var t=hC(o.pattern),e=Rn(o.color),r=Rn(o.patternColor),n=Xa.findIndex(function(i){var a=i.patternType,s=i.fgRgb,l=i.bgRgb;return!(a!=t||s!=e||l!=r)});return n===-1&&(n=Xa.length,Xa.push({patternType:t,fgRgb:e,bgRgb:r})),n},OC=function(o){if(o=E.utf8_encode(o),Gh[o])return Gh[o];var t=Ao.findIndex(function(e){return e.formatCode===o});return t===-1?(t=Ao.length+164,Ao.push({formatCode:o,numFmtId:t})):t=Ao[t].numFmtId,t},EC=function(o){var t=o.borderBottom,e=o.borderTop,r=o.borderLeft,n=o.borderRight,i,a,s,l,u,c,d,h;r&&(s=Gs(r.lineStyle,r.weight),d=Rn(r.color)),n&&(l=Gs(n.lineStyle,n.weight),h=Rn(n.color)),t&&(i=Gs(t.lineStyle,t.weight),u=Rn(t.color)),e&&(a=Gs(e.lineStyle,e.weight),c=Rn(e.color));var f=Ya.findIndex(function(p){var v=p.left,g=p.right,m=p.top,y=p.bottom;if(!v&&(s||d)||!g&&(l||h)||!m&&(a||c)||!y&&(i||u))return!1;var S=v||{},C=S.style,w=S.color,x=g||{},b=x.style,_=x.color,T=m||{},O=T.style,P=T.color,M=y||{},I=M.style,R=M.color;return!(C!=s||w!=d||b!=l||_!=h||O!=a||P!=c||I!=i||R!=u)});return f===-1&&(f=Ya.length,Ya.push({left:{style:s,color:d},right:{style:l,color:h},top:{style:a,color:c},bottom:{style:i,color:u},diagonal:{style:void 0,color:void 0}})),f},TC=function(o){var t=o.fontName,e=t===void 0?"Calibri":t,r=o.color,n=o.size,i=o.bold,a=o.italic,s=o.outline,l=o.shadow,u=o.strikeThrough,c=o.underline,d=o.family,h=o.verticalAlign,f=e&&E.utf8_encode(e),p=Rn(r),v=bS(d),g=c?c.toLocaleLowerCase():void 0,m=h?h.toLocaleLowerCase():void 0,y=$a.findIndex(function(S){return!(S.fontName!=f||S.color!=p||S.size!=n||S.bold!=i||S.italic!=a||S.outline!=s||S.shadow!=l||S.strikeThrough!=u||S.underline!=g||S.verticalAlign!=m||S.family!=v)});return y===-1&&(y=$a.length,$a.push({fontName:f,color:p,size:n,bold:i,italic:a,outline:s,shadow:l,strikeThrough:u,underline:g,verticalAlign:m,family:v!=null?v.toString():void 0})),y},PC=function(o){var t=o.alignment,e=o.borders,r=o.font,n=o.interior,i=o.numberFormat,a=o.protection,s=o.id,l=0,u=0,c=0,d=0;s&&(s=Nv(s,Zc),Dl[s]==null&&(n&&(l=_C(n)),e&&(u=EC(e)),r&&(c=TC(r)),i&&(d=OC(i.format)),Dl[s]=Ml.length,Ml.push({alignment:t,borderId:u||0,fillId:l||0,fontId:c||0,numFmtId:d||0,protection:a,xfId:0})))},AC={getTemplate:function(o){var t=tC.getTemplate(Ao),e=nC.getTemplate($a.map(function(l){return Al(Al({},l),{size:l.size!=null?l.size:o})})),r=oC.getTemplate(Xa),n=gC.getTemplate(Ya),i=CC.getTemplate(Fv),a=xC.getTemplate(Ml),s=bC.getTemplate(kv);return Gv(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[t,e,r,n,i,a,s,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}}},DC=function(o,t){return Dl[Nv(o,t)]||0},MC=function(o,t){Zc=t,Zc===1&&Gv(),o.forEach(PC)},RC={getTemplate:function(o,t){var e=(t+1).toString();return{name:"sheet",properties:{rawMap:{name:o,sheetId:e,"r:id":"rId"+e}}}}},IC={getTemplate:function(o){return{name:"sheets",children:o.map(function(t,e){return RC.getTemplate(t,e)})}}},LC={getTemplate:function(o){return{name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[IC.getTemplate(o)]}}},FC=function(o){return Math.ceil((o-12)/7+1)},kC={getTemplate:function(o){var t=o.min,e=o.max,r=o.outlineLevel,n=o.s,i=o.width,a=o.hidden,s=o.bestFit,l=1,u="0";return i>1&&(l=FC(i),u="1"),{name:"col",properties:{rawMap:{min:t,max:e,outlineLevel:r??void 0,width:l,style:n,hidden:a?"1":"0",bestFit:s?"1":"0",customWidth:u}}}}},NC=function(o){var t=o.charAt(0).toLowerCase();return t==="s"?"inlineStr":t},GC={getTemplate:function(o,t,e){var r=o.ref,n=o.data,i=o.styleId,a=n||{type:"empty",value:null},s=a.type,l=a.value,u=s;s==="f"?u="str":s.charAt(0)===s.charAt(0).toUpperCase()&&(u=NC(s));var c={name:"c",properties:{rawMap:{r,t:u==="empty"?void 0:u,s:i?DC(i,e):void 0}}};if(u==="empty")return c;var d;return u==="str"&&s==="f"?d=[{name:"f",textNode:E.escapeString(E.utf8_encode(l))}]:u==="inlineStr"?d=[{name:"is",children:[{name:"t",textNode:E.escapeString(E.utf8_encode(l))}]}]:d=[{name:"v",textNode:l}],Object.assign({},c,{children:d})}},VC=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},jC=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},BC=function(o,t){for(var e=[],r=0,n=0;n<o.length;n++){var i=o[n];i.mergeAcross&&(e.push({pos:n,excelPos:r}),r+=i.mergeAcross),r++}if(e.length)for(var n=e.length-1;n>=0;n--){for(var a=[],i=o[e[n].pos],s=1;s<=i.mergeAcross;s++)a.push({ref:""+as(e[n].excelPos+1+s)+(t+1),styleId:i.styleId,data:{type:"empty",value:null}});a.length&&o.splice.apply(o,jC([e[n].pos+1,0],VC(a)))}},HC=function(o){var t;return((t=o.data)===null||t===void 0?void 0:t.value)!==""||o.styleId!==void 0},zC={getTemplate:function(o,t,e){var r=o.collapsed,n=o.hidden,i=o.height,a=o.outlineLevel,s=o.cells,l=s===void 0?[]:s;BC(l,t);var u=l.filter(HC).map(function(c,d){return GC.getTemplate(c,d,e)});return{name:"row",properties:{rawMap:{r:t+1,collapsed:r?"1":"0",hidden:n?"1":"0",ht:i,customHeight:i!=null?"1":"0",spans:"1:1",outlineLevel:a||void 0}},children:u}}},WC={getTemplate:function(o){return{name:"mergeCell",properties:{rawMap:{ref:o}}}}},UC=function(o,t,e){var r=[],n=[];o.forEach(function(s,l){var u=s.cells,c=0,d;u.forEach(function(h,f){var p=f+c+1,v=as(p),g=l+1;if(h.mergeAcross){c+=h.mergeAcross;var m=as(f+c+1);r.push(""+v+g+":"+m+g)}t[p-1]||(t[p-1]={});var y=h.collapsibleRanges;y&&y.forEach(function(S){n.push([p+S[0],p+S[1]])}),d=t[p-1],d.min=p,d.max=p,h.ref=""+v+g})}),n.sort(function(s,l){return s[0]!==l[0]?s[0]-l[0]:l[1]-s[1]});var i=new Map,a=new Map;return n.filter(function(s){var l=s.toString(),u=i.get(l);return u?!1:(i.set(l,!0),!0)}).forEach(function(s){var l=t.find(function(c){return c.min==s[0]&&c.max==s[1]}),u=a.get(s[0]);t.push({min:s[0],max:s[1],outlineLevel:e?void 0:u||1,width:(l||{width:100}).width}),a.set(s[0],(u||0)+1)}),r},KC=function(o){return!o||o!=="Portrait"&&o!=="Landscape"?"portrait":o.toLocaleLowerCase()},$C=function(o){if(o==null)return 1;var t=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"],e=t.indexOf(o);return e===-1?1:e+1},XC=function(o){return function(t){return o.length&&t.push({name:"cols",children:o.map(function(e){return kC.getTemplate(e)})}),t}},YC=function(o,t){return function(e){return o.length&&e.push({name:"sheetData",children:o.map(function(r,n){return zC.getTemplate(r,n,t)})}),e}},qC=function(o){return function(t){return o.length&&t.push({name:"mergeCells",properties:{rawMap:{count:o.length}},children:o.map(function(e){return WC.getTemplate(e)})}),t}},ZC=function(o){return function(t){var e=o.top,r=e===void 0?.75:e,n=o.right,i=n===void 0?.7:n,a=o.bottom,s=a===void 0?.75:a,l=o.left,u=l===void 0?.7:l,c=o.header,d=c===void 0?.3:c,h=o.footer,f=h===void 0?.3:h;return t.push({name:"pageMargins",properties:{rawMap:{bottom:s,footer:f,header:d,left:u,right:i,top:r}}}),t}},JC=function(o){return function(t){return o&&t.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:KC(o.orientation),paperSize:$C(o.pageSize)}}}),t}},QC=function(o){var t={"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F"};return E.iterateObject(t,function(e,r){o=o.replace(e,r)}),o},ex=function(o){return o==="Center"?"C":o==="Right"?"R":"L"},tx=function(o,t){return t&&(o+="&amp;&quot;",o+=t.fontName||"Calibri",t.bold!==t.italic?o+=t.bold?",Bold":",Italic":t.bold?o+=",Bold Italic":o+=",Regular",o+="&quot;",t.size&&(o+="&amp;"+t.size),t.strikeThrough&&(o+="&amp;S"),t.underline&&(o+="&amp;"+(t.underline==="Double"?"E":"U")),t.color&&(o+="&amp;K"+t.color.replace("#","").toUpperCase())),o},rx=function(o){return o.reduce(function(t,e){var r=ex(e.position),n=tx(t+"&amp;"+r,e.font);return""+n+E.escapeString(QC(e.value))},"")},nx=function(o){var t=["all","first","even"],e=[];return t.forEach(function(r){var n=o[r],i=r==="all"?"odd":r;!n||!n.header&&!n.footer||E.iterateObject(n,function(a,s){var l=""+a.charAt(0).toUpperCase()+a.slice(1);s&&e.push({name:""+i+l,properties:{rawMap:{"xml:space":"preserve"}},textNode:rx(s)})})}),e},ix=function(o){return function(t){if(!o)return t;var e=o.first!=null?1:0,r=o.even!=null?1:0;return t.push({name:"headerFooter",properties:{rawMap:{differentFirst:e,differentOddEven:r}},children:nx(o)}),t}},ox=function(o){return function(t){return Ae.worksheetImages.get(o)&&t.push({name:"drawing",properties:{rawMap:{"r:id":"rId1"}}}),t}},ax=function(){return function(o){return o.push({name:"sheetPr",children:[{name:"outlinePr",properties:{rawMap:{summaryBelow:0}}}]}),o}},sx=function(o){return function(t){var e=o.reduce(function(r,n){return n.outlineLevel&&n.outlineLevel>r?n.outlineLevel:r},0);return t.push({name:"sheetFormatPr",properties:{rawMap:{baseColWidth:10,defaultRowHeight:16,outlineLevelRow:e||void 0}}}),t}},lx={getTemplate:function(o){var t=o.worksheet,e=o.currentSheet,r=o.config,n=r.margins,i=n===void 0?{}:n,a=r.pageSetup,s=r.headerFooterConfig,l=r.suppressColumnOutline,u=t.table,c=u.rows,d=u.columns,h=d&&d.length?UC(c,d,!!l):[],f=E.compose(ax(),sx(c),XC(d),YC(c,e+1),qC(h),ZC(i),JC(a),ix(s),ox(e)),p=f([]);return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:p}}},ux={getTemplate:function(o){var t=o.Id,e=o.Type,r=o.Target;return{name:"Relationship",properties:{rawMap:{Id:t,Type:e,Target:r}}}}},Vs={getTemplate:function(o){var t=o.map(function(e){return ux.getTemplate(e)});return{name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:t}}},cx=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},zh=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Ae=function(){function o(){}return o.createExcel=function(t,e,r){return this.addSheetName(e),MC(t,this.sheetNames.length),this.createWorksheet(e,r)},o.buildImageMap=function(t,e,r,n,i){var a=this.sheetNames.length,s=this.images.get(t.id);(!t.position||!t.position.row||!t.position.column)&&(t.position||(t.position={}),t.position=Object.assign({},t.position,{row:e,column:n.indexOf(r)+1}));var l=t;if(_S(l,n),OS(l,i),s){var u=s.find(function(c){return c.sheetId===a});u?u.image.push(l):s.push({sheetId:a,image:[l]})}else this.images.set(l.id,[{sheetId:a,image:[l]}]),this.workbookImageIds.set(l.id,{type:l.imageType,index:this.workbookImageIds.size});this.buildSheetImageMap(a,l)},o.buildSheetImageMap=function(t,e){var r=this.worksheetImageIds.get(t);r||(r=new Map,this.worksheetImageIds.set(t,r));var n=this.worksheetImages.get(t);n?(n.push(e),r.get(e.id)||r.set(e.id,{index:r.size,type:e.imageType})):(this.worksheetImages.set(t,[e]),r.set(e.id,{index:0,type:e.imageType}))},o.addSheetName=function(t){for(var e=E.escapeString(t.name)||"",r="";this.sheetNames.indexOf(""+e+r)!==-1;)if(r==="")r="_1";else{var n=parseInt(r.slice(1),10);r="_"+(n+1)}t.name=""+e+r,this.sheetNames.push(t.name)},o.getStringPosition=function(t){return this.sharedStrings.has(t)?this.sharedStrings.get(t):(this.sharedStrings.set(t,this.sharedStrings.size),this.sharedStrings.size-1)},o.resetFactory=function(){this.sharedStrings=new Map,this.images=new Map,this.worksheetImages=new Map,this.workbookImageIds=new Map,this.worksheetImageIds=new Map,this.sheetNames=[],this.factoryMode=Vc.SINGLE_SHEET},o.createWorkbook=function(){return Yt(LC.getTemplate(this.sheetNames))},o.createStylesheet=function(t){return Yt(AC.getTemplate(t))},o.createSharedStrings=function(){return Yt(JS.getTemplate(this.sharedStrings))},o.createCore=function(t){return Yt(AS.getTemplate(t))},o.createContentTypes=function(t){return Yt(MS.getTemplate(t))},o.createRels=function(){var t=Vs.getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return Yt(t)},o.createTheme=function(){return Yt(qS.getTemplate())},o.createWorkbookRels=function(t){var e=new Array(t).fill(void 0).map(function(n,i){return{Id:"rId"+(i+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:"worksheets/sheet"+(i+1)+".xml"}}),r=Vs.getTemplate(zh(zh([],cx(e)),[{Id:"rId"+(t+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:"rId"+(t+2),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:"rId"+(t+3),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}]));return Yt(r)},o.createDrawing=function(t){return Yt(VS.getTemplate({sheetIndex:t}))},o.createDrawingRel=function(t){var e=this,r=this.worksheetImageIds.get(t),n=[];return r.forEach(function(i,a){n.push({Id:"rId"+(i.index+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"../media/image"+(e.workbookImageIds.get(a).index+1)+"."+i.type})}),Yt(Vs.getTemplate(n))},o.createWorksheetDrawingRel=function(t){var e=Vs.getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:"../drawings/drawing"+(t+1)+".xml"}]);return Yt(e)},o.createWorksheet=function(t,e){return Yt(lx.getTemplate({worksheet:t,currentSheet:this.sheetNames.length-1,config:e}))},o.sharedStrings=new Map,o.sheetNames=[],o.images=new Map,o.worksheetImages=new Map,o.workbookImageIds=new Map,o.worksheetImageIds=new Map,o.factoryMode=Vc.SINGLE_SHEET,o}(),dx=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),hx=function(o){dx(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.createExcel=function(e){var r=this,n=r.excelStyles,i=r.config;return Ae.createExcel(n,e,i)},t.prototype.getDataTypeForValue=function(e){return e===void 0?"empty":this.isNumerical(e)?"n":"s"},t.prototype.getType=function(e,r,n){if(this.isFormula(n))return"f";if(r&&r.dataType)switch(r.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:console.warn("AG Grid: Unrecognized data type for excel export ["+r.id+".dataType="+r.dataType+"]")}return e},t.prototype.addImage=function(e,r,n){if(this.config.addImageToCell){var i=this.config.addImageToCell(e,r,n);if(i)return Ae.buildImageMap(i.image,e,r,this.columnsToExport,this.config.rowHeight),i}},t.prototype.createCell=function(e,r,n,i){var a=this.getStyleById(e);!(a!=null&&a.dataType)&&r==="s"&&i&&(n=i);var s=this.getType(r,a,n)||r;return{styleId:a?e:void 0,data:{type:s,value:this.getCellValue(s,n)}}},t.prototype.createMergedCell=function(e,r,n,i){var a=n??"";return{styleId:this.getStyleById(e)?e:void 0,data:{type:r,value:r==="s"?Ae.getStringPosition(a).toString():n},mergeAcross:i}},t.prototype.getCellValue=function(e,r){if(r==null)return Ae.getStringPosition("").toString();switch(e){case"s":return r===""?"":Ae.getStringPosition(r).toString();case"f":return r.slice(1);case"n":return Number(r).toString();default:return r}},t}(Iv),fx=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rl=function(){return Rl=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Rl.apply(this,arguments)},Yr=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Jc=function(o){var t=o.data,e=o.fontSize,r=e===void 0?11:e,n=o.author,i=n===void 0?"AG Grid":n,a=Ae.images.size>0;if(wt.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]),a){wt.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);var s=0;Ae.images.forEach(function(d){var h=d[0].image[0],f=h.imageType;wt.addFile("xl/media/image"+ ++s+"."+f,h.base64,!0)})}if(!t||t.length===0){console.warn("AG Grid: Invalid params supplied to getMultipleSheetsAsExcel() - `ExcelExportParams.data` is empty."),Ae.resetFactory();return}var l=t.length,u=0;t.forEach(function(d,h){wt.addFile("xl/worksheets/sheet"+(h+1)+".xml",d),a&&Ae.worksheetImages.get(h)&&vx(h,u++)}),wt.addFile("xl/workbook.xml",Ae.createWorkbook()),wt.addFile("xl/styles.xml",Ae.createStylesheet(r)),wt.addFile("xl/sharedStrings.xml",Ae.createSharedStrings()),wt.addFile("xl/theme/theme1.xml",Ae.createTheme()),wt.addFile("xl/_rels/workbook.xml.rels",Ae.createWorkbookRels(l)),wt.addFile("docProps/core.xml",Ae.createCore(i)),wt.addFile("[Content_Types].xml",Ae.createContentTypes(l)),wt.addFile("_rels/.rels",Ae.createRels()),Ae.resetFactory();var c=o.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";return wt.getContent(c)},px=function(o){var t=o.fileName,e=t===void 0?"export.xlsx":t,r=Jc(o);r&&wv.download(e,r)},vx=function(o,t){var e="xl/drawings",r=e+"/drawing"+(t+1)+".xml",n=e+"/_rels/drawing"+(t+1)+".xml.rels",i="xl/worksheets/_rels/sheet"+(o+1)+".xml.rels";wt.addFile(n,Ae.createDrawingRel(o)),wt.addFile(r,Ae.createDrawing(o)),wt.addFile(i,Ae.createWorksheetDrawingRel(t))},gx=function(o){fx(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.exportMode="xlsx",e}return t.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})},t.prototype.getMergedParams=function(e){var r=this.gridOptionsService.get("defaultExcelExportParams");return Object.assign({},r,e)},t.prototype.getData=function(e){return this.setExportMode(e.exportMode||"xlsx"),o.prototype.getData.call(this,e)},t.prototype.export=function(e){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var r=this.getMergedParams(e),n=this.getData(r),i={data:[n],fontSize:r.fontSize,author:r.author,mimeType:r.mimeType},a=this.packageFile(i);return a&&wv.download(this.getFileName(r.fileName),a),n},t.prototype.exportDataAsExcel=function(e){return this.export(e)},t.prototype.getDataAsExcel=function(e){var r=this.getMergedParams(e),n=this.getData(r);if(e&&e.exportMode==="xml")return n;var i={data:[n],fontSize:r.fontSize,author:r.author,mimeType:r.mimeType};return this.packageFile(i)},t.prototype.setFactoryMode=function(e,r){r===void 0&&(r="xlsx");var n=r==="xlsx"?Ae:Yc;n.factoryMode=e},t.prototype.getFactoryMode=function(e){var r=e==="xlsx"?Ae:Yc;return r.factoryMode},t.prototype.getSheetDataForExcel=function(e){var r=this.getMergedParams(e),n=this.getData(r);return n},t.prototype.getMultipleSheetsAsExcel=function(e){return Jc(e)},t.prototype.exportMultipleSheetsAsExcel=function(e){return px(e)},t.prototype.getDefaultFileName=function(){return"export."+this.getExportMode()},t.prototype.getDefaultFileExtension=function(){return this.getExportMode()},t.prototype.createSerializingSession=function(e){var r=this,n=r.columnModel,i=r.valueService,a=r.gridOptionsService,s=r.valueFormatterService,l=r.valueParserService,u=this.getExportMode()==="xlsx",c="ag-grid";e.sheetName!=null&&(c=E.utf8_encode(e.sheetName.toString().substr(0,31)));var d=Rl(Rl({},e),{sheetName:c,columnModel:n,valueService:i,gridOptionsService:a,valueFormatterService:s,valueParserService:l,headerRowHeight:e.headerRowHeight||e.rowHeight,baseExcelStyles:this.gridOptionsService.get("excelStyles")||[],styleLinker:this.styleLinker.bind(this)});return new(u?hx:PS)(d)},t.prototype.styleLinker=function(e){var r=e.rowType,n=e.rowIndex,i=e.value,a=e.column,s=e.columnGroup,l=e.node,u=r===Ua.HEADER,c=r===Ua.HEADER_GROUPING,d=u?a:s,h=[];if(u||c)return h.push("header"),c&&h.push("headerGroup"),d&&(h=h.concat(Dd.getHeaderClassesFromColDef(d.getDefinition(),this.gridOptionsService,a||null,s||null))),h;var f=this.gridOptionsService.get("excelStyles"),p=["cell"];if(!f||!f.length)return p;var v=f.map(function(g){return g.id});return this.stylingService.processAllCellClasses(a.getDefinition(),{value:i,data:l.data,node:l,colDef:a.getDefinition(),column:a,rowIndex:n,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context},function(g){v.indexOf(g)>-1&&p.push(g)}),p.sort(function(g,m){return v.indexOf(g)<v.indexOf(m)?-1:1})},t.prototype.isExportSuppressed=function(){return this.gridOptionsService.is("suppressExcelExport")},t.prototype.setExportMode=function(e){this.exportMode=e},t.prototype.getExportMode=function(){return this.exportMode},t.prototype.packageFile=function(e){if(this.getExportMode()==="xml"){var r=e.mimeType||"application/vnd.ms-excel";return new Blob(["\uFEFF",e.data[0]],{type:r})}return Jc(e)},Yr([D("columnModel")],t.prototype,"columnModel",void 0),Yr([D("valueService")],t.prototype,"valueService",void 0),Yr([D("stylingService")],t.prototype,"stylingService",void 0),Yr([D("gridSerializer")],t.prototype,"gridSerializer",void 0),Yr([D("gridOptionsService")],t.prototype,"gridOptionsService",void 0),Yr([D("valueFormatterService")],t.prototype,"valueFormatterService",void 0),Yr([D("valueParserService")],t.prototype,"valueParserService",void 0),Yr([te],t.prototype,"postConstruct",null),t=Yr([be("excelCreator")],t),t}(em),yx="30.1.0",mx={version:yx,moduleName:Ce.ExcelExportModule,beans:[gx,tm,rm],dependantModules:[mv,lt]},Sx=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ma=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Vr;(function(o){o[o.EXPANDED=0]="EXPANDED",o[o.COLLAPSED=1]="COLLAPSED",o[o.INDETERMINATE=2]="INDETERMINATE"})(Vr||(Vr={}));var Cx=function(o){Sx(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.preConstruct=function(){this.setTemplate(`<div class="ag-filter-toolpanel-search" role="presentation">
                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>
                <ag-input-text-field ref="eFilterTextField" class="ag-filter-toolpanel-search-input"></ag-input-text-field>
            </div>`)},t.prototype.postConstruct=function(){var e=this.localeService.getLocaleTextFunc();this.eFilterTextField.onValueChange(this.onSearchTextChanged.bind(this)),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")),this.createExpandIcons(),this.setExpandState(Vr.EXPANDED),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this))},t.prototype.init=function(e){this.params=e,this.columnModel.isReady()&&this.showOrHideOptions()},t.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=E.createIconNoSpan("columnSelectOpen",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandUnchecked=E.createIconNoSpan("columnSelectClosed",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandIndeterminate=E.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsService))},t.prototype.showOrHideOptions=function(){var e=!this.params.suppressFilterSearch,r=!this.params.suppressExpandAll,n=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(n("searchOoo","Search..."));var i=function(s){return s.getOriginalParent()&&s.isFilterAllowed()},a=this.columnModel.getAllGridColumns().some(i);E.setDisplayed(this.eFilterTextField.getGui(),e),E.setDisplayed(this.eExpand,r&&a)},t.prototype.onSearchTextChanged=function(){var e=this;this.onSearchTextChangedDebounced||(this.onSearchTextChangedDebounced=E.debounce(function(){e.dispatchEvent({type:"searchChanged",searchText:e.eFilterTextField.getValue()})},300)),this.onSearchTextChangedDebounced()},t.prototype.onExpandClicked=function(){var e=this.currentExpandState===Vr.EXPANDED?{type:"collapseAll"}:{type:"expandAll"};this.dispatchEvent(e)},t.prototype.setExpandState=function(e){this.currentExpandState=e,E.setDisplayed(this.eExpandChecked,this.currentExpandState===Vr.EXPANDED),E.setDisplayed(this.eExpandUnchecked,this.currentExpandState===Vr.COLLAPSED),E.setDisplayed(this.eExpandIndeterminate,this.currentExpandState===Vr.INDETERMINATE)},ma([D("columnModel")],t.prototype,"columnModel",void 0),ma([B("eExpand")],t.prototype,"eExpand",void 0),ma([B("eFilterTextField")],t.prototype,"eFilterTextField",void 0),ma([pu],t.prototype,"preConstruct",null),ma([te],t.prototype,"postConstruct",null),t}(oe),xx=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Sn=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Vv=function(o){xx(t,o);function t(e){e===void 0&&(e=!1);var r=o.call(this,t.TEMPLATE)||this;return r.expanded=!1,r.hideHeader=e,r}return t.prototype.postConstruct=function(){this.eExpandChecked=E.createIconNoSpan("columnSelectOpen",this.gridOptionsService),this.eExpandUnchecked=E.createIconNoSpan("columnSelectClosed",this.gridOptionsService),this.eExpand.appendChild(this.eExpandChecked),this.eExpand.appendChild(this.eExpandUnchecked)},t.prototype.setColumn=function(e){var r=this;this.column=e,this.eFilterName.innerText=this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)||"",this.addManagedListener(this.eFilterToolPanelHeader,"click",this.toggleExpanded.bind(this)),this.addManagedListener(this.eFilterToolPanelHeader,"keydown",function(n){(n.key===ve.ENTER||n.key===ve.SPACE)&&(n.preventDefault(),r.toggleExpanded())}),this.addManagedListener(this.eventService,V.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this)),this.addInIcon("filter",this.eFilterIcon,this.column),E.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),E.setDisplayed(this.eExpandChecked,!1),this.hideHeader?(E.setDisplayed(this.eFilterToolPanelHeader,!1),this.eFilterToolPanelHeader.removeAttribute("tabindex")):this.eFilterToolPanelHeader.setAttribute("tabindex","0"),this.addManagedListener(this.column,Mt.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_FILTER_DESTROYED,this.onFilterDestroyed.bind(this))},t.prototype.getColumn=function(){return this.column},t.prototype.getColumnFilterName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)},t.prototype.addCssClassToTitleBar=function(e){this.eFilterToolPanelHeader.classList.add(e)},t.prototype.addInIcon=function(e,r,n){if(r!=null){var i=E.createIconNoSpan(e,this.gridOptionsService,n);r.appendChild(i)}},t.prototype.isFilterActive=function(){return this.filterManager.isFilterActive(this.column)},t.prototype.onFilterChanged=function(){E.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),this.dispatchEvent({type:Mt.EVENT_FILTER_CHANGED})},t.prototype.onFilterDestroyed=function(e){this.expanded&&e.source==="api"&&e.column.getId()===this.column.getId()&&this.columnModel.getPrimaryColumn(this.column)&&(this.removeFilterElement(),this.addFilterElement())},t.prototype.toggleExpanded=function(){this.expanded?this.collapse():this.expand()},t.prototype.expand=function(){this.expanded||(this.expanded=!0,E.setAriaExpanded(this.eFilterToolPanelHeader,!0),E.setDisplayed(this.eExpandChecked,!0),E.setDisplayed(this.eExpandUnchecked,!1),this.addFilterElement())},t.prototype.addFilterElement=function(){var e=this,r=E.loadTemplate('<div class="ag-filter-toolpanel-instance-filter"></div>'),n=this.filterManager.getOrCreateFilterWrapper(this.column,"TOOLBAR");if(n){var i=n.filterPromise,a=n.guiPromise;i==null||i.then(function(s){e.underlyingFilter=s,s&&a.then(function(l){l&&r.appendChild(l),e.agFilterToolPanelBody.appendChild(r),s.afterGuiAttached&&s.afterGuiAttached({container:"toolPanel"})})})}},t.prototype.collapse=function(){var e,r;this.expanded&&(this.expanded=!1,E.setAriaExpanded(this.eFilterToolPanelHeader,!1),this.removeFilterElement(),E.setDisplayed(this.eExpandChecked,!1),E.setDisplayed(this.eExpandUnchecked,!0),(r=(e=this.underlyingFilter)===null||e===void 0?void 0:e.afterGuiDetached)===null||r===void 0||r.call(e))},t.prototype.removeFilterElement=function(){E.clearElement(this.agFilterToolPanelBody)},t.prototype.isExpanded=function(){return this.expanded},t.prototype.refreshFilter=function(e){var r;if(this.expanded){var n=this.underlyingFilter;n&&(e?typeof n.refreshVirtualList=="function"&&n.refreshVirtualList():(r=n.afterGuiDetached)===null||r===void 0||r.call(n))}},t.prototype.onFilterOpened=function(e){e.source==="COLUMN_MENU"&&e.column===this.column&&this.expanded&&this.collapse()},t.TEMPLATE=`
        <div class="ag-filter-toolpanel-instance">
            <div class="ag-filter-toolpanel-header ag-filter-toolpanel-instance-header" ref="eFilterToolPanelHeader" role="button" aria-expanded="false">
                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>
                <span ref="eFilterName" class="ag-header-cell-text"></span>
                <span ref="eFilterIcon" class="ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon" aria-hidden="true"></span>
            </div>
            <div class="ag-filter-toolpanel-instance-body ag-filter" ref="agFilterToolPanelBody"></div>
        </div>`,Sn([B("eFilterToolPanelHeader")],t.prototype,"eFilterToolPanelHeader",void 0),Sn([B("eFilterName")],t.prototype,"eFilterName",void 0),Sn([B("agFilterToolPanelBody")],t.prototype,"agFilterToolPanelBody",void 0),Sn([B("eFilterIcon")],t.prototype,"eFilterIcon",void 0),Sn([B("eExpand")],t.prototype,"eExpand",void 0),Sn([D("filterManager")],t.prototype,"filterManager",void 0),Sn([D("columnModel")],t.prototype,"columnModel",void 0),Sn([te],t.prototype,"postConstruct",null),t}(oe),wx=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),js=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Yn=function(o){wx(t,o);function t(e,r,n,i,a){var s=o.call(this)||this;return s.columnGroup=e,s.childFilterComps=r,s.depth=i,s.expandedCallback=n,s.showingColumn=a,s}return t.prototype.preConstruct=function(){var e={cssIdentifier:"filter-toolpanel",direction:"vertical"};this.setTemplate(t.TEMPLATE,{filterGroupComp:e})},t.prototype.init=function(){var e=this;this.setGroupTitle(),this.filterGroupComp.setAlignItems("stretch"),this.filterGroupComp.addCssClass("ag-filter-toolpanel-group-level-"+this.depth),this.filterGroupComp.addCssClassToTitleBar("ag-filter-toolpanel-group-level-"+this.depth+"-header"),this.childFilterComps.forEach(function(r){e.filterGroupComp.addItem(r),r.addCssClassToTitleBar("ag-filter-toolpanel-group-level-"+(e.depth+1)+"-header")}),this.refreshFilterClass(),this.addExpandCollapseListeners(),this.addFilterChangedListeners(),this.setupTooltip()},t.prototype.setupTooltip=function(){var e=this;if(this.showingColumn){var r=function(){var n=e.columnGroup.getColDef().headerTooltip;e.setTooltip(n)};r(),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,r)}},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="filterToolPanelColumnGroup",e},t.prototype.addCssClassToTitleBar=function(e){this.filterGroupComp.addCssClassToTitleBar(e)},t.prototype.refreshFilters=function(e){this.childFilterComps.forEach(function(r){r instanceof t?r.refreshFilters(e):r.refreshFilter(e)})},t.prototype.isColumnGroup=function(){return this.columnGroup instanceof Cr},t.prototype.isExpanded=function(){return this.filterGroupComp.isExpanded()},t.prototype.getChildren=function(){return this.childFilterComps},t.prototype.getFilterGroupName=function(){return this.filterGroupName?this.filterGroupName:""},t.prototype.getFilterGroupId=function(){return this.columnGroup.getId()},t.prototype.hideGroupItem=function(e,r){this.filterGroupComp.hideItem(e,r)},t.prototype.hideGroup=function(e){this.setDisplayed(!e)},t.prototype.forEachToolPanelFilterChild=function(e){this.childFilterComps.forEach(function(r){r instanceof Vv&&e(r)})},t.prototype.addExpandCollapseListeners=function(){var e=this,r=this.isColumnGroup()?function(){return e.expandedCallback()}:function(){return e.forEachToolPanelFilterChild(function(i){return i.expand()})},n=this.isColumnGroup()?function(){return e.expandedCallback()}:function(){return e.forEachToolPanelFilterChild(function(i){return i.collapse()})};this.addManagedListener(this.filterGroupComp,hn.EVENT_EXPANDED,r),this.addManagedListener(this.filterGroupComp,hn.EVENT_COLLAPSED,n)},t.prototype.getColumns=function(){return this.columnGroup instanceof Cr?this.columnGroup.getLeafColumns():[this.columnGroup]},t.prototype.addFilterChangedListeners=function(){var e=this;this.getColumns().forEach(function(r){e.addManagedListener(r,Mt.EVENT_FILTER_CHANGED,function(){return e.refreshFilterClass()})}),this.columnGroup instanceof Cr||this.addManagedListener(this.eventService,V.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this))},t.prototype.refreshFilterClass=function(){var e=this.getColumns(),r=function(){return e.some(function(n){return n.isFilterActive()})};this.filterGroupComp.addOrRemoveCssClass("ag-has-filter",r())},t.prototype.onFilterOpened=function(e){e.source==="COLUMN_MENU"&&e.column===this.columnGroup&&this.isExpanded()&&this.collapse()},t.prototype.expand=function(){this.filterGroupComp.toggleGroupExpand(!0)},t.prototype.collapse=function(){this.filterGroupComp.toggleGroupExpand(!1)},t.prototype.setGroupTitle=function(){this.filterGroupName=this.columnGroup instanceof Cr?this.getColumnGroupName(this.columnGroup):this.getColumnName(this.columnGroup),this.filterGroupComp.setTitle(this.filterGroupName||"")},t.prototype.getColumnGroupName=function(e){return this.columnModel.getDisplayNameForProvidedColumnGroup(null,e,"filterToolPanel")},t.prototype.getColumnName=function(e){return this.columnModel.getDisplayNameForColumn(e,"filterToolPanel",!1)},t.prototype.destroyFilters=function(){this.childFilterComps=this.destroyBeans(this.childFilterComps),E.clearElement(this.getGui())},t.prototype.destroy=function(){this.destroyFilters(),o.prototype.destroy.call(this)},t.TEMPLATE=`<div class="ag-filter-toolpanel-group-wrapper">
            <ag-group-component ref="filterGroupComp"></ag-group-component>
        </div>`,js([B("filterGroupComp")],t.prototype,"filterGroupComp",void 0),js([D("columnModel")],t.prototype,"columnModel",void 0),js([pu],t.prototype,"preConstruct",null),js([te],t.prototype,"init",null),t}(oe),bx=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Bs=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},_x=function(o){bx(t,o);function t(){var e=o.call(this,t.TEMPLATE)||this;return e.initialised=!1,e.filterGroupComps=[],e}return t.prototype.init=function(e){var r=this;this.initialised=!0;var n={suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};E.mergeDeep(n,e),this.params=n,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,V.EVENT_COLUMN_MOVED,function(){return r.onColumnsChanged()}),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,function(){return r.onColumnsChanged()}),this.addManagedListener(this.eventService,V.EVENT_TOOL_PANEL_VISIBLE_CHANGED,function(i){i.key==="filters"&&r.refreshFilters(i.visible)}),this.columnModel.isReady()&&this.onColumnsChanged()},t.prototype.onColumnsChanged=function(){var e=this.columnModel.isPivotMode(),r=!this.params.suppressSyncLayoutWithGrid&&!e;r?this.syncFilterLayout():this.buildTreeFromProvidedColumnDefs()},t.prototype.syncFilterLayout=function(){this.toolPanelColDefService.syncLayoutWithGrid(this.setFiltersLayout.bind(this))},t.prototype.buildTreeFromProvidedColumnDefs=function(){var e=this.columnModel.getPrimaryColumnTree();this.recreateFilters(e)},t.prototype.setFiltersLayout=function(e){var r=this.toolPanelColDefService.createColumnTree(e);this.recreateFilters(r)},t.prototype.recreateFilters=function(e){var r=this,n=this.gridOptionsService.getDocument().activeElement,i=this.getExpansionState();this.destroyFilters(),this.filterGroupComps=this.recursivelyAddComps(e,0,i);var a=this.filterGroupComps.length;a&&(this.filterGroupComps.forEach(function(s){return r.appendChild(s)}),this.setFirstAndLastVisible(0,a-1)),E.exists(this.searchFilterText)&&this.searchFilters(this.searchFilterText),this.fireExpandedEvent(),this.getGui().contains(n)&&n.focus()},t.prototype.recursivelyAddComps=function(e,r,n){var i=this;return E.flatten(e.map(function(a){if(a instanceof Cr)return E.flatten(i.recursivelyAddFilterGroupComps(a,r,n));var s=a;if(!i.shouldDisplayFilter(s))return[];var l=r===0,u=new Vv(l);if(i.createBean(u),u.setColumn(s),n.get(s.getId())&&u.expand(),r>0)return u;var c=i.createBean(new Yn(s,[u],i.onGroupExpanded.bind(i),r,!0));return c.addCssClassToTitleBar("ag-filter-toolpanel-header"),n.get(c.getFilterGroupId())||c.collapse(),c}))},t.prototype.recursivelyAddFilterGroupComps=function(e,r,n){if(this.filtersExistInChildren(e.getChildren())){var i=e.getColGroupDef();if(i&&i.suppressFiltersToolPanel)return[];var a=e.isPadding()?r:r+1,s=E.flatten(this.recursivelyAddComps(e.getChildren(),a,n));if(e.isPadding())return s;var l=new Yn(e,s,this.onGroupExpanded.bind(this),r,!1);return this.createBean(l),l.addCssClassToTitleBar("ag-filter-toolpanel-header"),n.get(l.getFilterGroupId())===!1&&l.collapse(),[l]}},t.prototype.filtersExistInChildren=function(e){var r=this;return e.some(function(n){return n instanceof Cr?r.filtersExistInChildren(n.getChildren()):r.shouldDisplayFilter(n)})},t.prototype.shouldDisplayFilter=function(e){var r=e.getColDef()&&e.getColDef().suppressFiltersToolPanel;return e.isFilterAllowed()&&!r},t.prototype.getExpansionState=function(){var e=new Map,r=function(n){e.set(n.getFilterGroupId(),n.isExpanded()),n.getChildren().forEach(function(i){i instanceof Yn?r(i):e.set(i.getColumn().getId(),i.isExpanded())})};return this.filterGroupComps.forEach(r),e},t.prototype.refresh=function(){},t.prototype.setVisible=function(e){o.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},t.prototype.expandFilterGroups=function(e,r){var n=[],i=function(s){var l=s.getFilterGroupId(),u=!r||E.includes(r,l);u&&(e&&s.isColumnGroup()?s.expand():s.collapse(),n.push(l)),s.getChildren().forEach(function(c){c instanceof Yn&&i(c)})};if(this.filterGroupComps.forEach(i),this.onGroupExpanded(),r){var a=r.filter(function(s){return n.indexOf(s)<0});a.length>0&&console.warn("AG Grid: unable to find groups for these supplied groupIds:",a)}},t.prototype.expandFilters=function(e,r){var n=[],i=function(s){if(s instanceof Yn){var l=!1;return s.getChildren().forEach(function(d){var h=i(d);h&&(e?(s.expand(),l=!0):s.isColumnGroup()||s.collapse())}),l}var u=s.getColumn().getColId(),c=!r||E.includes(r,u);return c&&(e?s.expand():s.collapse(),n.push(u)),c};if(this.filterGroupComps.forEach(i),this.onGroupExpanded(),r){var a=r.filter(function(s){return n.indexOf(s)<0});a.length>0&&console.warn("AG Grid: unable to find columns for these supplied colIds:",a)}},t.prototype.onGroupExpanded=function(){this.fireExpandedEvent()},t.prototype.fireExpandedEvent=function(){var e=0,r=0,n=function(a){a.isColumnGroup()&&(a.isExpanded()?e++:r++,a.getChildren().forEach(function(s){s instanceof Yn&&n(s)}))};this.filterGroupComps.forEach(n);var i;e>0&&r>0?i=Vr.INDETERMINATE:r>0?i=Vr.COLLAPSED:i=Vr.EXPANDED,this.dispatchEvent({type:"groupExpanded",state:i})},t.prototype.performFilterSearch=function(e){this.searchFilterText=E.exists(e)?e.toLowerCase():null,this.searchFilters(this.searchFilterText)},t.prototype.searchFilters=function(e){var r=function(s){return!E.exists(e)||s.toLowerCase().indexOf(e)!==-1},n=function(s,l){if(!(s instanceof Yn))return r(s.getColumnFilterName()||"");var u=s.getChildren(),c=r(s.getFilterGroupName()),d=l||c;if(d){s.hideGroup(!1);for(var h=0;h<u.length;h++)n(u[h],d),s.hideGroupItem(!1,h);return!0}var f=!1;return u.forEach(function(p,v){var g=n(p,l);s.hideGroupItem(!g,v),g&&(f=!0)}),s.hideGroup(!f),f},i,a;this.filterGroupComps.forEach(function(s,l){n(s,!1),i===void 0?s.containsCssClass("ag-hidden")||(i=l,a=l):!s.containsCssClass("ag-hidden")&&a!==l&&(a=l)}),this.setFirstAndLastVisible(i,a)},t.prototype.setFirstAndLastVisible=function(e,r){this.filterGroupComps.forEach(function(n,i){n.removeCssClass("ag-first-group-visible"),n.removeCssClass("ag-last-group-visible"),i===e&&n.addCssClass("ag-first-group-visible"),i===r&&n.addCssClass("ag-last-group-visible")})},t.prototype.refreshFilters=function(e){this.filterGroupComps.forEach(function(r){return r.refreshFilters(e)})},t.prototype.destroyFilters=function(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps),E.clearElement(this.getGui())},t.prototype.destroy=function(){this.destroyFilters(),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-filter-list-panel"></div>',Bs([D("gridApi")],t.prototype,"gridApi",void 0),Bs([D("columnApi")],t.prototype,"columnApi",void 0),Bs([D("toolPanelColDefService")],t.prototype,"toolPanelColDefService",void 0),Bs([D("columnModel")],t.prototype,"columnModel",void 0),t}(oe),Ox=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),qa=function(){return qa=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},qa.apply(this,arguments)},Hs=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ex=function(o){Ox(t,o);function t(){var e=o.call(this,t.TEMPLATE)||this;return e.initialised=!1,e.listenerDestroyFuncs=[],e}return t.prototype.init=function(e){this.initialised&&(this.listenerDestroyFuncs.forEach(function(a){return a()}),this.listenerDestroyFuncs=[]),this.initialised=!0;var r={suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi};this.params=qa(qa(qa({},r),e),{context:this.gridOptionsService.context}),this.filtersToolPanelHeaderPanel.init(this.params),this.filtersToolPanelListPanel.init(this.params);var n=this.params.suppressExpandAll,i=this.params.suppressFilterSearch;n&&i&&this.filtersToolPanelHeaderPanel.setDisplayed(!1),this.listenerDestroyFuncs.push(this.addManagedListener(this.filtersToolPanelHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"searchChanged",this.onSearchChanged.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"groupExpanded",this.onGroupExpanded.bind(this)))},t.prototype.setVisible=function(e){o.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},t.prototype.onExpandAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!0)},t.prototype.onCollapseAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!1)},t.prototype.onSearchChanged=function(e){this.filtersToolPanelListPanel.performFilterSearch(e.searchText)},t.prototype.setFilterLayout=function(e){this.filtersToolPanelListPanel.setFiltersLayout(e)},t.prototype.onGroupExpanded=function(e){this.filtersToolPanelHeaderPanel.setExpandState(e.state)},t.prototype.expandFilterGroups=function(e){this.filtersToolPanelListPanel.expandFilterGroups(!0,e)},t.prototype.collapseFilterGroups=function(e){this.filtersToolPanelListPanel.expandFilterGroups(!1,e)},t.prototype.expandFilters=function(e){this.filtersToolPanelListPanel.expandFilters(!0,e)},t.prototype.collapseFilters=function(e){this.filtersToolPanelListPanel.expandFilters(!1,e)},t.prototype.syncLayoutWithGrid=function(){this.filtersToolPanelListPanel.syncFilterLayout()},t.prototype.refresh=function(){this.init(this.params)},t.prototype.destroy=function(){o.prototype.destroy.call(this)},t.TEMPLATE=`<div class="ag-filter-toolpanel">
            <ag-filters-tool-panel-header ref="filtersToolPanelHeaderPanel"></ag-filters-tool-panel-header>
            <ag-filters-tool-panel-list ref="filtersToolPanelListPanel"></ag-filters-tool-panel-list>
         </div>`,Hs([B("filtersToolPanelHeaderPanel")],t.prototype,"filtersToolPanelHeaderPanel",void 0),Hs([B("filtersToolPanelListPanel")],t.prototype,"filtersToolPanelListPanel",void 0),Hs([D("gridApi")],t.prototype,"gridApi",void 0),Hs([D("columnApi")],t.prototype,"columnApi",void 0),t}(oe),Tx="30.1.0",Px={version:Tx,moduleName:Ce.FiltersToolPanelModule,beans:[],agStackComponents:[{componentName:"AgFiltersToolPanelHeader",componentClass:Cx},{componentName:"AgFiltersToolPanelList",componentClass:_x}],userComponents:[{componentName:"agFiltersToolPanel",componentClass:Ex}],dependantModules:[Vd,lt]},Ax=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ko=function(){function o(t,e,r){this._encode=t,this._decode=e,this._rangeCallback=r}return o.prototype.floor=function(t){var e=new Date(t),r=this._encode(e);return this._decode(r)},o.prototype.ceil=function(t){var e=new Date(Number(t)-1),r=this._encode(e);return this._decode(r+1)},o.prototype.range=function(t,e,r){var n,i=(n=this._rangeCallback)===null||n===void 0?void 0:n.call(this,t,e),a=this._encode(r?this.floor(t):this.ceil(t)),s=this._encode(r?this.ceil(e):this.floor(e));if(s<a)return[];for(var l=[],u=a;u<=s;u++){var c=this._decode(u);l.push(c)}return i==null||i(),l},o}(),$t=function(o){Ax(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.getOffset=function(e,r){var n=typeof e=="number"||e instanceof Date?this._encode(new Date(e)):0;return Math.floor(n)%r},t.prototype.every=function(e,r){var n=this,i=0,a,s=(r??{}).snapTo,l=s===void 0?"start":s;if(typeof l=="string"){var u=i;a=function(f,p){var v=l==="start"?f:p;return i=n.getOffset(v,e),function(){return i=u}}}else typeof l=="number"?i=this.getOffset(new Date(l),e):l instanceof Date&&(i=this.getOffset(l,e));var c=function(f){var p=n._encode(f);return Math.floor((p-i)/e)},d=function(f){return n._decode(f*e+i)},h=new Ko(c,d,a);return h},t}(Ko);function Dx(o){return o.getTime()}function Mx(o){return new Date(o)}var Rx=new $t(Dx,Mx);new Date(0).getFullYear();var wi=1e3,Ut=wi*60,jr=Ut*60,kn=jr*24,Ha=kn*7,Sa=kn*30,zs=kn*365,jv=new Date().getTimezoneOffset()*Ut;function Ix(o){return Math.floor((o.getTime()-jv)/wi)}function Lx(o){return new Date(jv+o*wi)}var Fx=new $t(Ix,Lx),Bv=new Date().getTimezoneOffset()*Ut;function kx(o){return Math.floor((o.getTime()-Bv)/Ut)}function Nx(o){return new Date(Bv+o*Ut)}var Gx=new $t(kx,Nx),Hv=new Date().getTimezoneOffset()*Ut;function Vx(o){return Math.floor((o.getTime()-Hv)/jr)}function jx(o){return new Date(Hv+o*jr)}var Bx=new $t(Vx,jx);function Hx(o){var t=o.getTimezoneOffset()*6e4;return Math.floor((o.getTime()-t)/kn)}function zx(o){var t=new Date(1970,0,1);return t.setDate(t.getDate()+o),t}var Wx=new $t(Hx,zx);function Di(o){var t=new Date(2023,0,1+o).getTime();function e(n){var i=n.getTime();return Math.floor((i-t)/Ha)}function r(n){var i=new Date(t);return i.setDate(i.getDate()+n*7),i}return new $t(e,r)}var Ux=Di(0);Di(1);Di(2);Di(3);Di(4);Di(5);Di(6);function Kx(o){return o.getFullYear()*12+o.getMonth()}function $x(o){var t=Math.floor(o/12),e=o-t*12;return new Date(t,e,1)}var Xx=new $t(Kx,$x);function Yx(o){return o.getFullYear()}function qx(o){var t=new Date;return t.setFullYear(o),t.setMonth(0,1),t.setHours(0,0,0,0),t}var Zx=new $t(Yx,qx);function Jx(o){return Math.floor(o.getTime()/Ut)}function Qx(o){return new Date(o*Ut)}new $t(Jx,Qx);function ew(o){return Math.floor(o.getTime()/jr)}function tw(o){return new Date(o*jr)}new $t(ew,tw);function rw(o){return Math.floor(o.getTime()/kn)}function nw(o){var t=new Date(0);return t.setUTCDate(t.getUTCDate()+o),t.setUTCHours(0,0,0,0),t}new $t(rw,nw);function iw(o){return o.getUTCFullYear()*12+o.getUTCMonth()}function ow(o){var t=Math.floor(o/12),e=o-t*12;return new Date(Date.UTC(t,e,1))}new $t(iw,ow);function aw(o){return o.getUTCFullYear()}function sw(o){var t=new Date;return t.setUTCFullYear(o),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),t}new $t(aw,sw);var lw=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];function zv(){var o=navigator.userAgent;return!lw.some(function(t){return t.test(o)})}var We=function(){function o(t){var e=t.document,r=e===void 0?window.document:e,n=t.width,i=n===void 0?600:n,a=t.height,s=a===void 0?300:a,l=t.domLayer,u=l===void 0?!1:l,c=t.zIndex,d=c===void 0?0:c,h=t.name,f=h===void 0?void 0:h,p=t.overrideDevicePixelRatio,v=p===void 0?void 0:p;this._container=void 0,this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.document=r,this.element=r.createElement("canvas"),this.element.width=i,this.element.height=s,this.context=this.element.getContext("2d"),this.imageSource=this.context.canvas;var g=this.element.style;g.userSelect="none",g.display="block",u&&(g.position="absolute",g.zIndex=String(d),g.top="0",g.left="0",g.pointerEvents="none",g.opacity="1",f&&(this.element.id=f)),this.setPixelRatio(v),this.resize(i,s)}return Object.defineProperty(o.prototype,"container",{get:function(){return this._container},set:function(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this.element.style.display=t?"block":"none",this._enabled=!!t},enumerable:!1,configurable:!0}),o.prototype.remove=function(){var t=this.element.parentNode;t!=null&&t.removeChild(this.element)},o.prototype.destroy=function(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)},o.prototype.snapshot=function(){},o.prototype.clear=function(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()},o.prototype.toImage=function(){var t=this.document.createElement("img");return t.src=this.getDataURL(),t},o.prototype.getDataURL=function(t){return this.element.toDataURL(t)},o.prototype.download=function(t,e){e===void 0&&(e="image/png"),t=(t??"").trim()||"image";var r=this.getDataURL(e),n=this.document,i=n.createElement("a");i.href=r,i.download=t,i.style.display="none",n.body.appendChild(i),i.click(),n.body.removeChild(i)},Object.defineProperty(o.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:!1,configurable:!0}),o.prototype.setPixelRatio=function(t){var e=t??window.devicePixelRatio;zv()||(e=1),o.overrideScale(this.context,e),this._pixelRatio=e},Object.defineProperty(o.prototype,"pixelated",{get:function(){return this.element.style.imageRendering==="pixelated"},set:function(t){this.element.style.imageRendering=t?"pixelated":"auto"},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),o.prototype.resize=function(t,e){if(t>0&&e>0){var r=this,n=r.element,i=r.context,a=r.pixelRatio;n.width=Math.round(t*a),n.height=Math.round(e*a),n.style.width=t+"px",n.style.height=e+"px",i.resetTransform(),this._width=t,this._height=e}},Object.defineProperty(o,"textMeasuringContext",{get:function(){if(this._textMeasuringContext)return this._textMeasuringContext;var t=document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d"),this._textMeasuringContext},enumerable:!1,configurable:!0}),Object.defineProperty(o,"svgText",{get:function(){if(this._svgText)return this._svgText;var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.setAttribute("width","100"),e.setAttribute("height","100"),e.classList?e.classList.add("text-measuring-svg"):e.setAttribute("class","text-measuring-svg"),e.style.position="absolute",e.style.top="-1000px",e.style.visibility="hidden";var r=document.createElementNS(t,"text");return r.setAttribute("x","0"),r.setAttribute("y","30"),r.setAttribute("text","black"),e.appendChild(r),document.body.appendChild(e),this._svgText=r,r},enumerable:!1,configurable:!0}),Object.defineProperty(o,"has",{get:function(){if(this._has)return this._has;var t=navigator.userAgent.indexOf("Chrome")>-1,e=navigator.userAgent.indexOf("Firefox")>-1,r=!t&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:this.textMeasuringContext.measureText("test").actualBoundingBoxDescent!==void 0&&!e&&!r,getTransform:this.textMeasuringContext.getTransform!==void 0}),this._has},enumerable:!1,configurable:!0}),o.measureText=function(t,e,r,n){var i=this.textMeasuringContext;return i.font=e,i.textBaseline=r,i.textAlign=n,i.measureText(t)},o.getTextSize=function(t,e){if(this.has.textMetrics){var r=this.textMeasuringContext;r.font=e;var n=r.measureText(t);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}else return this.measureSvgText(t,e)},o.measureSvgText=function(t,e){var r=this.textSizeCache,n=r[e];if(n){var i=n[t];if(i)return i}else r[e]={};var a=this.svgText;a.style.font=e,a.textContent=t;var s=a.getBBox(),l={width:s.width,height:s.height};return r[e][t]=l,l},o.overrideScale=function(t,e){var r=0,n={save:function(){this.$save(),r++},restore:function(){if(r>0)this.$restore(),r--;else throw new Error("AG Charts - Unable to restore() past depth 0")},setTransform:function(a,s,l,u,c,d){typeof a=="object"?this.$setTransform(a):this.$setTransform(a*e,s*e,l*e,u*e,c*e,d*e)},resetTransform:function(){this.$setTransform(e,0,0,e,0,0)},verifyDepthZero:function(){if(r!==0)throw new Error("AG Charts - Save/restore depth is non-zero: "+r)}};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t["$"+i]||(t["$"+i]=t[i]),t[i]=n[i])},o.textSizeCache={},o}(),Qc=function(){return Qc=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Qc.apply(this,arguments)},uw=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Ee=function(){function o(t,e,r,n){this.x=t,this.y=e,this.width=r,this.height=n}return o.prototype.clone=function(){var t=this,e=t.x,r=t.y,n=t.width,i=t.height;return new o(e,r,n,i)},o.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},o.prototype.containsPoint=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},o.prototype.collidesBBox=function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y},o.prototype.isInfinite=function(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0},o.prototype.shrink=function(t,e){var r=this,n=function(i,a){switch(i){case"top":r.y+=a;case"bottom":r.height-=a;break;case"left":r.x+=a;case"right":r.width-=a;break;case"vertical":r.y+=a,r.height-=a*2;break;case"horizontal":r.x+=a,r.width-=a*2;break;default:r.x+=a,r.width-=a*2,r.y+=a,r.height-=a*2}};return typeof t=="number"?n(e,t):Object.entries(t).forEach(function(i){var a=uw(i,2),s=a[0],l=a[1];return n(s,l)}),this},o.prototype.grow=function(t,e){if(typeof t=="number")this.shrink(-t,e);else{var r=Qc({},t);for(var n in r)r[n]*=-1;this.shrink(r)}return this},o.merge=function(t){var e=1/0,r=1/0,n=-1/0,i=-1/0;return t.forEach(function(a){a.x<e&&(e=a.x),a.y<r&&(r=a.y),a.x+a.width>n&&(n=a.x+a.width),a.y+a.height>i&&(i=a.y+a.height)}),new o(e,r,n-e,i-r)},o}(),Wh=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},cw=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},gi=function(){function o(t){t===void 0&&(t=[1,0,0,1,0,0]),this.elements=t}return Object.defineProperty(o.prototype,"e",{get:function(){return cw([],Wh(this.elements))},enumerable:!1,configurable:!0}),o.prototype.setElements=function(t){var e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},Object.defineProperty(o.prototype,"identity",{get:function(){var t=this.elements;return t[0]===1&&t[1]===0&&t[2]===0&&t[3]===1&&t[4]===0&&t[5]===0},enumerable:!1,configurable:!0}),o.prototype.AxB=function(t,e,r){var n=t[0]*e[0]+t[2]*e[1],i=t[1]*e[0]+t[3]*e[1],a=t[0]*e[2]+t[2]*e[3],s=t[1]*e[2]+t[3]*e[3],l=t[0]*e[4]+t[2]*e[5]+t[4],u=t[1]*e[4]+t[3]*e[5]+t[5];r=r??t,r[0]=n,r[1]=i,r[2]=a,r[3]=s,r[4]=l,r[5]=u},o.prototype.multiplySelf=function(t){return this.AxB(this.elements,t.elements),this},o.prototype.multiply=function(t){var e=new Array(6);return this.AxB(this.elements,t.elements,e),new o(e)},o.prototype.preMultiplySelf=function(t){return this.AxB(t.elements,this.elements,this.elements),this},o.prototype.inverse=function(){var t=this.elements,e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],s=t[5],l=1/(e*i-r*n);return e*=l,r*=l,n*=l,i*=l,new o([i,-r,-n,e,n*s-i*a,r*a-e*s])},o.prototype.inverseTo=function(t){var e=this.elements,r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=1/(r*a-n*i);return r*=u,n*=u,i*=u,a*=u,t.setElements([a,-n,-i,r,i*l-a*s,n*s-r*l]),this},o.prototype.invertSelf=function(){var t=this.elements,e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],s=t[5],l=1/(e*i-r*n);return e*=l,r*=l,n*=l,i*=l,t[0]=i,t[1]=-r,t[2]=-n,t[3]=e,t[4]=n*s-i*a,t[5]=r*a-e*s,this},o.prototype.transformPoint=function(t,e){var r=this.elements;return{x:t*r[0]+e*r[2]+r[4],y:t*r[1]+e*r[3]+r[5]}},o.prototype.transformBBox=function(t,e){var r=this.elements,n=r[0],i=r[1],a=r[2],s=r[3],l=t.width*.5,u=t.height*.5,c=t.x+l,d=t.y+u,h=Math.abs(l*n)+Math.abs(u*a),f=Math.abs(l*i)+Math.abs(u*s);return e||(e=new Ee(0,0,0,0)),e.x=c*n+d*a+r[4]-h,e.y=c*i+d*s+r[5]-f,e.width=h+h,e.height=f+f,e},o.prototype.toContext=function(t){if(!this.identity){var e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}},o.flyweight=function(t){return o.instance.setElements(t.elements)},o.updateTransformMatrix=function(t,e,r,n,i,a,s){var l=Wh([0,0],2),u=l[0],c=l[1],d=e,h=r,f,p;d===1&&h===1?(f=0,p=0):(f=(s==null?void 0:s.scalingCenterX)==null?u:s==null?void 0:s.scalingCenterX,p=(s==null?void 0:s.scalingCenterY)==null?c:s==null?void 0:s.scalingCenterY);var v=n,g=Math.cos(v),m=Math.sin(v),y,S;v===0?(y=0,S=0):(y=(s==null?void 0:s.rotationCenterX)==null?u:s==null?void 0:s.rotationCenterX,S=(s==null?void 0:s.rotationCenterY)==null?c:s==null?void 0:s.rotationCenterY);var C=i,w=a,x=f*(1-d)-y,b=p*(1-h)-S;return t.setElements([g*d,m*d,-m*h,g*h,g*x-m*b+y+C,m*x+g*b+S+w]),t},o.fromContext=function(t){var e=t.getTransform();return new o([e.a,e.b,e.c,e.d,e.e,e.f])},o.instance=new o,o}(),Uh={};function gn(o){var t,e=o.constructor,r=Object.prototype.hasOwnProperty.call(e,"className")?e.className:e.name;if(!r)throw new Error("The "+e+" is missing the 'className' property.");var n=((t=Uh[r])!==null&&t!==void 0?t:0)+1;return Uh[r]=n,r+"-"+n}var Z;(function(o){o[o.NONE=0]="NONE",o[o.TRIVIAL=1]="TRIVIAL",o[o.MINOR=2]="MINOR",o[o.MAJOR=3]="MAJOR"})(Z||(Z={}));function dw(){try{return new Function("return true"),!0}catch{return!1}}var hw=dw();function ie(o){var t=o??{},e=t.changeCb,r=t.convertor;return function(n,i){var a="__"+i;n[i]||(hw&&e==null&&r==null?fw(n,i,a,o):pw(n,i,a,o))}}function fw(o,t,e,r){var n=r??{},i=n.redraw,a=i===void 0?Z.TRIVIAL:i,s=n.type,l=s===void 0?"normal":s,u=n.checkDirtyOnAssignment,c=u===void 0?!1:u,d=new Function("value",`
        const oldValue = this.`+e+`;
        if (value !== oldValue) {
            this.`+e+` = value;
            `+(l==="normal"?"this.markDirty(this, "+a+");":"")+`
            `+(l==="transform"?"this.markDirtyTransform("+a+");":"")+`
            `+(l==="path"?"if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, "+a+"); }":"")+`
            `+(l==="font"?"if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, "+a+"); }":"")+`
        }
        `+(c?"if (value != null && value._dirty > "+Z.NONE+") { this.markDirty(value, value._dirty); }":"")+`
`),h=new Function("return this."+e+";");Object.defineProperty(o,t,{set:d,get:h,enumerable:!0,configurable:!0})}function pw(o,t,e,r){var n=r??{},i=n.redraw,a=i===void 0?Z.TRIVIAL:i,s=n.type,l=s===void 0?"normal":s,u=n.changeCb,c=n.convertor,d=n.checkDirtyOnAssignment,h=d===void 0?!1:d,f=function(v){var g=this[e];v=c?c(v):v,v!==g&&(this[e]=v,l==="normal"&&this.markDirty(this,a),l==="transform"&&this.markDirtyTransform(a),l==="path"&&!this._dirtyPath&&(this._dirtyPath=!0,this.markDirty(this,a)),l==="font"&&!this._dirtyFont&&(this._dirtyFont=!0,this.markDirty(this,a)),u&&u(this)),h&&v!=null&&v._dirty>Z.NONE&&this.markDirty(v,v._dirty)},p=function(){return this[e]};Object.defineProperty(o,t,{set:f,get:p,enumerable:!0,configurable:!0})}var jd=function(){function o(){this._dirty=Z.MAJOR}return o.prototype.markDirty=function(t,e){e===void 0&&(e=Z.TRIVIAL),!(this._dirty>e)&&(this._dirty=e)},o.prototype.markClean=function(t){this._dirty=Z.NONE},o.prototype.isDirty=function(){return this._dirty>Z.NONE},o}(),vw=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zt=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},qr=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Zu=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Ju=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},_t;(function(o){o[o.All=0]="All",o[o.None=1]="None"})(_t||(_t={}));var Kh=function(o){o.parent&&(o.parent.dirtyZIndex=!0),o.zIndexChanged()},yu=function(o){vw(t,o);function t(e){var r=e===void 0?{}:e,n=r.isVirtual,i=o.call(this)||this;return i.serialNumber=t._nextSerialNumber++,i.id=gn(i),i.tag=NaN,i.isContainerNode=!1,i._virtualChildren=[],i._children=[],i.childSet={},i.matrix=new gi,i.inverseMatrix=new gi,i.dirtyTransform=!1,i.scalingX=1,i.scalingY=1,i.scalingCenterX=null,i.scalingCenterY=null,i.rotationCenterX=null,i.rotationCenterY=null,i.rotation=0,i.translationX=0,i.translationY=0,i.visible=!0,i.dirtyZIndex=!1,i.zIndex=0,i.zIndexSubOrder=void 0,i.pointerEvents=_t.All,i.isVirtual=n??!1,i}return Object.defineProperty(t.prototype,"datum",{get:function(){var e;return this._datum!==void 0?this._datum:(e=this._parent)===null||e===void 0?void 0:e.datum},set:function(e){this._datum=e},enumerable:!1,configurable:!0}),t.prototype._setLayerManager=function(e){var r,n,i,a;this._layerManager=e,this._debug=e==null?void 0:e.debug;try{for(var s=qr(this._children),l=s.next();!l.done;l=s.next()){var u=l.value;u._setLayerManager(e)}}catch(h){r={error:h}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}try{for(var c=qr(this._virtualChildren),d=c.next();!d.done;d=c.next()){var u=d.value;u._setLayerManager(e)}}catch(h){i={error:h}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}},Object.defineProperty(t.prototype,"layerManager",{get:function(){return this._layerManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){var e,r;if(this._virtualChildren.length===0)return this._children;var n=Ju([],Zu(this._children));try{for(var i=qr(this._virtualChildren),a=i.next();!a.done;a=i.next()){var s=a.value;n.push.apply(n,Ju([],Zu(s.children)))}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"virtualChildren",{get:function(){return this._virtualChildren},enumerable:!1,configurable:!0}),t.prototype.hasVirtualChildren=function(){return this._virtualChildren.length>0},t.prototype.append=function(e){var r,n;Array.isArray(e)||(e=[e]);try{for(var i=qr(e),a=i.next();!a.done;a=i.next()){var s=a.value;if(s.parent)throw new Error(s+" already belongs to another parent: "+s.parent+".");if(s.layerManager)throw new Error(s+" already belongs to a scene: "+s.layerManager+".");if(this.childSet[s.id])throw new Error("Duplicate "+s.constructor.name+" node: "+s);s.isVirtual?this._virtualChildren.push(s):this._children.push(s),this.childSet[s.id]=!0,s._parent=this,s._setLayerManager(this.layerManager)}}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}this.dirtyZIndex=!0,this.markDirty(this,Z.MAJOR)},t.prototype.appendChild=function(e){return this.append(e),e},t.prototype.removeChild=function(e){var r=function(){throw new Error("The node to be removed is not a child of this node.")};if(e.parent!==this&&r(),e.isVirtual){var n=this._virtualChildren.indexOf(e);n<0&&r(),this._virtualChildren.splice(n,1)}else{var n=this._children.indexOf(e);n<0&&r(),this._children.splice(n,1)}return delete this.childSet[e.id],e._parent=void 0,e._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(e,Z.MAJOR),e},t.prototype.calculateCumulativeMatrix=function(){this.computeTransformMatrix();for(var e=gi.flyweight(this.matrix),r=this.parent;r;)r.computeTransformMatrix(),e.preMultiplySelf(r.matrix),r=r.parent;return e},t.prototype.transformPoint=function(e,r){var n=this.calculateCumulativeMatrix();return n.invertSelf().transformPoint(e,r)},t.prototype.inverseTransformPoint=function(e,r){var n=this.calculateCumulativeMatrix();return n.transformPoint(e,r)},t.prototype.transformBBox=function(e){var r=this.calculateCumulativeMatrix();return r.invertSelf().transformBBox(e)},t.prototype.inverseTransformBBox=function(e){var r=this.calculateCumulativeMatrix();return r.transformBBox(e)},t.prototype.markDirtyTransform=function(){this.dirtyTransform=!0,this.markDirty(this,Z.MAJOR)},t.prototype.containsPoint=function(e,r){return!1},t.prototype.pickNode=function(e,r){var n;if(!(!this.visible||this.pointerEvents===_t.None||!this.containsPoint(e,r))){var i=this.children;if(i.length>1e3)for(var a=i.length-1;a>=0;a--){var s=i[a],l=(n=s.computeTransformedBBox())===null||n===void 0?void 0:n.containsPoint(e,r),u=l?s.pickNode(e,r):void 0;if(u)return u}else if(i.length)for(var a=i.length-1;a>=0;a--){var u=i[a].pickNode(e,r);if(u)return u}else if(!this.isContainerNode)return this}},t.prototype.findNodes=function(e){var r,n,i=e(this)?[this]:[];try{for(var a=qr(this.children),s=a.next();!s.done;s=a.next()){var l=s.value,u=l.findNodes(e);u&&i.push.apply(i,Ju([],Zu(u)))}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.prototype.computeBBox=function(){},t.prototype.computeTransformedBBox=function(){var e=this.computeBBox();if(e){this.computeTransformMatrix();for(var r=gi.flyweight(this.matrix),n=this.parent;n;)n.computeTransformMatrix(),r.preMultiplySelf(n.matrix),n=n.parent;return r.transformBBox(e,e),e}},t.prototype.computeTransformMatrix=function(){if(this.dirtyTransform){var e=this,r=e.matrix,n=e.scalingX,i=e.scalingY,a=e.rotation,s=e.translationX,l=e.translationY,u=e.scalingCenterX,c=e.scalingCenterY,d=e.rotationCenterX,h=e.rotationCenterY;gi.updateTransformMatrix(r,n,i,a,s,l,{scalingCenterX:u,scalingCenterY:c,rotationCenterX:d,rotationCenterY:h}),r.inverseTo(this.inverseMatrix),this.dirtyTransform=!1}},t.prototype.render=function(e){var r=e.stats;this._dirty=Z.NONE,r&&r.nodesRendered++},t.prototype.clearBBox=function(e){var r=this.computeBBox();if(r!=null){var n=r.x,i=r.y,a=r.width,s=r.height,l=this.transformPoint(n,i),u=this.transformPoint(n+a,i+s);e.clearRect(l.x,l.y,u.x-l.x,u.y-l.y)}},t.prototype.markDirty=function(e,r,n){r===void 0&&(r=Z.TRIVIAL),n===void 0&&(n=r),!(this._dirty>r)&&(this._dirty===r&&r===n||(this._dirty=r,this.parent?this.parent.markDirty(this,n):this.layerManager&&this.layerManager.markDirty()))},Object.defineProperty(t.prototype,"dirty",{get:function(){return this._dirty},enumerable:!1,configurable:!0}),t.prototype.markClean=function(e){var r,n,i,a,s=e??{},l=s.force,u=l===void 0?!1:l,c=s.recursive,d=c===void 0?!0:c;if(!(this._dirty===Z.NONE&&!u)){if(this._dirty=Z.NONE,d!==!1)try{for(var h=qr(this._virtualChildren),f=h.next();!f.done;f=h.next()){var p=f.value;p.markClean({force:u})}}catch(m){r={error:m}}finally{try{f&&!f.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}if(d===!0)try{for(var v=qr(this._children),g=v.next();!g.done;g=v.next()){var p=g.value;p.markClean({force:u})}}catch(m){i={error:m}}finally{try{g&&!g.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}}},t.prototype.visibilityChanged=function(){},Object.defineProperty(t.prototype,"nodeCount",{get:function(){var e,r,n,i,a=1,s=this._dirty>=Z.NONE||this.dirtyTransform?1:0,l=this.visible?1:0,u=function(v){var g=v.nodeCount,m=g.count,y=g.visibleCount,S=g.dirtyCount;a+=m,l+=y,s+=S};try{for(var c=qr(this._children),d=c.next();!d.done;d=c.next()){var h=d.value;u(h)}}catch(v){e={error:v}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}try{for(var f=qr(this._virtualChildren),p=f.next();!p.done;p=f.next()){var h=p.value;u(h)}}catch(v){n={error:v}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}return{count:a,visibleCount:l,dirtyCount:s}},enumerable:!1,configurable:!0}),t.prototype.zIndexChanged=function(){},t._nextSerialNumber=0,Zt([ie({type:"transform"})],t.prototype,"scalingX",void 0),Zt([ie({type:"transform"})],t.prototype,"scalingY",void 0),Zt([ie({type:"transform"})],t.prototype,"scalingCenterX",void 0),Zt([ie({type:"transform"})],t.prototype,"scalingCenterY",void 0),Zt([ie({type:"transform"})],t.prototype,"rotationCenterX",void 0),Zt([ie({type:"transform"})],t.prototype,"rotationCenterY",void 0),Zt([ie({type:"transform"})],t.prototype,"rotation",void 0),Zt([ie({type:"transform"})],t.prototype,"translationX",void 0),Zt([ie({type:"transform"})],t.prototype,"translationY",void 0),Zt([ie({redraw:Z.MAJOR,changeCb:function(e){return e.visibilityChanged()}})],t.prototype,"visible",void 0),Zt([ie({redraw:Z.TRIVIAL,changeCb:Kh})],t.prototype,"zIndex",void 0),Zt([ie({redraw:Z.TRIVIAL,changeCb:Kh})],t.prototype,"zIndexSubOrder",void 0),t}(jd);function Wv(o,t){var e=0;return typeof o=="number"&&typeof t=="number"?e=o-t:typeof o=="string"&&typeof t=="string"?e=o.localeCompare(t):o==null&&t==null||(o==null?e=-1:t==null?e=1:e=String(o).localeCompare(String(t))),e}function Uv(o,t,e){var r=function(a){return typeof a=="function"?a():a};for(var n in o){var i=e(r(o[n]),r(t[n]));if(i!==0)return i}return 0}var $h={};function Xh(o,t){$h[t]||(o(),$h[t]=!0)}var zi=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Wi=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},re={debug:function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];console.log.apply(console,Wi([],zi(o)))},warn:function(o){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];console.warn.apply(console,Wi(["AG Charts - "+o],zi(t)))},error:function(o){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];typeof o=="object"?console.error.apply(console,Wi(["AG Charts error",o],zi(t))):console.error.apply(console,Wi(["AG Charts - "+o],zi(t)))},warnOnce:function(o){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];Xh(function(){return re.warn.apply(re,Wi([o],zi(t)))},"Logger.warn: "+o)},errorOnce:function(o){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];Xh(function(){return re.error.apply(re,Wi([o],zi(t)))},"Logger.warn: "+o)}},gw=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Il=function(){return Il=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Il.apply(this,arguments)},yw=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Qu=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Yh=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Ws=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},le=function(o){gw(t,o);function t(e){var r,n=o.call(this,{isVirtual:e==null?void 0:e.isVirtual})||this;n.opts=e,n.opacity=1,n.lastBBox=void 0;var i=e??{},a=i.zIndex,s=i.zIndexSubOrder;return n.isContainerNode=!0,a!==void 0&&(n.zIndex=a),s!==void 0&&(n.zIndexSubOrder=s),n.name=(r=n.opts)===null||r===void 0?void 0:r.name,n}return t.prototype.zIndexChanged=function(){var e;this.layer&&((e=this._layerManager)===null||e===void 0||e.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))},t.prototype.isLayer=function(){return this.layer!=null},t.prototype._setLayerManager=function(e){var r=this,n,i;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(o.prototype._setLayerManager.call(this,e),e&&(!((n=this.opts)===null||n===void 0)&&n.layer)){var a=(i=this.opts)!==null&&i!==void 0?i:{},s=a.zIndex,l=a.zIndexSubOrder,u=a.name,c=function(){return r.getComputedOpacity()},d=function(){return r.getVisibility()};this.layer=e.addLayer({zIndex:s,zIndexSubOrder:l,name:u,getComputedOpacity:c,getVisibility:d})}},t.prototype.getComputedOpacity=function(){var e=1,r=this;do r instanceof t&&(e*=r.opacity);while(r=r.parent);return e},t.prototype.getVisibility=function(){for(var e=this,r=this.visible;e=e.parent;)e.visible||(r=e.visible);return r},t.prototype.visibilityChanged=function(){this.layer&&(this.layer.enabled=this.visible)},t.prototype.markDirty=function(e,r){if(r===void 0&&(r=Z.TRIVIAL),this.isVirtual){o.prototype.markDirty.call(this,e,r);return}var n=r;(r<Z.MINOR||this.layer!=null)&&(n=Z.TRIVIAL),o.prototype.markDirty.call(this,e,r,n)},t.prototype.containsPoint=function(e,r){return!0},t.prototype.computeBBox=function(){return this.computeTransformMatrix(),t.computeBBox(this.children)},t.prototype.computeTransformedBBox=function(){return this.computeBBox()},t.prototype.render=function(e){var r,n,i,a,s,l,u,c,d=this.opts,h=d===void 0?{}:d,f=h.name,p=f===void 0?void 0:f,v=this._debug,g=v===void 0?{}:v,m=g.consoleLog,y=m===void 0?!1:m,S=this,C=S.dirty,w=S.dirtyZIndex,x=S.layer,b=S.children,_=S.clipRect,T=S.dirtyTransform,O=e.ctx,P=e.forceRender,M=e.clipBBox,I=e.resized,R=e.stats,L=O.getTransform(),F=C>=Z.MINOR||w||I,k=F,N=!1;try{for(var G=Qu(b),$=G.next();!$.done;$=G.next()){var j=$.value;if(k||(k=j.layerManager==null&&j.dirty>=Z.TRIVIAL),N||(N=j.layerManager!=null&&j.dirty>=Z.TRIVIAL),k)break}}catch(fe){r={error:fe}}finally{try{$&&!$.done&&(n=G.return)&&n.call(G)}finally{if(r)throw r.error}}if(p&&y&&re.debug({name:p,group:this,isDirty:F,isChildDirty:k,dirtyTransform:T,renderCtx:e,forceRender:P}),T)P="dirtyTransform";else if(x){var z=this.computeBBox();(this.lastBBox===void 0||!this.lastBBox.equals(z))&&(P="dirtyTransform",this.lastBBox=z)}if(!F&&!k&&!N&&!P){if(p&&y&&R){var W=this.nodeCount;re.debug({name:p,result:"skipping",renderCtx:e,counts:W,group:this})}x&&R&&(R.layersSkipped++,R.nodesSkipped+=this.nodeCount.count),this.markClean({recursive:!1});return}var Y=this.visible;if(x){if(O=x.context,O.save(),O.resetTransform(),P!=="dirtyTransform"&&(P=k||w),P&&x.clear(),M){var H=M.width,K=M.height,q=M.x,Q=M.y;y&&re.debug({name:p,clipBBox:M,ctxTransform:O.getTransform(),renderCtx:e,group:this}),this.clipCtx(O,q,Q,H,K)}O.setTransform(L)}else O.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(O),_){var q=_.x,Q=_.y,H=_.width,K=_.height;O.save(),y&&re.debug({name:p,clipRect:_,ctxTransform:O.getTransform(),renderCtx:e,group:this}),this.clipCtx(O,q,Q,H,K),M=this.matrix.transformBBox(_)}var se=this.hasVirtualChildren();w?(this.sortChildren(b),P!=="dirtyTransform"&&(P=!0)):se&&this.sortChildren(b);var ae=P!==e.forceRender||M!==e.clipBBox||O!==e.ctx,xe=ae?Il(Il({},e),{ctx:O,forceRender:P,clipBBox:M}):e,_e=0;try{for(var ye=Qu(b),me=ye.next();!me.done;me=ye.next()){var j=me.value;if(!j.visible||!Y){j.markClean(),R&&(_e+=j.nodeCount.count);continue}if(!P&&j.dirty===Z.NONE){R&&(_e+=j.nodeCount.count);continue}O.save(),j.render(xe),O.restore()}}catch(fe){i={error:fe}}finally{try{me&&!me.done&&(a=ye.return)&&a.call(ye)}finally{if(i)throw i.error}}if(R&&(R.nodesSkipped+=_e),o.prototype.render.call(this,e),_&&O.restore(),se)try{for(var U=Qu(this.virtualChildren),ne=U.next();!ne.done;ne=U.next()){var j=ne.value;j.markClean({recursive:"virtual"})}}catch(fe){s={error:fe}}finally{try{ne&&!ne.done&&(l=U.return)&&l.call(U)}finally{if(s)throw s.error}}if(x&&(R&&R.layersRendered++,O.restore(),P&&x.snapshot(),(c=(u=x.context).verifyDepthZero)===null||c===void 0||c.call(u)),p&&y&&R){var W=this.nodeCount;re.debug({name:p,result:"rendered",skipped:_e,renderCtx:e,counts:W,group:this})}},t.prototype.sortChildren=function(e){this.dirtyZIndex=!1,e.sort(function(r,n){var i,a;return Uv(Ws(Ws([r.zIndex],Yh((i=r.zIndexSubOrder)!==null&&i!==void 0?i:[void 0,void 0])),[r.serialNumber]),Ws(Ws([n.zIndex],Yh((a=n.zIndexSubOrder)!==null&&a!==void 0?a:[void 0,void 0])),[n.serialNumber]),Wv)})},t.prototype.clipCtx=function(e,r,n,i,a){e.beginPath(),e.moveTo(r,n),e.lineTo(r+i,n),e.lineTo(r+i,n+a),e.lineTo(r,n+a),e.closePath(),e.clip()},t.computeBBox=function(e){var r=1/0,n=-1/0,i=1/0,a=-1/0;return e.forEach(function(s){if(s.visible){var l=s.computeTransformedBBox();if(l){var u=l.x,c=l.y;u<r&&(r=u),c<i&&(i=c),u+l.width>n&&(n=u+l.width),c+l.height>a&&(a=c+l.height)}}}),new Ee(r,i,n-r,a-i)},t.prototype.setClipRectInGroupCoordinateSpace=function(e){this.clipRect=e?this.transformBBox(e):void 0},t.className="Group",yw([ie({redraw:Z.MAJOR,convertor:function(e){return Math.min(1,Math.max(0,e))}})],t.prototype,"opacity",void 0),t}(yu),qh=function(){function o(t){var e=t.width,r=e===void 0?600:e,n=t.height,i=n===void 0?300:n,a=t.overrideDevicePixelRatio,s=a===void 0?void 0:a;this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(r,i),this.context=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.setPixelRatio(s),this.resize(r,i)}return o.isSupported=function(){return window.OffscreenCanvas!=null},o.prototype.snapshot=function(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()},o.prototype.destroy=function(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)},o.prototype.clear=function(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()},Object.defineProperty(o.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:!1,configurable:!0}),o.prototype.setPixelRatio=function(t){var e=t??window.devicePixelRatio;zv()||(e=1),We.overrideScale(this.context,e),this._pixelRatio=e},Object.defineProperty(o.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),o.prototype.resize=function(t,e){if(t>0&&e>0){var r=this,n=r.canvas,i=r.context,a=r.pixelRatio;n.width=Math.round(t*a),n.height=Math.round(e*a),i.resetTransform(),this._width=t,this._height=e}},o}();function mr(o){var t=typeof window<"u"?window:void 0;return t==null?void 0:t[o]}var Do;(function(o){o[o.SUMMARY=0]="SUMMARY",o[o.DETAILED=1]="DETAILED"})(Do||(Do={}));var yi=function(){return yi=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},yi.apply(this,arguments)},mw=function(o,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):n(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},Sw=function(o,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Jt=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Zr=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Ca=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function Cw(){var o,t=(o=mr("agChartsSceneDebug"))!==null&&o!==void 0?o:[];typeof t=="string"&&(t=[t]);var e=[];return t.forEach(function(r){r==="layout"?e.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):e.push(r)}),e}var Bd=function(){function o(t){var e,r,n;this.id=gn(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug={dirtyTree:!1,stats:!1,renderBoundingBoxes:!1,consoleLog:!1,level:Do.SUMMARY,sceneNodeHighlight:[]};var i=t.document,a=i===void 0?window.document:i,s=t.mode,l=s===void 0?(e=mr("agChartsSceneRenderModel"))!==null&&e!==void 0?e:"adv-composite":s,u=t.width,c=t.height,d=t.overrideDevicePixelRatio,h=d===void 0?void 0:d;this.overrideDevicePixelRatio=h,this.opts={document:a,mode:l},this.debug.consoleLog=[!0,"scene"].includes(mr("agChartsDebug")),this.debug.level=["scene"].includes(mr("agChartsDebug"))?Do.DETAILED:Do.SUMMARY,this.debug.stats=(r=mr("agChartsSceneStats"))!==null&&r!==void 0?r:!1,this.debug.dirtyTree=(n=mr("agChartsSceneDirtyTree"))!==null&&n!==void 0?n:!1,this.debug.sceneNodeHighlight=Cw(),this.canvas=new We({document:a,width:u,height:c,overrideDevicePixelRatio:h})}return Object.defineProperty(o.prototype,"container",{get:function(){return this.canvas.container},set:function(t){this.canvas.container=t},enumerable:!1,configurable:!0}),o.prototype.download=function(t,e){this.canvas.download(t,e)},o.prototype.getDataURL=function(t){return this.canvas.getDataURL(t)},Object.defineProperty(o.prototype,"width",{get:function(){return this.pendingSize?this.pendingSize[0]:this.canvas.width},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this.pendingSize?this.pendingSize[1]:this.canvas.height},enumerable:!1,configurable:!0}),o.prototype.resize=function(t,e){t=Math.round(t),e=Math.round(e);var r=t<=0||e<=0,n=isNaN(t)||isNaN(e),i=t===this.width&&e===this.height;return i||n||r?!1:(this.pendingSize=[t,e],this.markDirty(),!0)},o.prototype.addLayer=function(t){var e,r=this.opts.mode,n=["composite","dom-composite","adv-composite"];if(n.includes(r)){var i=t.zIndex,a=i===void 0?this._nextZIndex++:i,s=t.name,l=t.zIndexSubOrder,u=t.getComputedOpacity,c=t.getVisibility,d=this,h=d.width,f=d.height,p=d.overrideDevicePixelRatio,v=r==="dom-composite",g=r==="adv-composite",m=!g||!qh.isSupported()?new We({document:this.opts.document,width:h,height:f,domLayer:v,zIndex:a,name:s,overrideDevicePixelRatio:p}):new qh({width:h,height:f,overrideDevicePixelRatio:p}),y={id:this._nextLayerId++,name:s,zIndex:a,zIndexSubOrder:l,canvas:m,getComputedOpacity:u,getVisibility:c};if(a>=this._nextZIndex&&(this._nextZIndex=a+1),this.layers.push(y),this.sortLayers(),v){var S=this.layers.map(function(x){return x.canvas}).filter(function(x){return x instanceof We}),C=S.findIndex(function(x){return x===m}),w=(e=S[C-1])!==null&&e!==void 0?e:this.canvas;w.element.insertAdjacentElement("afterend",m.element)}return this.debug.consoleLog&&re.debug("Scene.addLayer() - layers",this.layers),y.canvas}},o.prototype.removeLayer=function(t){var e=this.layers.findIndex(function(r){return r.canvas===t});e>=0&&(this.layers.splice(e,1),t.destroy(),this.markDirty(),this.debug.consoleLog&&re.debug("Scene.removeLayer() -  layers",this.layers))},o.prototype.moveLayer=function(t,e,r){var n=this.layers.find(function(i){return i.canvas===t});n&&(n.zIndex=e,n.zIndexSubOrder=r,this.sortLayers(),this.markDirty(),this.debug.consoleLog&&re.debug("Scene.moveLayer() -  layers",this.layers))},o.prototype.sortLayers=function(){this.layers.sort(function(t,e){var r,n;return Uv(Zr(Zr([t.zIndex],Jt((r=t.zIndexSubOrder)!==null&&r!==void 0?r:[void 0,void 0])),[t.id]),Zr(Zr([e.zIndex],Jt((n=e.zIndexSubOrder)!==null&&n!==void 0?n:[void 0,void 0])),[e.id]),Wv)})},o.prototype.markDirty=function(){this._dirty=!0},Object.defineProperty(o.prototype,"dirty",{get:function(){return this._dirty},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"root",{get:function(){return this._root},set:function(t){var e=this;t!==this._root&&(this._root&&this._root._setLayerManager(),this._root=t,t&&(t.parent===null&&t.layerManager&&t.layerManager!==this&&(t.layerManager.root=null),t._setLayerManager({addLayer:function(r){return e.addLayer(r)},moveLayer:function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.moveLayer.apply(e,Zr([],Jt(r)))},removeLayer:function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.removeLayer.apply(e,Zr([],Jt(r)))},markDirty:function(){return e.markDirty()},canvas:this.canvas,debug:yi(yi({},this.debug),{consoleLog:this.debug.level>=Do.DETAILED})})),this.markDirty())},enumerable:!1,configurable:!0}),o.prototype.strip=function(){var t,e,r=this.layers;try{for(var n=Ca(r),i=n.next();!i.done;i=n.next()){var a=i.value;a.canvas.destroy(),delete a.canvas}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}r.splice(0,r.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()},o.prototype.destroy=function(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})},o.prototype.render=function(t){var e;return mw(this,void 0,void 0,function(){var r,n,i,a,s,l,u,c,d,h,f,p,v,g,m,y,S,C;return Sw(this,function(w){return r=t??{},n=r.debugSplitTimes,i=n===void 0?[performance.now()]:n,a=r.extraDebugStats,s=a===void 0?{}:a,l=this,u=l.canvas,c=l.canvas.context,d=l.root,h=l.layers,f=l.pendingSize,p=l.opts.mode,f&&((C=this.canvas).resize.apply(C,Zr([],Jt(f))),this.layers.forEach(function(x){var b;return(b=x.canvas).resize.apply(b,Zr([],Jt(f)))}),this.pendingSize=void 0),d&&!d.visible?(this._dirty=!1,[2]):d&&!this.dirty?(this.debug.consoleLog&&re.debug("Scene.render() - no-op",{redrawType:Z[d.dirty],tree:this.buildTree(d)}),this.debugStats(i,c,void 0,s),[2]):(v={ctx:c,forceRender:!0,resized:!!f,debugNodes:{}},this.debug.stats==="detailed"&&(v.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0}),g=!1,(!d||d.dirty>=Z.TRIVIAL)&&(g=!0,u.clear()),d&&this.debug.dirtyTree&&(m=this.buildDirtyTree(d),y=m.dirtyTree,S=m.paths,re.debug("Scene.render() - dirtyTree",{dirtyTree:y,paths:S})),d&&g&&(this.debug.consoleLog&&re.debug("Scene.render() - before",{redrawType:Z[d.dirty],canvasCleared:g,tree:this.buildTree(d)}),d.visible&&(c.save(),d.render(v),c.restore())),p!=="dom-composite"&&h.length>0&&g&&(this.sortLayers(),c.save(),c.setTransform(1/u.pixelRatio,0,0,1/u.pixelRatio,0,0),h.forEach(function(x){var b=x.canvas,_=b.imageSource,T=b.enabled,O=x.getComputedOpacity,P=x.getVisibility;!T||!P()||(c.globalAlpha=O(),c.drawImage(_,0,0))}),c.restore()),(e=c.verifyDepthZero)===null||e===void 0||e.call(c),this._dirty=!1,this.debugStats(i,c,v.stats,s),this.debugSceneNodeHighlight(c,this.debug.sceneNodeHighlight,v.debugNodes),d&&this.debug.consoleLog&&re.debug("Scene.render() - after",{redrawType:Z[d.dirty],canvasCleared:g,tree:this.buildTree(d)}),[2])})})},o.prototype.debugStats=function(t,e,r,n){var i,a;n===void 0&&(n={});var s=performance.now();if(this.debug.stats){var l=t[0];t.push(s);var u=function(F,k){var N=F+k;return F+" / "+N+" ("+Math.round(100*F/N)+"%)"},c=function(F,k){return Math.round((k-F)*100)/100+"ms"},d=r??{},h=d.layersRendered,f=h===void 0?0:h,p=d.layersSkipped,v=p===void 0?0:p,g=d.nodesRendered,m=g===void 0?0:g,y=d.nodesSkipped,S=y===void 0?0:y,C=t.map(function(F,k){return k>0?c(t[k-1],F):null}).filter(function(F){return F!=null}).join(" + "),w=Object.entries(n).map(function(F){var k=Jt(F,2),N=k[0],G=k[1];return N+": "+G}).join(" ; "),x=[c(l,s)+" ("+C+")",""+w,this.debug.stats==="detailed"?"Layers: "+u(f,v):null,this.debug.stats==="detailed"?"Nodes: "+u(m,S):null].filter(function(F){return F!=null}),b=x.map(function(F){return[F,We.getTextSize(F,e.font)]}),_=Math.max.apply(Math,Zr([],Jt(b.map(function(F){var k=Jt(F,2),N=k[1].width;return N})))),T=b.reduce(function(F,k){var N=Jt(k,2),G=N[1].height;return F+G},0);e.save(),e.fillStyle="white",e.fillRect(0,0,_,T),e.fillStyle="black";var O=0;try{for(var P=Ca(b),M=P.next();!M.done;M=P.next()){var I=Jt(M.value,2),R=I[0],L=I[1];O+=L.height,e.fillText(R,2,O)}}catch(F){i={error:F}}finally{try{M&&!M.done&&(a=P.return)&&a.call(P)}finally{if(i)throw i.error}}e.restore()}},o.prototype.debugSceneNodeHighlight=function(t,e,r){var n,i,a,s,l,u,c,d=function(O){return function(P){return O.test(P.id)?!0:P instanceof le&&P.name!=null&&O.test(P.name)}},h=function(O){return function(P){return O===P.id?!0:P instanceof le&&P.name!=null&&O===P.name}};try{for(var f=Ca(e),p=f.next();!p.done;p=f.next()){var v=p.value;if(!(typeof v=="string"&&r[v]!=null)){var g=typeof v=="string"?h(v):d(v),m=(c=this.root)===null||c===void 0?void 0:c.findNodes(g);if(!m||m.length===0){re.debug("Scene.render() - no debugging node with id ["+v+"] in scene graph.");continue}try{for(var y=(a=void 0,Ca(m)),S=y.next();!S.done;S=y.next()){var C=S.value;C instanceof le&&C.name?r[C.name]=C:r[C.id]=C}}catch(O){a={error:O}}finally{try{S&&!S.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}}}}catch(O){n={error:O}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}t.save();try{for(var w=Ca(Object.entries(r)),x=w.next();!x.done;x=w.next()){var b=Jt(x.value,2),_=b[0],C=b[1],T=C.computeTransformedBBox();if(!T){re.debug("Scene.render() - no bbox for debugged node ["+_+"].");continue}t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(T.x,T.y,T.width,T.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(_,T.x,T.y,T.width),t.fillText(_,T.x,T.y,T.width)}}catch(O){l={error:O}}finally{try{x&&!x.done&&(u=w.return)&&u.call(w)}finally{if(l)throw l.error}}t.restore()},o.prototype.buildTree=function(t){var e=this,r,n,i=(r=t instanceof le?t.name:null)!==null&&r!==void 0?r:t.id;return yi(yi({name:i,node:t,dirty:Z[t.dirty]},!((n=t.parent)===null||n===void 0)&&n.isVirtual?{virtualParentDirty:Z[t.parent.dirty],virtualParent:t.parent}:{}),t.children.map(function(a){return e.buildTree(a)}).reduce(function(a,s){var l=s.name,u=s.node,c=u.visible,d=u.opacity,h=u.zIndex,f=u.zIndexSubOrder,p=s.node,v=s.virtualParent;(!c||d<=0)&&(l="("+l+")"),p instanceof le&&p.isLayer()&&(l="*"+l+"*");for(var g=[""+(l??"<unknown>"),"z: "+h,f&&"zo: "+f.map(function(S){return typeof S=="function"?S()+" (fn)":S}).join(" / "),v&&"(virtual parent)"].filter(function(S){return!!S}).join(" "),m=g,y=1;a[m]!=null&&y<100;)m=g+" ("+y+++")";return a[m]=s,a},{}))},o.prototype.buildDirtyTree=function(t){var e=this,r;if(t.dirty===Z.NONE)return{dirtyTree:{},paths:[]};var n=t.children.map(function(s){return e.buildDirtyTree(s)}).filter(function(s){return s.paths.length>0}),i=(r=t instanceof le?t.name:null)!==null&&r!==void 0?r:t.id,a=n.length===0?[i]:n.map(function(s){return s.paths}).reduce(function(s,l){return s.concat(l)},[]).map(function(s){return i+"."+s});return{dirtyTree:yi({name:i,node:t,dirty:Z[t.dirty]},n.map(function(s){return s.dirtyTree}).filter(function(s){return s.dirty!==void 0}).reduce(function(s,l){var u;return s[(u=l.name)!==null&&u!==void 0?u:"<unknown>"]=l,s},{})),paths:a}},o.className="Scene",o}(),xw=function(){function o(){this.stops=[]}return o}(),jo=Math.PI*2;function Rt(o){return o%=jo,o+=jo,o%=jo,o}function ww(o){return o%=jo,o<-Math.PI?o+=jo:o>=Math.PI&&(o-=jo),o}function or(o){return o/180*Math.PI}var bw=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_w=function(o){bw(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.angle=0,e}return t.prototype.createGradient=function(e,r){var n=90,i=this,a=i.stops,s=i.angle,l=Rt(or(s+n)),u=Math.cos(l),c=Math.sin(l),d=r.width,h=r.height,f=r.x+d*.5,p=r.y+h*.5;if(d>0&&h>0){var v=Math.sqrt(h*h+d*d)/2,g=Math.atan2(h,d),m=void 0;l<Math.PI/2?m=l:l<Math.PI?m=Math.PI-l:l<3*Math.PI/2?m=l-Math.PI:m=2*Math.PI-l;var y=v*Math.abs(Math.cos(m-g)),S=e.createLinearGradient(f+u*y,p+c*y,f-u*y,p-c*y);return a.forEach(function(C){S.addColorStop(C.offset,C.color)}),S}return"black"},t}(xw),Ow=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),dr=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ew=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i,Wr=function(o){Ow(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.lastInstanceId=0,e.fillOpacity=1,e.strokeOpacity=1,e.fill=t.defaultStyles.fill,e.stroke=t.defaultStyles.stroke,e.strokeWidth=t.defaultStyles.strokeWidth,e.lineDash=t.defaultStyles.lineDash,e.lineDashOffset=t.defaultStyles.lineDashOffset,e.lineCap=t.defaultStyles.lineCap,e.lineJoin=t.defaultStyles.lineJoin,e.opacity=t.defaultStyles.opacity,e.fillShadow=t.defaultStyles.fillShadow,e}return t.createInstance=function(e){var r=Object.create(e);return r._setParent(void 0),r.id=e.id+"-Instance-"+String(++e.lastInstanceId),r},t.prototype.restoreOwnStyles=function(){for(var e=this.constructor.defaultStyles,r=Object.getOwnPropertyNames(e),n=0,i=r.length;n<i;n++){var a=r[n];this[a]=e[a]}},t.prototype.restoreAllStyles=function(){var e=this.constructor.defaultStyles;for(var r in e)this[r]=e[r]},t.prototype.restoreOverriddenStyles=function(){var e=this.constructor.defaultStyles,r=Object.getPrototypeOf(e);for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&Object.prototype.hasOwnProperty.call(r,n)&&(this[n]=e[n])},t.prototype.updateGradient=function(){var e=this.fill,r;if(e!=null&&e.startsWith("linear-gradient")&&(r=Ew.exec(e))){for(var n=parseFloat(r[1]),i=[],a=r[2],s=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi,l=void 0;l=s.exec(a);)i.push(l[0]);this.gradient=new _w,this.gradient.angle=n,this.gradient.stops=i.map(function(u,c){var d=c/(i.length-1);return{offset:d,color:u}})}else this.gradient=void 0},t.prototype.align=function(e,r){var n,i,a,s=(a=(i=(n=this.layerManager)===null||n===void 0?void 0:n.canvas)===null||i===void 0?void 0:i.pixelRatio)!==null&&a!==void 0?a:1,l=Math.round(e*s)/s;return r==null?l:r===0?0:r<1?Math.ceil(r*s)/s:Math.round((r+e)*s)/s-l},t.prototype.fillStroke=function(e){this.renderFill(e),this.renderStroke(e)},t.prototype.renderFill=function(e){if(this.fill){var r=e.globalAlpha;this.applyFill(e),this.applyFillAlpha(e),this.applyShadow(e),e.fill(),e.globalAlpha=r}e.shadowColor="rgba(0, 0, 0, 0)"},t.prototype.applyFill=function(e){this.gradient?e.fillStyle=this.gradient.createGradient(e,this.computeBBox()):e.fillStyle=this.fill},t.prototype.applyFillAlpha=function(e){var r=e.globalAlpha;e.globalAlpha=r*this.opacity*this.fillOpacity},t.prototype.applyShadow=function(e){var r,n,i=(n=(r=this.layerManager)===null||r===void 0?void 0:r.canvas.pixelRatio)!==null&&n!==void 0?n:1,a=this.fillShadow;a!=null&&a.enabled&&(e.shadowColor=a.color,e.shadowOffsetX=a.xOffset*i,e.shadowOffsetY=a.yOffset*i,e.shadowBlur=a.blur*i)},t.prototype.renderStroke=function(e){if(this.stroke&&this.strokeWidth){var r=e.globalAlpha;e.strokeStyle=this.stroke,e.globalAlpha=r*this.opacity*this.strokeOpacity,e.lineWidth=this.strokeWidth,this.lineDash&&e.setLineDash(this.lineDash),this.lineDashOffset&&(e.lineDashOffset=this.lineDashOffset),this.lineCap&&(e.lineCap=this.lineCap),this.lineJoin&&(e.lineJoin=this.lineJoin),e.stroke(),e.globalAlpha=r}},t.prototype.containsPoint=function(e,r){return this.isPointInPath(e,r)},t.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),dr([ie({redraw:Z.MINOR})],t.prototype,"fillOpacity",void 0),dr([ie({redraw:Z.MINOR})],t.prototype,"strokeOpacity",void 0),dr([ie({redraw:Z.MINOR,changeCb:function(e){return e.updateGradient()}})],t.prototype,"fill",void 0),dr([ie({redraw:Z.MINOR})],t.prototype,"stroke",void 0),dr([ie({redraw:Z.MINOR})],t.prototype,"strokeWidth",void 0),dr([ie({redraw:Z.MINOR})],t.prototype,"lineDash",void 0),dr([ie({redraw:Z.MINOR})],t.prototype,"lineDashOffset",void 0),dr([ie({redraw:Z.MINOR})],t.prototype,"lineCap",void 0),dr([ie({redraw:Z.MINOR})],t.prototype,"lineJoin",void 0),dr([ie({redraw:Z.MINOR,convertor:function(e){return Math.min(1,Math.max(0,e))}})],t.prototype,"opacity",void 0),dr([ie({redraw:Z.MINOR,checkDirtyOnAssignment:!0})],t.prototype,"fillShadow",void 0),t}(yu),Tw=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tr=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ec=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tc="…";function Us(o){var t=o??{},e=t.redraw,r=e===void 0?Z.MAJOR:e,n=t.changeCb;return ie({redraw:r,type:"font",changeCb:n})}var Me=function(o){Tw(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.x=0,e.y=0,e.lines=[],e.text=void 0,e._dirtyFont=!0,e.fontSize=10,e.fontFamily="sans-serif",e.textAlign=t.defaultStyles.textAlign,e.textBaseline=t.defaultStyles.textBaseline,e.lineHeight=void 0,e}return t.prototype._setLines=function(){this.lines=Yv(this.text)},Object.defineProperty(t.prototype,"font",{get:function(){return(this._font==null||this._dirtyFont)&&(this._dirtyFont=!1,this._font=Ei(this)),this._font},enumerable:!1,configurable:!0}),t.prototype.computeBBox=function(){return We.has.textMetrics?Kv(this.lines,this.x,this.y,this):$v(this.lines,this.x,this.y,this)},t.prototype.getLineHeight=function(e){var r,n;if(this.lineHeight)return this.lineHeight;if(We.has.textMetrics){var i=We.measureText(e,this.font,this.textBaseline,this.textAlign);return((r=i.fontBoundingBoxAscent)!==null&&r!==void 0?r:i.emHeightAscent)+((n=i.fontBoundingBoxDescent)!==null&&n!==void 0?n:i.emHeightDescent)}return We.getTextSize(e,this.font).height},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r),i=this.computeBBox();return i?i.containsPoint(n.x,n.y):!1},t.prototype.render=function(e){var r=e.ctx,n=e.forceRender,i=e.stats;if(this.dirty===Z.NONE&&!n){i&&(i.nodesSkipped+=this.nodeCount.count);return}if(!this.lines.length||!this.layerManager){i&&(i.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(r);var a=this,s=a.fill,l=a.stroke,u=a.strokeWidth;r.font=this.font,r.textAlign=this.textAlign,r.textBaseline=this.textBaseline;var c=this.layerManager.canvas.pixelRatio||1,d=r.globalAlpha;if(s){r.fillStyle=s,r.globalAlpha=d*this.opacity*this.fillOpacity;var h=this.fillShadow;h!=null&&h.enabled&&(r.shadowColor=h.color,r.shadowOffsetX=h.xOffset*c,r.shadowOffsetY=h.yOffset*c,r.shadowBlur=h.blur*c),this.renderLines(function(y,S,C){return r.fillText(y,S,C)})}if(l&&u){r.strokeStyle=l,r.lineWidth=u,r.globalAlpha=d*this.opacity*this.strokeOpacity;var f=this,p=f.lineDash,v=f.lineDashOffset,g=f.lineCap,m=f.lineJoin;p&&r.setLineDash(p),v&&(r.lineDashOffset=v),g&&(r.lineCap=g),m&&(r.lineJoin=m),this.renderLines(function(y,S,C){return r.strokeText(y,S,C)})}o.prototype.render.call(this,e)},t.prototype.renderLines=function(e){for(var r=this,n=this,i=n.lines,a=n.x,s=n.y,l=this.lines.map(function(h){return r.getLineHeight(h)}),u=l.reduce(function(h,f){return h+f},0),c=-(u-l[0])*Xv(this.textBaseline),d=0;d<i.length;d++)e(i[d],a,s+c),c+=l[d]},t.wrap=function(e,r,n,i,a){var s,l,u=Ei(i),c=Pw(u),d=e.split(/\r?\n/g);if(d.length===0)return"";if(a==="never")return t.truncateLine(d[0],r,c,!1);var h=[],f=0;try{for(var p=ec(d),v=p.next();!v.done;v=p.next()){var g=v.value,m=t.wrapLine(g,r,n,c,i,a,f);if(h.push(m.result),f=m.cumulativeHeight,m.truncated)break}}catch(y){s={error:y}}finally{try{v&&!v.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}return h.join(`
`).trim()},t.wrapLine=function(e,r,n,i,a,s,l){if(e=e.trim(),!e)return{result:"",truncated:!1,cumulativeHeight:l};var u=i.size(e);if(u.width<=r)return{result:e,truncated:!1,cumulativeHeight:l+u.height};if(u.height>n||i.width("W")>r)return{result:"",truncated:!0,cumulativeHeight:l};var c=e.split(/\s+/g),d=t.wrapLineSequentially(c,r,n,i,a,s,l);l=d.cumulativeHeight;var h=d.lines;if(!(d.wordsBrokenOrTruncated||d.linesTruncated)){var f=d.lines.length,p=t.wrapLineBalanced(c,r,i,f);p.length===h.length&&(h=p)}var v=h.map(function(g){return g.join(" ")}).join(`
`);return{result:v,truncated:d.linesTruncated,cumulativeHeight:l}},t.breakWord=function(e,r,n,i,a){for(var s,l,u=function(_){return t.punctuationMarks.includes(e[_])},c=i?a.width("-"):0,d=[],h=0,f=0,p=0;p<e.length;p++){var v=e[p],g=a.width(v),m=f===0?r:n;h+g+c>m&&(d.push(p),h=0,f++),h+=g}var y=[],S=0;try{for(var C=ec(d),w=C.next();!w.done;w=C.next()){var x=w.value,b=e.substring(S,x);i&&b.length>0&&!u(x-1)&&!u(x)&&(b+="-"),y.push(b),S=x}}catch(_){s={error:_}}finally{try{w&&!w.done&&(l=C.return)&&l.call(C)}finally{if(s)throw s.error}}return y.push(e.substring(S)),y},t.truncateLine=function(e,r,n,i){var a=n.width(e);if(a<r&&!i)return e;var s=n.width(tc);if(a+s<=r)return""+e+tc;var l=Math.floor(e.length*r/a)+1,u,c;do u=e.substring(0,l),c=n.width(u);while(--l>=0&&c+s>r);return""+u+tc},t.wrapLineSequentially=function(e,r,n,i,a,s,l){var u=a.fontSize,c=a.lineHeight,d=c===void 0?u*t.defaultLineHeightRatio:c,h=s==="always"||s==="hyphenate",f=s==="hyphenate",p=i.width(" "),v=!1,g=!1,m=[],y=[],S=0,C=function(){var F=l+d;if(F>=n){var k=y.join(" "),N=t.truncateLine(k,r,i,!0);return y.splice(0,y.length,N),g=!0,!1}return y=[],S=0,l=F,m.push(y),!0};if(!C())return{lines:m,linesTruncated:!0,wordsBrokenOrTruncated:v,cumulativeHeight:l};for(var w=0;w<e.length;w++){var x=e[w],b=i.width(x),_=y.length===0?0:p,T=S+_+b;if(T<=r){y.push(x),S=T;continue}if(b<=r){if(!C())break;y.push(x),S=b;continue}if(v=!0,h){for(var O=r-S-_,P=t.breakWord(x,O,r,f,i),M=!1,I=0;I<P.length;I++){var R=P[I];if(R&&y.push(R),I===P.length-1)S=i.width(R);else if(!C()){M=!0;break}}if(M)break}else{if(!C())break;var L=t.truncateLine(x,r,i,!0);y.push(L),w<e.length-1&&(g=!0);break}}return{lines:m,linesTruncated:g,wordsBrokenOrTruncated:v,cumulativeHeight:l}},t.wrapLineBalanced=function(e,r,n,i){var a,s,l=e.reduce(function(w,x){return w+n.width(x)},0),u=n.width(" "),c=u*(e.length-i-2),d=(l+c)/i,h=[],f=[],p=n.width(e[0]),v=!0;try{for(var g=ec(e),m=g.next();!m.done;m=g.next()){var y=m.value,S=n.width(y);if(v){f=[],f.push(y),p=S,v=!1,h.push(f);continue}var C=p+u+S;C<=d?(f.push(y),p=C):C<=r?(f.push(y),v=!0):(f=[y],p=S,h.push(f))}}catch(w){a={error:w}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}return h},t.prototype.setFont=function(e){this.fontFamily=e.fontFamily,this.fontSize=e.fontSize,this.fontStyle=e.fontStyle,this.fontWeight=e.fontWeight},t.prototype.setAlign=function(e){this.textAlign=e.textAlign,this.textBaseline=e.textBaseline},t.className="Text",t.defaultLineHeightRatio=1.15,t.defaultStyles=Object.assign({},Wr.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),t.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],Tr([ie({redraw:Z.MAJOR})],t.prototype,"x",void 0),Tr([ie({redraw:Z.MAJOR})],t.prototype,"y",void 0),Tr([ie({redraw:Z.MAJOR,changeCb:function(e){return e._setLines()}})],t.prototype,"text",void 0),Tr([Us()],t.prototype,"fontStyle",void 0),Tr([Us()],t.prototype,"fontWeight",void 0),Tr([Us()],t.prototype,"fontSize",void 0),Tr([Us()],t.prototype,"fontFamily",void 0),Tr([ie({redraw:Z.MAJOR})],t.prototype,"textAlign",void 0),Tr([ie({redraw:Z.MAJOR})],t.prototype,"textBaseline",void 0),Tr([ie({redraw:Z.MAJOR})],t.prototype,"lineHeight",void 0),t}(Wr);function Pw(o){var t=new Map,e=function(n){return We.getTextSize(n,o)},r=function(n){if(t.has(n))return t.get(n);var i=e(n).width;return t.set(n,i),i};return{size:e,width:r}}function Ei(o){var t=o.fontFamily,e=o.fontSize,r=o.fontStyle,n=o.fontWeight;return[r??"",n??"",e+"px",t].join(" ").trim()}function Aw(o,t,e,r){return We.has.textMetrics?Kv(o,t,e,r):$v(o,t,e,r)}function Kv(o,t,e,r){for(var n,i,a=0,s=0,l=0,u=0,c=0,d=Ei(r),h=r.lineHeight,f=r.textBaseline,p=f===void 0?Me.defaultStyles.textBaseline:f,v=r.textAlign,g=v===void 0?Me.defaultStyles.textAlign:v,m=0;m<o.length;m++){var y=We.measureText(o[m],d,p,g);a=Math.max(a,y.actualBoundingBoxLeft),l=Math.max(l,y.width),m==0?(s+=y.actualBoundingBoxAscent,u+=y.actualBoundingBoxAscent):c+=(n=y.fontBoundingBoxAscent)!==null&&n!==void 0?n:y.emHeightAscent,m==o.length-1?u+=y.actualBoundingBoxDescent:c+=(i=y.fontBoundingBoxDescent)!==null&&i!==void 0?i:y.emHeightDescent}return h!==void 0&&(c=(o.length-1)*h),u+=c,s+=c*Xv(p),new Ee(t-a,e-s,l,u)}function $v(o,t,e,r){var n=0,i=0,a=0,s=Ei(r),l=r.lineHeight,u=r.textBaseline,c=u===void 0?Me.defaultStyles.textBaseline:u,d=r.textAlign,h=d===void 0?Me.defaultStyles.textAlign:d;if(o.length>0){var f=We.getTextSize(o[0],s);n=f.width,i=f.height}for(var p=1;p<o.length;p++){var f=We.getTextSize(o[p],s);n=Math.max(n,f.width),a+=l??f.height}switch(h){case"end":case"right":t-=n;break;case"center":t-=n/2}switch(c){case"alphabetic":e-=i*.7+a*.5;break;case"middle":e-=i*.45+a*.5;break;case"ideographic":e-=i+a;break;case"hanging":e-=i*.2+a*.5;break;case"bottom":e-=i+a;break}return new Ee(t,e,n,i+a)}function Xv(o){switch(o){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return .5}}function Yv(o){return typeof o=="string"?o.split(/\r?\n/g):[]}var qv=function(){function o(){this.allEventListeners=new Map}return o.prototype.addEventListener=function(t,e){if(typeof e!="function")throw new Error("AG Charts - listener must be a Function");var r=this.allEventListeners,n=r.get(t);n||(n=new Set,r.set(t,n)),n.has(e)||n.add(e)},o.prototype.removeEventListener=function(t,e){var r=this.allEventListeners,n=r.get(t);n&&(n.delete(e),n.size===0&&r.delete(t))},o.prototype.hasEventListener=function(t){return this.allEventListeners.has(t)},o.prototype.clearEventListeners=function(){this.allEventListeners.clear()},o.prototype.fireEvent=function(t){var e=this.allEventListeners.get(t.type);e==null||e.forEach(function(r){return r(t)})},o}(),Hd=function(o){return typeof o=="string"},Zv=function(o){return!!o&&Object.prototype.hasOwnProperty.call(o,"toString")&&Hd(o.toString())},Dw=function(o){return o instanceof Date&&!isNaN(+o)};function ed(o){return Hd(o)||Zv(o)}function Ll(o){var t=function(r){return!!r&&Object.prototype.hasOwnProperty.call(r,"valueOf")&&Ot(r.valueOf())},e=function(r){return r instanceof Date&&!isNaN(+r)};return Ot(o)||t(o)||e(o)}function Fl(o,t){if(t&&Ll(o))return o;if(!t)return ed(o)?o:String(o)}var Ot=function(o){return typeof o=="number"&&Number.isFinite(o)},Zh=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},rt=function(){function o(t,e,r,n){n===void 0&&(n=1),this.r=Math.min(1,Math.max(0,t||0)),this.g=Math.min(1,Math.max(0,e||0)),this.b=Math.min(1,Math.max(0,r||0)),this.a=Math.min(1,Math.max(0,n||0))}return o.validColorString=function(t){return t.indexOf("#")>=0?!!o.parseHex(t):t.indexOf("rgb")>=0?!!o.stringToRgba(t):!!o.nameToHex[t.toLowerCase()]},o.fromString=function(t){if(t.indexOf("#")>=0)return o.fromHexString(t);var e=o.nameToHex[t.toLowerCase()];if(e)return o.fromHexString(e);if(t.indexOf("rgb")>=0)return o.fromRgbaString(t);throw new Error("Invalid color string: '"+t+"'")},o.tryParseFromString=function(t){try{return o.fromString(t)}catch{return re.warnOnce("invalid color string: '"+t+"'."),o.fromArray([0,0,0])}},o.parseHex=function(t){t=t.replace(/ /g,"").slice(1);var e;switch(t.length){case 6:case 8:e=[];for(var r=0;r<t.length;r+=2)e.push(parseInt(""+t[r]+t[r+1],16));break;case 3:case 4:e=t.split("").map(function(n){return parseInt(n,16)}).map(function(n){return n+n*16});break}if((e==null?void 0:e.length)>=3&&e.every(function(n){return n>=0}))return e.length===3&&e.push(255),e},o.fromHexString=function(t){var e=o.parseHex(t);if(e){var r=Zh(e,4),n=r[0],i=r[1],a=r[2],s=r[3];return new o(n/255,i/255,a/255,s/255)}throw new Error("Malformed hexadecimal color string: '"+t+"'")},o.stringToRgba=function(t){for(var e=Zh([NaN,NaN],2),r=e[0],n=e[1],i=0;i<t.length;i++){var a=t[i];if(!r&&a==="(")r=i;else if(a===")"){n=i;break}}var s=r&&n&&t.substring(r+1,n);if(s){for(var l=s.split(","),u=[],i=0;i<l.length;i++){var c=l[i],d=parseFloat(c);if(isNaN(d))return;c.indexOf("%")>=0?(d=Math.max(0,Math.min(100,d)),d/=100):i===3?d=Math.max(0,Math.min(1,d)):(d=Math.max(0,Math.min(255,d)),d/=255),u.push(d)}return u}},o.fromRgbaString=function(t){var e=o.stringToRgba(t);if(e){if(e.length===3)return new o(e[0],e[1],e[2]);if(e.length===4)return new o(e[0],e[1],e[2],e[3])}throw new Error("Malformed rgb/rgba color string: '"+t+"'")},o.fromArray=function(t){if(t.length===4)return new o(t[0],t[1],t[2],t[3]);if(t.length===3)return new o(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")},o.fromHSB=function(t,e,r,n){n===void 0&&(n=1);var i=o.HSBtoRGB(t,e,r);return new o(i[0],i[1],i[2],n)},o.padHex=function(t){return t.length===1?"0"+t:t},o.prototype.toHexString=function(){var t="#"+o.padHex(Math.round(this.r*255).toString(16))+o.padHex(Math.round(this.g*255).toString(16))+o.padHex(Math.round(this.b*255).toString(16));return this.a<1&&(t+=o.padHex(Math.round(this.a*255).toString(16))),t},o.prototype.toRgbaString=function(t){t===void 0&&(t=3);var e=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)],r=Math.pow(10,t);return this.a!==1?(e.push(Math.round(this.a*r)/r),"rgba("+e.join(", ")+")"):"rgb("+e.join(", ")+")"},o.prototype.toString=function(){return this.a===1?this.toHexString():this.toRgbaString()},o.prototype.toHSB=function(){return o.RGBtoHSB(this.r,this.g,this.b)},o.RGBtoHSB=function(t,e,r){var n=Math.min(t,e,r),i=Math.max(t,e,r),a=i!==0?(i-n)/i:0,s=NaN;if(n!==i){var l=i-n,u=(i-t)/l,c=(i-e)/l,d=(i-r)/l;t===i?s=d-c:e===i?s=2+u-d:s=4+c-u,s/=6,s<0&&(s=s+1)}return[s*360,a,i]},o.HSBtoRGB=function(t,e,r){isNaN(t)&&(t=0),t=(t%360+360)%360/360;var n=0,i=0,a=0;if(e===0)n=i=a=r;else{var s=(t-Math.floor(t))*6,l=s-Math.floor(s),u=r*(1-e),c=r*(1-e*l),d=r*(1-e*(1-l));switch(s>>0){case 0:n=r,i=d,a=u;break;case 1:n=c,i=r,a=u;break;case 2:n=u,i=r,a=d;break;case 3:n=u,i=c,a=r;break;case 4:n=d,i=u,a=r;break;case 5:n=r,i=u,a=c;break}}return[n,i,a]},o.prototype.derive=function(t,e,r,n){var i=o.RGBtoHSB(this.r,this.g,this.b),a=i[2];a==0&&r>1&&(a=.05);var s=((i[0]+t)%360+360)%360,l=Math.max(Math.min(i[1]*e,1),0);a=Math.max(Math.min(a*r,1),0);var u=Math.max(Math.min(this.a*n,1),0),c=o.HSBtoRGB(s,l,a);return c.push(u),o.fromArray(c)},o.prototype.brighter=function(){return this.derive(0,1,1/.7,1)},o.prototype.darker=function(){return this.derive(0,1,.7,1)},o.interpolate=function(t,e){var r=o.tryParseFromString(t),n=o.tryParseFromString(e);return function(i){var a=function(l,u){return l*(1-i)+u*i},s=new o(a(r.r,n.r),a(r.g,n.g),a(r.b,n.b),a(r.a,n.a));return s.toString()}},o.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}),o}(),Jh=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},kl=Symbol("BREAK"),rc="__decorator_config";function Mw(o,t,e,r){Object.getOwnPropertyDescriptor(o,rc)==null&&Object.defineProperty(o,rc,{value:{}});var n=o[rc];if(n[e]!=null)return n[e];n[e]={setters:[],getters:[]};var i=Object.getOwnPropertyDescriptor(o,t),a=i==null?void 0:i.set,s=i==null?void 0:i.get,l=function(){var c,d,h,f,p=s?s.call(this):this[r];try{for(var v=Jh((f=(h=n[e])===null||h===void 0?void 0:h.getters)!==null&&f!==void 0?f:[]),g=v.next();!g.done;g=v.next()){var m=g.value;if(p=m(this,t,p),p===kl)return}}catch(y){c={error:y}}finally{try{g&&!g.done&&(d=v.return)&&d.call(v)}finally{if(c)throw c.error}}return p},u=function(c){var d,h,f,p,v=(p=(f=n[e])===null||f===void 0?void 0:f.setters)!==null&&p!==void 0?p:[],g;v.some(function(C){return C.length>2})&&(g=s?s.call(this):this[r]);try{for(var m=Jh(v),y=m.next();!y.done;y=m.next()){var S=y.value;if(c=S(this,t,c,g),c===kl)return}}catch(C){d={error:C}}finally{try{y&&!y.done&&(h=m.return)&&h.call(m)}finally{if(d)throw d.error}}a?a.call(this,c):this[r]=c};return Object.defineProperty(o,t,{set:u,get:l,enumerable:!0,configurable:!1}),n[e]}function ta(o,t){return function(e,r){var n=r.toString(),i="__"+n,a=Mw(e,r,n,i),s=a.getters,l=a.setters;l.push(o),t&&s.splice(0,0,t)}}function A(o){return ta(function(t,e,r){var n,i,a;if(o(r,{target:t}))return r;var s=e.toString().replace(/^_*/,""),l=(i=(n=t.constructor)===null||n===void 0?void 0:n.className)!==null&&i!==void 0?i:(a=t.constructor)===null||a===void 0?void 0:a.name;(l==null?void 0:l.length)<3&&(l=null);var u=l?"of ["+l+"] ":"";return o.message?re.warn("Property ["+s+"] "+u+"cannot be set to ["+JSON.stringify(r)+"]; "+o.message+", ignoring."):re.warn("Property ["+s+"] "+u+"cannot be set to ["+JSON.stringify(r)+"], ignoring."),kl})}function ue(o,t){return o.message=t,o}var je=function(o,t,e){return o===void 0||e(o,t)},zn=function(o,t){return ue(function(e,r){return Array.isArray(e)&&(o?e.length===o:!0)&&(t?e.every(function(n){return t(n,r)}):!0)},"expecting an Array")},zd=function(o){return ue(function(t,e){return je(t,e,zn(o))},"expecting an optional Array")},vn=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];return ue(function(e,r){return o.every(function(n){return n(e,r)})},o.map(function(e){return e.message}).filter(function(e){return e!=null}).join(" AND "))},Rw=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];return ue(function(e,r){return o.some(function(n){return n(e,r)})},o.map(function(e){return e.message}).filter(function(e){return e!=null}).join(" OR "))},Nl=function(o){return o!=null&&!isNaN(o)},mu=function(o){return ue(function(t,e){return!Nl(t)||!Nl(e.target[o])||t<e.target[o]},"expected to be less than "+o)},ys=function(o){return ue(function(t,e){return!Nl(t)||!Nl(e.target[o])||t>e.target[o]},"expected to be greater than "+o)},Iw=ue(function(o){return typeof o=="function"},"expecting a Function"),Be=ue(function(o,t){return je(o,t,Iw)},"expecting an optional Function"),Re=ue(function(o){return o===!0||o===!1},"expecting a Boolean"),Ur=ue(function(o,t){return je(o,t,Re)},"expecting an optional Boolean"),St=ue(function(o){return typeof o=="string"},"expecting a String"),de=ue(function(o,t){return je(o,t,St)},"expecting an optional String"),Jv=ue(function(o){return o instanceof Date&&!isNaN(+o)},"expecting a Date object"),Lw=ue(function(o,t){return je(o,t,Jv)},"expecting an optional Date");ue(zn(void 0,Jv),"expecting an Array of Date objects");var Fw=J(0),kw=ue(function(o,t){return je(o,t,Fw)},"expecting an optional number"),Qh=Rw(Lw,kw),Su="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",Kt=ue(function(o){return typeof o!="string"?!1:rt.validColorString(o)},"expecting a color String. "+Su),Fe=ue(function(o,t){return je(o,t,Kt)},"expecting an optional color String. "+Su),ls=ue(zn(void 0,Kt),"expecting an Array of color strings. "+Su),Nw=ue(function(o,t){return je(o,t,ls)},"expecting an optional Array of color strings. "+Su);function J(o,t){var e="expecting a finite Number"+((o!==void 0?", more than or equal to "+o:"")+(t!==void 0?", less than or equal to "+t:""));return ue(function(r){return typeof r=="number"&&Number.isFinite(r)&&(o!==void 0?r>=o:!0)&&(t!==void 0?r<=t:!0)},e)}function Pe(o,t){var e="expecting an optional finite Number"+((o!==void 0?", more than or equal to "+o:"")+(t!==void 0?", less than or equal to "+t:""));return ue(function(r,n){return je(r,n,J(o,t))},e)}function Vn(o,t){var e="expecting a finite Number"+((o!==void 0?", more than or equal to "+o:"")+(t!==void 0?", less than or equal to "+t:""));return ue(function(r){return typeof r=="number"&&(isNaN(r)||Number.isFinite(r)&&(o!==void 0?r>=o:!0)&&(t!==void 0?r<=t:!0))},e)}var Qv=ue(zn(void 0,J()),"expecting an Array of numbers"),eg=ue(function(o,t){return je(o,t,Qv)},"expecting an optional Array of numbers"),tg=ue(zn(void 0,St),"expecting an Array of strings");ue(function(o,t){return je(o,t,tg)},"expecting an optional Array of strings");function rg(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];var e="expecting one of: "+o.join(", ");return ue(function(r){return typeof r=="string"&&o.indexOf(r)>=0},e)}var Gw=ue(zn(void 0,Re),"expecting an Array of boolean values");ue(function(o,t){return je(o,t,Gw)},"expecting an optional Array of boolean values");var Vw=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"],jw=ue(function(o){return o==="normal"||o==="italic"||o==="oblique"},"expecting a font style keyword such as 'normal', 'italic' or 'oblique'"),Mi=ue(function(o,t){return je(o,t,jw)},"expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'"),Bw=ue(function(o){return Vw.includes(o)},"expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),Ri=ue(function(o,t){return je(o,t,Bw)},"expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),Hw=ue(zn(void 0,J(0)),"expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),ra=ue(function(o,t){return je(o,t,Hw)},"expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),zw=["butt","round","square"],Wd=ue(function(o){return zw.includes(o)},"expecting a line cap keyword such as 'butt', 'round' or 'square'");ue(function(o,t){return je(o,t,Wd)},"expecting an optional line cap keyword such as 'butt', 'round' or 'square'");var Ww=["round","bevel","miter"],Uw=ue(function(o){return Ww.includes(o)},"expecting a line join keyword such as 'round', 'bevel' or 'miter'");ue(function(o,t){return je(o,t,Uw)},"expecting an optional line join keyword such as 'round', 'bevel' or 'miter'");var Kw=["top","right","bottom","left"],ng=ue(function(o){return Kw.includes(o)},"expecting a position keyword such as 'top', 'right', 'bottom' or 'left"),$w=["exact","nearest"],ig=ue(function(o){return typeof o=="number"&&Number.isFinite(o)||$w.includes(o)},"expecting an interaction range of 'exact', 'nearest' or a number"),Xw=["never","always","hyphenate","on-space"],Ud=ue(function(o){return Xw.includes(o)},"expecting a text wrap strategy keyword such as 'never', 'always', 'hyphenate', 'on-space'"),Xe;(function(o){o[o.SERIES_BACKGROUND_ZINDEX=-10]="SERIES_BACKGROUND_ZINDEX",o[o.AXIS_GRID_ZINDEX=0]="AXIS_GRID_ZINDEX",o[o.AXIS_ZINDEX=20]="AXIS_ZINDEX",o[o.SERIES_CROSSLINE_RANGE_ZINDEX=30]="SERIES_CROSSLINE_RANGE_ZINDEX",o[o.SERIES_LAYER_ZINDEX=500]="SERIES_LAYER_ZINDEX",o[o.SERIES_CROSSHAIR_ZINDEX=1e3]="SERIES_CROSSHAIR_ZINDEX",o[o.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",o[o.SERIES_CROSSLINE_LINE_ZINDEX=2500]="SERIES_CROSSLINE_LINE_ZINDEX",o[o.LEGEND_ZINDEX=3e3]="LEGEND_ZINDEX"})(Xe||(Xe={}));var ee;(function(o){o.X="x",o.Y="y"})(ee||(ee={}));var nc=function(){function o(t){this.type=t,this.continuousDomain=[1/0,-1/0],this.discreteDomain=new Set}return o.prototype.extend=function(t){this.type==="discrete"?this.discreteDomain.add(t):this.type==="continuous"&&(this.continuousDomain[0]>t&&(this.continuousDomain[0]=t),this.continuousDomain[1]<t&&(this.continuousDomain[1]=t))},o.prototype.getDomain=function(){if(this.type==="discrete")return this.discreteDomain;if(this.type==="continuous")return this.continuousDomain;throw new Error("AG Charts - Unsupported data domain type: "+this.type)},o}(),Yw=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function Ks(o,t){var e,r;t===void 0&&(t=[1/0,-1/0]);try{for(var n=Yw(o),i=n.next();!i.done;i=n.next()){var a=i.value;typeof a=="number"&&(a<t[0]&&(t[0]=a),a>t[1]&&(t[1]=a))}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t}var Ue=function(){return Ue=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Ue.apply(this,arguments)},Ve=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Oe=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},qe=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o};function qw(o){return o.map(function(t){return t==null||typeof t=="number"||typeof t=="string"||typeof t=="boolean"?t:typeof t=="object"?JSON.stringify(t):t}).join("-")}function Zw(o){var t=1e4;return Number.isInteger(o)?o:Math.abs(o)>t?Math.trunc(o):Math.round(o*t)/t}function Cl(o){if(o===void 0)return[];var t=Ve(o,2),e=t[0],r=t[1];return e=+e,r=+r,e===0&&r===0?[0,1]:e===1/0&&r===-1/0?[]:(e===1/0&&(e=0),r===-1/0&&(r=0),Ot(e)&&Ot(r)?[e,r]:[])}var Ui=Symbol("invalid"),Jw=function(){function o(t){var e,r,n,i,a,s,l=this,u=t.props,c=!0;try{for(var d=Oe(u),h=d.next();!h.done;h=d.next()){var f=h.value;if(f.type==="key"&&!c)throw new Error("AG Charts - internal config error: keys must come before values.");f.type==="value"&&c&&(c=!1)}}catch(x){e={error:x}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}this.opts=Ue({dataVisible:!0},t),this.keys=u.filter(function(x){return x.type==="key"}).map(function(x,b){return Ue(Ue({},x),{index:b,missing:0})}),this.values=u.filter(function(x){return x.type==="value"}).map(function(x,b){return Ue(Ue({},x),{index:b,missing:0})}),this.aggregates=u.filter(function(x){return x.type==="aggregate"}).map(function(x,b){return Ue(Ue({},x),{index:b})}),this.groupProcessors=u.filter(function(x){return x.type==="group-value-processor"}).map(function(x,b){return Ue(Ue({},x),{index:b})}),this.propertyProcessors=u.filter(function(x){return x.type==="property-value-processor"}).map(function(x,b){return Ue(Ue({},x),{index:b})}),this.reducers=u.filter(function(x){return x.type==="reducer"}).map(function(x,b){return Ue(Ue({},x),{index:b})}),this.processors=u.filter(function(x){return x.type==="processor"}).map(function(x,b){return Ue(Ue({},x),{index:b})});try{for(var p=Oe(this.values),v=p.next();!v.done;v=p.next()){var g=v.value;if(g.property==null)throw new Error("AG Charts - internal config error: no properties specified for value definitions: "+JSON.stringify(g))}}catch(x){n={error:x}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}var m=function(x){var b,_,T=x.matchGroupIds,O=function(R){if(!l.values.some(function(L){return L.groupId===R}))throw new Error("AG Charts - internal config error: matchGroupIds properties must match defined groups ("+R+").")};try{for(var P=Oe(T??[]),M=P.next();!M.done;M=P.next()){var I=M.value;O(I)}}catch(R){b={error:R}}finally{try{M&&!M.done&&(_=P.return)&&_.call(P)}finally{if(b)throw b.error}}},y=function(x){var b,_,T=x.matchScopes,O=function(R){if(!l.values.some(function(L){var F;return(F=L.scopes)===null||F===void 0?void 0:F.includes(R)}))throw new Error("AG Charts - internal config error: matchGroupIds properties must match defined groups ("+R+").")};try{for(var P=Oe(T??[]),M=P.next();!M.done;M=P.next()){var I=M.value;O(I)}}catch(R){b={error:R}}finally{try{M&&!M.done&&(_=P.return)&&_.call(P)}finally{if(b)throw b.error}}},S=function(x){var b,_,T=x.matchIds,O=function(R){if(!l.values.some(function(L){return L.id===R}))throw new Error("AG Charts - internal config error: matchGroupIds properties must match defined groups ("+R+").")};try{for(var P=Oe(T??[]),M=P.next();!M.done;M=P.next()){var I=M.value;O(I)}}catch(R){b={error:R}}finally{try{M&&!M.done&&(_=P.return)&&_.call(P)}finally{if(b)throw b.error}}};try{for(var C=Oe(qe(qe([],Ve(this.groupProcessors)),Ve(this.aggregates))),w=C.next();!w.done;w=C.next()){var g=w.value;S(g),m(g),y(g)}}catch(x){a={error:x}}finally{try{w&&!w.done&&(s=C.return)&&s.call(C)}finally{if(a)throw a.error}}}return o.prototype.resolveProcessedDataIndexById=function(t,e,r){var n;r===void 0&&(r="value");var i=(n=this.resolveProcessedDataDefById(t,e,r))!==null&&n!==void 0?n:{},a=i.index,s=i.def;return{type:r,index:a,def:s}},o.prototype.resolveProcessedDataIndicesById=function(t,e,r){return r===void 0&&(r="value"),this.resolveProcessedDataDefsById(t,e,r).map(function(n){var i=n.index,a=n.def;return{type:r,index:i,def:a}})},o.prototype.resolveProcessedDataDefById=function(t,e,r){return r===void 0&&(r="value"),this.resolveProcessedDataDefsById(t,e,r)[0]},o.prototype.resolveProcessedDataDefsById=function(t,e,r){var n,i;r===void 0&&(r="value");var a=this,s=a.keys,l=a.values,u=a.aggregates,c=a.groupProcessors,d=a.reducers,h=function(y){var S=y.id,C=y.scopes;return S==null||t!=null&&!(C!=null&&C.includes(t.id))?!1:typeof e=="string"?S===e:e.test(S)},f=[s,l,u,c,d],p=[];try{for(var v=Oe(f),g=v.next();!g.done;g=v.next()){var m=g.value;p.push.apply(p,qe([],Ve(m.filter(h).map(function(y){return{index:y.index,def:y}}))))}}catch(y){n={error:y}}finally{try{g&&!g.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}if(p.length>0)return p;throw new Error("AG Charts - didn't find property definition for ["+e+", "+t.id+", "+r+"]")},o.prototype.getDomain=function(t,e,r,n){var i,a,s,l,u,c;r===void 0&&(r="value");var d;try{d=this.resolveProcessedDataIndicesById(t,e,r)}catch(y){if(typeof e!="string"&&/didn't find property definition/.test(y.message))return[];throw y}var h;switch(r){case"key":h="keys";break;case"value":h="values";break;case"aggregate":h="aggValues";break;case"group-value-processor":h="groups";break;default:return[]}var f=(l=(s=n.domain[h])===null||s===void 0?void 0:s[d[0].index])!==null&&l!==void 0?l:[];if(d.length===1)return f;var p=qe([],Ve(f));try{for(var v=Oe(d.slice(1)),g=v.next();!g.done;g=v.next()){var m=g.value;Ks((c=(u=n.domain[h])===null||u===void 0?void 0:u[m.index])!==null&&c!==void 0?c:[],p)}}catch(y){i={error:y}}finally{try{g&&!g.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}return p},o.prototype.processData=function(t){var e,r,n,i,a=this,s=a.opts,l=s.groupByKeys,u=s.groupByFn,c=a.aggregates,d=a.groupProcessors,h=a.reducers,f=a.processors,p=a.propertyProcessors,v=performance.now();try{for(var g=Oe(qe(qe([],Ve(this.keys)),Ve(this.values))),m=g.next();!m.done;m=g.next()){var y=m.value;y.missing=0}}catch(b){e={error:b}}finally{try{m&&!m.done&&(r=g.return)&&r.call(g)}finally{if(e)throw e.error}}if(!(l&&this.keys.length===0)){var S=this.extractData(t);l?S=this.groupData(S):u&&(S=this.groupData(S,u(S))),d.length>0&&this.postProcessGroups(S),c.length>0&&this.aggregateData(S),p.length>0&&this.postProcessProperties(S),h.length>0&&this.reduceData(S),f.length>0&&this.postProcessData(S);try{for(var C=Oe(qe(qe([],Ve(this.keys)),Ve(this.values))),w=C.next();!w.done;w=C.next()){var y=w.value;t.length>0&&y.missing>=t.length&&re.warnOnce("the key '"+y.property+"' was not found in any data element.")}}catch(b){n={error:b}}finally{try{w&&!w.done&&(i=C.return)&&i.call(C)}finally{if(n)throw n.error}}var x=performance.now();return S.time=x-v,o.DEBUG()&&Qw(S),S}},o.prototype.valueGroupIdxLookup=function(t){var e=t.matchGroupIds,r=t.matchIds,n=t.matchScopes;return this.values.map(function(i,a){return{def:i,index:a}}).filter(function(i){var a=i.def;return!(e&&(a.groupId==null||!e.includes(a.groupId))||r&&(a.id==null||!r.includes(a.id))||n&&(a.scopes==null||!n.some(function(s){var l;return(l=a.scopes)===null||l===void 0?void 0:l.includes(s)})))}).map(function(i){var a=i.index;return a})},o.prototype.valueIdxLookup=function(t,e){var r,n=t==null||t.length===0,i=function(a){var s=a==null;if(s)return!0;var l=a==null||a.length===0;return n===l?!0:a==null?void 0:a.some(function(u){return t.includes(u)})};if(typeof e=="string"?r=this.values.findIndex(function(a){return i(a.scopes)&&a.property===e}):r=this.values.findIndex(function(a){return i(a.scopes)&&a.id===e.id}),r>=0)return r;throw new Error("AG Charts - configuration error, unknown property "+JSON.stringify(e)+" in scope(s) "+JSON.stringify(t))},o.prototype.extractData=function(t){var e,r,n,i,a,s,l,u,c,d=this,h=d.keys,f=d.values,p=d.opts.dataVisible,v=this.initDataDomainProcessor(),g=v.dataDomain,m=v.processValue,y=v.scopes,S=v.allScopesHaveSameDefs,C=new Array(p?t.length:0),w=0,x=0;try{for(var b=Oe(t),_=b.next();!_.done;_=b.next()){var T=_.value,O=y.size>0?new Set(y):void 0,P=p?new Array(h.length):void 0,M=0,I=void 0;try{for(var R=(n=void 0,Oe(h)),L=R.next();!L.done;L=R.next()){var F=L.value;if(I=m(F,T,I),I===Ui)break;P&&(P[M++]=I)}}catch(q){n={error:q}}finally{try{L&&!L.done&&(i=R.return)&&i.call(R)}finally{if(n)throw n.error}}if(I!==Ui){var k=p&&f.length>0?new Array(f.length):void 0,N=0,G=void 0;try{for(var $=(a=void 0,Oe(f)),j=$.next();!j.done;j=$.next()){var F=j.value;if(G=m(F,T,G),G===Ui){if(S)break;try{for(var z=(l=void 0,Oe((c=F.scopes)!==null&&c!==void 0?c:y)),W=z.next();!W.done;W=z.next()){var Y=W.value;O==null||O.delete(Y)}}catch(Q){l={error:Q}}finally{try{W&&!W.done&&(u=z.return)&&u.call(z)}finally{if(l)throw l.error}}if(N++,(O==null?void 0:O.size)===0)break}else k&&(k[N++]=G)}}catch(q){a={error:q}}finally{try{j&&!j.done&&(s=$.return)&&s.call($)}finally{if(a)throw a.error}}if(!(G===Ui&&S)&&(O==null?void 0:O.size)!==0&&p){var H={datum:T,keys:P,values:k};!S&&O&&O.size<y.size&&(x++,H.validScopes=qe([],Ve(O))),C[w++]=H}}}}catch(q){e={error:q}}finally{try{_&&!_.done&&(r=b.return)&&r.call(b)}finally{if(e)throw e.error}}C.length=w;var K=function(q){var Q=g.get(q).getDomain();return Array.isArray(Q)&&Q[0]>Q[1]?[]:qe([],Ve(Q))};return{type:"ungrouped",data:C,domain:{keys:h.map(function(q){return K(q)}),values:f.map(function(q){return K(q)})},defs:{allScopesHaveSameDefs:S,keys:h,values:f},partialValidDataCount:x,time:0}},o.prototype.groupData=function(t,e){var r,n,i,a,s,l,u,c,d=new Map;try{for(var h=Oe(t.data),f=h.next();!f.done;f=h.next()){var p=f.value,v=p.keys,g=p.values,m=p.datum,y=p.validScopes,S=e?e(p):v,C=qw(S);if(d.has(C)){var w=d.get(C);if(w.values.push(g),w.datum.push(m),y!=null)for(var x=function(L){var F=(u=w.validScopes)===null||u===void 0?void 0:u[L];if(y.some(function(k){return k===F}))return"continue";(c=w.validScopes)===null||c===void 0||c.splice(L,1)},b=0;b<((l=(s=w.validScopes)===null||s===void 0?void 0:s.length)!==null&&l!==void 0?l:0);b++)x(b)}else d.set(C,{keys:S,values:[g],datum:[m],validScopes:y})}}catch(L){r={error:L}}finally{try{f&&!f.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}var _=new Array(d.size),T=new Array(d.size),O=0;try{for(var P=Oe(d.entries()),M=P.next();!M.done;M=P.next()){var I=Ve(M.value,2),R=I[1],v=R.keys,g=R.values,m=R.datum,y=R.validScopes;(y==null?void 0:y.length)!==0&&(T[O]=v,_[O++]={keys:v,values:g,datum:m,validScopes:y})}}catch(L){i={error:L}}finally{try{M&&!M.done&&(a=P.return)&&a.call(P)}finally{if(i)throw i.error}}return Ue(Ue({},t),{type:"grouped",data:_,domain:Ue(Ue({},t.domain),{groups:T})})},o.prototype.aggregateData=function(t){var e,r,n=this,i,a,s,l,u,c,d,h,f=this.aggregates;if(f){var p=f.map(function(){return[1/0,-1/0]}),v=f.map(function(b){return n.valueGroupIdxLookup(b)}),g=f.map(function(b){return b.aggregateFunction}),m=f.map(function(b){return b.groupAggregateFunction}),y=f.map(function(b){return b.finalFunction}),S=function(b){var _,T,O,P,M=b.values,I=b.validScopes;(i=b.aggValues)!==null&&i!==void 0||(b.aggValues=new Array(v.length)),t.type==="ungrouped"&&(M=[M]);var R=0;try{for(var L=(_=void 0,Oe(v)),F=L.next();!F.done;F=L.next()){var k=F.value,N=(a=I==null?void 0:I.some(function(H){var K;return(K=f[R].matchScopes)===null||K===void 0?void 0:K.some(function(q){return H===q})}))!==null&&a!==void 0?a:!0;if(!N){R++;continue}var G=(l=(s=m[R])===null||s===void 0?void 0:s.call(m))!==null&&l!==void 0?l:Ks([]),$=function(H){var K=k.map(function(Q){return H[Q]}),q=g[R](K,b.keys);q&&(G=(c=(u=m[R])===null||u===void 0?void 0:u.call(m,q,G))!==null&&c!==void 0?c:Ks(q,G))};try{for(var j=(O=void 0,Oe(M)),z=j.next();!z.done;z=j.next()){var W=z.value;$(W)}}catch(H){O={error:H}}finally{try{z&&!z.done&&(P=j.return)&&P.call(j)}finally{if(O)throw O.error}}var Y=((h=(d=y[R])===null||d===void 0?void 0:d.call(y,G))!==null&&h!==void 0?h:G).map(function(H){return Zw(H)});Ks(Y,p[R]),b.aggValues[R++]=Y}}catch(H){_={error:H}}finally{try{F&&!F.done&&(T=L.return)&&T.call(L)}finally{if(_)throw _.error}}};try{for(var C=Oe(t.data),w=C.next();!w.done;w=C.next()){var x=w.value;S(x)}}catch(b){e={error:b}}finally{try{w&&!w.done&&(r=C.return)&&r.call(C)}finally{if(e)throw e.error}}t.domain.aggValues=p}},o.prototype.postProcessGroups=function(t){var e,r,n,i,a,s,l,u,c,d,h,f,p,v,g,m,y,S=this.groupProcessors;if(S){var C=new Set,w=new Map,x=new Map,b=new Map;try{for(var _=Oe(S),T=_.next();!T.done;T=_.next()){var O=T.value,P=this.valueGroupIdxLookup(O);x.set(O,P),b.set(O,O.adjust());try{for(var M=(n=void 0,Oe(P)),I=M.next();!I.done;I=M.next()){var R=I.value,L=this.values[R];C.add(R),w.set(R,new nc(L.valueType==="category"?"discrete":"continuous"))}}catch(ae){n={error:ae}}finally{try{I&&!I.done&&(i=M.return)&&i.call(M)}finally{if(n)throw n.error}}}}catch(ae){e={error:ae}}finally{try{T&&!T.done&&(r=_.return)&&r.call(_)}finally{if(e)throw e.error}}var F=function(ae){var xe,_e,ye;try{for(var me=Oe(C),U=me.next();!U.done;U=me.next()){var ne=U.value;(ye=w.get(ne))===null||ye===void 0||ye.extend(ae[ne])}}catch(fe){xe={error:fe}}finally{try{U&&!U.done&&(_e=me.return)&&_e.call(me)}finally{if(xe)throw xe.error}}};try{for(var k=Oe(t.data),N=k.next();!N.done;N=k.next()){var G=N.value,$=function(ae){var xe,_e,ye=(v=(p=G.validScopes)===null||p===void 0?void 0:p.some(function(He){var ut;return(ut=ae.matchScopes)===null||ut===void 0?void 0:ut.some(function(ur){return He===ur})}))!==null&&v!==void 0?v:!0;if(!ye)return"continue";var me=(g=x.get(ae))!==null&&g!==void 0?g:[],U=(y=(m=b.get(ae))===null||m===void 0?void 0:m())!==null&&y!==void 0?y:function(){};if(t.type==="grouped"){try{for(var ne=(xe=void 0,Oe(G.values)),fe=ne.next();!fe.done;fe=ne.next()){var Se=fe.value;Se&&U(Se,me)}}catch(He){xe={error:He}}finally{try{fe&&!fe.done&&(_e=ne.return)&&_e.call(ne)}finally{if(xe)throw xe.error}}return"continue"}G.values&&U(G.values,me)};try{for(var j=(l=void 0,Oe(S)),z=j.next();!z.done;z=j.next()){var O=z.value;$(O)}}catch(ae){l={error:ae}}finally{try{z&&!z.done&&(u=j.return)&&u.call(j)}finally{if(l)throw l.error}}if(t.type==="grouped")try{for(var W=(c=void 0,Oe(G.values)),Y=W.next();!Y.done;Y=W.next()){var H=Y.value;F(H)}}catch(ae){c={error:ae}}finally{try{Y&&!Y.done&&(d=W.return)&&d.call(W)}finally{if(c)throw c.error}}else F(G.values)}}catch(ae){a={error:ae}}finally{try{N&&!N.done&&(s=k.return)&&s.call(k)}finally{if(a)throw a.error}}try{for(var K=Oe(w),q=K.next();!q.done;q=K.next()){var Q=Ve(q.value,2),R=Q[0],se=Q[1];t.domain.values[R]=qe([],Ve(se.getDomain()))}}catch(ae){h={error:ae}}finally{try{q&&!q.done&&(f=K.return)&&f.call(K)}finally{if(h)throw h.error}}}},o.prototype.postProcessProperties=function(t){var e,r,n=this.propertyProcessors;if(n)try{for(var i=Oe(n),a=i.next();!a.done;a=i.next()){var s=a.value,l=s.adjust,u=s.property,c=s.scopes;l()(t,this.valueIdxLookup(c??[],u))}}catch(d){e={error:d}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},o.prototype.reduceData=function(t){var e,r,n,i,a,s=this.reducers,l=s.map(function(g){return g.scopes}),u=s.map(function(g){return g.reducer()}),c=s.map(function(g){return g.initialValue}),d=function(g){var m,y,S=0;try{for(var C=(m=void 0,Oe(u)),w=C.next();!w.done;w=C.next()){var x=w.value,b=(i=(n=g.validScopes)===null||n===void 0?void 0:n.some(function(_){var T;return(T=l[S])===null||T===void 0?void 0:T.some(function(O){return _===O})}))!==null&&i!==void 0?i:!0;if(!b){S++;continue}c[S]=x(c[S],g),S++}}catch(_){m={error:_}}finally{try{w&&!w.done&&(y=C.return)&&y.call(C)}finally{if(m)throw m.error}}};try{for(var h=Oe(t.data),f=h.next();!f.done;f=h.next()){var p=f.value;d(p)}}catch(g){e={error:g}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}for(var v=0;v<c.length;v++)(a=t.reduced)!==null&&a!==void 0||(t.reduced={}),t.reduced[s[v].property]=c[v]},o.prototype.postProcessData=function(t){var e,r,n,i=this.processors;try{for(var a=Oe(i),s=a.next();!s.done;s=a.next()){var l=s.value;(n=t.reduced)!==null&&n!==void 0||(t.reduced={}),t.reduced[l.property]=l.calculate(t)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}},o.prototype.initDataDomainProcessor=function(){var t,e,r,n,i,a=this,s=a.keys,l=a.values,u=new Set;try{for(var c=Oe(l),d=c.next();!d.done;d=c.next()){var h=d.value;try{for(var f=(r=void 0,Oe((i=h.scopes)!==null&&i!==void 0?i:[])),p=f.next();!p.done;p=f.next()){var v=p.value;u.add(v)}}catch(_){r={error:_}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}}}catch(_){t={error:_}}finally{try{d&&!d.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}var g=u.size,m=new Map,y=new Map,S=!0,C=function(_,T,O){var P;O===void 0&&(O=m),T==="category"?O.set(_,new nc("discrete")):(O.set(_,new nc("continuous")),S&&(S=((P=_.scopes)!==null&&P!==void 0?P:[]).length===g))},w=function(){s.forEach(function(_){return C(_,_.valueType)}),l.forEach(function(_){return C(_,_.valueType)})};w();var x=this.buildAccessors.apply(this,qe(qe([],Ve(s)),Ve(l))),b=function(_,T,O){var P,M,I,R,L=_.property in x,F=!1,k;if(L){try{k=x[_.property](T)}catch{}F=k!==void 0}else F=_.property in T,k=F?T[_.property]:_.missingValue;var N="missingValue"in _;if(!F&&!N&&_.missing++,m.has(_)||w(),F){var G=(M=(P=_.validation)===null||P===void 0?void 0:P.call(_,k,T))!==null&&M!==void 0?M:!0;if(!G)if("invalidValue"in _)k=_.invalidValue;else return Ui}return _.processor&&(y.has(_)||y.set(_,_.processor()),k=(I=y.get(_))===null||I===void 0?void 0:I(k,O!==Ui?O:void 0)),(R=m.get(_))===null||R===void 0||R.extend(k),k};return{dataDomain:m,processValue:b,initDataDomain:w,scopes:u,allScopesHaveSameDefs:S}},o.prototype.buildAccessors=function(){for(var t,e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i={};try{for(var a=Oe(r),s=a.next();!s.done;s=a.next()){var l=s.value,u=l.property.indexOf(".")>=0||l.property.indexOf("[")>=0;if(u){var c=void 0;l.property.startsWith("[")?c="return datum"+l.property+";":c="return datum."+l.property+";",i[l.property]=new Function("datum",c)}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return i},o.DEBUG=function(){var t;return(t=[!0,"data-model"].includes(mr("agChartsDebug")))!==null&&t!==void 0?t:!1},o}();function Qw(o){var t,e,r=function(i,a){a.length>0&&(console.log("DataModel.processData() - "+i),console.table(a))};if(console.log("DataModel.processData() - processedData",o),r("Key Domains",o.domain.keys),r("Group Domains",(t=o.domain.groups)!==null&&t!==void 0?t:[]),r("Value Domains",o.domain.values),r("Aggregate Domains",(e=o.domain.aggValues)!==null&&e!==void 0?e:[]),o.type==="grouped"){var n=o.data.reduce(function(i,a){var s,l,u=(s=a.keys)!==null&&s!==void 0?s:[],c=(l=a.aggValues)!==null&&l!==void 0?l:[],d=a.keys.map(function(){}),h=c==null?void 0:c.map(function(){});return i.push.apply(i,qe([],Ve(a.values.map(function(f,p){return qe(qe(qe([],Ve(p===0?u:d)),Ve(f??[])),Ve(p==0?c:h))})))),i},[]);r("Values",n)}else{var n=o.data.reduce(function(a,s){var l,u=(l=s.aggValues)!==null&&l!==void 0?l:[];return a.push(qe(qe(qe([],Ve(s.keys)),Ve(s.values)),Ve(u))),a},[]);r("Values",n)}}function og(){return function(o,t){var e=["Property ["+o+"] is deprecated.",t].filter(function(r){return r!=null}).join(" ");re.warnOnce(e)}}function eb(o,t){var e=t==null?void 0:t.default,r=og();return ta(function(n,i,a){return a!==e&&r(i.toString(),o),a})}function tb(o,t){var e=og();return ta(function(r,n,i){return i!==r[o]&&(e(n.toString(),"Use ["+o+"] instead."),r[o]=t?t(i):i),kl},function(r,n){return e(n.toString(),"Use ["+o+"] instead."),r[o]})}var ln=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},rb=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},At="ag-chart-tooltip",nb=`
.`+At+` {
    transition: transform 0.1s ease;
    display: table;
    position: fixed;
    left: 0px;
    top: 0px;
    white-space: nowrap;
    z-index: 99999;
    font: 12px Verdana, sans-serif;
    color: black;
    background: rgb(244, 244, 244);
    border-radius: 5px;
    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);
}

.`+At+`-no-interaction {
    pointer-events: none;
    user-select: none;
}

.`+At+`-no-animation {
    transition: none !important;
}

.`+At+`-hidden {
    visibility: hidden;
}

.`+At+`-title {
    font-weight: bold;
    padding: 7px;
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
    color: white;
    background-color: #888888;
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
}

.`+At+`-content {
    padding: 7px;
    line-height: 1.7em;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
    overflow: hidden;
}

.`+At+`-content:empty {
    padding: 0;
    height: 7px;
}

.`+At+`-arrow::before {
    content: "";

    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);

    border: 6px solid #989898;

    border-left-color: transparent;
    border-right-color: transparent;
    border-top-color: #989898;
    border-bottom-color: transparent;

    width: 0;
    height: 0;

    margin: 0 auto;
}

.`+At+`-arrow::after {
    content: "";

    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);

    border: 5px solid black;

    border-left-color: transparent;
    border-right-color: transparent;
    border-top-color: rgb(244, 244, 244);
    border-bottom-color: transparent;

    width: 0;
    height: 0;

    margin: 0 auto;
}

.ag-chart-wrapper {
    box-sizing: border-box;
    overflow: hidden;
}
`;function Ct(o,t){var e,r,n,i;if(typeof o=="string")return o;t=t??{};var a=o.content,s=a===void 0?(e=t.content)!==null&&e!==void 0?e:"":a,l=o.title,u=l===void 0?(r=t.title)!==null&&r!==void 0?r:void 0:l,c=o.color,d=c===void 0?(n=t.color)!==null&&n!==void 0?n:"white":c,h=o.backgroundColor,f=h===void 0?(i=t.backgroundColor)!==null&&i!==void 0?i:"#888":h,p=u?'<div class="'+At+`-title"
        style="color: `+d+"; background-color: "+f+'">'+u+"</div>":"";return p+'<div class="'+At+'-content">'+s+"</div>"}var ib=["pointer","node"],ob=ue(function(o){return ib.includes(o)},"expecting a position type keyword such as 'pointer' or 'node'"),ag=function(){function o(){this.type="pointer",this.xOffset=0,this.yOffset=0}return ln([A(ob)],o.prototype,"type",void 0),ln([A(J())],o.prototype,"xOffset",void 0),ln([A(J())],o.prototype,"yOffset",void 0),o}(),ab=function(){function o(t,e,r){var n=this;this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.position=new ag,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=r;var i=e.createElement("div");if(this.element=this.tooltipRoot.appendChild(i),this.element.classList.add(At),this.canvasElement=t,window.IntersectionObserver){var a=new IntersectionObserver(function(l){var u,c;try{for(var d=rb(l),h=d.next();!h.done;h=d.next()){var f=h.value;f.target===n.canvasElement&&f.intersectionRatio===0&&n.toggle(!1)}}catch(p){u={error:p}}finally{try{h&&!h.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}},{root:this.tooltipRoot});a.observe(this.canvasElement),this.observer=a}if(o.tooltipDocuments.indexOf(e)<0){var s=e.createElement("style");s.innerHTML=nb,e.head.insertBefore(s,e.head.querySelector("style")),o.tooltipDocuments.push(e)}}return o.prototype.destroy=function(){var t=this.element.parentNode;t&&t.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)},o.prototype.isVisible=function(){var t=this.element;return!t.classList.contains(At+"-hidden")},o.prototype.updateClass=function(t,e){var r=this,n=r.element,i=r.class,a=r.lastClass,s=r.enableInteraction,l=this.isVisible(),u=function(c,d){var h=At+"-"+c;d?n.classList.add(h):n.classList.remove(h)};u("no-animation",!l&&!!t),u("no-interaction",!s),u("hidden",!t),u("arrow",!!e),i!==a&&(a&&n.classList.remove(a),i&&n.classList.add(i),this.lastClass=i)},o.prototype.show=function(t,e,r){var n=this,i,a,s,l,u,c,d;r===void 0&&(r=!1);var h=this,f=h.element,p=h.canvasElement;if(e!==void 0)f.innerHTML=e;else if(!f.innerHTML){this.toggle(!1);return}var v=function(I,R,L){return Math.max(Math.min(R,L),I)},g=(a=(i=t.position)===null||i===void 0?void 0:i.xOffset)!==null&&a!==void 0?a:0,m=(l=(s=t.position)===null||s===void 0?void 0:s.yOffset)!==null&&l!==void 0?l:0,y=p.getBoundingClientRect(),S=y.left+t.offsetX-f.clientWidth/2+g,C=y.top+t.offsetY-f.clientHeight-8+m,w=this.getWindowBoundingBox(),x=w.x+w.width-f.clientWidth-1,b=w.y+w.height-f.clientHeight,_=v(w.x,S,x),T=v(w.y,C,b),O=_!==S||T!==C,P=!O&&!g&&!m,M=(c=(u=t.showArrow)!==null&&u!==void 0?u:this.showArrow)!==null&&c!==void 0?c:P;if(this.updateShowArrow(M),f.style.transform="translate("+Math.round(_)+"px, "+Math.round(T)+"px)",this.enableInteraction=(d=t.enableInteraction)!==null&&d!==void 0?d:!1,this.delay>0&&!r){this.toggle(!1),this.showTimeout=window.setTimeout(function(){n.toggle(!0)},this.delay);return}this.toggle(!0)},o.prototype.getWindowBoundingBox=function(){return new Ee(0,0,window.innerWidth,window.innerHeight)},o.prototype.toggle=function(t){t||window.clearTimeout(this.showTimeout),this.updateClass(t,this._showArrow)},o.prototype.pointerLeftOntoTooltip=function(t){var e;if(!this.enableInteraction)return!1;var r=(e=t.sourceEvent.relatedTarget)===null||e===void 0?void 0:e.classList,n=["","-title","-content"],i=!!n.filter(function(a){return r==null?void 0:r.contains(""+At+a)});return r!==void 0&&i},o.prototype.updateShowArrow=function(t){this._showArrow=t},o.tooltipDocuments=[],ln([A(Re)],o.prototype,"enabled",void 0),ln([A(Ur)],o.prototype,"showArrow",void 0),ln([A(de)],o.prototype,"class",void 0),ln([A(J(0))],o.prototype,"delay",void 0),ln([tb("range",function(t){return t?"nearest":"exact"})],o.prototype,"tracking",void 0),ln([A(ig)],o.prototype,"range",void 0),o}(),sb=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function sg(o,t){var e,r;t===void 0&&(t=[0,0]);try{for(var n=sb(o),i=n.next();!i.done;i=n.next()){var a=i.value;typeof a=="number"&&(a<0&&(t[0]+=a),a>0&&(t[1]+=a))}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t}function lb(o,t,e){return{id:t,scopes:[o.id],type:"aggregate",matchGroupIds:e?[e]:void 0,aggregateFunction:function(r){return sg(r)},groupAggregateFunction:function(r,n){var i,a;return n===void 0&&(n=[0,0]),n[0]+=(i=r==null?void 0:r[0])!==null&&i!==void 0?i:0,n[1]+=(a=r==null?void 0:r[1])!==null&&a!==void 0?a:0,n}}}function ef(o,t){return{id:t,scopes:[o.id],type:"aggregate",aggregateFunction:function(){return[0,1]},groupAggregateFunction:function(e,r){var n,i;return r===void 0&&(r=[0,0]),r[0]+=(n=e==null?void 0:e[0])!==null&&n!==void 0?n:0,r[1]+=(i=e==null?void 0:e[1])!==null&&i!==void 0?i:0,r}}}function ub(o,t,e){var r={id:t,scopes:[o.id],matchGroupIds:e?[e]:void 0,type:"aggregate",aggregateFunction:function(n){return sg(n)},groupAggregateFunction:function(n,i){var a,s;return i===void 0&&(i=[0,0,-1]),i[0]+=(a=n==null?void 0:n[0])!==null&&a!==void 0?a:0,i[1]+=(s=n==null?void 0:n[1])!==null&&s!==void 0?s:0,i[2]++,i},finalFunction:function(n){n===void 0&&(n=[0,0,0]);var i=n[0]+n[1];return i>=0?[0,i/n[2]]:[i/n[2],0]}};return r}function tf(o,t,e,r){var n={id:t,scopes:[o.id],matchGroupIds:r?[r]:void 0,type:"aggregate",aggregateFunction:function(i,a){a===void 0&&(a=[]);var s=a[1]-a[0];return e.aggregateFunction(i).map(function(l){return l/s})}};return e.groupAggregateFunction&&(n.groupAggregateFunction=e.groupAggregateFunction),n}function cb(){return function(){var o=0;return function(t){return typeof t!="number"||isNaN(t)?t:(o+=t,o)}}}var xa=new Map;function Gl(o,t){var e,r,n,i=JSON.stringify(o,null,0);return xa.has(t)||xa.set(t,new Map),!((e=xa.get(t))===null||e===void 0)&&e.has(i)||(r=xa.get(t))===null||r===void 0||r.set(i,t(o)),(n=xa.get(t))===null||n===void 0?void 0:n.get(i)}var lg=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},db=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},$o=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ic={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:function(){var o=NaN;return function(t,e){var r=e.keys[0],n=Math.abs(r-o);return o=r,!isNaN(n)&&n>0&&n<t?n:t}}},hb={type:"processor",property:"sortedGroupDomain",calculate:function(o){var t=o.domain.groups;if(t!=null)return db([],lg(t)).sort(function(e,r){for(var n=0;n<e.length;n++){var i=e[n]-r[n];if(i!==0)return i}return 0})}};function fb(o){var t=o.normaliseTo,e=o.mode,r=function(n,i){var a=n*t/i;return a>=0?Math.min(t,a):Math.max(-t,a)};return function(){return function(){return function(n,i){var a,s,l,u,c=[0,0];try{for(var d=$o(i),h=d.next();!h.done;h=d.next()){var f=h.value,p=n[f],v=p<0?0:1;e==="sum"?c[v]+=p:v===0?c[v]=Math.min(c[v],p):c[v]=Math.max(c[v],p)}}catch(S){a={error:S}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}var g=Math.max(Math.abs(c[0]),c[1]);try{for(var m=$o(i),y=m.next();!y.done;y=m.next()){var f=y.value;n[f]=r(n[f],g)}}catch(S){l={error:S}}finally{try{y&&!y.done&&(u=m.return)&&u.call(m)}finally{if(l)throw l.error}}}}}}function td(o,t,e,r){return r===void 0&&(r="sum"),{scopes:[o.id],type:"group-value-processor",matchGroupIds:t,adjust:Gl({normaliseTo:e,mode:r},fb)}}function pb(o){var t=o.normaliseTo,e=o.rangeMin,r=o.rangeMax,n=t[1]-t[0],i=function(a,s,l){var u=t[0]+(a-s)/l*n;return l===0||u>=t[1]?t[1]:u<t[0]?t[0]:u};return function(){return function(a,s){var l,u,c,d,h=lg(a.domain.values[s],2),f=h[0],p=h[1];e!=null&&(f=e),r!=null&&(p=r);var v=p-f;a.domain.values[s]=[t[0],t[1]];try{for(var g=$o(a.data),m=g.next();!m.done;m=g.next()){var y=m.value,S=y.values;a.type==="ungrouped"&&(S=[S]);try{for(var C=(c=void 0,$o(S)),w=C.next();!w.done;w=C.next()){var x=w.value;x[s]=i(x[s],f,v)}}catch(b){c={error:b}}finally{try{w&&!w.done&&(d=C.return)&&d.call(C)}finally{if(c)throw c.error}}}}catch(b){l={error:b}}finally{try{m&&!m.done&&(u=g.return)&&u.call(g)}finally{if(l)throw l.error}}}}}function rf(o,t,e,r,n){return{scopes:[o.id],type:"property-value-processor",property:t,adjust:Gl({normaliseTo:e,rangeMin:r,rangeMax:n},pb)}}function vb(o){return function(){return function(){return function(t,e){var r,n,i=0;try{for(var a=$o(e),s=a.next();!s.done;s=a.next()){var l=s.value,u=t[l];typeof u!="number"||isNaN(u)||(o==="normal"&&(i+=u),t[l]=i,o==="trailing"&&(i+=u))}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}}}}}function gb(o){var t=o.mode,e=o.sum;return function(){var r=[],n=!0;return function(){return function(i,a){var s,l,u=0;try{for(var c=$o(a),d=c.next();!d.done;d=c.next()){var h=d.value,f=i[h],p=n&&e==="current"?0:r[h];r[h]=f;var v=e==="current"?f:p;if(typeof f!="number"||isNaN(f)){i[h]=v;continue}if(typeof p!="number"||isNaN(p)){i[h]=v;continue}t==="normal"&&(u+=v),i[h]=u,t==="trailing"&&(u+=v)}}catch(g){s={error:g}}finally{try{d&&!d.done&&(l=c.return)&&l.call(c)}finally{if(s)throw s.error}}n=!1}}}}function yb(o,t,e,r){var n;if(e.startsWith("window")){var i=e.endsWith("-trailing")?"trailing":"normal";n=Gl({mode:i,sum:r},gb)}else n=Gl(e,vb);return{scopes:[o.id],type:"group-value-processor",matchGroupIds:[t],adjust:n}}function ug(o,t){return t===void 0&&(t=!0),{type:"processor",property:"diff",calculate:function(e){for(var r={changed:!1,added:[],updated:[],removed:[]},n=new Map,i=new Map,a=new Map,s="___",l=0;l<Math.max(o.data.length,e.data.length);l++){var u=o.data[l],c=e.data[l],d=u==null?void 0:u.keys.join(s),h=c==null?void 0:c.keys.join(s);if(d===h){xl(u.values,c.values)||i.set(h,c);continue}a.has(h)?((t||!xl(a.get(h).values,c.values))&&i.set(h,c),a.delete(h)):c&&n.set(h,c),n.has(d)?((t||!xl(n.get(d).values,u.values))&&i.set(d,u),n.delete(d)):u&&a.set(d,u)}return r.added=Array.from(n.values()).map(function(f){return f.keys}),r.updated=Array.from(i.values()).map(function(f){return f.keys}),r.removed=Array.from(a.values()).map(function(f){return f.keys}),r.changed=r.added.length>0||r.updated.length>0||r.removed.length>0,r}}}function xl(o,t){if(o==null||t==null||o.length!==t.length)return!1;for(var e=0;e<o.length;e++){if(Array.isArray(o[e])&&Array.isArray(t[e]))return xl(o[e],t[e]);if(o[e]!==t[e])return!1}return!0}function et(o,t){return ta(function(e,r,n){return e[o][t??r]=n,n})}function Fr(o){var t=o.newValue,e=o.oldValue,r=o.changeValue;return ta(function(n,i,a,s){return a!==s&&(s!==void 0&&(e==null||e.call(n,s)),a!==void 0&&(t==null||t.call(n,a)),r==null||r.call(n,a,s)),a})}var Kd=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ti=function(){return Ti=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Ti.apply(this,arguments)},yt=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},mb=function(o,t){var e={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&t.indexOf(r)<0&&(e[r]=o[r]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(o);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(o,r[n])&&(e[r[n]]=o[r[n]]);return e},nf=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},oc=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Sb=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},tt;(function(o){o[o.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",o[o.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",o[o.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",o[o.NEAREST_NODE=3]="NEAREST_NODE"})(tt||(tt={}));function $d(o){return Fl(o,!0)!=null}function cg(o){return Fl(o,!1)!=null}function Xd(o,t,e,r){r===void 0&&(r={});var n=Ti({scopes:[o.id],property:t,type:"key",valueType:e?"range":"category",validation:e?$d:cg},r);return n}function mt(o,t,e,r){r===void 0&&(r={});var n=Ti({scopes:[o.id],property:t,type:"value",valueType:e?"range":"category",validation:e?$d:cg},r);return n}function Cb(o,t,e){e===void 0&&(e={});var r=e.min,n=r===void 0?-1/0:r,i=e.max,a=i===void 0?1/0:i,s=mb(e,["min","max"]);return Ti({scopes:[o.id],type:"value",property:t,valueType:"range",validation:$d,processor:function(){return function(l){return typeof l!="number"||isNaN(l)?l:Math.min(Math.max(l,n),a)}}},s)}function xb(o,t,e,r){r===void 0&&(r={});var n=Ti(Ti({},mt(o,t,e,r)),{processor:cb()});return n}function mi(o,t,e,r,n,i){return n===void 0&&(n="current"),[mt(o,t,e,i),yb(o,i.groupId,r,n)]}var ms=function(){function o(t,e,r){this.type="nodeClick",this.event=t,this.datum=e.datum,this.seriesId=r.id}return o}(),wb=function(o){Kd(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t}(ms),bb=function(o){Kd(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return t}(ms),_b=function(){function o(){this.fill="yellow",this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0}return yt([A(Fe)],o.prototype,"fill",void 0),yt([A(Pe(0,1))],o.prototype,"fillOpacity",void 0),yt([A(Fe)],o.prototype,"stroke",void 0),yt([A(Pe(0))],o.prototype,"strokeWidth",void 0),o}(),Ob=function(){function o(){this.strokeWidth=void 0,this.dimOpacity=void 0,this.enabled=void 0}return yt([A(Pe(0))],o.prototype,"strokeWidth",void 0),yt([A(Pe(0,1))],o.prototype,"dimOpacity",void 0),yt([A(Ur)],o.prototype,"enabled",void 0),o}(),Eb=function(){function o(){this.color="black"}return yt([A(Fe)],o.prototype,"color",void 0),o}(),Yd=function(){function o(){this.item=new _b,this.series=new Ob,this.text=new Eb}return o}(),Ii=function(){function o(){this.enabled=!0,this.showArrow=void 0,this.interaction=new Tb,this.position=new ag}return yt([A(Re)],o.prototype,"enabled",void 0),yt([A(Ur)],o.prototype,"showArrow",void 0),o}(),Tb=function(){function o(){this.enabled=!1}return yt([A(Re)],o.prototype,"enabled",void 0),o}(),Cu=function(o){Kd(t,o);function t(e){var r,n=o.call(this)||this;n.id=gn(n),n.rootGroup=new le({name:"seriesRoot",isVirtual:!0}),n.axes=(r={},r[ee.X]=void 0,r[ee.Y]=void 0,r),n.directions=[ee.X,ee.Y],n.nodeDataRefresh=!0,n._data=void 0,n._visible=!0,n.showInLegend=!0,n.cursor="default",n.nodeClickRange="exact",n.seriesGrouping=void 0,n._declarationOrder=-1,n.highlightStyle=new Yd,n.ctx=e.moduleCtx;var i=e.useLabelLayer,a=i===void 0?!1:i,s=e.pickModes,l=s===void 0?[tt.NEAREST_BY_MAIN_AXIS_FIRST]:s,u=e.directionKeys,c=u===void 0?{}:u,d=e.directionNames,h=d===void 0?{}:d,f=e.contentGroupVirtual,p=f===void 0?!0:f,v=n.rootGroup;return n.directionKeys=c,n.directionNames=h,n.contentGroup=v.appendChild(new le({name:n.id+"-content",layer:!p,isVirtual:p,zIndex:Xe.SERIES_LAYER_ZINDEX,zIndexSubOrder:n.getGroupZIndexSubOrder("data")})),n.highlightGroup=v.appendChild(new le({name:n.id+"-highlight",layer:!0,zIndex:Xe.SERIES_LAYER_ZINDEX,zIndexSubOrder:n.getGroupZIndexSubOrder("highlight")})),n.highlightNode=n.highlightGroup.appendChild(new le({name:"highlightNode"})),n.highlightLabel=n.highlightGroup.appendChild(new le({name:"highlightLabel"})),n.highlightNode.zIndex=0,n.highlightLabel.zIndex=10,n.pickModes=l,a&&(n.labelGroup=v.appendChild(new le({name:n.id+"-series-labels",layer:!0,zIndex:Xe.SERIES_LABEL_ZINDEX}))),n}return Object.defineProperty(t.prototype,"type",{get:function(){var e;return(e=this.constructor.type)!==null&&e!==void 0?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this.nodeDataRefresh=!0},enumerable:!1,configurable:!0}),t.prototype.hasData=function(){var e=this.data;return e&&(!Array.isArray(e)||e.length>0)},Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e,this.visibleChanged()},enumerable:!1,configurable:!0}),t.prototype.onSeriesGroupingChange=function(e,r){var n=this,i=this,a=i.id,s=i.type,l=i.visible,u=i.rootGroup;e&&this.ctx.seriesStateManager.deregisterSeries({id:a,type:s}),r&&this.ctx.seriesStateManager.registerSeries({id:a,type:s,visible:l,seriesGrouping:r}),this.ctx.seriesLayerManager.changeGroup({id:a,type:s,rootGroup:u,getGroupZIndexSubOrder:function(c){return n.getGroupZIndexSubOrder(c)},seriesGrouping:r,oldGrouping:e})},t.prototype.getBandScalePadding=function(){return{inner:1,outer:0}},t.prototype.getGroupZIndexSubOrder=function(e,r){var n=this;r===void 0&&(r=0);var i=0;switch(e){case"data":case"paths":break;case"labels":i+=2e4;break;case"marker":i+=1e4;break;case"highlight":r+=15e3;break}var a=function(){return n._declarationOrder+i};return[a,r]},t.prototype.addChartEventListeners=function(){},t.prototype.destroy=function(){this.ctx.seriesStateManager.deregisterSeries(this),this.ctx.seriesLayerManager.releaseGroup(this)},t.prototype.getDirectionValues=function(e,r){var n=this,i=this.resolveKeyDirection(e),a=r==null?void 0:r[i],s=[],l=function(){for(var c,d,h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];try{for(var p=nf(h),v=p.next();!v.done;v=p.next()){var g=v.value;u(g)}}catch(m){c={error:m}}finally{try{v&&!v.done&&(d=p.return)&&d.call(p)}finally{if(c)throw c.error}}},u=function(c){Array.isArray(c)?l.apply(void 0,Sb([],oc(c))):typeof c=="object"?l(Object.values(c)):s.push(c)};return a&&a.forEach(function(c){var d=n[c];u(d)}),s},t.prototype.getKeys=function(e){return this.getDirectionValues(e,this.directionKeys)},t.prototype.getNames=function(e){return this.getDirectionValues(e,this.directionNames)},t.prototype.resolveKeyDirection=function(e){return e},t.prototype.markNodeDataDirty=function(){this.nodeDataRefresh=!0},t.prototype.visibleChanged=function(){this.ctx.seriesStateManager.registerSeries(this)},t.prototype.getOpacity=function(e){var r=this.highlightStyle.series,n=r.dimOpacity,i=n===void 0?1:n,a=r.enabled,s=a===void 0?!0:a,l=1;if(s===!1||i===l)return l;switch(this.isItemIdHighlighted(e)){case"no-highlight":case"highlighted":return l;case"peer-highlighted":case"other-highlighted":return i}},t.prototype.getStrokeWidth=function(e,r){var n=this.highlightStyle.series,i=n.strokeWidth,a=n.enabled,s=a===void 0?!0:a;if(s===!1||i===void 0)return e;switch(this.isItemIdHighlighted(r)){case"highlighted":return i;case"no-highlight":case"other-highlighted":case"peer-highlighted":return e}},t.prototype.isItemIdHighlighted=function(e){var r,n=(r=this.ctx.highlightManager)===null||r===void 0?void 0:r.getActiveHighlight(),i=n??{},a=i.series,s=i.itemId,l=a!=null;return l?a!==this?"other-highlighted":s===void 0?"highlighted":e&&n!==e&&s!==e.itemId?"peer-highlighted":"highlighted":"no-highlight"},t.prototype.pickNode=function(e,r){var n,i,a=this,s=a.pickModes,l=a.visible,u=a.rootGroup;if(!(!l||!u.visible))try{for(var c=nf(s),d=c.next();!d.done;d=c.next()){var h=d.value;if(!(r&&!r.includes(h))){var f=void 0;switch(h){case tt.EXACT_SHAPE_MATCH:f=this.pickNodeExactShape(e);break;case tt.NEAREST_BY_MAIN_AXIS_FIRST:case tt.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST:f=this.pickNodeMainAxisFirst(e,h===tt.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST);break;case tt.NEAREST_NODE:f=this.pickNodeClosestDatum(e);break}if(f)return{pickMode:h,match:f.datum,distance:f.distance}}}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}},t.prototype.pickNodeExactShape=function(e){var r=this.contentGroup.pickNode(e.x,e.y);if(r)return{datum:r.datum,distance:0}},t.prototype.pickNodeClosestDatum=function(e){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")},t.prototype.pickNodeMainAxisFirst=function(e,r){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")},t.prototype.fireNodeClickEvent=function(e,r){var n=this.getNodeClickEvent(e,r);this.fireEvent(n)},t.prototype.fireNodeDoubleClickEvent=function(e,r){var n=this.getNodeDoubleClickEvent(e,r);this.fireEvent(n)},t.prototype.getNodeClickEvent=function(e,r){return new wb(e,r,this)},t.prototype.getNodeDoubleClickEvent=function(e,r){return new bb(e,r,this)},t.prototype.toggleSeriesItem=function(e,r){this.visible=r,this.nodeDataRefresh=!0},t.prototype.isEnabled=function(){return this.visible},t.prototype.fixNumericExtent=function(e,r){var n,i=Cl(e);if(i.length===0)return i;var a=oc(i,2),s=a[0],l=a[1];if(s===l){var u=oc((n=r==null?void 0:r.calculatePadding(s,l))!==null&&n!==void 0?n:[1,1],2),c=u[0],d=u[1];s-=c,l+=d}return[s,l]},t.highlightedZIndex=1e12,yt([A(St)],t.prototype,"id",void 0),yt([A(Re)],t.prototype,"_visible",void 0),yt([A(Re)],t.prototype,"showInLegend",void 0),yt([A(St)],t.prototype,"cursor",void 0),yt([A(ig)],t.prototype,"nodeClickRange",void 0),yt([Fr({changeValue:function(e,r){this.onSeriesGroupingChange(r,e)}})],t.prototype,"seriesGrouping",void 0),t}(qv),$s=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Vl=function(){function o(t,e,r,n){t===void 0&&(t=0),e===void 0&&(e=t),r===void 0&&(r=t),n===void 0&&(n=e),this.top=t,this.right=e,this.bottom=r,this.left=n}return o.prototype.clear=function(){this.top=this.right=this.bottom=this.left=0},$s([A(J(0))],o.prototype,"top",void 0),$s([A(J(0))],o.prototype,"right",void 0),$s([A(J(0))],o.prototype,"bottom",void 0),$s([A(J(0))],o.prototype,"left",void 0),o}(),Pb=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},of=function(){function o(){}return o.init=function(){var t=this,e=window.ResizeObserver;if(e)this.resizeObserver=new e(function(n){var i,a;try{for(var s=Pb(n),l=s.next();!l.done;l=s.next()){var u=l.value,c=u.contentRect,d=c.width,h=c.height;t.checkSize(t.elements.get(u.target),u.target,d,h)}}catch(f){i={error:f}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}});else{var r=function(){t.elements.forEach(function(n,i){t.checkClientSize(i,n)})};this.pollerHandler=window.setInterval(r,100)}this.ready=!0},o.destroy=function(){var t;this.pollerHandler!=null&&(clearInterval(this.pollerHandler),this.pollerHandler=void 0),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),this.resizeObserver=void 0,this.ready=!1},o.checkSize=function(t,e,r,n){t&&(!t.size||r!==t.size.width||n!==t.size.height)&&(t.size={width:r,height:n},t.cb(t.size,e))},o.observe=function(t,e){this.ready||this.init(),this.unobserve(t,!1),this.resizeObserver&&this.resizeObserver.observe(t),this.elements.set(t,{cb:e}),this.checkClientSize(t,{cb:e})},o.unobserve=function(t,e){e===void 0&&(e=!0),this.resizeObserver&&this.resizeObserver.unobserve(t),this.elements.delete(t),e&&this.elements.size===0&&this.destroy()},o.checkClientSize=function(t,e){var r=t.clientWidth?t.clientWidth:0,n=t.clientHeight?t.clientHeight:0;this.checkSize(e,t,r,n)},o.elements=new Map,o.ready=!1,o}();function Ab(o,t,e,r,n){var i=o.x;o.x<t?i=t:o.x>t+r&&(i=t+r);var a=o.y;o.y<e?a=e:o.y>e+n&&(a=e+n);var s=o.x-i,l=o.y-a,u=Math.sqrt(s*s+l*l);return u<=o.size*.5}function dg(o,t,e,r,n){var i=o.x+o.width>t&&o.x<t+r,a=o.y+o.height>e&&o.y<e+n;return i&&a}function Db(o,t,e,r,n){return t+r<o.x+o.width&&t>o.x&&e>o.y&&e+n<o.y+o.height}function Mb(o){return o!=null&&typeof o.point=="object"&&typeof o.label=="object"}function Rb(o,t,e){e===void 0&&(e=5);var r=[];o=o.map(function(c){return c.slice().sort(function(d,h){return h.point.size-d.point.size})});for(var n=0;n<o.length;n++){var i=r[n]=[],a=o[n];if(a!=null&&a.length&&a[0].label)for(var s=function(c,d){var h=a[c],f=h.label,p=h.point.size*.5,v=h.point.x-f.width*.5,g=h.point.y-p-f.height-e,m=f.width,y=f.height,S=!t||Db(t,v,g,m,y);if(!S)return"continue";var C=o.some(function(x){return x.some(function(b){return Ab(b.point,v,g,m,y)})});if(C)return"continue";var w=r.some(function(x){return x.some(function(b){return dg(b,v,g,m,y)})});if(w)return"continue";i.push({index:c,text:f.text,x:v,y:g,width:m,height:y,datum:h})},l=0,u=a.length;l<u;l++)s(l,u)}return r}function Ib(o,t){for(var e=[],r=function(a){var s=o[a],l=s.point,u=l.x,c=l.y,d=s.label.text,h=s.label,f=h.width,p=h.height;f+=t??0,p+=t??0;var v=e.some(function(g){var m=dg(g,u,c,f,p);return m});if(v)return{value:!0};e.push({index:a,text:d,x:u,y:c,width:f,height:p,datum:s})},n=0;n<o.length;n++){var i=r(n);if(typeof i=="object")return i.value}return!1}var Lb=function(o,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):n(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},Fb=function(o,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};function kb(o){return hg(function(t,e){return requestAnimationFrame(t)},o)}function Nb(o){return hg(function(t,e){return e===void 0&&(e=0),setTimeout(t,e)},o)}function hg(o,t){var e=0,r=!1,n,i,a=function(){return r},s=function(){r=!1,i==null||i(),i=void 0,n=void 0,e>0&&o(l)},l=function(){var u=e;e=0,r=!0;var c=t({count:u});if(!c){s();return}c.then(s).catch(s)};return{schedule:function(u){e===0&&!a()&&o(l,u),e++},await:function(){return Lb(this,void 0,void 0,function(){return Fb(this,function(u){switch(u.label){case 0:if(!a())return[2];n==null&&(n=new Promise(function(c){i=c})),u.label=1;case 1:return a()?[4,n]:[3,3];case 2:return u.sent(),[3,1];case 3:return[2]}})})}}}function af(o){return new Promise(function(t){setTimeout(function(){return t(void 0)},o)})}var sf=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Gb=function(){function o(t,e){this.renderer=void 0,this.text=void 0,this.className=t,this.parentElement=e}return o.prototype.show=function(t){var e,r,n=this.element;if(n||(n=document.createElement("div"),n.className=this.className,this.element=n),n.style.position="absolute",n.style.left=t.x+"px",n.style.top=t.y+"px",n.style.width=t.width+"px",n.style.height=t.height+"px",this.renderer)n.innerHTML=this.renderer();else{var i=document.createElement("div");i.style.alignItems="center",i.style.boxSizing="border-box",i.style.display="flex",i.style.justifyContent="center",i.style.margin="8px",i.style.height="100%",i.style.font="12px Verdana, sans-serif",i.innerText=(e=this.text)!==null&&e!==void 0?e:"No data to display",n.append(i)}(r=this.parentElement)===null||r===void 0||r.append(n)},o.prototype.hide=function(){var t;(t=this.element)===null||t===void 0||t.remove(),this.element=void 0},sf([A(Be)],o.prototype,"renderer",void 0),sf([A(de)],o.prototype,"text",void 0),o}(),Vb=function(){function o(t){this.noData=new Gb("ag-chart-no-data-overlay",t)}return o}(),un=function(){return un=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},un.apply(this,arguments)},In=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Ln=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},fg=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function Pi(o,t){var e,r,n=ar(o),i=ar(t);if(i==="array"){var a=t;return n!=="array"||o.length!==a.length?Ln([],In(a)):a.some(function(g,m){var y;return Pi((y=o)===null||y===void 0?void 0:y[m],g)!=null})?Ln([],In(a)):null}if(i==="primitive")return n!=="primitive"?un({},t):o!==t?t:null;var s=o||{},l=t||{},u=new Set(Ln(Ln([],In(Object.keys(s))),In(Object.keys(l)))),c=0,d={},h=function(g){if(s[g]===l[g])return"continue";var m=function(w){d[g]=w,c++},y=ar(s[g]),S=ar(l[g]);if(y!==S||S==="primitive"||S===null||S==="array"&&s[g].length!==l[g].length||S==="class-instance"||S==="function"&&s[g]!==l[g])return m(l[g]),"continue";var C=Pi(s[g],l[g]);C!==null&&m(C)};try{for(var f=fg(u),p=f.next();!p.done;p=f.next()){var v=p.value;h(v)}}catch(g){e={error:g}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(e)throw e.error}}return c===0?null:d}var Sr=Symbol("<delete-property>"),lf=Symbol("<unspecified-property>");function Ye(o,t){var e,r,n,i=(n=t==null?void 0:t.avoidDeepClone)!==null&&n!==void 0?n:[],a=o.map(function(p){return ar(p)});if(a.some(function(p){return p==="array"})){var s=o[o.length-1];return s instanceof Array?s.map(function(p){var v=ar(p);return v==="array"?Ye([[],p],t):v==="object"?Ye([{},p],t):p}):s}var l={},u=new Set(o.map(function(p){return p!=null?Object.keys(p):[]}).reduce(function(p,v){return p.concat(v)},[])),c=function(p){var v=o.map(function(S){return S!=null&&typeof S=="object"&&p in S?S[p]:lf}).filter(function(S){return S!==lf});if(v.length===0)return"continue";var g=v[v.length-1];if(g===Sr)return"continue";var m=v.map(function(S){return ar(S)}),y=m[0];if(m.some(function(S){return S!==y}))return l[p]=g,"continue";(y==="array"||y==="object")&&!i.includes(p)?l[p]=Ye(v,t):y==="array"?l[p]=Ln([],In(g)):l[p]=g};try{for(var d=fg(u),h=d.next();!h.done;h=d.next()){var f=h.value;c(f)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}return l}function Za(o,t,e){var r,n,i;e===void 0&&(e={});var a=e.path,s=a===void 0?void 0:a,l=e.matcherPath,u=l===void 0?s?s.replace(/(\[[0-9+]+\])/i,"[]"):void 0:l,c=e.skip,d=c===void 0?[]:c,h=e.constructors,f=h===void 0?{}:h,p=e.constructedArrays,v=p===void 0?new WeakMap:p,g=e.allowedTypes,m=g===void 0?{}:g,y=e.idx;if(o==null)throw new Error("AG Charts - target is uninitialised: "+(s??"<root>"));if(t==null)return o;var S=o;y!=null&&"_declarationOrder"in S&&(S._declarationOrder=y);var C=ar(o),w=function(b){var _=(u?u+".":"")+b;if(d.indexOf(_)>=0)return"continue";var T=t[b],O=(s?s+".":"")+b,P=S.constructor,M=S[b],I=(r=f[_])!==null&&r!==void 0?r:f[b];try{var R=ar(M),L=ar(T);if(C==="class-instance"&&!(b in o||Object.prototype.hasOwnProperty.call(S,b)))return re.warn("unable to set ["+O+"] in "+(P==null?void 0:P.name)+" - property is unknown"),"continue";var F=(n=m[_])!==null&&n!==void 0?n:[R];if(!(R==="class-instance"&&L==="object")){if(R!=null&&L!=null&&!F.includes(L))return re.warn("unable to set ["+O+"] in "+(P==null?void 0:P.name)+" - can't apply type of ["+L+"], allowed types are: ["+F+"]"),"continue"}if(L==="array")if(I=(i=I??v.get(M))!==null&&i!==void 0?i:f[_+"[]"],I!=null){var k=T;S[b]=k.map(function(N,G){return Za(new I,N,un(un({},e),{path:O,matcherPath:_+"[]",idx:G}))})}else S[b]=T;else L==="class-instance"?S[b]=T:L==="object"?M!=null?Za(M,T,un(un({},e),{path:O,matcherPath:_,idx:void 0})):I!=null?S[b]=Za(new I,T,un(un({},e),{path:O,matcherPath:_,idx:void 0})):S[b]=T:S[b]=T}catch(N){return re.warn("unable to set ["+O+"] in ["+(P==null?void 0:P.name)+"]; nested error is: "+N.message),"continue"}};for(var x in t)w(x);return o}function Xo(o,t,e){for(var r,n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];var a=ar(o),s=(r=e.skip)!==null&&r!==void 0?r:[];if(a==="array"){o.forEach(function(c,d){Xo.apply(void 0,Ln([c,t,e],In((n??[]).map(function(h){return h==null?void 0:h[d]}))))});return}else if(a!=="object")return;t.apply(void 0,Ln([a,o],In(n)));var l=function(c){if(s.indexOf(c)>=0)return"continue";var d=o[c],h=n==null?void 0:n.map(function(p){return p==null?void 0:p[c]}),f=ar(d);(f==="object"||f==="array")&&Xo.apply(void 0,Ln([d,t,e],In(h)))};for(var u in o)l(u)}var jb=typeof window<"u";function ar(o){return o==null?null:jb&&o instanceof HTMLElement?"primitive":o instanceof Array?"array":o instanceof Date?"primitive":typeof o=="object"&&o.constructor===Object?"object":typeof o=="function"?"function":typeof o=="object"&&o.constructor!=null?"class-instance":"primitive"}var ac=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Xs=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Ys=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},rd=function(){function o(){this.registeredListeners={}}return o.prototype.addListener=function(t,e){var r,n=Symbol(t);return this.registeredListeners[t]||(this.registeredListeners[t]=[]),(r=this.registeredListeners[t])===null||r===void 0||r.push({symbol:n,handler:e}),n},o.prototype.dispatch=function(t){for(var e,r,n,i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];var s=(n=this.registeredListeners[t])!==null&&n!==void 0?n:[],l=[];try{for(var u=ac(s),c=u.next();!c.done;c=u.next()){var d=c.value;try{l.push(d.handler.apply(d,Ys([],Xs(i))))}catch(h){re.errorOnce(h),l.push(void 0)}}}catch(h){e={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}return l},o.prototype.cancellableDispatch=function(t,e){for(var r,n,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var l=(i=this.registeredListeners[t])!==null&&i!==void 0?i:[],u=[];try{for(var c=ac(l),d=c.next();!d.done;d=c.next()){var h=d.value;if(e())break;u.push(h.handler.apply(h,Ys([],Xs(a))))}}catch(f){r={error:f}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return u},o.prototype.reduceDispatch=function(t,e){for(var r,n,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var l=(i=this.registeredListeners[t])!==null&&i!==void 0?i:[],u=void 0;try{for(var c=ac(l),d=c.next();!d.done;d=c.next()){var h=d.value;u=h.handler.apply(h,Ys([],Xs(a))),a=e.apply(void 0,Ys([u],Xs(a)))}}catch(f){r={error:f}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return u},o.prototype.removeListener=function(t){for(var e in this.registeredListeners){var r=this.registeredListeners[e],n=r==null?void 0:r.findIndex(function(i){return i.symbol===t});n!=null&&n>=0&&(r==null||r.splice(n,1)),n!=null&&(r==null?void 0:r.length)===0&&delete this.registeredListeners[e]}},o}(),Ss=function(){function o(){this.listeners=new rd}return o.prototype.addListener=function(t,e){return this.listeners.addListener(t,e)},o.prototype.removeListener=function(t){this.listeners.removeListener(t)},o}();function za(o,t){return o=+o,t=+t,function(e){return o*(1-e)+t*e}}function pg(o,t){if(typeof o=="string")try{o=rt.fromString(o)}catch{o=rt.fromArray([0,0,0])}if(typeof t=="string")try{t=rt.fromString(t)}catch{t=rt.fromArray([0,0,0])}var e=za(o.r,t.r),r=za(o.g,t.g),n=za(o.b,t.b),i=za(o.a,t.a);return function(a){return rt.fromArray([e(a),r(a),n(a),i(a)]).toRgbaString()}}function vg(o,t){var e=typeof t,r;if(e==="number")return za(o,t);if(e==="string")try{return r=rt.fromString(t),t=r,pg(o,t)}catch{}throw new Error("Unable to interpolate values")}function Bb(o){return function(t){var e=t.from,r=t.to,n=vg(e,r);return function(i){return n(o(i))}}}function gg(o){var t=o.from,e=o.to;return vg(t,e)}var Yo=Bb(function(o){return Math.sin(o*Math.PI/2)}),jl=function(){return jl=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},jl.apply(this,arguments)},Bl;(function(o){o.Loop="loop",o.Reverse="reverse"})(Bl||(Bl={}));function yg(o){var t=o.driver,e=o.duration,r=o.from,n=o.to,i=o.autoplay,a=i===void 0?!0:i,s=o.delay,l=s===void 0?0:s,u=o.ease,c=u===void 0?gg:u,d=o.repeat,h=d===void 0?0:d,f=o.repeatType,p=f===void 0?Bl.Loop:f,v=o.onComplete,g=o.onPlay,m=o.onRepeat,y=o.onStop,S=o.onUpdate,C,w=0,x=0,b=0,_=!0,T=!1,O=c({from:r,to:n}),P={isPlaying:!1,play:I,pause:R,stop:L,reset:F},M=t(G);function I(){return P.isPlaying=!0,M.start(),g==null||g(),P}function R(){return P.isPlaying=!1,P}function L(){return P.isPlaying=!1,M.stop(),y==null||y(),P}function F(){return T=!1,x=0,b=0,M.reset(),P}function k(){b++,p===Bl.Reverse?(_=b%2===0,x=_?x%e:e-x%e):x=x%e,T=!1,m==null||m()}function N(){L(),v==null||v()}function G($){if(_||($=-$),w>=l)x+=$;else{w+=$;return}T||(C=O(Math.min(1,Math.max(0,x/e))),T=_?x>=e:x<=0),S==null||S(C),T&&(b<h?k():N())}return a&&I(),P}function Hb(o){var t,e=jl(jl({},o),{autoplay:!1,onUpdate:function(i){t==null||t(i)}}),r=yg(e),n={start:function(i){return r.stop(),r.reset(),r.play(),t=i,n},stop:function(){return r.stop(),n}};return n}var zb=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),rr=function(){return rr=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},rr.apply(this,arguments)},Wb=function(o,t){var e={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&t.indexOf(r)<0&&(e[r]=o[r]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(o);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(o,r[n])&&(e[r[n]]=o[r[n]]);return e},Ub=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},uf=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Kb=function(o){zb(t,o);function t(e){var r=o.call(this)||this;return r.controllers={},r.throttles={},r.throttleGroups=new Set,r.updaters=[],r.isPlaying=!1,r.readyToPlay=!1,r.defaultOptions={},r.skipAnimations=!1,r.debug=!1,r.interactionManager=e,window.addEventListener("DOMContentLoaded",function(){r.readyToPlay=!0}),setTimeout(function(){r.readyToPlay=!0},10),r}return t.prototype.play=function(){if(!this.isPlaying){this.isPlaying=!0,this.debug&&re.debug("AnimationManager.play()");for(var e in this.controllers)this.controllers[e].play();this.startAnimationCycle()}},t.prototype.pause=function(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimationFrame(),this.debug&&re.debug("AnimationManager.pause()");for(var e in this.controllers)this.controllers[e].pause()}},t.prototype.stop=function(){this.isPlaying=!1,this.cancelAnimationFrame(),this.debug&&re.debug("AnimationManager.stop()");for(var e in this.controllers)this.controllers[e].stop()},t.prototype.reset=function(){this.isPlaying?(this.stop(),this.play()):this.stop()},t.prototype.animate=function(e,r){var n,i,a=r.disableInteractions,s=a===void 0?!0:a,l=Wb(r,["disableInteractions"]);if(this.skipAnimations){(n=l.onUpdate)===null||n===void 0||n.call(l,l.to);return}var u=rr(rr({},l),{autoplay:this.isPlaying?l.autoplay:!1,driver:this.createDriver(e,s)});this.controllers[e]&&this.controllers[e].stop();var c=yg(u);return this.controllers[e]=c,(i=l.onUpdate)===null||i===void 0||i.call(l,l.from),c},t.prototype.animateMany=function(e,r,n){var i,a,s;if(this.skipAnimations){var l=r.map(function(b){return b.to});n.onUpdate(l),(s=n.onComplete)===null||s===void 0||s.call(n);return}var u=r.map(function(b){return b.from}),c=0,d=0,h=0,f=0,p=function(b){return function(_){var T;u[b]=_,++h>=r.length&&((T=n.onUpdate)===null||T===void 0||T.call(n,u),h=0)}},v=function(){var b;++c>=r.length&&((b=n.onPlay)===null||b===void 0||b.call(n))},g=function(){var b;++d>=r.length&&((b=n.onStop)===null||b===void 0||b.call(n))},m=function(){var b;++f>=r.length&&((b=n.onComplete)===null||b===void 0||b.call(n))},y=0;try{for(var S=Ub(r),C=S.next();!C.done;C=S.next()){var w=C.value,x=e+"-"+y;this.animate(x,rr(rr(rr({},n),w),{onUpdate:p(y),onPlay:v,onStop:g,onComplete:m})),y++}}catch(b){i={error:b}}finally{try{C&&!C.done&&(a=S.return)&&a.call(S)}finally{if(i)throw i.error}}},t.prototype.animateWithThrottle=function(e,r){var n,i=(n=r.throttleId)!==null&&n!==void 0?n:e;this.throttles[i]&&r.duration&&Date.now()-this.throttles[i]<r.duration&&(r.delay=0,r.duration=1),this.throttles[e]=Date.now(),this.animate(e,rr({},r))},t.prototype.animateManyWithThrottle=function(e,r,n){var i=this,a,s=n.throttleGroup,l=(a=n.throttleId)!==null&&a!==void 0?a:e,u=Date.now(),c=this.throttles[l]&&n.duration&&u-this.throttles[l]<n.duration,d=s&&this.throttleGroups.has(s);c&&!d&&(n.delay=0,n.duration=1),!c&&s&&this.throttleGroups.add(s);var h=function(){var f;s&&i.throttleGroups.delete(s),(f=n.onStop)===null||f===void 0||f.call(n)};return this.throttles[l]=u,this.animateMany(e,r,rr(rr({},n),{onStop:h}))},t.prototype.tween=function(e){var r="tween-"+btoa(JSON.stringify(e)),n=rr(rr({},e),{driver:this.createDriver(r)});return Hb(n)},t.prototype.createDriver=function(e,r){var n=this;return function(i){return{start:function(){n.updaters.push([e,i]),n.requestId==null&&n.startAnimationCycle(),r&&n.interactionManager.pause("animation_"+e)},stop:function(){delete n.controllers[e],n.updaters=n.updaters.filter(function(a){var s=uf(a,1),l=s[0];return l!==e}),n.updaters.length<=0&&n.cancelAnimationFrame(),r&&n.interactionManager.resume("animation_"+e)},reset:function(){}}}},t.prototype.startAnimationCycle=function(){var e=this;if(this.updaters.length!==0){var r=function(n){if(e.requestId=requestAnimationFrame(r),!!e.readyToPlay){e.lastTime===void 0&&(e.lastTime=n);var i=n-e.lastTime;e.lastTime=n,e.debug&&re.debug("AnimationManager - frame()",{updaterCount:e.updaters.length}),e.updaters.forEach(function(a){var s=uf(a,2);s[0];var l=s[1];return l(i)}),e.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:i})}};this.requestId=requestAnimationFrame(r)}},t.prototype.cancelAnimationFrame=function(){this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=void 0,this.lastTime=void 0)},t}(Ss),$b=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Xb=function(){function o(t){this.states={},this.element=t}return o.prototype.updateCursor=function(t,e){delete this.states[t],e!=null&&(this.states[t]={style:e}),this.applyStates()},o.prototype.applyStates=function(){var t="default";Object.entries(this.states).reverse().slice(0,1).forEach(function(e){var r=$b(e,2);r[0];var n=r[1].style;return t=n}),this.element.style.cursor=t},o}(),Yb=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),qb=function(o){Yb(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.legendItemClick=function(e,r,n,i){var a={type:"legend-item-click",series:e,itemId:r,enabled:n,legendItemName:i};this.listeners.dispatch("legend-item-click",a)},t.prototype.legendItemDoubleClick=function(e,r,n,i,a){var s={type:"legend-item-double-click",series:e,itemId:r,enabled:n,legendItemName:a,numVisibleItems:i};this.listeners.dispatch("legend-item-double-click",s)},t.prototype.axisHover=function(e,r){var n={type:"axis-hover",axisId:e,direction:r};this.listeners.dispatch("axis-hover",n)},t}(Ss),Zb=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jb=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i};function Qb(o,t){return o===t?!0:!((o==null?void 0:o.series)!==(t==null?void 0:t.series)||(o==null?void 0:o.itemId)!==(t==null?void 0:t.itemId)||(o==null?void 0:o.datum)!==(t==null?void 0:t.datum))}var e_=function(o){Zb(t,o);function t(){var e=o.call(this)||this;return e.states={},e.activeHighlight=void 0,e}return t.prototype.updateHighlight=function(e,r){delete this.states[e],r!=null&&(this.states[e]={highlightedDatum:r}),this.applyStates()},t.prototype.getActiveHighlight=function(){return this.activeHighlight},t.prototype.applyStates=function(){var e=this.activeHighlight,r=void 0;Object.entries(this.states).reverse().slice(0,1).forEach(function(a){var s=Jb(a,2);s[0];var l=s[1].highlightedDatum;return r=l}),this.activeHighlight=r;var n=!Qb(e,this.activeHighlight);if(n){var i={type:"highlight-change",previousHighlight:e,currentHighlight:this.activeHighlight};this.listeners.dispatch("highlight-change",i)}},t}(Ss),t_=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Mo=function(){return Mo=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Mo.apply(this,arguments)},r_=function(o,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):n(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},n_=function(o,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},wa=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cf=["pagehide","mousemove","mouseup","wheel"],df=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel"],i_=`
.ag-chart-wrapper {
    touch-action: none;
}
`,o_=function(o){t_(t,o);function t(e,r){var n,i,a,s;r===void 0&&(r=document);var l=o.call(this)||this;l.eventHandler=function(v){return l.processEvent(v)},l.mouseDown=!1,l.touchDown=!1,l.enabled=!0,l.pausers=[],l.rootElement=r.body,l.element=e;try{for(var u=wa(df),c=u.next();!c.done;c=u.next()){var d=c.value;d.startsWith("touch")?e.addEventListener(d,l.eventHandler,{passive:!0}):e.addEventListener(d,l.eventHandler)}}catch(v){n={error:v}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}try{for(var h=wa(cf),f=h.next();!f.done;f=h.next()){var d=f.value;d==="wheel"?window.addEventListener(d,l.eventHandler,{passive:!1}):window.addEventListener(d,l.eventHandler)}}catch(v){a={error:v}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}if(t.interactionDocuments.indexOf(r)<0){var p=document.createElement("style");p.innerHTML=i_,document.head.insertBefore(p,document.head.querySelector("style")),t.interactionDocuments.push(r)}return l}return t.prototype.destroy=function(){var e,r,n,i;try{for(var a=wa(cf),s=a.next();!s.done;s=a.next()){var l=s.value;window.removeEventListener(l,this.eventHandler)}}catch(d){e={error:d}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}try{for(var u=wa(df),c=u.next();!c.done;c=u.next()){var l=c.value;this.element.removeEventListener(l,this.eventHandler)}}catch(d){n={error:d}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}},t.prototype.resume=function(e){return this.pausers=this.pausers.filter(function(r){return r!==e}),this.enabled=this.pausers.length<=0,this.enabled},t.prototype.pause=function(e){this.enabled=!1,this.pausers.push(e)},t.prototype.processEvent=function(e){var r=this.decideInteractionEventTypes(e);r.length>0&&this.enabled&&this.dispatchEvent(e,r).catch(function(n){return re.errorOnce(n)})},t.prototype.dispatchEvent=function(e,r){return r_(this,void 0,void 0,function(){var n,i,a,s,l,u,c,d;return n_(this,function(h){if(n=this.calculateCoordinates(e),n==null)return[2];i=function(f){var p=a.buildEvent(Mo(Mo({event:e},n),{type:f}));a.listeners.cancellableDispatch(f,function(){return p.consumed},p)},a=this;try{for(s=wa(r),l=s.next();!l.done;l=s.next())u=l.value,i(u)}catch(f){c={error:f}}finally{try{l&&!l.done&&(d=s.return)&&d.call(s)}finally{if(c)throw c.error}}return[2]})})},t.prototype.decideInteractionEventTypes=function(e){switch(e.type){case"click":return["click"];case"dblclick":return["dblclick"];case"contextmenu":return["contextmenu"];case"mousedown":return this.mouseDown=!0,this.dragStartElement=e.target,["drag-start"];case"touchstart":return this.touchDown=!0,this.dragStartElement=e.target,["drag-start"];case"touchmove":case"mousemove":return!this.mouseDown&&!this.touchDown&&!this.isEventOverElement(e)?[]:this.mouseDown||this.touchDown?["drag"]:["hover"];case"mouseup":return!this.mouseDown&&!this.isEventOverElement(e)?[]:(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]);case"touchend":return!this.touchDown&&!this.isEventOverElement(e)?[]:(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]);case"mouseout":case"touchcancel":return["leave"];case"mouseenter":var r=e instanceof MouseEvent&&(e.buttons&1)===1;return this.mouseDown!==r?(this.mouseDown=r,[r?"drag-start":"drag-end"]):[];case"pagehide":return["page-left"];case"wheel":return["wheel"]}return[]},t.prototype.isEventOverElement=function(e){var r;return e.target===this.element||((r=e.target)===null||r===void 0?void 0:r.parentElement)===this.element},t.prototype.calculateCoordinates=function(e){var r;if(e instanceof MouseEvent){var n=e.clientX,i=e.clientY,a=e.pageX,s=e.pageY,l=e.offsetX,u=e.offsetY;return this.fixOffsets(e,{clientX:n,clientY:i,pageX:a,pageY:s,offsetX:l,offsetY:u})}else if(typeof TouchEvent<"u"&&e instanceof TouchEvent){var c=(r=e.touches[0])!==null&&r!==void 0?r:e.changedTouches[0],n=c.clientX,i=c.clientY,a=c.pageX,s=c.pageY;return Mo(Mo({},t.NULL_COORDS),{clientX:n,clientY:i,pageX:a,pageY:s})}else if(e instanceof PageTransitionEvent)return e.persisted?void 0:t.NULL_COORDS},t.prototype.fixOffsets=function(e,r){var n=function(s){for(var l=0,u=0;s;)l+=s.offsetLeft,u+=s.offsetTop,s=s.offsetParent;return{x:l,y:u}};if(this.dragStartElement!=null&&e.target!==this.dragStartElement){var i=n(this.dragStartElement),a=n(e.target);r.offsetX-=i.x-a.x,r.offsetY-=i.y-a.y}return r},t.prototype.buildEvent=function(e){var r=e.type,n=e.event,i=e.clientX,a=e.clientY,s=e.offsetX,l=e.offsetY,u=e.pageX,c=e.pageY;if(!Ot(s)||!Ot(l)){var d=this.element.getBoundingClientRect();s=i-d.left,l=a-d.top}if(!Ot(u)||!Ot(c)){var h=this.rootElement.getBoundingClientRect();u=i-h.left,c=a-h.top}var f={type:r,offsetX:s,offsetY:l,pageX:u,pageY:c,sourceEvent:n,consumed:!1,consume:function(){return f.consumed=!0}};return f},t.interactionDocuments=[],t.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0},t}(Ss),hf=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a_=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},s_=function(){function o(t,e){var r=this;this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=t;var n=e.addListener("hover",function(i){return r.checkExclusiveRects(i)});this.destroyFns.push(function(){return e.removeListener(n)})}return o.prototype.updateTooltip=function(t,e,r){var n;r==null&&(r=(n=this.states[t])===null||n===void 0?void 0:n.content),this.states[t]={content:r,meta:e},this.applyStates()},o.prototype.updateExclusiveRect=function(t,e){e?this.exclusiveAreas[t]=e:delete this.exclusiveAreas[t]},o.prototype.removeTooltip=function(t){delete this.states[t],this.applyStates()},o.prototype.getTooltipMeta=function(t){var e;return(e=this.states[t])===null||e===void 0?void 0:e.meta},o.prototype.destroy=function(){var t,e;try{for(var r=hf(this.destroyFns),n=r.next();!n.done;n=r.next()){var i=n.value;i()}}catch(a){t={error:a}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},o.prototype.checkExclusiveRects=function(t){var e,r,n;try{for(var i=hf(Object.entries(this.exclusiveAreas)),a=i.next();!a.done;a=i.next()){var s=a_(a.value,2),l=s[0],u=s[1];if(u.containsPoint(t.offsetX,t.offsetY)){n=l;break}}}catch(c){e={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}n!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=n,this.applyStates())},o.prototype.applyStates=function(){var t=this,e,r=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states),n=void 0,i=void 0;if(r.reverse(),r.slice(0,1).forEach(function(s){var l,u=(l=t.states[s])!==null&&l!==void 0?l:{},c=u.content,d=u.meta;n=c,i=d}),i===void 0||n===void 0){this.appliedState=void 0,this.tooltip.toggle(!1);return}if(((e=this.appliedState)===null||e===void 0?void 0:e.content)===n){var a=this.tooltip.isVisible();this.tooltip.show(i,void 0,a)}else this.tooltip.show(i,n);this.appliedState={content:n,meta:i}},o}(),l_=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),qo=function(){return qo=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},qo.apply(this,arguments)},ff=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},pf=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},u_=function(o){l_(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.axes={},e}return t.prototype.updateAxes=function(e){var r=this,n=new Set(Object.keys(this.axes));e.forEach(function(i){var a,s,l;n.delete(i.id),(a=(s=r.axes)[l=i.id])!==null&&a!==void 0||(s[l]=new c_(i))}),n.forEach(function(i){delete r.axes[i]}),this.initialZoom&&(this.updateZoom(this.initialZoom.callerId,this.initialZoom.newZoom),this.initialZoom=void 0)},t.prototype.updateZoom=function(e,r){if(Object.keys(this.axes).length===0){this.initialZoom={callerId:e,newZoom:r};return}Object.values(this.axes).forEach(function(n){n.updateZoom(e,r==null?void 0:r[n.getDirection()])}),this.applyStates()},t.prototype.updateAxisZoom=function(e,r,n){var i;(i=this.axes[r])===null||i===void 0||i.updateZoom(e,n),this.applyStates()},t.prototype.getZoom=function(){var e,r;if(Object.values(this.axes).forEach(function(n){n.getDirection()===ee.X?e=n.getZoom():n.getDirection()===ee.Y&&(r=n.getZoom())}),e||r)return{x:e,y:r}},t.prototype.getAxisZoom=function(e){var r;return(r=this.axes[e])===null||r===void 0?void 0:r.getZoom()},t.prototype.getAxisZooms=function(){var e,r,n={};try{for(var i=ff(Object.entries(this.axes)),a=i.next();!a.done;a=i.next()){var s=pf(a.value,2),l=s[0],u=s[1];n[l]={direction:u.getDirection(),zoom:u.getZoom()}}}catch(c){e={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n},t.prototype.applyStates=function(){var e,r,n=Object.values(this.axes).map(function(f){return f.applyStates()}).some(Boolean);if(n){var i=this.getZoom(),a={};try{for(var s=ff(Object.entries(this.axes)),l=s.next();!l.done;l=s.next()){var u=pf(l.value,2),c=u[0],d=u[1];a[c]=d.getZoom()}}catch(f){e={error:f}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}var h=qo(qo({type:"zoom-change"},i??{}),{axes:a});this.listeners.dispatch("zoom-change",h)}},t}(Ss),c_=function(){function o(t){this.states={},this.currentZoom=void 0,this.axis=t}return o.prototype.getDirection=function(){return this.axis.direction},o.prototype.updateZoom=function(t,e){delete this.states[t],e!=null&&(this.states[t]=qo({},e))},o.prototype.getZoom=function(){return this.currentZoom},o.prototype.applyStates=function(){var t,e,r=this.currentZoom,n=Object.keys(this.states)[Object.keys(this.states).length-1];this.currentZoom=qo({},this.states[n]);var i=(r==null?void 0:r.min)!==((t=this.currentZoom)===null||t===void 0?void 0:t.min)||(r==null?void 0:r.max)!==((e=this.currentZoom)===null||e===void 0?void 0:e.max);return i},o}(),Hl=function(){return Hl=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Hl.apply(this,arguments)};function d_(o){return o!=="layout-complete"}function h_(o){return o==="layout-complete"}var f_=function(){function o(){this.layoutProcessors=new rd,this.listeners=new rd}return o.prototype.addListener=function(t,e){if(d_(t))return this.layoutProcessors.addListener(t,e);if(h_(t))return this.listeners.addListener(t,e);throw new Error("AG Charts - unsupported listener type: "+t)},o.prototype.removeListener=function(t){this.listeners.removeListener(t),this.layoutProcessors.removeListener(t)},o.prototype.dispatchPerformLayout=function(t,e){var r=this.layoutProcessors.reduceDispatch(t,function(n,i){var a=n.shrinkRect;return[Hl(Hl({},i),{shrinkRect:a})]},e);return r??e},o.prototype.dispatchLayoutComplete=function(t){this.listeners.dispatch("layout-complete",t)},o}(),p_=function(){function o(t){this.getSeries=t}return o}(),we;(function(o){o[o.FULL=0]="FULL",o[o.PROCESS_DATA=1]="PROCESS_DATA",o[o.PERFORM_LAYOUT=2]="PERFORM_LAYOUT",o[o.SERIES_UPDATE=3]="SERIES_UPDATE",o[o.TOOLTIP_RECALCULATION=4]="TOOLTIP_RECALCULATION",o[o.SCENE_RENDER=5]="SCENE_RENDER",o[o.NONE=6]="NONE"})(we||(we={}));var v_=function(){function o(t){this.updateCallback=t}return o.prototype.update=function(t,e){t===void 0&&(t=we.FULL);var r=e===void 0?{}:e,n=r.forceNodeDataRefresh,i=n===void 0?!1:n;this.updateCallback(t,{forceNodeDataRefresh:i})},o}(),g_=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},y_=function(){function o(){this.range="tooltip"}return g_([A(rg("tooltip","node"))],o.prototype,"range",void 0),o}(),vf=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},gf=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Ge=function(){function o(t,e,r){r===void 0&&(r=!0),this._nodes=[],this._data=[],this._datumNodeIndices=new Map,this._garbage=[],this._garbageCollection=!0,this._parent=t,this._factory=Object.prototype.isPrototypeOf.call(yu,e)?function(){return new e}:e,this._garbageCollection=r}return o.select=function(t,e,r){return r===void 0&&(r=!0),new o(t,e,r)},o.prototype.each=function(t){return this._nodes.forEach(function(e,r){return t(e,e.datum,r)}),this},o.prototype.update=function(t,e,r){var n,i,a=this,s=this._data,l=this._parent,u=this._factory,c=new Map;if(r?t.forEach(function(y,S){var C=r(y);if(c.set(C,S),!a._datumNodeIndices.has(C)){var w=u(y);w.datum=y,e==null||e(w),l.appendChild(w),a._nodes.push(w),a._datumNodeIndices.set(C,a._nodes.length-1)}}):t.length>s.length?t.slice(s.length).forEach(function(y){var S=u(y);S.datum=y,e==null||e(S),l.appendChild(S),a._nodes.push(S)}):t.length<s.length&&this._nodes.splice(t.length).forEach(function(y){l.removeChild(y)}),this._data=t.slice(0),r){try{for(var d=vf(this._datumNodeIndices),h=d.next();!h.done;h=d.next()){var f=gf(h.value,2),p=f[0],v=f[1],g=c.get(p);g!==void 0?this._nodes[v].datum=t[g]:this._garbage.push(p)}}catch(y){n={error:y}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}this._garbageCollection&&this.cleanup()}else for(var m=0;m<t.length;m++)this._nodes[m].datum=this._data[m];return this},o.prototype.clear=function(){return this.update([]),this},o.prototype.cleanup=function(){var t,e,r=this;if(this._garbage.length!==0){this._garbage.forEach(function(h){var f=r._datumNodeIndices.get(h);if(f!==void 0){var p=r._nodes[f];delete r._nodes[f],r._datumNodeIndices.delete(h),p&&r._parent.removeChild(p)}});var n=0,i=this._datumNodeIndices.entries(),a=new Map;try{for(var s=vf(i),l=s.next();!l.done;l=s.next()){var u=gf(l.value,2),c=u[0],d=u[1];a.set(d,c)}}catch(h){t={error:h}}finally{try{l&&!l.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}this._nodes=this._nodes.filter(function(h,f){if(h===void 0)return!1;var p=a.get(f);return r._datumNodeIndices.set(p,n),n++,!0}),this._garbage=[]}},o.selectAll=function(t,e){var r=[],n=function(i){e(i)&&r.push(i),i.children.forEach(n)};return n(t),r},o.selectByClass=function(t,e){return o.selectAll(t,function(r){return r instanceof e})},o.selectByTag=function(t,e){return o.selectAll(t,function(r){return r.tag===e})},o.prototype.select=function(t){return o.selectAll(this._parent,t)},o.prototype.selectByClass=function(t){return this.select(function(e){return e instanceof t})},o.prototype.selectByTag=function(t){return this.select(function(e){return e.tag===t})},o.prototype.nodes=function(){return this._nodes},o}();function m_(o,t){var e=-t/o;return o!==0&&e>=0&&e<=1?[e]:[]}function S_(o,t,e){if(o===0)return m_(t,e);var r=t*t-4*o*e,n=[];if(r===0){var i=-t/(2*o);i>=0&&i<=1&&n.push(i)}else if(r>0){var a=Math.sqrt(r),s=(-t-a)/(2*o),l=(-t+a)/(2*o);s>=0&&s<=1&&n.push(s),l>=0&&l<=1&&n.push(l)}return n}function C_(o,t,e,r){if(o===0)return S_(t,e,r);var n=t/o,i=e/o,a=r/o,s=(3*i-n*n)/9,l=(9*n*i-27*a-2*n*n*n)/54,u=s*s*s+l*l,c=1/3,d=[];if(u>=0){var h=Math.sqrt(u),f=Math.sign(l+h)*Math.pow(Math.abs(l+h),c),p=Math.sign(l-h)*Math.pow(Math.abs(l-h),c),v=Math.abs(Math.sqrt(3)*(f-p)/2),g=-c*n+(f+p);if(g>=0&&g<=1&&d.push(g),v===0){var m=-c*n-(f+p)/2;m>=0&&m<=1&&d.push(m)}}else{var y=Math.acos(l/Math.sqrt(-s*s*s)),S=c*n,C=2*Math.sqrt(-s),w=C*Math.cos(c*y)-S,x=C*Math.cos(c*(y+2*Math.PI))-S,b=C*Math.cos(c*(y+4*Math.PI))-S;w>=0&&w<=1&&d.push(w),x>=0&&x<=1&&d.push(x),b>=0&&b<=1&&d.push(b)}return d}var x_=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function Ja(o,t,e,r,n,i,a,s){var l=(e-o)*(s-i)-(r-t)*(a-n);if(l===0)return null;var u=((a-n)*(t-i)-(o-n)*(s-i))/l,c=((e-o)*(t-i)-(r-t)*(o-n))/l;return u>=0&&u<=1&&c>=0&&c<=1?{x:o+u*(e-o),y:t+u*(r-t)}:null}function w_(o,t,e,r,n,i,a,s,l,u,c,d){var h,f,p=[],v=u-d,g=c-l,m=l*(d-u)-u*(c-l),y=yf(o,e,n,a),S=yf(t,r,i,s),C=v*y[0]+g*S[0],w=v*y[1]+g*S[1],x=v*y[2]+g*S[2],b=v*y[3]+g*S[3]+m,_=C_(C,w,x,b);try{for(var T=x_(_),O=T.next();!O.done;O=T.next()){var P=O.value,M=P*P,I=P*M,R=y[0]*I+y[1]*M+y[2]*P+y[3],L=S[0]*I+S[1]*M+S[2]*P+S[3],F=void 0;l!==c?F=(R-l)/(c-l):F=(L-u)/(d-u),F>=0&&F<=1&&p.push({x:R,y:L})}}catch(k){h={error:k}}finally{try{O&&!O.done&&(f=T.return)&&f.call(T)}finally{if(h)throw h.error}}return p}function yf(o,t,e,r){return[-o+3*t-3*e+r,3*o-6*t+3*e,-3*o+3*t,o]}function mg(o,t,e,r,n,i,a,s,l,u){var c=(u-s)/(l-a),d=s-c*a,h=Math.pow(c,2)+1,f=2*(c*(d-t)-o),p=Math.pow(o,2)+Math.pow(d-t,2)-Math.pow(e,2),v=Math.pow(f,2)-4*h*p;if(v<0)return[];var g=(-f+Math.sqrt(v))/2/h,m=(-f-Math.sqrt(v))/2/h,y=[];return[g,m].forEach(function(S){var C=S>=Math.min(a,l)&&S<=Math.max(a,l);if(C){var w=c*S,x=Rt(i?n:r),b=Rt(i?r:n),_=Rt(Math.atan2(w,S));b<=x&&(b+=2*Math.PI),_<x&&(_+=2*Math.PI),_>=x&&_<=b&&y.push({x:S,y:w})}}),y}var b_=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},dt;(function(o){o[o.Move=0]="Move",o[o.Line=1]="Line",o[o.Arc=2]="Arc",o[o.Curve=3]="Curve",o[o.ClosePath=4]="ClosePath"})(dt||(dt={}));var nd=function(){function o(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}return o.prototype.isDirty=function(){if(this._closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length)return!0;for(var t=0;t<this.commands.length;t++)if(this.commands[t]!==this.previousCommands[t])return!0;for(var t=0;t<this.params.length;t++)if(this.params[t]!==this.previousParams[t])return!0;return!1},o.prototype.draw=function(t){var e,r,n=this.commands,i=this.params,a=0;t.beginPath();try{for(var s=b_(n),l=s.next();!l.done;l=s.next()){var u=l.value;switch(u){case dt.Move:t.moveTo(i[a++],i[a++]);break;case dt.Line:t.lineTo(i[a++],i[a++]);break;case dt.Curve:t.bezierCurveTo(i[a++],i[a++],i[a++],i[a++],i[a++],i[a++]);break;case dt.Arc:t.arc(i[a++],i[a++],i[a++],i[a++],i[a++],i[a++]===1);break;case dt.ClosePath:t.closePath();break}}}catch(c){e={error:c}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}n.length===0&&t.closePath()},o.prototype.moveTo=function(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push(dt.Move),this.params.push(t,e)},o.prototype.lineTo=function(t,e){this.xy?(this.commands.push(dt.Line),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)},o.prototype.rect=function(t,e,r,n){this.moveTo(t,e),this.lineTo(t+r,e),this.lineTo(t+r,e+n),this.lineTo(t,e+n),this.closePath()},o.prototype.arc=function(t,e,r,n,i,a){a===void 0&&(a=!1);var s=t+r*Math.cos(i),l=e+r*Math.sin(i);this.xy?(this.xy[0]=s,this.xy[1]=l):this.xy=[s,l],this.commands.push(dt.Arc),this.params.push(t,e,r,n,i,a?1:0)},o.prototype.cubicCurveTo=function(t,e,r,n,i,a){this.xy||this.moveTo(t,e),this.commands.push(dt.Curve),this.params.push(t,e,r,n,i,a),this.xy&&(this.xy[0]=i,this.xy[1]=a)},Object.defineProperty(o.prototype,"closedPath",{get:function(){return this._closedPath},enumerable:!1,configurable:!0}),o.prototype.closePath=function(){this.xy&&(this.xy=void 0,this.commands.push(dt.ClosePath),this._closedPath=!0)},o.prototype.clear=function(t){var e=t===void 0?{trackChanges:!1}:t,r=e.trackChanges;r?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1},o.prototype.isPointInPath=function(t,e){for(var r=this.commands,n=this.params,i=r.length,a=-1e4,s=-1e4,l=NaN,u=NaN,c=0,d=0,h=0,f=0,p=0;f<i;f++)switch(r[f]){case dt.Move:isNaN(l)||Ja(l,u,c,d,a,s,t,e)&&h++,c=n[p++],l=c,d=n[p++],u=d;break;case dt.Line:Ja(c,d,n[p++],n[p++],a,s,t,e)&&h++,c=n[p-2],d=n[p-1];break;case dt.Curve:h+=w_(c,d,n[p++],n[p++],n[p++],n[p++],n[p++],n[p++],a,s,t,e).length,c=n[p-2],d=n[p-1];break;case dt.Arc:h+=mg(n[p++],n[p++],n[p++],n[p++],n[p++],!!n[p++],a,s,t,e).length,c=n[p-2],d=n[p-1];break;case dt.ClosePath:isNaN(l)||Ja(l,u,c,d,a,s,t,e)&&h++;break}return h%2===1},o}(),__=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mf=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i};function Le(o){var t=o??{},e=t.redraw,r=e===void 0?Z.MAJOR:e,n=t.changeCb,i=t.convertor;return ie({redraw:r,type:"path",convertor:i,changeCb:n})}var It=function(o){__(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.path=new nd,e._dirtyPath=!0,e}return Object.defineProperty(t.prototype,"dirtyPath",{get:function(){return this._dirtyPath},set:function(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&this.markDirty(this,Z.MAJOR))},enumerable:!1,configurable:!0}),t.prototype.checkPathDirty=function(){var e,r;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||((r=(e=this.fillShadow)===null||e===void 0?void 0:e.isDirty())!==null&&r!==void 0?r:!1))},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r);return this.path.closedPath&&this.path.isPointInPath(n.x,n.y)},t.prototype.isDirtyPath=function(){return!1},t.prototype.updatePath=function(){},t.prototype.render=function(e){var r,n,i=e.ctx,a=e.forceRender,s=e.stats;if(this.dirty===Z.NONE&&!a){s&&(s.nodesSkipped+=this.nodeCount.count);return}if(this.computeTransformMatrix(),this.matrix.toContext(i),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.clipPath){if(i.save(),this.clipMode==="normal"&&(this.clipPath.draw(i),i.clip()),this.path.draw(i),this.fillStroke(i),this.clipMode==="punch-out"){this.clipPath.draw(i),i.clip();var l=(r=this.computeBBox())!==null&&r!==void 0?r:{},u=l.x,c=u===void 0?-1e4:u,d=l.y,h=d===void 0?-1e4:d,f=l.width,p=f===void 0?2e4:f,v=l.height,g=v===void 0?2e4:v;i.clearRect(c,h,p,g)}i.restore()}else this.path.draw(i),this.fillStroke(i);(n=this.fillShadow)===null||n===void 0||n.markClean(),o.prototype.render.call(this,e)},t.className="Path",mf([Le()],t.prototype,"clipPath",void 0),mf([Le()],t.prototype,"clipMode",void 0),t}(Wr),O_=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),sc=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},E_=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Wn=function(o){O_(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.x=0,e.y=0,e.size=12,e}return t.prototype.computeBBox=function(){var e=this,r=e.x,n=e.y,i=e.size,a=i/2;return new Ee(r-a,n-a,i,i)},t.prototype.applyPath=function(e,r){var n,i,a=this.path,s=this,l=s.x,u=s.y;a.clear();try{for(var c=E_(r),d=c.next();!d.done;d=c.next()){var h=d.value,f=h.x,p=h.y,v=h.t;l+=f*e,u+=p*e,v==="move"?a.moveTo(l,u):a.lineTo(l,u)}}catch(g){n={error:g}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}a.closePath()},sc([Le()],t.prototype,"x",void 0),sc([Le()],t.prototype,"y",void 0),sc([Le({convertor:Math.abs})],t.prototype,"size",void 0),t}(It),T_=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qa=function(o){T_(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.updatePath=function(){var e=this,r=e.path,n=e.x,i=e.y,a=this.size/2;r.clear(),r.moveTo(this.align(n-a),this.align(i-a)),r.lineTo(this.align(n+a),this.align(i-a)),r.lineTo(this.align(n+a),this.align(i+a)),r.lineTo(this.align(n-a),this.align(i+a)),r.closePath()},t.className="Square",t}(Wn),P_=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),hr=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Sf=function(o){P_(t,o);function t(){var e=o.call(this,{name:"markerLabelGroup"})||this;e.label=new Me,e._marker=new Qa,e._markerSize=15,e._spacing=8;var r=e.label;return r.textBaseline="middle",r.fontSize=12,r.fontFamily="Verdana, sans-serif",r.fill="black",r.y=We.has.textMetrics?1:0,e.append([e.marker,r]),e.update(),e}return Object.defineProperty(t.prototype,"marker",{get:function(){return this._marker},set:function(e){this._marker!==e&&(this.removeChild(this._marker),this._marker=e,this.appendChild(e),this.update())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"markerSize",{get:function(){return this._markerSize},set:function(e){this._markerSize!==e&&(this._markerSize=e,this.update())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){return this._spacing},set:function(e){this._spacing!==e&&(this._spacing=e,this.update())},enumerable:!1,configurable:!0}),t.prototype.update=function(){var e=this.marker,r=this.markerSize;e.size=r,this.label.x=r/2+this.spacing},t.prototype.render=function(e){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,o.prototype.render.call(this,e)},t.className="MarkerLabel",hr([et("label")],t.prototype,"text",void 0),hr([et("label")],t.prototype,"fontStyle",void 0),hr([et("label")],t.prototype,"fontWeight",void 0),hr([et("label")],t.prototype,"fontSize",void 0),hr([et("label")],t.prototype,"fontFamily",void 0),hr([et("label","fill")],t.prototype,"color",void 0),hr([et("marker","fill")],t.prototype,"markerFill",void 0),hr([et("marker","stroke")],t.prototype,"markerStroke",void 0),hr([et("marker","strokeWidth")],t.prototype,"markerStrokeWidth",void 0),hr([et("marker","fillOpacity")],t.prototype,"markerFillOpacity",void 0),hr([et("marker","strokeOpacity")],t.prototype,"markerStrokeOpacity",void 0),t}(le),A_=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),us=function(o){A_(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.updatePath=function(){var e=this,r=e.x,n=e.y,i=e.path,a=e.size,s=a/2;i.clear(),i.arc(r,n,s,0,Math.PI*2),i.closePath()},t.className="Circle",t}(Wn),D_=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),M_=function(o){D_(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.updatePath=function(){var e=this.size/4.2;o.prototype.applyPath.call(this,e,t.moves)},t.className="Cross",t.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}],t}(Wn),R_=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Sg=function(o){R_(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.updatePath=function(){var e=this.size/2;o.prototype.applyPath.call(this,e,t.moves)},t.className="Diamond",t.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}],t}(Wn),I_=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),L_=function(o){I_(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.rad=function(e){return e/180*Math.PI},t.prototype.updatePath=function(){var e=this,r=e.x,n=e.path,i=e.size,a=e.rad,s=i/4,l=this.y+s/2;n.clear(),n.arc(r-s,l-s,s,a(130),a(330)),n.arc(r+s,l-s,s,a(220),a(50)),n.lineTo(r,l+s),n.closePath()},t.className="Heart",t}(Wn),F_=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),k_=function(o){F_(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.updatePath=function(){var e=this.size/3;o.prototype.applyPath.call(this,e,t.moves)},t.className="Plus",t.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}],t}(Wn),N_=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),es=function(o){N_(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.updatePath=function(){var e=this.size*1.1;o.prototype.applyPath.call(this,e,t.moves)},t.className="Triangle",t.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}],t}(Wn);function na(o){if(o===void 0&&(o=Qa),typeof o=="string")switch(o){case"circle":return us;case"cross":return M_;case"diamond":return Sg;case"heart":return L_;case"plus":return k_;case"triangle":return es;default:return Qa}return typeof o=="function"?o:Qa}var G_=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function V_(o){for(var t=o.orientation,e=o.bboxes,r=o.maxHeight,n=o.maxWidth,i=o.itemPaddingY,a=i===void 0?0:i,s=o.itemPaddingX,l=s===void 0?0:s,u=o.forceResult,c=u===void 0?!1:u,d=t==="horizontal",h={max:d?n:r,fn:d?function(y){return y.width}:function(y){return y.height},padding:d?l:a},f={max:d?r:n,fn:d?function(y){return y.height}:function(y){return y.width},padding:d?a:l},p=0,v=[];p<e.length;){var g=e.slice(p),m=j_(g,p,h,f,c);if(!m)return;p+=m.processedBBoxCount,v.push(m.pageIndices)}return H_(v,t,e,a,l)}function j_(o,t,e,r,n){var i=1,a=W_(o,e);if(a<i){if(!n)return;a=i}for(var s=a;s>=i;s--){var l=B_(o,t,s,e,r,n);if(l==null&&s<=i)return;if(l!=null){if(typeof l=="number"){if(l<=i)return;s=l<s&&l>i?l:s;continue}var u=l.length*l[0].length;return{processedBBoxCount:u,pageIndices:l}}}}function B_(o,t,e,r,n,i){for(var a,s=[],l=0,u=0,c=[],d=[],h=0;h<o.length;h++){var f=(h+e)%e;f===0&&(l+=u,u=0,c.length>0&&s.push(c),c=[]);var p=r.fn(o[h])+r.padding;d[f]=Math.max((a=d[f])!==null&&a!==void 0?a:0,p),u=Math.max(u,n.fn(o[h])+n.padding);var v=l+u,g=!i||s.length>0;if(v>n.max&&g){c=[];break}var m=d.reduce(function(y,S){return y+S},0);if(m>r.max&&!i)return d.length<e?d.length:void 0;c.push(h+t)}return c.length>0&&s.push(c),s.length>0?s:void 0}function H_(o,t,e,r,n){var i=0,a=0,s=o.map(function(l){t==="horizontal"&&(l=z_(l));var u=0,c=l.map(function(f){var p=f.map(function(m){return u=Math.max(m,u),e[m]}),v=0,g=0;return p.forEach(function(m){v+=m.height+r,g=Math.max(g,m.width+n)}),{indices:f,bboxes:p,columnHeight:v,columnWidth:g}}),d=0,h=0;return c.forEach(function(f){d+=f.columnWidth,h=Math.max(h,f.columnHeight)}),i=Math.max(d,i),a=Math.max(h,a),{columns:c,startIndex:l[0][0],endIndex:u,pageWidth:d,pageHeight:h}});return{pages:s,maxPageWidth:i,maxPageHeight:a}}function z_(o){var t,e,r=[];try{for(var n=G_(o[0]),i=n.next();!i.done;i=n.next()){var a=i.value;r.push([])}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return o.forEach(function(s,l){s.forEach(function(u,c){r[c][l]=u})}),r}function W_(o,t){for(var e=o.length,r=0,n=0;n<e;n++)if(r+=t.fn(o[n])+t.padding,r>t.max){var i=e/n;return i<2?Math.ceil(e/2):n}return e}var Wt=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},U_=function(){function o(){this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}return Wt([A(Kt)],o.prototype,"color",void 0),Wt([A(Mi)],o.prototype,"fontStyle",void 0),Wt([A(Ri)],o.prototype,"fontWeight",void 0),Wt([A(J(0))],o.prototype,"fontSize",void 0),Wt([A(St)],o.prototype,"fontFamily",void 0),o}(),lc=function(){function o(){this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}return Wt([A(J(0))],o.prototype,"size",void 0),Wt([A(Fe)],o.prototype,"fill",void 0),Wt([A(Pe(0,1))],o.prototype,"fillOpacity",void 0),Wt([A(Fe)],o.prototype,"stroke",void 0),Wt([A(J(0))],o.prototype,"strokeWidth",void 0),Wt([A(J(0,1))],o.prototype,"strokeOpacity",void 0),o}(),K_=function(){function o(){this.size=15,this._shape=es,this.padding=8}return Object.defineProperty(o.prototype,"shape",{get:function(){return this._shape},set:function(t){var e;this._shape=t,(e=this.parent)===null||e===void 0||e.onMarkerShapeChange()},enumerable:!1,configurable:!0}),Wt([A(J(0))],o.prototype,"size",void 0),Wt([A(J(0))],o.prototype,"padding",void 0),o}(),$_=function(){function o(t,e,r,n){var i=this;this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.interactionManager=r,this.cursorManager=n,this.id=gn(this),this.group=new le({name:"pagination"}),this.labelNode=new Me,this.marker=new K_,this.activeStyle=new lc,this.inactiveStyle=new lc,this.highlightStyle=new lc,this.label=new U_,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new es,this._previousButton=new es;var a=this.labelNode;a.textBaseline="middle",a.fontSize=12,a.fontFamily="Verdana, sans-serif",a.fill="black",a.y=We.has.textMetrics?1:0,this.group.append([this.nextButton,this.previousButton,a]),this.interactionManager.addListener("click",function(s){return i.onPaginationClick(s)}),this.interactionManager.addListener("hover",function(s){return i.onPaginationMouseMove(s)}),this.marker.parent=this,this.update(),this.updateMarkers()}return Object.defineProperty(o.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),o.prototype.updateGroupVisibility=function(){this.group.visible=this.enabled&&this.visible},Object.defineProperty(o.prototype,"orientation",{get:function(){return this._orientation},set:function(t){switch(this._orientation=t,t){case"horizontal":{this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break}case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"nextButton",{get:function(){return this._nextButton},set:function(t){this._nextButton!==t&&(this.group.removeChild(this._nextButton),this._nextButton=t,this.group.appendChild(t))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"previousButton",{get:function(){return this._previousButton},set:function(t){this._previousButton!==t&&(this.group.removeChild(this._previousButton),this._previousButton=t,this.group.appendChild(t))},enumerable:!1,configurable:!0}),o.prototype.update=function(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()},o.prototype.updatePositions=function(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()},o.prototype.updateLabelPosition=function(){var t=this.marker,e=t.size,r=t.padding;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+r},o.prototype.updateNextButtonPosition=function(){var t=this.labelNode.computeBBox();this.nextButton.translationX=t.x+t.width+this.marker.size/2+this.marker.padding},o.prototype.updateLabel=function(){var t=this,e=t.currentPage,r=t.totalPages,n=t.labelNode,i=t.label,a=i.color,s=i.fontStyle,l=i.fontWeight,u=i.fontSize,c=i.fontFamily;n.text=e+1+" / "+r,n.fill=a,n.fontStyle=s,n.fontWeight=l,n.fontSize=u,n.fontFamily=c},o.prototype.updateMarkers=function(){var t=this,e=t.nextButton,r=t.previousButton,n=t.nextButtonDisabled,i=t.previousButtonDisabled,a=t.activeStyle,s=t.inactiveStyle,l=t.highlightStyle,u=t.highlightActive,c=function(d,h){return h?s:d===u?l:a};this.updateMarker(e,c("next",n)),this.updateMarker(r,c("previous",i))},o.prototype.updateMarker=function(t,e){var r,n=this.marker.size;t.size=n,t.fill=e.fill,t.fillOpacity=(r=e.fillOpacity)!==null&&r!==void 0?r:1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity},o.prototype.enableOrDisableButtons=function(){var t=this,e=t.currentPage,r=t.totalPages,n=r===0,i=e===r-1,a=e===0;this.nextButtonDisabled=i||n,this.previousButtonDisabled=a||n},o.prototype.nextButtonContainsPoint=function(t,e){return!this.nextButtonDisabled&&this.nextButton.containsPoint(t,e)},o.prototype.previousButtonContainsPoint=function(t,e){return!this.previousButtonDisabled&&this.previousButton.containsPoint(t,e)},o.prototype.onPaginationClick=function(t){var e=t.offsetX,r=t.offsetY;this.nextButtonContainsPoint(e,r)?(this.incrementPage(),this.onPaginationChanged(),t.consume()):this.previousButtonContainsPoint(e,r)&&(this.decrementPage(),this.onPaginationChanged(),t.consume())},o.prototype.onPaginationMouseMove=function(t){var e=t.offsetX,r=t.offsetY;this.nextButtonContainsPoint(e,r)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(e,r)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(we.SCENE_RENDER)},o.prototype.onPaginationChanged=function(){this.pageUpdateCallback(this.currentPage)},o.prototype.incrementPage=function(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)},o.prototype.decrementPage=function(){this.currentPage=Math.max(this.currentPage-1,0)},o.prototype.onMarkerShapeChange=function(){var t=na(this.marker.shape||es);this.previousButton=new t,this.nextButton=new t,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(we.SCENE_RENDER)},o.prototype.attachPagination=function(t){t.append(this.group)},o.prototype.computeBBox=function(){return this.group.computeBBox()},o.className="Pagination",o}(),ze=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},qn=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Ki=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Cf=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},X_=["horizontal","vertical"],Y_=ue(function(o,t){return je(o,t,function(e){return X_.includes(e)})},"expecting an orientation keyword such as 'horizontal' or 'vertical'"),q_=function(){function o(){this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}return ze([A(Pe(0))],o.prototype,"maxLength",void 0),ze([A(Kt)],o.prototype,"color",void 0),ze([A(Mi)],o.prototype,"fontStyle",void 0),ze([A(Ri)],o.prototype,"fontWeight",void 0),ze([A(J(0))],o.prototype,"fontSize",void 0),ze([A(St)],o.prototype,"fontFamily",void 0),ze([A(Be)],o.prototype,"formatter",void 0),o}(),Z_=function(){function o(){this.size=15,this._shape=void 0,this.padding=8,this.strokeWidth=1}return Object.defineProperty(o.prototype,"shape",{get:function(){return this._shape},set:function(t){var e;this._shape=t,(e=this.parent)===null||e===void 0||e.onMarkerShapeChange()},enumerable:!1,configurable:!0}),ze([A(J(0))],o.prototype,"size",void 0),ze([A(J(0))],o.prototype,"padding",void 0),ze([A(J(0))],o.prototype,"strokeWidth",void 0),o}(),J_=function(){function o(){this.marker=new Z_,this.label=new q_,this.maxWidth=void 0,this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0}return ze([A(Pe(0))],o.prototype,"maxWidth",void 0),ze([A(J(0))],o.prototype,"paddingX",void 0),ze([A(J(0))],o.prototype,"paddingY",void 0),ze([A(Re)],o.prototype,"toggleSeriesVisible",void 0),o}(),Q_=function(){function o(){this.legendItemClick=void 0,this.legendItemDoubleClick=void 0}return ze([A(Be)],o.prototype,"legendItemClick",void 0),o}(),eO=function(){function o(t){var e,r=this;this.ctx=t,this.id=gn(this),this.group=new le({name:"legend",layer:!0,zIndex:Xe.LEGEND_ZINDEX}),this.itemSelection=Ge.select(this.group,Sf),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.item=new J_,this.listeners=new Q_,this.truncatedItems=new Set,this._data=[],this._enabled=!0,this.position="bottom",this.maxWidth=void 0,this.maxHeight=void 0,this.reverseOrder=void 0,this.destroyFns=[],this.spacing=20,this.characterWidths=new Map,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new $_(function(a){return t.updateService.update(a)},function(a){return r.updatePageNumber(a)},t.interactionManager,t.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;var n=[t.interactionManager.addListener("click",function(a){return r.checkLegendClick(a)}),t.interactionManager.addListener("dblclick",function(a){return r.checkLegendDoubleClick(a)}),t.interactionManager.addListener("hover",function(a){return r.handleLegendMouseMove(a)})],i=[t.layoutService.addListener("start-layout",function(a){return r.positionLegend(a.shrinkRect)})];(e=this.destroyFns).push.apply(e,Ki(Ki(Ki([],qn(n.map(function(a){return function(){return t.interactionManager.removeListener(a)}}))),qn(i.map(function(a){return function(){return t.layoutService.removeListener(a)}}))),[function(){return r.detachLegend()}]))}return Object.defineProperty(o.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),o.prototype.getOrientation=function(){if(this.orientation!==void 0)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}},o.prototype.destroy=function(){this.destroyFns.forEach(function(t){return t()})},o.prototype.onMarkerShapeChange=function(){this.itemSelection.clear(),this.group.markDirty(this.group,Z.MINOR)},o.prototype.getCharacterWidths=function(t){var e=this.characterWidths;if(e.has(t))return e.get(t);var r={"...":We.getTextSize("...",t).width};return e.set(t,r),r},Object.defineProperty(o.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),o.prototype.updateGroupVisibility=function(){this.group.visible=this.enabled&&this.visible&&this.data.length>0},o.prototype.attachLegend=function(t){t.append(this.group)},o.prototype.detachLegend=function(){var t;(t=this.group.parent)===null||t===void 0||t.removeChild(this.group)},o.prototype.getItemLabel=function(t){var e=this.ctx.callbackCache,r=this.item.label.formatter;return r?e.call(r,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text},o.prototype.performLayout=function(t,e){var r=this,n=this.item,i=n.paddingX,a=n.paddingY,s=n.label,l=n.maxWidth,u=n.marker,c=u.size,d=u.padding,h=u.shape,f=n.label,p=f.maxLength,v=p===void 0?1/0:p,g=f.fontStyle,m=f.fontWeight,y=f.fontSize,S=f.fontFamily,C=Ki([],qn(this.data));this.reverseOrder&&C.reverse(),this.itemSelection.update(C);var w=[],x=Ei(s),b=.8,_=l??t*b,T=c+d+i;if(this.itemSelection.each(function(N,G){var $,j=na(h??G.marker.shape);N.marker&&N.marker instanceof j||(N.marker=new j),N.markerSize=c,N.spacing=d,N.fontStyle=g,N.fontWeight=m,N.fontSize=y,N.fontFamily=S;var z=($=G.itemId)!==null&&$!==void 0?$:G.id,W=r.getItemLabel(G),Y=(W??"<unknown>").replace(/\r?\n/g," ");N.text=r.truncate(Y,v,_,T,x,z),w.push(N.computeBBox())}),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return!1;var O=this.size,P=this.oldSize;O[0]=t,O[1]=e,(O[0]!==P[0]||O[1]!==P[1])&&(P[0]=O[0],P[1]=O[1]);var M=this.updatePagination(w,t,e),I=M.pages,R=M.maxPageHeight,L=M.maxPageWidth;this.pages=I,this.maxPageSize=[L-i,R-a];var F=this.pagination.currentPage,k=this.pages[F];if(this.pages.length<1||!k){this.visible=!1;return}this.visible=!0,this.updatePositions(F),this.update()},o.prototype.truncate=function(t,e,r,n,i,a){var s,l,u="...",c=t.split(""),d=!1;t.length>e&&(t=""+t.substring(0,e),d=!0);var h=Math.floor(n+We.getTextSize(t,i).width);if(h>r){var f="",p=this.getCharacterWidths(i),v=n+p[u];try{for(var g=Cf(c),m=g.next();!m.done;m=g.next()){var y=m.value;if(p[y]||(p[y]=We.getTextSize(y,i).width),v+=p[y],v>r)break;f+=y}}catch(S){s={error:S}}finally{try{m&&!m.done&&(l=g.return)&&l.call(g)}finally{if(s)throw s.error}}t=f,d=!0}return d?(t+=u,this.truncatedItems.add(a)):this.truncatedItems.delete(a),t},o.prototype.updatePagination=function(t,e,r){var n=this.getOrientation(),i=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=n,this.pagination.translationX=0,this.pagination.translationY=0;var a=this.calculatePagination(t,e,r),s=a.pages,l=a.maxPageHeight,u=a.maxPageWidth,c=a.paginationBBox,d=a.paginationVertical,h=s.findIndex(function(w){return w.endIndex>=i});this.pagination.currentPage=Math.min(Math.max(h,0),s.length-1);var f=this.item,p=f.paddingX,v=f.paddingY,g=8,m=u-p,y=l-v,S=0,C=-c.y-this.item.marker.size/2;return d?C+=y+g:(S+=-c.x+m+g,C+=(y-c.height)/2),this.pagination.translationX=S,this.pagination.translationY=C,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:l,maxPageWidth:u,pages:s}},o.prototype.calculatePagination=function(t,e,r){var n,i,a,s=this.item,l=s.paddingX,u=s.paddingY,c=this.getOrientation(),d=["left","right"].includes(this.position),h=this.pagination.computeBBox(),f=new Ee(0,0,0,0),p=[],v=0,g=0,m=0,y=function(_){var T=_.width,O=_.height;return T===h.width&&O===h.height},S=this.maxWidth!==void 0||this.maxHeight!==void 0;do{if(m++>10){re.warn("unable to find stable legend layout.");break}h=f;var C=e-(d?0:h.width),w=r-(d?h.height:0),x=V_({orientation:c,bboxes:t,maxHeight:w,maxWidth:C,itemPaddingY:u,itemPaddingX:l,forceResult:S});p=(n=x==null?void 0:x.pages)!==null&&n!==void 0?n:[],v=(i=x==null?void 0:x.maxPageWidth)!==null&&i!==void 0?i:0,g=(a=x==null?void 0:x.maxPageHeight)!==null&&a!==void 0?a:0;var b=p.length;if(this.pagination.visible=b>1,this.pagination.totalPages=b,this.pagination.update(),f=this.pagination.computeBBox(),!this.pagination.visible)break}while(!y(f));return{maxPageWidth:v,maxPageHeight:g,pages:p,paginationBBox:h,paginationVertical:d}},o.prototype.updatePositions=function(t){t===void 0&&(t=0);var e=this,r=e.item.paddingY,n=e.itemSelection,i=e.pages;if(!(i.length<1||!i[t])){var a=i[t],s=a.columns,l=a.startIndex,u=a.endIndex,c=0,d=0,h=s.length,f=s[0].indices.length,p=this.getOrientation()==="horizontal",v=s[0].bboxes[0].height+r,g=[];n.each(function(m,y,S){var C,w;if(S<l||S>u){m.visible=!1;return}var x=S-l,b=0,_=0;p?(b=x%h,_=Math.floor(x/h)):(b=Math.floor(x/f),_=x%f),m.visible=!0;var T=s[b];T&&(d=v*_,c=(C=g[_])!==null&&C!==void 0?C:0,g[_]=((w=g[_])!==null&&w!==void 0?w:0)+T.columnWidth,m.translationX=Math.floor(c),m.translationY=Math.floor(d))})}},o.prototype.updatePageNumber=function(t){var e=this.pages,r=e[t],n=r.startIndex,i=r.endIndex;n===0?this.paginationTrackingIndex=0:t===e.length-1?this.paginationTrackingIndex=i:this.paginationTrackingIndex=Math.floor((n+i)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update(we.SCENE_RENDER)},o.prototype.update=function(){var t=this.item,e=t.marker.strokeWidth,r=t.label.color;this.itemSelection.each(function(n,i){var a=i.marker;n.markerFill=a.fill,n.markerStroke=a.stroke,n.markerStrokeWidth=e,n.markerFillOpacity=a.fillOpacity,n.markerStrokeOpacity=a.strokeOpacity,n.opacity=i.enabled?1:.5,n.color=r})},o.prototype.getDatumForPoint=function(t,e){var r,n,i=[],a={dist:1/0,datum:void 0};try{for(var s=Cf(this.group.children),l=s.next();!l.done;l=s.next()){var u=l.value;if(u.visible&&u instanceof Sf){var c=u.computeBBox();if(c.grow(this.item.paddingX/2,"horizontal"),c.grow(this.item.paddingY/2,"vertical"),c.containsPoint(t,e))return u.datum;var d=t-c.x-this.item.paddingX/2,h=e-c.y-this.item.paddingY/2,f=Math.pow(d,2)+Math.pow(h,2),p=d>=0&&h>=0;p&&f<a.dist&&(a.dist=f,a.datum=u.datum),i.push(c)}}}catch(g){r={error:g}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}var v=Ee.merge(i);if(v.containsPoint(t,e))return a.datum},o.prototype.computeBBox=function(){return this.group.computeBBox()},o.prototype.computePagedBBox=function(){var t=this.group.computeBBox();if(this.pages.length<=1)return t;var e=qn(this.maxPageSize,2),r=e[0],n=e[1];return t.height=Math.max(n,t.height),t.width=Math.max(r,t.width),t},o.prototype.checkLegendClick=function(t){var e=this,r=e.listeners.legendItemClick,n=e.ctx,i=n.dataService,a=n.highlightManager,s=e.item.toggleSeriesVisible,l=t.offsetX,u=t.offsetY,c=this.computeBBox(),d=this.group.visible&&c.containsPoint(l,u),h=this.getDatumForPoint(l,u);if(!(!d||!h)){var f=h.id,p=h.itemId,v=h.enabled,g=i.getSeries(),m=g.find(function(S){return S.id===f});if(m){t.consume();var y=v;s&&(y=!v,this.ctx.chartEventManager.legendItemClick(m,p,y,h.legendItemName)),y?a.updateHighlight(this.id,{series:m,itemId:p,datum:void 0}):a.updateHighlight(this.id),this.ctx.updateService.update(we.PROCESS_DATA,{forceNodeDataRefresh:!0}),r==null||r({type:"click",enabled:y,itemId:p,seriesId:m.id})}}},o.prototype.checkLegendDoubleClick=function(t){var e,r=this,n=r.listeners.legendItemDoubleClick,i=r.ctx.dataService,a=r.item.toggleSeriesVisible,s=t.offsetX,l=t.offsetY;if(this.ctx.mode!=="integrated"){var u=this.computeBBox(),c=this.group.visible&&u.containsPoint(s,l),d=this.getDatumForPoint(s,l);if(!(!c||!d)){var h=d.id,f=d.itemId,p=d.seriesId,v=i.getSeries(),g=v.find(function(C){return C.id===h});if(g){if(t.consume(),a){var m=v.reduce(function(C,w){return Ki(Ki([],qn(C)),qn(w.getLegendData().filter(function(x){return x.legendType==="category"})))},[]),y={};m.forEach(function(C){var w,x;(w=y[x=C.seriesId])!==null&&w!==void 0||(y[x]=0),C.enabled&&y[C.seriesId]++});var S=m.find(function(C){return C.itemId===f&&C.seriesId===p});this.ctx.chartEventManager.legendItemDoubleClick(g,f,(e=S==null?void 0:S.enabled)!==null&&e!==void 0?e:!1,y,S==null?void 0:S.legendItemName)}this.ctx.updateService.update(we.PROCESS_DATA,{forceNodeDataRefresh:!0}),n==null||n({type:"dblclick",enabled:!0,itemId:f,seriesId:g.id})}}}},o.prototype.handleLegendMouseMove=function(t){var e,r=this,n=r.enabled,i=r.item.toggleSeriesVisible,a=r.listeners;if(n){var s=this.computeBBox(),l=t.pageX,u=t.pageY,c=t.offsetX,d=t.offsetY,h=this.group.visible&&s.containsPoint(c,d);if(!h){this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),this.ctx.tooltipManager.removeTooltip(this.id);return}t.consume();var f=this.getDatumForPoint(c,d),p=h&&f!==void 0;if(!p){this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id);return}var v=f?this.ctx.dataService.getSeries().find(function(m){return m.id===(f==null?void 0:f.id)}):void 0;if(f&&this.truncatedItems.has((e=f.itemId)!==null&&e!==void 0?e:f.id)){var g=this.getItemLabel(f);this.ctx.tooltipManager.updateTooltip(this.id,{pageX:l,pageY:u,offsetX:c,offsetY:d,event:t,showArrow:!1},Ct({content:g}))}else this.ctx.tooltipManager.removeTooltip(this.id);(i||a.legendItemClick!=null||a.legendItemDoubleClick!=null)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),f!=null&&f.enabled&&v?this.ctx.highlightManager.updateHighlight(this.id,{series:v,itemId:f==null?void 0:f.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}},o.prototype.positionLegend=function(t){var e=this,r=t.clone();if(!this.enabled||!this.data.length)return{shrinkRect:r};var n=qn(this.calculateLegendDimensions(t),2),i=n[0],a=n[1];this.group.translationX=0,this.group.translationY=0,this.performLayout(i,a);var s=this.computePagedBBox(),l=function(){switch(e.position){case"top":return 0;case"bottom":return t.height-s.height;case"left":return 0;case"right":default:return t.width-s.width}};if(this.visible){var u=void 0,c=void 0;switch(this.position){case"top":case"bottom":u=(t.width-s.width)/2,c=l(),r.shrink(s.height,this.position);break;case"left":case"right":default:u=l(),c=(t.height-s.height)/2,r.shrink(s.width,this.position)}this.group.translationX=Math.floor(-s.x+t.x+u),this.group.translationY=Math.floor(-s.y+t.y+c)}if(this.visible&&this.enabled&&this.data.length){var d=this.spacing;r.shrink(d,this.position);var h=s.clone();h.x+=this.group.translationX,h.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,h)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:r}},o.prototype.calculateLegendDimensions=function(t){var e=t.width,r=t.height,n=e/r,i=.5,a=.2,s=.25,l=0,u=0;switch(this.position){case"top":case"bottom":var c=n<1?Math.min(i,a*(1/n)):a;l=this.maxWidth?Math.min(this.maxWidth,e):e,u=this.maxHeight?Math.min(this.maxHeight,r):Math.round(r*c);break;case"left":case"right":default:var d=n>1?Math.min(i,s*n):s;l=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*d),u=this.maxHeight?Math.min(this.maxHeight,r):r}return[l,u]},o.className="Legend",ze([A(Re)],o.prototype,"_enabled",void 0),ze([A(ng)],o.prototype,"position",void 0),ze([A(Pe(0))],o.prototype,"maxWidth",void 0),ze([A(Pe(0))],o.prototype,"maxHeight",void 0),ze([A(Ur)],o.prototype,"reverseOrder",void 0),ze([A(Y_)],o.prototype,"orientation",void 0),ze([A(J(0))],o.prototype,"spacing",void 0),o}(),zl={category:eO};function tO(o,t){if(zl[o])throw new Error("AG Charts - already registered legend type: "+o);zl[o]=t}function rO(o,t){if(zl[o])return new zl[o](t);throw new Error("AG Charts - unknown legend type: "+o)}var nO=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},iO=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},oO=function(){function o(){this.cache=new Map}return o.prototype.call=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n,i=this.cache.get(t),a=function(){try{var s=t.apply(void 0,iO([],nO(e)));return i&&n!=null&&i.set(n,s),s}catch(l){re.warnOnce("User callback errored, ignoring",l);return}};try{n=JSON.stringify(e)}catch{return a()}return i==null&&(i=new Map,this.cache.set(t,i)),i.has(n)?i.get(n):a()},o.prototype.invalidateCache=function(){this.cache=new Map},o}(),Ro=function(){return Ro=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Ro.apply(this,arguments)},xf=function(o,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):n(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},wf=function(o,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},uc=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},bf=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},_f=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},aO=function(){function o(){this.requested=[],this.status="setup"}return o.prototype.request=function(t,e,r){return xf(this,void 0,void 0,function(){var n=this;return wf(this,function(i){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");return[2,new Promise(function(a,s){n.requested.push({id:t,opts:r,data:e,resultCb:a,reject:s})})]})})},o.prototype.execute=function(){return xf(this,void 0,void 0,function(){var t,e,r,n,i,a,s,l,u,c,d,h,f;return wf(this,function(p){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");this.status="executed",o.DEBUG()&&re.debug("DataController.execute() - requested",this.requested),t=this.mergeRequested(),o.DEBUG()&&re.debug("DataController.execute() - merged",t),e=function(v,g,m,y,S){try{var C=new Jw(v),w=C.processData(g);w&&w.partialValidDataCount===0?m.forEach(function(x){return x({dataModel:C,processedData:w})}):w?r.splitResult(C,w,S,m):y.forEach(function(x){return x(new Error("AG Charts - no processed data generated"))})}catch(x){y.forEach(function(b){return b(x)})}},r=this;try{for(n=uc(t),i=n.next();!i.done;i=n.next())a=i.value,s=a.opts,l=a.data,u=a.resultCbs,c=a.rejects,d=a.ids,e(s,l,u,c,d)}catch(v){h={error:v}}finally{try{i&&!i.done&&(f=n.return)&&f.call(n)}finally{if(h)throw h.error}}return[2]})})},o.prototype.mergeRequested=function(){var t,e,r=[],n=function(f){return f.filter(function(p){return p.type==="key"}).map(function(p){return p.property}).join(";")},i=function(f){var p=f.opts,v=f.data;return function(g){return g[0].data===v&&g[0].opts.groupByKeys===p.groupByKeys&&g[0].opts.dataVisible===p.dataVisible&&g[0].opts.groupByFn===p.groupByFn&&n(g[0].opts.props)===n(p.props)}},a=function(f){return function(p){var v;if(p.type!==f.type||p.id!==f.id)return!1;var g=(v=Pi(p,f))!==null&&v!==void 0?v:{};return delete g.scopes,Object.keys(g).length===0}},s=function(f){return Ro(Ro({},f[0]),{props:f.reduce(function(p,v){var g,m,y,S,C,w;try{for(var x=uc(v.props),b=x.next();!b.done;b=x.next()){var _=b.value,T=p.find(a(_));if(T){(S=T.scopes)!==null&&S!==void 0||(T.scopes=[]),(y=T.scopes).push.apply(y,_f(_f([],bf((C=_.scopes)!==null&&C!==void 0?C:[])),bf((w=v.scopes)!==null&&w!==void 0?w:[])));continue}p.push(_)}}catch(O){g={error:O}}finally{try{b&&!b.done&&(m=x.return)&&m.call(x)}finally{if(g)throw g.error}}return p},[])})},l=function(f){return{ids:f.map(function(p){var v=p.id;return v}),resultCbs:f.map(function(p){var v=p.resultCb;return v}),rejects:f.map(function(p){var v=p.reject;return v}),data:f[0].data,opts:s(f.map(function(p){var v=p.opts;return v}))}};try{for(var u=uc(this.requested),c=u.next();!c.done;c=u.next()){var d=c.value,h=r.find(i(d));h?h.push(d):r.push([d])}}catch(f){t={error:f}}finally{try{c&&!c.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}return r.map(l)},o.prototype.splitResult=function(t,e,r,n){for(var i=function(s){var l=r[s],u=n[s];u({dataModel:t,processedData:Ro(Ro({},e),{data:e.data.filter(function(c){var d=c.validScopes;return d==null||d.some(function(h){return h===l})})})})},a=0;a<r.length;a++)i(a)},o.DEBUG=function(){var t;return(t=[!0,"data-model"].includes(mr("agChartsDebug")))!==null&&t!==void 0?t:!1},o}(),cc=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},sO=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},lO=function(){function o(){this.groups={}}return o.prototype.registerSeries=function(t){var e,r,n=t.id,i=t.seriesGrouping,a=t.visible,s=t.type;i&&((e=(r=this.groups)[s])!==null&&e!==void 0||(r[s]={}),this.groups[s][n]={grouping:i,visible:a})},o.prototype.deregisterSeries=function(t){var e=t.id,r=t.type;this.groups[r]&&delete this.groups[r][e],this.groups[r]&&Object.keys(this.groups[r]).length===0&&delete this.groups[r]},o.prototype.getVisiblePeerGroupIndex=function(t){var e,r=t.type,n=t.seriesGrouping;if(!n)return{visibleGroupCount:1,index:0};var i=sO([],cc(Object.entries((e=this.groups[r])!==null&&e!==void 0?e:{}).filter(function(a){var s=cc(a,2);s[0];var l=s[1];return l.visible}).reduce(function(a,s){var l=cc(s,2);l[0];var u=l[1];return u.visible&&a.add(u.grouping.groupIndex),a},new Set).values()));return i.sort(function(a,s){return a-s}),{visibleGroupCount:i.length,index:i.indexOf(n.groupIndex)}},o}(),Of=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},uO=function(){function o(t){this.groups={},this.series={},this.rootGroup=t}return o.prototype.requestGroup=function(t){var e,r,n,i,a=t.id,s=t.type,l=t.rootGroup,u=t.seriesGrouping,c=(u??{}).groupIndex,d=c===void 0?a:c;if(this.series[a]!=null)throw new Error("AG Charts - series already has an allocated layer: "+this.series[a]);(e=(n=this.groups)[s])!==null&&e!==void 0||(n[s]={});var h=this.groups[s][d];return h||(h=(r=(i=this.groups[s])[d])!==null&&r!==void 0?r:i[d]={seriesIds:[],group:this.rootGroup.appendChild(new le({name:s+"-content",layer:!0,zIndex:Xe.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("data")}))}),this.series[a]={layerState:h,seriesConfig:t},h.seriesIds.push(a),h.group.appendChild(l),h.group},o.prototype.changeGroup=function(t){var e,r,n=t.id,i=t.seriesGrouping,a=t.type,s=t.rootGroup,l=t.oldGrouping,u=(i??{}).groupIndex,c=u===void 0?n:u;!((r=(e=this.groups[a])===null||e===void 0?void 0:e[c])===null||r===void 0)&&r.seriesIds.includes(n)||(this.series[n]!=null&&this.releaseGroup({id:n,seriesGrouping:l,type:a,rootGroup:s}),this.requestGroup(t))},o.prototype.releaseGroup=function(t){var e,r,n,i,a,s=t.id,l=t.seriesGrouping,u=t.rootGroup,c=t.type,d=(l??{}).groupIndex,h=d===void 0?s:d;if(this.series[s]==null)throw new Error("AG Charts - series doesn't have an allocated layer: "+s);var f=(r=(e=this.groups[c])===null||e===void 0?void 0:e[h])!==null&&r!==void 0?r:(n=this.series[s])===null||n===void 0?void 0:n.layerState;if(f&&(f.seriesIds=f.seriesIds.filter(function(v){return v!==s}),f.group.removeChild(u)),(f==null?void 0:f.seriesIds.length)===0)this.rootGroup.removeChild(f.group),delete this.groups[c][h],delete this.groups[c][s];else if((f==null?void 0:f.seriesIds.length)>0){var p=(a=this.series[(i=f==null?void 0:f.seriesIds)===null||i===void 0?void 0:i[0]])===null||a===void 0?void 0:a.seriesConfig;f.group.zIndexSubOrder=p==null?void 0:p.getGroupZIndexSubOrder("data")}delete this.series[s]},o.prototype.destroy=function(){var t,e,r,n;try{for(var i=Of(Object.values(this.groups)),a=i.next();!a.done;a=i.next()){var s=a.value;try{for(var l=(r=void 0,Of(Object.values(s))),u=l.next();!u.done;u=l.next()){var c=u.value;this.rootGroup.removeChild(c.group)}}catch(d){r={error:d}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}}}catch(d){t={error:d}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}this.groups={},this.series={}},o}(),cO=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tn=function(){return Tn=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Tn.apply(this,arguments)},Pr=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Cn=function(o,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):n(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},xn=function(o,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},$i=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Xi=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},qs=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},qd=function(o){cO(t,o);function t(e,r,n){e===void 0&&(e=window.document);var i,a=o.call(this)||this;a.id=gn(a),a.processedOptions={},a.userOptions={},a.queuedUserOptions=[],a.seriesRoot=new le({name:a.id+"-Series-root"}),a.extraDebugStats={},a.container=void 0,a.data=[],a.padding=new Vl(20),a.seriesAreaPadding=new Vl(0),a.title=void 0,a.subtitle=void 0,a.footnote=void 0,a.mode="standalone",a._destroyed=!1,a.modules={},a.legendModules={},a._pendingFactoryUpdates=[],a._performUpdateNoRenderCount=0,a._performUpdateType=we.NONE,a.seriesToUpdate=new Set,a.performUpdateTrigger=Nb(function(d){var h=d.count;return Cn(a,void 0,void 0,function(){var f;return xn(this,function(p){switch(p.label){case 0:if(this._destroyed)return[2];p.label=1;case 1:return p.trys.push([1,3,,4]),[4,this.performUpdate(h)];case 2:return p.sent(),[3,4];case 3:return f=p.sent(),this._lastPerformUpdateError=f,re.error("update error",f),[3,4];case 4:return[2]}})})}),a._axes=[],a._series=[],a.applyLegendOptions=void 0,a.lastInteractionEvent=void 0,a.pointerScheduler=kb(function(){a.lastInteractionEvent&&a.handlePointer(a.lastInteractionEvent),a.lastInteractionEvent=void 0}),a.onSeriesNodeClick=function(d){var h=Tn(Tn({},d),{type:"seriesNodeClick"});Object.defineProperty(h,"series",{enumerable:!1,get:function(){return d.series}}),a.fireEvent(h)},a.onSeriesNodeDoubleClick=function(d){var h=Tn(Tn({},d),{type:"seriesNodeDoubleClick"});a.fireEvent(h)};var s=n==null?void 0:n.scene,l=(i=n==null?void 0:n.element)!==null&&i!==void 0?i:e.createElement("div"),u=n==null?void 0:n.container,c=new le({name:"root"});return c.visible=!1,c.append(a.seriesRoot),a.axisGroup=new le({name:"Axes",layer:!0,zIndex:Xe.AXIS_ZINDEX}),c.appendChild(a.axisGroup),a.element=l,l.classList.add("ag-chart-wrapper"),l.style.position="relative",a.scene=s??new Bd({document:e,overrideDevicePixelRatio:r}),a.scene.debug.consoleLog=!1,a.scene.root=c,a.scene.container=l,a.autoSize=!0,a.chartEventManager=new qb,a.cursorManager=new Xb(l),a.highlightManager=new e_,a.interactionManager=new o_(l),a.zoomManager=new u_,a.dataService=new p_(function(){return a.series}),a.layoutService=new f_,a.updateService=new v_(function(d,h){d===void 0&&(d=we.FULL);var f=h.forceNodeDataRefresh;return a.update(d,{forceNodeDataRefresh:f})}),a.seriesStateManager=new lO,a.seriesLayerManager=new uO(a.seriesRoot),a.callbackCache=new oO,a.animationManager=new Kb(a.interactionManager),a.animationManager.skipAnimations=!0,a.animationManager.play(),a.tooltip=new ab(a.scene.canvas.element,e,e.body),a.tooltipManager=new s_(a.tooltip,a.interactionManager),a.overlays=new Vb(a.element),a.highlight=new y_,a.container=u,a.debug=!1,of.observe(a.element,function(d){var h,f=d.width,p=d.height;if(a.autoSize&&!(f===0&&p===0)){var v=$i((h=a._lastAutoSize)!==null&&h!==void 0?h:[],2),g=v[0],m=g===void 0?0:g,y=v[1],S=y===void 0?0:y;m===f&&S===p||(a._lastAutoSize=[f,p],a.resize())}}),a.layoutService.addListener("start-layout",function(d){return a.positionPadding(d.shrinkRect)}),a.layoutService.addListener("start-layout",function(d){return a.positionCaptions(d.shrinkRect)}),a.interactionManager.addListener("click",function(d){return a.onClick(d)}),a.interactionManager.addListener("dblclick",function(d){return a.onDoubleClick(d)}),a.interactionManager.addListener("hover",function(d){return a.onMouseMove(d)}),a.interactionManager.addListener("leave",function(d){return a.onLeave(d)}),a.interactionManager.addListener("page-left",function(){return a.destroy()}),a.interactionManager.addListener("wheel",function(){return a.disablePointer()}),a.animationManager.addListener("animation-frame",function(d){a.update(we.SCENE_RENDER)}),a.highlightManager.addListener("highlight-change",function(d){return a.changeHighlightDatum(d)}),a.zoomManager.addListener("zoom-change",function(d){return a.update(we.PROCESS_DATA,{forceNodeDataRefresh:!0})}),a.attachLegend("category"),a}return t.prototype.getOptions=function(){var e,r=this.queuedUserOptions,n=(e=r[r.length-1])!==null&&e!==void 0?e:this.userOptions;return Ye([n])},t.prototype.autoSizeChanged=function(e){var r=this.element.style;if(e){if(r.display="block",r.width="100%",r.height="100%",!this._lastAutoSize)return;this.resize()}else r.display="inline-block",r.width="auto",r.height="auto"},t.prototype.download=function(e,r){this.scene.download(e,r)},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype.addModule=function(e){if(this.modules[e.optionsKey]!=null)throw new Error("AG Charts - module already initialised: "+e.optionsKey);var r=new e.instanceConstructor(this.getModuleContext());this.modules[e.optionsKey]={instance:r},this[e.optionsKey]=r},t.prototype.removeModule=function(e){var r,n;(n=(r=this.modules[e.optionsKey])===null||r===void 0?void 0:r.instance)===null||n===void 0||n.destroy(),delete this.modules[e.optionsKey],delete this[e.optionsKey]},t.prototype.isModuleEnabled=function(e){return this.modules[e.optionsKey]!=null},t.prototype.getModuleContext=function(){var e=this,r=e.scene,n=e.animationManager,i=e.chartEventManager,a=e.cursorManager,s=e.highlightManager,l=e.interactionManager,u=e.tooltipManager,c=e.zoomManager,d=e.dataService,h=e.layoutService,f=e.updateService,p=e.seriesStateManager,v=e.seriesLayerManager,g=e.mode,m=e.callbackCache;return{scene:r,animationManager:n,chartEventManager:i,cursorManager:a,highlightManager:s,interactionManager:l,tooltipManager:u,zoomManager:c,dataService:d,layoutService:h,updateService:f,mode:g,seriesStateManager:p,seriesLayerManager:v,callbackCache:m}},t.prototype.destroy=function(e){var r,n,i;if(!this._destroyed){var a=e==null?void 0:e.keepTransferableResources,s=void 0;this._performUpdateType=we.NONE,this._pendingFactoryUpdates.splice(0),this.tooltipManager.destroy(),this.tooltip.destroy(),(i=this.legend)===null||i===void 0||i.destroy(),this.overlays.noData.hide(),of.unobserve(this.element);try{for(var l=Xi(Object.entries(this.modules)),u=l.next();!u.done;u=l.next()){var c=$i(u.value,2),d=c[0],h=c[1];h.instance.destroy(),delete this.modules[d],delete this[d]}}catch(f){r={error:f}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return this.interactionManager.destroy(),this.animationManager.stop(),a?(this.scene.strip(),s={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.removeAllSeries(),this.seriesLayerManager.destroy(),this.axes.forEach(function(f){return f.destroy()}),this.axes=[],this.callbackCache.invalidateCache(),this._destroyed=!0,s}},t.prototype.log=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.debug&&re.debug.apply(re,qs([],$i(e)))},t.prototype.disablePointer=function(e){e===void 0&&(e=!1),e||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent&&(this.lastInteractionEvent=void 0)},t.prototype.requestFactoryUpdate=function(e){var r=this._pendingFactoryUpdates,n=r.length;n===0?(r.push(e),this._processCallbacks().catch(function(i){return re.errorOnce(i)})):r.splice(1,n-1,e)},t.prototype._processCallbacks=function(){return Cn(this,void 0,void 0,function(){var e,r;return xn(this,function(n){switch(n.label){case 0:e=this._pendingFactoryUpdates,n.label=1;case 1:return e.length>0?this.updatePending?[4,af(1)]:[3,3]:[3,7];case 2:return n.sent(),[3,1];case 3:return n.trys.push([3,5,,6]),[4,e[0]()];case 4:return n.sent(),this.callbackCache.invalidateCache(),[3,6];case 5:return r=n.sent(),re.error("update error",r),[3,6];case 6:return e.shift(),[3,1];case 7:return[2]}})})},Object.defineProperty(t.prototype,"performUpdateType",{get:function(){return this._performUpdateType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updatePending",{get:function(){return this._performUpdateType!==we.NONE||this.lastInteractionEvent!=null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastPerformUpdateError",{get:function(){return this._lastPerformUpdateError},enumerable:!1,configurable:!0}),t.prototype.awaitUpdateCompletion=function(){return Cn(this,void 0,void 0,function(){return xn(this,function(e){switch(e.label){case 0:return[4,this.performUpdateTrigger.await()];case 1:return e.sent(),[2]}})})},t.prototype.update=function(e,r){var n,i;e===void 0&&(e=we.FULL);var a=r??{},s=a.forceNodeDataRefresh,l=s===void 0?!1:s,u=a.seriesToUpdate,c=u===void 0?this.series:u;l&&this.series.forEach(function(p){return p.markNodeDataDirty()});try{for(var d=Xi(c),h=d.next();!h.done;h=d.next()){var f=h.value;this.seriesToUpdate.add(f)}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}e<this._performUpdateType&&(this._performUpdateType=e,this.performUpdateTrigger.schedule())},t.prototype.performUpdate=function(e){var r;return Cn(this,void 0,void 0,function(){var n,i,a,s,l,u,c,d,h;return xn(this,function(f){switch(f.label){case 0:switch(n=this,i=n._performUpdateType,a=n.extraDebugStats,this.log("Chart.performUpdate() - start",we[i]),s=[performance.now()],l=i,l){case we.FULL:return[3,1];case we.PROCESS_DATA:return[3,1];case we.PERFORM_LAYOUT:return[3,3];case we.SERIES_UPDATE:return[3,5];case we.TOOLTIP_RECALCULATION:return[3,7];case we.SCENE_RENDER:return[3,8];case we.NONE:return[3,10]}return[3,11];case 1:return[4,this.processData()];case 2:f.sent(),this.disablePointer(!0),s.push(performance.now()),f.label=3;case 3:return this.checkFirstAutoSize()?[4,this.performLayout()]:[3,11];case 4:f.sent(),this.handleOverlays(),this.log("Chart.performUpdate() - seriesRect",this.seriesRect),s.push(performance.now()),f.label=5;case 5:return u=this.seriesRect,c=qs([],$i(this.seriesToUpdate)).map(function(p){return p.update({seriesRect:u})}),this.seriesToUpdate.clear(),[4,Promise.all(c)];case 6:f.sent(),s.push(performance.now()),f.label=7;case 7:d=this.tooltipManager.getTooltipMeta(this.id),i<we.SERIES_UPDATE&&((r=d==null?void 0:d.event)===null||r===void 0?void 0:r.type)==="hover"&&this.handlePointer(d.event),f.label=8;case 8:return[4,this.scene.render({debugSplitTimes:s,extraDebugStats:a})];case 9:f.sent(),this.extraDebugStats={},f.label=10;case 10:this._performUpdateType=we.NONE,f.label=11;case 11:return h=performance.now(),this.log("Chart.performUpdate() - end",{chart:this,durationMs:Math.round((h-s[0])*100)/100,count:e,performUpdateType:we[i]}),[2]}})})},t.prototype.checkFirstAutoSize=function(){if(this.autoSize&&!this._lastAutoSize){var e=this._performUpdateNoRenderCount++,r=(e^2)*10;if(e<5)return this._performUpdateType=we.PERFORM_LAYOUT,this.performUpdateTrigger.schedule(r),this.log("Chart.checkFirstAutoSize() - backing off until first size update",r),!1;this.log("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0},Object.defineProperty(t.prototype,"axes",{get:function(){return this._axes},set:function(e){var r=this,n=new Set;this._axes.forEach(function(i){i.detachAxis(r.axisGroup),n.add(i)}),this._axes=e.filter(function(i){return!i.linkedTo}).concat(e.filter(function(i){return i.linkedTo})),this._axes.forEach(function(i){i.attachAxis(r.axisGroup),n.delete(i)}),this.zoomManager.updateAxes(this._axes),n.forEach(function(i){return i.destroy()})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"series",{get:function(){return this._series},set:function(e){var r=this;this.removeAllSeries(),e.forEach(function(n){return r.addSeries(n)})},enumerable:!1,configurable:!0}),t.prototype.addSeries=function(e){var r=this.series,n=r.indexOf(e)<0;return n?(r.push(e),e.rootGroup.parent==null&&this.seriesLayerManager.requestGroup(e),this.initSeries(e),!0):!1},t.prototype.initSeries=function(e){e.chart=this,e.data||(e.data=this.data),this.addSeriesListeners(e),e.addChartEventListeners()},t.prototype.removeAllSeries=function(){var e=this;this.series.forEach(function(r){r.removeEventListener("nodeClick",e.onSeriesNodeClick),r.removeEventListener("nodeDoubleClick",e.onSeriesNodeDoubleClick),r.destroy(),r.chart=void 0}),this._series=[]},t.prototype.addSeriesListeners=function(e){this.hasEventListener("seriesNodeClick")&&e.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&e.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)},t.prototype.updateAllSeriesListeners=function(){var e=this;this.series.forEach(function(r){r.removeEventListener("nodeClick",e.onSeriesNodeClick),r.removeEventListener("nodeDoubleClick",e.onSeriesNodeDoubleClick),e.addSeriesListeners(r)})},t.prototype.assignSeriesToAxes=function(){var e=this;this.axes.forEach(function(r){r.boundSeries=e.series.filter(function(n){var i=n.axes[r.direction];return i===r})})},t.prototype.assignAxesToSeries=function(){var e=this,r={};this.axes.forEach(function(n){var i,a=n.direction,s=(i=r[a])!==null&&i!==void 0?i:r[a]=[];s.push(n)}),this.series.forEach(function(n){n.directions.forEach(function(i){var a=r[i];if(!a){re.warn("no available axis for direction ["+i+"]; check series and axes configuration.");return}var s=n.getKeys(i),l=e.findMatchingAxis(a,n.getKeys(i));if(!l){re.warn("no matching axis for direction ["+i+"] and keys ["+s+"]; check series and axes configuration.");return}n.axes[i]=l})})},t.prototype.findMatchingAxis=function(e,r){var n,i,a,s;try{for(var l=Xi(e),u=l.next();!u.done;u=l.next()){var c=u.value,d=c.keys;if(!d.length)return c;if(r)try{for(var h=(a=void 0,Xi(r)),f=h.next();!f.done;f=h.next()){var p=f.value;if(d.indexOf(p)>=0)return c}}catch(v){a={error:v}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}}}catch(v){n={error:v}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}},t.prototype.resize=function(e,r){var n,i,a,s;e??(e=(n=this.width)!==null&&n!==void 0?n:this.autoSize?(i=this._lastAutoSize)===null||i===void 0?void 0:i[0]:this.scene.canvas.width),r??(r=(a=this.height)!==null&&a!==void 0?a:this.autoSize?(s=this._lastAutoSize)===null||s===void 0?void 0:s[1]:this.scene.canvas.height),this.log("Chart.resize()",{width:e,height:r}),!(!e||!r||!Number.isFinite(e)||!Number.isFinite(r))&&this.scene.resize(e,r)&&(this.disablePointer(),this.update(we.PERFORM_LAYOUT,{forceNodeDataRefresh:!0}))},t.prototype.processData=function(){return Cn(this,void 0,void 0,function(){var e,r;return xn(this,function(n){switch(n.label){case 0:return this.axes.length>0&&(this.assignAxesToSeries(),this.assignSeriesToAxes()),e=new aO,r=this.series.map(function(i){return i.processData(e)}),[4,e.execute()];case 1:return n.sent(),[4,Promise.all(r)];case 2:return n.sent(),[4,this.updateLegend()];case 3:return n.sent(),[2]}})})},t.prototype.placeLabels=function(){var e,r,n=[],i=[];try{for(var a=Xi(this.series),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.visible){var u=l.getLabelData();u&&Mb(u[0])&&(i.push(u),n.push(l))}}}catch(h){e={error:h}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}var c=this.seriesRect,d=c&&i.length>0?Rb(i,{x:0,y:0,width:c.width,height:c.height}):[];return new Map(d.map(function(h,f){return[n[f],h]}))},t.prototype.attachLegend=function(e){var r;if(this.legendType===e&&this.legend)return this.legend;(r=this.legend)===null||r===void 0||r.destroy(),this.legend=void 0;var n=this.getModuleContext(),i=rO(e,n);return i.attachLegend(this.scene.root),this.legend=i,this.legendType=e,i},t.prototype.setLegendInit=function(e){this.applyLegendOptions=e},t.prototype.updateLegend=function(){var e;return Cn(this,void 0,void 0,function(){var r,n,i;return xn(this,function(a){return r=[],this.series.filter(function(s){return s.showInLegend}).forEach(function(s){var l=s.getLegendData();r.push.apply(r,qs([],$i(l)))}),n=r.length>0?r[0].legendType:"category",i=this.attachLegend(n),(e=this.applyLegendOptions)===null||e===void 0||e.call(this,i),n==="category"&&this.validateLegendData(r),i.data=r,[2]})})},t.prototype.validateLegendData=function(e){var r=this,n={};e.forEach(function(i){var a,s,l,u,c,d,h=(s=r.series.find(function(p){return p.id===i.seriesId}))===null||s===void 0?void 0:s.type;if(h){var f=i;(l=n[h])!==null&&l!==void 0||(n[h]=(a={},a[f.label.text]=new Set,a)),(u=(c=n[h])[d=f.label.text])!==null&&u!==void 0||(c[d]=new Set),f.marker.fill!=null&&n[h][f.label.text].add(f.marker.fill)}}),Object.keys(n).forEach(function(i){Object.keys(n[i]).forEach(function(a){var s=n[i][a];s.size>1&&re.warnOnce("legend item '"+a+"' has multiple fill colors, this may cause unexpected behaviour.")})})},t.prototype.performLayout=function(){return Cn(this,void 0,void 0,function(){var e,r,n,i;return xn(this,function(a){return this.scene.root!=null&&(this.scene.root.visible=!0),e=this.scene,r=e.width,n=e.height,i=new Ee(0,0,r,n),i=this.layoutService.dispatchPerformLayout("start-layout",{shrinkRect:i}).shrinkRect,i=this.layoutService.dispatchPerformLayout("before-series",{shrinkRect:i}).shrinkRect,[2,i]})})},t.prototype.positionPadding=function(e){var r=this.padding;return e.shrink(r.left,"left"),e.shrink(r.top,"top"),e.shrink(r.right,"right"),e.shrink(r.bottom,"bottom"),{shrinkRect:e}},t.prototype.positionCaptions=function(e){var r,n=this,i=n.title,a=n.subtitle,s=n.footnote,l=e.clone(),u=function(h){var f,p=e.height/10,v=(f=h.lineHeight)!==null&&f!==void 0?f:h.fontSize*Me.defaultLineHeightRatio,g=e.width,m=Math.max(v,p);h.computeTextWrap(g,m)},c=function(h){var f,p=l.y;h.node.x=l.x+l.width/2,h.node.y=p,h.node.textBaseline="top",u(h);var v=h.node.computeBBox(),g=Math.ceil(v.y-p+v.height+((f=h.spacing)!==null&&f!==void 0?f:0));l.shrink(g,"top")},d=function(h){var f,p=l.y+l.height;h.node.x=l.x+l.width/2,h.node.y=p,h.node.textBaseline="bottom",u(h);var v=h.node.computeBBox(),g=Math.ceil(p-v.y+((f=h.spacing)!==null&&f!==void 0?f:0));l.shrink(g,"bottom")};return i&&(i.node.visible=i.enabled,i.node.visible&&c(i)),a&&(a.node.visible=(r=(i==null?void 0:i.enabled)&&a.enabled)!==null&&r!==void 0?r:!1,a.node.visible&&c(a)),s&&(s.node.visible=s.enabled,s.node.visible&&d(s)),{shrinkRect:l}},t.prototype.getSeriesRect=function(){return this.seriesRect},t.prototype.pickSeriesNode=function(e,r,n){var i,a,s,l,u=performance.now(),c=r?[tt.EXACT_SHAPE_MATCH]:void 0,d=qs([],$i(this.series)).reverse(),h=void 0;try{for(var f=Xi(d),p=f.next();!p.done;p=f.next()){var v=p.value;if(!(!v.visible||!v.rootGroup.visible)){var g=(s=v.pickNode(e,c))!==null&&s!==void 0?s:{},m=g.match,y=g.distance;if(!(!m||y==null)&&((!h||h.distance>y)&&y<=(n??1/0)&&(h={series:v,distance:y,datum:m}),y===0))break}}}catch(S){i={error:S}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return this.extraDebugStats.pickSeriesNode=Math.round(((l=this.extraDebugStats.pickSeriesNode)!==null&&l!==void 0?l:0)+(performance.now()-u)),h},t.prototype.onMouseMove=function(e){this.lastInteractionEvent=e,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=e.offsetX,this.extraDebugStats.mouseY=e.offsetY,this.update(we.SCENE_RENDER)},t.prototype.onLeave=function(e){this.tooltip.pointerLeftOntoTooltip(e)||this.disablePointer()},t.prototype.handlePointer=function(e){var r=this,n=this,i=n.lastPick,a=n.hoverRect,s=e.offsetX,l=e.offsetY,u=function(c){c===void 0&&(c=!1),i&&r.disablePointer(c)};if(!(a!=null&&a.containsPoint(s,l))){u();return}this.handlePointerTooltip(e,u),this.handlePointerNode(e)},t.prototype.handlePointerTooltip=function(e,r){var n,i,a=this,s=a.lastPick,l=a.tooltip,u=l.range,c=e.pageX,d=e.pageY,h=e.offsetX,f=e.offsetY,p;typeof u=="number"&&Number.isFinite(u)&&(p=u);var v=this.pickSeriesNode({x:h,y:f},u==="exact",p);if(!v){this.tooltipManager.updateTooltip(this.id),this.highlight.range==="tooltip"&&r(!0);return}var g=this.highlight.range==="node"||!s||s.datum!==v.datum,m;g?(m=v.series.getTooltipHtml(v.datum),this.highlight.range==="tooltip"&&this.highlightManager.updateHighlight(this.id,v.datum)):s&&(s.event=e.sourceEvent);var y=p!=null,S=this.tooltip.enabled&&v.series.tooltip.enabled,C=u==="exact"&&v.distance===0,w=u==="nearest"||y||C,x=S&&w&&(!g||m!==void 0),b={xOffset:v.datum.series.tooltip.position.xOffset,yOffset:v.datum.series.tooltip.position.yOffset},_=this.mergePointerDatum({pageX:c,pageY:d,offsetX:h,offsetY:f,event:e,showArrow:v.series.tooltip.showArrow,position:b},v.datum);_.enableInteraction=(i=(n=v.series.tooltip.interaction)===null||n===void 0?void 0:n.enabled)!==null&&i!==void 0?i:!1,x&&this.tooltipManager.updateTooltip(this.id,_,m)},t.prototype.handlePointerNode=function(e){var r=this,n=this.checkSeriesNodeRange(e,function(i,a){(i.hasEventListener("nodeClick")||i.hasEventListener("nodeDoubleClick"))&&r.cursorManager.updateCursor("chart","pointer"),r.highlight.range==="node"&&r.highlightManager.updateHighlight(r.id,a)});n||(this.cursorManager.updateCursor("chart"),this.highlight.range==="node"&&this.highlightManager.updateHighlight(this.id))},t.prototype.onClick=function(e){if(this.checkSeriesNodeClick(e)){this.update(we.SERIES_UPDATE);return}this.fireEvent({type:"click",event:e.sourceEvent})},t.prototype.onDoubleClick=function(e){if(this.checkSeriesNodeDoubleClick(e)){this.update(we.SERIES_UPDATE);return}this.fireEvent({type:"doubleClick",event:e.sourceEvent})},t.prototype.checkSeriesNodeClick=function(e){return this.checkSeriesNodeRange(e,function(r,n){return r.fireNodeClickEvent(e.sourceEvent,n)})},t.prototype.checkSeriesNodeDoubleClick=function(e){return this.checkSeriesNodeRange(e,function(r,n){return r.fireNodeDoubleClickEvent(e.sourceEvent,n)})},t.prototype.checkSeriesNodeRange=function(e,r){var n=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},!1),i=n==null?void 0:n.datum,a=i==null?void 0:i.series.nodeClickRange;if(i&&a==="nearest")return r(i.series,i),!0;var s;typeof a=="number"&&Number.isFinite(a)&&(s=a);var l=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},a==="exact",s);if(!l)return!1;var u=s!=null,c=a==="exact"&&l.distance===0;return u||c?(r(l.series,l.datum),!0):!1},t.prototype.mergePointerDatum=function(e,r){var n=r.series.tooltip.position.type;if(n==="node"&&r.nodeMidPoint){var i=r.nodeMidPoint,a=i.x,s=i.y,l=this.scene.canvas,u=r.series.contentGroup.inverseTransformPoint(a,s),c=l.element.getBoundingClientRect();return Tn(Tn({},e),{pageX:Math.round(c.left+window.scrollX+u.x),pageY:Math.round(c.top+window.scrollY+u.y),offsetX:Math.round(u.x),offsetY:Math.round(u.y)})}return e},t.prototype.changeHighlightDatum=function(e){var r,n,i=new Set,a=(r=e.currentHighlight)!==null&&r!==void 0?r:{},s=a.series,l=s===void 0?void 0:s,u=a.datum,c=(n=e.previousHighlight)!==null&&n!==void 0?n:{},d=c.series,h=d===void 0?void 0:d,f=c.datum;h&&i.add(h),l&&i.add(l),h!=null&&h.cursor&&f&&this.cursorManager.updateCursor(h.id),l!=null&&l.cursor&&u&&this.cursorManager.updateCursor(l.id,l.cursor),this.lastPick=e.currentHighlight?{datum:e.currentHighlight}:void 0;var p=l==null||h==null;p?this.update(we.SERIES_UPDATE):this.update(we.SERIES_UPDATE,{seriesToUpdate:i})},t.prototype.waitForUpdate=function(e){return e===void 0&&(e=5e3),Cn(this,void 0,void 0,function(){var r;return xn(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:if(!(this._pendingFactoryUpdates.length>0||this.updatePending))return[3,3];if(performance.now()-r>e)throw new Error("waitForUpdate() timeout reached.");return[4,af(5)];case 2:return n.sent(),[3,1];case 3:return[4,this.awaitUpdateCompletion()];case 4:return n.sent(),[2]}})})},t.prototype.handleOverlays=function(){this.handleNoDataOverlay()},t.prototype.handleNoDataOverlay=function(){var e=!this.series.some(function(n){return n.hasData()}),r=this.getSeriesRect();e&&r?this.overlays.noData.show(r):this.overlays.noData.hide()},Pr([Fr({newValue:function(e){this.scene.debug.consoleLog=e,this.animationManager&&(this.animationManager.debug=e)}})],t.prototype,"debug",void 0),Pr([Fr({newValue:function(e){this.destroyed||e.appendChild(this.element)},oldValue:function(e){e.removeChild(this.element)}})],t.prototype,"container",void 0),Pr([Fr({newValue:function(e){var r;(r=this.series)===null||r===void 0||r.forEach(function(n){return n.data=e})}})],t.prototype,"data",void 0),Pr([Fr({newValue:function(e){this.resize(e)}})],t.prototype,"width",void 0),Pr([Fr({newValue:function(e){this.resize(void 0,e)}})],t.prototype,"height",void 0),Pr([Fr({changeValue:function(e){this.autoSizeChanged(e)}}),A(Re)],t.prototype,"autoSize",void 0),Pr([Fr({newValue:function(e){var r;(r=this.scene.root)===null||r===void 0||r.appendChild(e.node)},oldValue:function(e){var r;(r=this.scene.root)===null||r===void 0||r.removeChild(e.node)}})],t.prototype,"title",void 0),Pr([Fr({newValue:function(e){var r;(r=this.scene.root)===null||r===void 0||r.appendChild(e.node)},oldValue:function(e){var r;(r=this.scene.root)===null||r===void 0||r.removeChild(e.node)}})],t.prototype,"subtitle",void 0),Pr([Fr({newValue:function(e){var r;(r=this.scene.root)===null||r===void 0||r.appendChild(e.node)},oldValue:function(e){var r;(r=this.scene.root)===null||r===void 0||r.removeChild(e.node)}})],t.prototype,"footnote",void 0),Pr([A(rg("standalone","integrated"))],t.prototype,"mode",void 0),t}(qv),dO=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i};function dc(o,t,e){return Math.max(t,Math.min(e,o))}var Lt=function(){function o(){this.type="band",this.cache=null,this.cacheProps=["_domain","range","_paddingInner","_paddingOuter","round","interval"],this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}return o.prototype.didChange=function(){var t=this,e=this.cache,r=!e||this.cacheProps.some(function(n){return t[n]!==e[n]});return r?(this.cache={},this.cacheProps.forEach(function(n){return t.cache[n]=t[n]}),!0):!1},o.prototype.refresh=function(){this.didChange()&&this.update()},Object.defineProperty(o.prototype,"domain",{get:function(){return this._domain},set:function(t){var e=[];this.index=new Map;var r=this.index;t.forEach(function(n){r.get(n)===void 0&&r.set(n,e.push(n)-1)}),this._domain=e},enumerable:!1,configurable:!0}),o.prototype.ticks=function(){this.refresh();var t=this.interval,e=t===void 0?1:t,r=Math.abs(Math.round(e));return this._domain.filter(function(n,i){return i%r===0})},o.prototype.convert=function(t){this.refresh();var e=this.index.get(t);if(e===void 0)return NaN;var r=this.ordinalRange[e];return r===void 0?NaN:r},o.prototype.invert=function(t){this.refresh();var e=this.ordinalRange.findIndex(function(r){return r===t});return this.domain[e]},Object.defineProperty(o.prototype,"bandwidth",{get:function(){return this.refresh(),this._bandwidth},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"rawBandwidth",{get:function(){return this.refresh(),this._rawBandwidth},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"padding",{get:function(){return this._paddingInner},set:function(t){t=dc(t,0,1),this._paddingInner=t,this._paddingOuter=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"paddingInner",{get:function(){return this._paddingInner},set:function(t){this._paddingInner=dc(t,0,1)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"paddingOuter",{get:function(){return this._paddingOuter},set:function(t){this._paddingOuter=dc(t,0,1)},enumerable:!1,configurable:!0}),o.prototype.update=function(){var t=this._domain.length;if(t!==0){for(var e=this.round,r=this._paddingInner,n=this._paddingOuter,i=dO(this.range,2),a=i[0],s=i[1],l=s-a,u=l/Math.max(1,t+2*n-r),c=e?Math.floor(u):u,d=c*(t-r),h=a+(l-d)/2,f=e?Math.round(h):h,p=c*(1-r),v=e?Math.round(p):p,g=u*(1-r),m=[],y=0;y<t;y++)m.push(f+c*y);this._bandwidth=v,this._rawBandwidth=g,this.ordinalRange=m}},o}(),hO=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zs=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},nt=function(o){hO(t,o);function t(){var e=o.call(this)||this;return e.x1=0,e.y1=0,e.x2=0,e.y2=0,e.restoreOwnStyles(),e}return t.prototype.computeBBox=function(){return new Ee(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)},t.prototype.isPointInPath=function(e,r){return!1},t.prototype.render=function(e){var r,n=e.ctx,i=e.forceRender,a=e.stats;if(this.dirty===Z.NONE&&!i){a&&(a.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(n);var s=this.x1,l=this.y1,u=this.x2,c=this.y2;if(s===u){var d=Math.round(s)+Math.floor(this.strokeWidth)%2/2;s=d,u=d}else if(l===c){var h=Math.round(l)+Math.floor(this.strokeWidth)%2/2;l=h,c=h}n.beginPath(),n.moveTo(s,l),n.lineTo(u,c),this.fillStroke(n),(r=this.fillShadow)===null||r===void 0||r.markClean(),o.prototype.render.call(this,e)},t.className="Line",t.defaultStyles=Object.assign({},Wr.defaultStyles,{fill:void 0,strokeWidth:1}),Zs([ie({redraw:Z.MAJOR})],t.prototype,"x1",void 0),Zs([ie({redraw:Z.MAJOR})],t.prototype,"y1",void 0),Zs([ie({redraw:Z.MAJOR})],t.prototype,"x2",void 0),Zs([ie({redraw:Z.MAJOR})],t.prototype,"y2",void 0),t}(Wr),Qt=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Bo=function(){function o(){this.node=new Me,this.enabled=!1,this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.spacing=o.PADDING,this.lineHeight=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.wrapping="always";var t=this.node;t.textAlign="center",t.pointerEvents=_t.None}return o.prototype.computeTextWrap=function(t,e){var r,n,i=this,a=i.text,s=i.wrapping,l=Math.min((r=this.maxWidth)!==null&&r!==void 0?r:1/0,t),u=(n=this.maxHeight)!==null&&n!==void 0?n:e;if(!isFinite(l)&&!isFinite(u)){this.node.text=a;return}var c=Me.wrap(a??"",l,u,this,s);this.node.text=c},o.PADDING=10,Qt([A(Re)],o.prototype,"enabled",void 0),Qt([A(de),et("node")],o.prototype,"text",void 0),Qt([A(Mi),et("node")],o.prototype,"fontStyle",void 0),Qt([A(Ri),et("node")],o.prototype,"fontWeight",void 0),Qt([A(J(0)),et("node")],o.prototype,"fontSize",void 0),Qt([A(St),et("node")],o.prototype,"fontFamily",void 0),Qt([A(Fe),et("node","fill")],o.prototype,"color",void 0),Qt([A(Pe(0))],o.prototype,"spacing",void 0),Qt([A(Pe(0))],o.prototype,"lineHeight",void 0),Qt([A(Pe(0))],o.prototype,"maxWidth",void 0),Qt([A(Pe(0))],o.prototype,"maxHeight",void 0),Qt([A(Ud)],o.prototype,"wrapping",void 0),o}();function fO(o,t){return o.length===t.length&&o.every(function(e,r){return Number(e)===Number(t[r])})}var Js=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},De=function(){function o(t,e){this.domain=t,this.range=e,this.nice=!1,this.tickCount=o.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=null,this.strictClampByDefault=!1,this.cache=null,this.cacheProps=["domain","range","nice","tickCount","minTickCount","maxTickCount"]}return o.prototype.transform=function(t){return t},o.prototype.transformInvert=function(t){return t},o.prototype.fromDomain=function(t){return typeof t=="number"?t:t instanceof Date?t.getTime():NaN},o.prototype.getDomain=function(){return this.nice&&(this.refresh(),this.niceDomain)?this.niceDomain:this.domain},o.prototype.convert=function(t,e){var r=this,n;if(!this.domain||this.domain.length<2)return NaN;this.refresh();var i=(n=e==null?void 0:e.strict)!==null&&n!==void 0?n:this.strictClampByDefault,a=this.getDomain().map(function(p){return r.transform(p)}),s=Js(a,2),l=s[0],u=s[1],c=this.range,d=Js(c,2),h=d[0],f=d[1];return t=this.transform(t),t<l?i?NaN:h:t>u?i?NaN:f:l===u?(h+f)/2:t===l?h:t===u?f:h+(this.fromDomain(t)-this.fromDomain(l))/(this.fromDomain(u)-this.fromDomain(l))*(f-h)},o.prototype.invert=function(t){var e=this;this.refresh();var r=this.getDomain().map(function(v){return e.transform(v)}),n=Js(r,2),i=n[0],a=n[1],s=this.range,l=Js(s,2),u=l[0],c=l[1],d=u>c,h=d?c:u,f=d?u:c,p;return t<h?d?a:i:t>f?d?i:a:(u===c?p=this.toDomain((this.fromDomain(i)+this.fromDomain(a))/2):p=this.toDomain(this.fromDomain(i)+(t-u)/(c-u)*(this.fromDomain(a)-this.fromDomain(i))),this.transformInvert(p))},o.prototype.didChange=function(){var t=this,e=this.cache,r=!e||this.cacheProps.some(function(n){return t[n]!==e[n]});return r?(this.cache={},this.cacheProps.forEach(function(n){return t.cache[n]=t[n]}),!0):!1},o.prototype.refresh=function(){this.didChange()&&this.update()},o.prototype.isDenseInterval=function(t){var e=t.start,r=t.stop,n=t.interval,i=t.count,a=this.range,s=r-e,l=Math.min(a[0],a[1]),u=Math.max(a[0],a[1]),c=u-l,d=typeof n=="number"?n:1;return i??(i=s/d),i>=c?(re.warn("the configured tick interval results in more than 1 tick per pixel, ignoring. Supply a larger tick interval or omit this configuration."),!0):!1},o.defaultTickCount=5,o.defaultMaxTickCount=6,o}(),pO=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();function Zd(o,t,e,r,n){if(e<2)return Wl(o,t,t-o);var i=cs(o,t,e,r,n);return isNaN(i)?new Jd(0):(o=Math.ceil(o/i)*i,t=Math.floor(t/i)*i,Wl(o,t,i))}var Cg=[1,2,5,10];function cs(o,t,e,r,n){r===void 0&&(r=0),n===void 0&&(n=1/0);var i=(t-o)/e,a=Math.floor(Math.log10(i)),s=Math.pow(10,a),l=Cg.map(function(u){var c=u*s,d=Math.ceil((t-o)/c),h=d>=r&&d<=n,f=Math.abs(d-e);return{multiplier:u,isWithinBounds:h,diffCount:f}}).sort(function(u,c){return u.isWithinBounds!==c.isWithinBounds?u.isWithinBounds?-1:1:u.diffCount-c.diffCount})[0].multiplier;return!l||isNaN(l)?NaN:l*s}function vO(o,t){var e=Math.floor(Math.log10(t-o)),r=Math.pow(10,e);return Cg.map(function(n){var i=n*r,a=Math.floor(o/i)*i,s=Math.ceil(t/i)*i,l=1-(t-o)/(s-a),u=[a,s];return{error:l,domain:u}}).sort(function(n,i){return n.error-i.error})[0].domain}var Jd=function(o){pO(t,o);function t(e,r){var n=o.call(this)||this;if(r)for(var i=0,a=r.length;i<a;i++)n[i]=r[i];return n.fractionDigits=e,n}return t}(Array);function Wl(o,t,e){for(var r=function(c){var d,h,f=c.split("e");return Math.max(((h=(d=f[0].split(".")[1])===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0)-Number(f[1]),0)},n=r((e%1).toExponential()),i=Math.pow(10,n),a=Math.ceil((t-o)/e),s=new Jd(n),l=0;l<=a;l++){var u=o+e*l;s.push(Math.round(u*i)/i)}return s}var Qs={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function Qd(o,t){t===void 0&&(t=new Date(o.getFullYear(),0,1));var e=o.getTimezoneOffset()-t.getTimezoneOffset(),r=o.getTime()-t.getTime()+e*6e4,n=36e5*24;return Math.floor(r/n)}function Ef(o,t){var e=new Date(o.getFullYear(),0,1),r=e.getDay(),n=(t-r+7)%7,i=new Date(o.getFullYear(),0,n+1);return i<=o?Math.floor(Qd(o,i)/7)+1:0}var gO=0,xg=1,Tf=4;function wg(o,t){t===void 0&&(t=o.getFullYear());var e=new Date(t,0,1),r=e.getDay(),n=(Tf-r+7)%7,i=new Date(t,0,n-(Tf-xg)+1);return i<=o?Math.floor(Qd(o,i)/7)+1:wg(o,t-1)}function yO(o){var t=o.getTimezoneOffset(),e=Math.abs(t),r=t>0?"-":"+";return""+r+ht(Math.floor(e/60),2,"0")+ht(Math.floor(e%60),2,"0")}var mO={a:function(o){return Qs.shortDays[o.getDay()]},A:function(o){return Qs.days[o.getDay()]},b:function(o){return Qs.shortMonths[o.getMonth()]},B:function(o){return Qs.months[o.getMonth()]},c:"%x, %X",d:function(o,t){return ht(o.getDate(),2,t??"0")},e:"%_d",f:function(o,t){return ht(o.getMilliseconds()*1e3,6,t??"0")},H:function(o,t){return ht(o.getHours(),2,t??"0")},I:function(o,t){var e=o.getHours()%12;return e===0?"12":ht(e,2,t??"0")},j:function(o,t){return ht(Qd(o)+1,3,t??"0")},m:function(o,t){return ht(o.getMonth()+1,2,t??"0")},M:function(o,t){return ht(o.getMinutes(),2,t??"0")},L:function(o,t){return ht(o.getMilliseconds(),3,t??"0")},p:function(o){return o.getHours()<12?"AM":"PM"},Q:function(o){return String(o.getTime())},s:function(o){return String(Math.floor(o.getTime()/1e3))},S:function(o,t){return ht(o.getSeconds(),2,t??"0")},u:function(o){var t=o.getDay();return t<1&&(t+=7),String(t%7)},U:function(o,t){return ht(Ef(o,gO),2,t??"0")},V:function(o,t){return ht(wg(o),2,t??"0")},w:function(o,t){return ht(o.getDay(),2,t??"0")},W:function(o,t){return ht(Ef(o,xg),2,t??"0")},x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:function(o,t){return ht(o.getFullYear()%100,2,t??"0")},Y:function(o,t){return ht(o.getFullYear(),4,t??"0")},Z:function(o){return yO(o)},"%":function(){return"%"}},SO={_:" ",0:"0","-":""};function ht(o,t,e){var r=String(Math.floor(o));return r.length>=t?r:""+e.repeat(t-r.length)+r}function Ul(o){for(var t=[];o.length>0;){var e=o.indexOf("%");if(e!==0){var r=e>0?o.substring(0,e):o;t.push(r)}if(e<0)break;var n=o[e+1],i=SO[n];i!=null&&e++;var a=o[e+1],s=mO[a];if(typeof s=="function")t.push([s,i]);else if(typeof s=="string"){var l=Ul(s);t.push([l,i])}else t.push(""+(i??"")+a);o=o.substring(e+2)}return function(u){var c=typeof u=="number"?new Date(u):u;return t.map(function(d){return typeof d=="string"?d:d[0](c,d[1])}).join("")}}var CO=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),xO=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ar=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Zn=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},fr,Te;(function(o){o[o.MILLISECOND=0]="MILLISECOND",o[o.SECOND=1]="SECOND",o[o.MINUTE=2]="MINUTE",o[o.HOUR=3]="HOUR",o[o.WEEK_DAY=4]="WEEK_DAY",o[o.SHORT_MONTH=5]="SHORT_MONTH",o[o.MONTH=6]="MONTH",o[o.SHORT_YEAR=7]="SHORT_YEAR",o[o.YEAR=8]="YEAR"})(Te||(Te={}));var Jn=(fr={},fr[Te.MILLISECOND]=".%L",fr[Te.SECOND]=":%S",fr[Te.MINUTE]="%I:%M",fr[Te.HOUR]="%I %p",fr[Te.WEEK_DAY]="%a",fr[Te.SHORT_MONTH]="%b %d",fr[Te.MONTH]="%B",fr[Te.SHORT_YEAR]="%y",fr[Te.YEAR]="%Y",fr);function pr(o){return o instanceof Date?o.getTime():o}var eh=function(o){CO(t,o);function t(){var e=o.call(this,[new Date(2022,11,7),new Date(2022,11,8)],[0,1])||this;return e.type="time",e.cacheProps=["domain","range","nice","tickCount","interval","minTickCount","maxTickCount"],e.year=Zx,e.month=Xx,e.week=Ux,e.day=Wx,e.hour=Bx,e.minute=Gx,e.second=Fx,e.millisecond=Rx,e.tickIntervals=[[e.second,1,wi],[e.second,5,5*wi],[e.second,15,15*wi],[e.second,30,30*wi],[e.minute,1,Ut],[e.minute,5,5*Ut],[e.minute,15,15*Ut],[e.minute,30,30*Ut],[e.hour,1,jr],[e.hour,3,3*jr],[e.hour,6,6*jr],[e.hour,12,12*jr],[e.day,1,kn],[e.day,2,2*kn],[e.week,1,Ha],[e.week,2,2*Ha],[e.week,3,3*Ha],[e.month,1,Sa],[e.month,2,2*Sa],[e.month,3,3*Sa],[e.month,4,4*Sa],[e.month,6,6*Sa],[e.year,1,zs]],e}return t.prototype.toDomain=function(e){return new Date(e)},t.prototype.calculateDefaultTickFormat=function(e){var r,n;e===void 0&&(e=[]);var i=Te.YEAR,a=function(g){g<i&&(i=g)};try{for(var s=xO(e),l=s.next();!l.done;l=s.next()){var u=l.value,c=this.getLowestGranularityFormat(u);a(c)}}catch(g){r={error:g}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}var d=pr(e[0]),h=pr(e[e.length-1]),f=new Date(d).getFullYear(),p=new Date(h).getFullYear(),v=p-f>0;return this.buildFormatString(i,v)},t.prototype.buildFormatString=function(e,r){var n=[Jn[e]],i=0,a=this.getDomain(),s=Math.min.apply(Math,Zn([],Ar(a.map(pr)))),l=Math.max.apply(Math,Zn([],Ar(a.map(pr)))),u=l-s;switch(e){case Te.SECOND:u/Ut>1&&n.push(Jn[Te.MINUTE]);case Te.MINUTE:u/jr>1&&n.push(Jn[Te.HOUR]);case Te.HOUR:i=n.length,u/kn>1&&n.push(Jn[Te.WEEK_DAY]);case Te.WEEK_DAY:if(u/Ha>1||r){var c=n.indexOf(Jn[Te.WEEK_DAY]);c>-1&&n.splice(c,1,Jn[Te.SHORT_MONTH])}case Te.SHORT_MONTH:case Te.MONTH:(u/zs>1||r)&&n.push(Jn[Te.YEAR])}return i<n.length&&(n=Zn(Zn([],Ar(n.slice(0,i))),[n.slice(i).join(" ")])),i>0&&(n=Zn(Zn([],Ar(n.slice(0,i).reverse())),Ar(n.slice(i))),i<n.length&&n.splice(i,0," ")),n.join("")},t.prototype.getLowestGranularityFormat=function(e){return this.second.floor(e)<e?Te.MILLISECOND:this.minute.floor(e)<e?Te.SECOND:this.hour.floor(e)<e?Te.MINUTE:this.day.floor(e)<e?Te.HOUR:this.month.floor(e)<e?this.week.floor(e)<e?Te.WEEK_DAY:Te.SHORT_MONTH:this.year.floor(e)<e?Te.MONTH:Te.YEAR},t.prototype.defaultTickFormat=function(e){var r=this.calculateDefaultTickFormat(e);return function(n){return Ul(r)(n)}},t.prototype.getTickInterval=function(e){for(var r,n=e.start,i=e.stop,a=e.count,s=e.minCount,l=e.maxCount,u=this.tickIntervals,c,d,h=a??De.defaultTickCount,f=Math.abs(i-n)/Math.max(h,1),p=0;p<u.length&&f>u[p][2];)p++;if(p===0)d=Math.max(cs(n,i,h,s,l),1),c=this.millisecond;else if(p===u.length){var v=n/zs,g=i/zs;d=cs(v,g,h,s,l),c=this.year}else{var m=f-u[p-1][2],y=u[p][2]-f,S=m<y?p-1:p;r=Ar(u[S],2),c=r[0],d=r[1]}return c.every(d)},t.prototype.invert=function(e){return new Date(o.prototype.invert.call(this,e))},t.prototype.ticks=function(){if(!this.domain||this.domain.length<2)return[];this.refresh();var e=Ar(this.getDomain().map(pr),2),r=e[0],n=e[1];if(this.interval!==void 0)return this.getTicksForInterval({start:r,stop:n});if(this.nice){var i=this.tickCount;if(i===2)return this.niceDomain;if(i===1)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:r,stop:n})},t.prototype.getDefaultTicks=function(e){var r=e.start,n=e.stop,i=this.getTickInterval({start:r,stop:n,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return i?i.range(new Date(r),new Date(n)):[]},t.prototype.getTicksForInterval=function(e){var r=e.start,n=e.stop,i=this,a=i.interval,s=i.tickIntervals;if(!a)return[];if(a instanceof Ko){var l=a.range(new Date(r),new Date(n));return this.isDenseInterval({start:r,stop:n,interval:a,count:l.length})?this.getDefaultTicks({start:r,stop:n}):l}var u=Math.abs(a);if(this.isDenseInterval({start:r,stop:n,interval:u}))return this.getDefaultTicks({start:r,stop:n});var c=Zn([],Ar(s));c.reverse();var d=c.find(function(g){return u%g[2]===0});if(d){var h=d[0].every(u/(d[2]/d[1]));return h.range(new Date(r),new Date(n))}for(var f=new Date(r),p=new Date(n),v=[];f<=p;)v.push(f),f=new Date(f),f.setMilliseconds(f.getMilliseconds()+u);return v},t.prototype.tickFormat=function(e){var r=e.ticks,n=e.specifier;return n==null?this.defaultTickFormat(r):Ul(n)},t.prototype.update=function(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()},t.prototype.updateNiceDomain=function(){for(var e=4,r=Ar(this.domain,2),n=r[0],i=r[1],a=0;a<e;a++){this.updateNiceDomainIteration(n,i);var s=Ar(this.niceDomain,2),l=s[0],u=s[1];if(pr(n)===pr(l)&&pr(i)===pr(u))break;n=l,i=u}},t.prototype.updateNiceDomainIteration=function(e,r){var n=pr(e),i=pr(r),a=this.interval,s;if(a instanceof Ko)s=a;else{var l=typeof a=="number"?(i-n)/Math.max(a,1):this.tickCount;s=this.getTickInterval({start:n,stop:i,count:l,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(s){var u=s.range(e,r,!0),c=u[0],d=u[u.length-1];this.niceDomain=[c,d]}},t}(De),Kl=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Pf=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Qe,Ho=function(o){return"("+o+")"},an=function(o){return Ho(o)+"?"},Af=function(o){return an("?:"+o)},wO=function(){var o=".",t="[<>=^]",e="[+\\-( ]",r="[$€£¥₣₹#]",n="0",i="\\d+",a=",",s="\\d+",l="~",u="[%a-z]";return new RegExp(["^",Af(""+an(o)+Ho(t)),an(e),an(r),an(n),an(i),an(a),Af("\\."+Ho(s)),an(l),an(u),"$"].join(""),"i")}(),bO=function(){var o=".*?",t=".+?",e=".*?";return new RegExp(["^",Ho(o),"#\\{"+Ho(t)+"\\}",Ho(e),"$"].join(""))}();function bg(o){var t,e,r,n=bO.exec(o);n&&(t=Kl(n,4),e=t[1],o=t[2],r=t[3]);var i=wO.exec(o);if(!i)throw new Error("The number formatter is invalid: "+o);var a=Kl(i,11),s=a[1],l=a[2],u=a[3],c=a[4],d=a[5],h=a[6],f=a[7],p=a[8],v=a[9],g=a[10];return{fill:s,align:l,sign:u,symbol:c,zero:d,width:parseInt(h),comma:f,precision:parseInt(p),trim:!!v,type:g,prefix:e,suffix:r}}function _g(o){var t=typeof o=="string"?bg(o):o,e=t.fill,r=t.align,n=t.sign,i=n===void 0?"-":n,a=t.symbol,s=t.zero,l=t.width,u=t.comma,c=t.type,d=t.prefix,h=d===void 0?"":d,f=t.suffix,p=f===void 0?"":f,v=t.precision,g=t.trim,m=v===void 0||isNaN(v),y;if(!c)y=zt.g,g=!0;else if(c in zt&&c in Io)y=m?Io[c]:zt[c];else if(c in zt)y=zt[c];else if(c in Io)y=Io[c];else throw new Error("The number formatter type is invalid: "+c);var S;return v==null||m?S=c?6:12:S=v,function(C){var w=y(C,S);return g&&(w=_O(w)),u&&(w=OO(w,u)),w=AO(C,w,i),a&&a!=="#"&&(w=""+a+w),a==="#"&&c==="x"&&(w="0x"+w),c==="s"&&(w=""+w+EO(C)),(c==="%"||c==="p")&&(w=w+"%"),l!=null&&!isNaN(l)&&(w=DO(w,l,e??s,r)),w=""+h+w+p,w}}var el=function(o){return Math.floor(Math.abs(o))},Io={b:function(o){return el(o).toString(2)},c:function(o){return String.fromCharCode(o)},d:function(o){return Math.round(Math.abs(o)).toFixed(0)},o:function(o){return el(o).toString(8)},x:function(o){return el(o).toString(16)},X:function(o){return Io.x(o).toUpperCase()},n:function(o){return Io.d(o)},"%":function(o){return""+el(o*100).toFixed(0)}},zt={e:function(o,t){return Math.abs(o).toExponential(t)},E:function(o,t){return zt.e(o,t).toUpperCase()},f:function(o,t){return Math.abs(o).toFixed(t)},F:function(o,t){return zt.f(o,t).toUpperCase()},g:function(o,t){if(o===0)return"0";var e=Math.abs(o),r=Math.floor(Math.log10(e));return r>=-4&&r<t?e.toFixed(t-1-r):e.toExponential(t-1)},G:function(o,t){return zt.g(o,t).toUpperCase()},n:function(o,t){return zt.g(o,t)},p:function(o,t){return zt.r(o*100,t)},r:function(o,t){if(o===0)return"0";var e=Math.abs(o),r=Math.floor(Math.log10(e)),n=r-(t-1);if(n<=0)return e.toFixed(-n);var i=Math.pow(10,n);return(Math.round(e/i)*i).toFixed()},s:function(o,t){var e=Og(o);return zt.r(o/Math.pow(10,e),t)},"%":function(o,t){return zt.f(o*100,t)}};function _O(o){return o.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}function OO(o,t){var e=o.indexOf(".");e<0&&(e=o.length);for(var r=o.substring(0,e).split(""),n=o.substring(e),i=r.length-3;i>0;i-=3)r.splice(i,0,t);return""+r.join("")+n}function EO(o){return TO[Og(o)]}function Og(o){var t=Math.log10(Math.abs(o)),e=Math.floor(t/3)*3;return Math.max(Eg,Math.min(Tg,e))}var Eg=-24,Tg=24,TO=(Qe={},Qe[Eg]="y",Qe[-21]="z",Qe[-18]="a",Qe[-15]="f",Qe[-12]="p",Qe[-9]="n",Qe[-6]="µ",Qe[-3]="m",Qe[0]="",Qe[3]="k",Qe[6]="M",Qe[9]="G",Qe[12]="T",Qe[15]="P",Qe[18]="E",Qe[21]="Z",Qe[Tg]="Y",Qe),PO="−";function AO(o,t,e){if(e===void 0&&(e=""),e==="(")return o>=0?t:"("+t+")";var r=e==="+"?"+":"";return""+(o>=0?r:PO)+t}function DO(o,t,e,r){e===void 0&&(e=" "),r===void 0&&(r=">");var n=o;if(r===">"||!r)n=n.padStart(t,e);else if(r==="<")n=n.padEnd(t,e);else if(r==="^"){var i=Math.max(0,t-n.length),a=Math.ceil(i/2),s=Math.floor(i/2);n=n.padStart(a+n.length,e),n=n.padEnd(s+n.length,e)}return n}function MO(o,t){var e=bg(t??",f"),r=e.precision;(r==null||isNaN(r))&&(e.type==="f"||e.type==="%"?e.precision=Math.max.apply(Math,Pf([],Kl(o.map(function(i){if(typeof i!="number"||i===0)return 0;var a=Math.floor(Math.log10(Math.abs(i))),s=e.type?6:12,l=i.toExponential(s-1).replace(/\.?0+e/,"e"),u=l.indexOf(".");if(u<0)return a>=0?0:-a;var c=l.indexOf("e")-u;return Math.max(0,c-a-1)})))):(!e.type||e.type in zt)&&(e.precision=Math.max.apply(Math,Pf([],Kl(o.map(function(i){if(typeof i!="number")return 0;var a=i.toExponential((e.type?6:12)-1).replace(/\.?0+e/,"e");return a.substring(0,a.indexOf("e")).replace(".","").length}))))));var n=_g(e);return function(i){return n(Number(i))}}var RO=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),IO=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},tl=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Df=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Mf=function(o){return o},Pg=function(o){RO(t,o);function t(){var e=o.call(this,[1,10],[0,1])||this;return e.type="log",e.base=10,e.cacheProps=["domain","range","nice","tickCount","base"],e.baseLog=Mf,e.basePow=Mf,e.log=function(r){return e.domain[0]>=0?e.baseLog(r):-e.baseLog(-r)},e.pow=function(r){return e.domain[0]>=0?e.basePow(r):-e.basePow(-r)},e}return t.prototype.toDomain=function(e){return e},t.prototype.transform=function(e){return this.domain[0]>=0?Math.log(e):-Math.log(-e)},t.prototype.transformInvert=function(e){return this.domain[0]>=0?Math.exp(e):-Math.exp(-e)},t.prototype.update=function(){!this.domain||this.domain.length<2||(this.updateLogFn(),this.updatePowFn(),this.nice&&this.updateNiceDomain())},t.prototype.updateLogFn=function(){var e=this.base,r;if(e===10)r=Math.log10;else if(e===Math.E)r=Math.log;else if(e===2)r=Math.log2;else{var n=Math.log(e);r=function(i){return Math.log(i)/n}}this.baseLog=r},t.prototype.updatePowFn=function(){var e=this.base,r;e===10?r=t.pow10:e===Math.E?r=Math.exp:r=function(n){return Math.pow(e,n)},this.basePow=r},t.prototype.updateNiceDomain=function(){var e=tl(this.domain,2),r=e[0],n=e[1],i=this.pow(Math.floor(this.log(r))),a=this.pow(Math.ceil(this.log(n)));this.niceDomain=[i,a]},t.pow10=function(e){return e>=0?Math.pow(10,e):1/Math.pow(10,-e)},t.prototype.ticks=function(){var e=this,r,n=(r=this.tickCount)!==null&&r!==void 0?r:10;if(!this.domain||this.domain.length<2||n<1)return[];this.refresh();var i=this.base,a=tl(this.getDomain(),2),s=a[0],l=a[1],u=this.log(s),c=this.log(l);if(this.interval){var d=Math.abs(this.interval),h=Math.abs(c-u),f=Wl(u,c,Math.min(h,d)).map(function(L){return e.pow(L)}).filter(function(L){return L>=s&&L<=l});if(!this.isDenseInterval({start:s,stop:l,interval:d,count:f.length}))return f}var p=i%1===0,v=c-u>=n;if(!p||v)return Zd(u,c,Math.min(c-u,n)).map(function(L){return e.pow(L)});var g=[],m=s>0;u=Math.floor(u)-1,c=Math.round(c)+1;for(var y=Math.min.apply(Math,Df([],tl(this.range))),S=Math.max.apply(Math,Df([],tl(this.range))),C=(S-y)/n,w=1/0,x=u;x<=c;x++)for(var b=this.convert(this.pow(x+1)),_=1;_<i;_++){var T=m?_:i-_+1,O=this.pow(x)*T,P=this.convert(O),M=Math.abs(w-P),I=Math.abs(P-b),R=M>=C&&I>=C;O>=s&&O<=l&&(_===1||R)&&(g.push(O),w=P)}return g},t.prototype.tickFormat=function(e){var r=e.count,n=e.ticks,i=e.specifier,a=this.base;return i==null&&(i=a===10?".0e":","),typeof i=="string"&&(i=_g(i)),r===1/0?i:(n==null&&this.ticks(),function(s){return i(s)})},IO([A(J(0))],t.prototype,"base",void 0),t}(De);function Xt(o){var t=o.length;if(t!==0){for(var e=1/0,r=-1/0,n=0;n<t;n++){var i=o[n];i instanceof Date&&(i=i.getTime()),typeof i=="number"&&(i<e&&(e=i),i>r&&(r=i))}var a=[e,r];if(!a.some(function(s){return!isFinite(s)}))return a}}function LO(o,t,e){var r;return o.length>2&&(o=(r=Xt(o))!==null&&r!==void 0?r:[NaN,NaN]),isNaN(t)||(o=[t,o[1]]),isNaN(e)||(o=[o[0],e]),o[0]>o[1]&&(o=[]),o}var Yi=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Or=function(){function o(){this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"}return o.prototype.getFont=function(){return Ei(this)},Yi([A(Re)],o.prototype,"enabled",void 0),Yi([A(J(0))],o.prototype,"fontSize",void 0),Yi([A(St)],o.prototype,"fontFamily",void 0),Yi([A(Mi)],o.prototype,"fontStyle",void 0),Yi([A(Ri)],o.prototype,"fontWeight",void 0),Yi([A(Kt)],o.prototype,"color",void 0),o}();function th(o){var t=o.parallelFlipRotation,e=t===void 0?0:t,r=o.regularFlipRotation,n=r===void 0?0:r,i=o.rotation?Rt(or(o.rotation)):0,a=!i&&e>=0&&e<=Math.PI?-1:1,s=!i&&n>=0&&n<=Math.PI?-1:1,l=0;return o.parallel?l=a*Math.PI/2:s===-1&&(l=Math.PI),{configuredRotation:i,defaultRotation:l,parallelFlipFlag:a,regularFlipFlag:s}}function FO(o,t){return isNaN(o)?t?0:10:o}function kO(o,t,e,r){return o&&!t?e*r===-1?"hanging":"bottom":"middle"}function hc(o,t,e,r,n){var i=t>0&&t<=Math.PI,a=e>0&&e<=Math.PI,s=i||a?-1:1;if(o)if(t||e){if(r*s===-1)return"end"}else return"center";else if(r*n===-1)return"end";return"start"}function NO(o,t,e,r,n){var i=t.width,a=t.height,s=new Ee(e,r,0,0);n.transformBBox(s,t);var l=t.x,u=l===void 0?0:l,c=t.y,d=c===void 0?0:c;return t.width=i,t.height=a,{point:{x:u,y:d,size:0},label:{width:i,height:a,text:o}}}function jn(o,t){return t===void 0&&(t=[void 0]),ta(function(e,r,n){return t.includes(n)?o:n})}var ot=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ag=function(){function o(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.autoRotate=void 0,this.autoRotateAngle=335,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0,this.format=void 0}return o.prototype.getSideFlag=function(){return this.mirrored?1:-1},o.prototype.getFont=function(){return Ei(this)},ot([A(Re)],o.prototype,"enabled",void 0),ot([A(Ur)],o.prototype,"autoWrap",void 0),ot([A(Pe(0))],o.prototype,"maxWidth",void 0),ot([A(Pe(0))],o.prototype,"maxHeight",void 0),ot([A(Mi)],o.prototype,"fontStyle",void 0),ot([A(Ri)],o.prototype,"fontWeight",void 0),ot([A(J(1))],o.prototype,"fontSize",void 0),ot([A(St)],o.prototype,"fontFamily",void 0),ot([A(J(0))],o.prototype,"padding",void 0),ot([A(Vn()),jn(NaN)],o.prototype,"minSpacing",void 0),ot([A(Fe)],o.prototype,"color",void 0),ot([A(Pe(-360,360))],o.prototype,"rotation",void 0),ot([A(Ur)],o.prototype,"autoRotate",void 0),ot([A(J(-360,360))],o.prototype,"autoRotateAngle",void 0),ot([A(Re)],o.prototype,"avoidCollisions",void 0),ot([A(Re)],o.prototype,"mirrored",void 0),ot([A(Re)],o.prototype,"parallel",void 0),ot([A(de)],o.prototype,"format",void 0),o}(),Rf=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Dg=function(){function o(){this.width=1,this.color="rgba(195, 195, 195, 1)"}return Rf([A(J(0))],o.prototype,"width",void 0),Rf([A(Fe)],o.prototype,"color",void 0),o}(),wn=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},GO=ue(function(o,t){return J(0)(o,t)||o instanceof Ko},"expecting a tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),VO=ue(function(o,t){return je(o,t,GO)},"expecting an optional tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),jO=ue(function(o,t){return je(o,t,function(e,r){return e!==0&&J(0)(e,r)||e instanceof Ko})},"expecting an optional non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),rh=function(){function o(){this.enabled=!0,this.width=1,this.size=6,this.color="rgba(195, 195, 195, 1)",this.count=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}return wn([A(Re)],o.prototype,"enabled",void 0),wn([A(J(0))],o.prototype,"width",void 0),wn([A(J(0))],o.prototype,"size",void 0),wn([A(Fe)],o.prototype,"color",void 0),wn([A(VO),eb("Use tick.interval or tick.minSpacing and tick.maxSpacing instead")],o.prototype,"count",void 0),wn([A(jO)],o.prototype,"interval",void 0),wn([A(zd())],o.prototype,"values",void 0),wn([A(vn(Vn(1),mu("maxSpacing"))),jn(NaN)],o.prototype,"minSpacing",void 0),o}(),nh=function(){function o(t,e){this.state=t,this.states=e,o.DEBUG()&&re.debug("%c"+this.constructor.name+" | init -> "+t,"color: green")}return o.prototype.transition=function(t,e){var r,n,i,a,s,l=this.states[this.state],u=(r=l==null?void 0:l.on)===null||r===void 0?void 0:r[t];if(!u){o.DEBUG()&&re.debug("%c"+this.constructor.name+" | "+this.state+" -> "+t+" -> "+this.state,"color: grey");return}var c=u.target,d=this.states[c];return o.DEBUG()&&re.debug("%c"+this.constructor.name+" | "+this.state+" -> "+t+" -> "+c,"color: green"),u.action(e),(i=(n=l==null?void 0:l.actions)===null||n===void 0?void 0:n.onExit)===null||i===void 0||i.call(n),(s=(a=d==null?void 0:d.actions)===null||a===void 0?void 0:a.onEnter)===null||s===void 0||s.call(a),this.state=c,this.state},o.DEBUG=function(){var t;return(t=[!0,"animation"].includes(mr("agChartsDebug")))!==null&&t!==void 0?t:!1},o}(),BO=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Si=function(){return Si=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Si.apply(this,arguments)},fc=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},HO=function(o,t){var e={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&t.indexOf(r)<0&&(e[r]=o[r]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(o);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(o,r[n])&&(e[r[n]]=o[r[n]]);return e},rl=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Jr=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},qi=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},zO=["stroke","lineDash"],WO=ue(zn(void 0,function(o){for(var t in o)if(!zO.includes(t))return!1;return!0}),"expecting an Array of objects with gridline style properties such as 'stroke' and 'lineDash'"),ts;(function(o){o[o.TickLine=0]="TickLine",o[o.TickLabel=1]="TickLabel",o[o.GridLine=2]="GridLine",o[o.GridArc=3]="GridArc",o[o.AxisLine=4]="AxisLine"})(ts||(ts={}));var gr;(function(o){o[o.CREATE=0]="CREATE",o[o.CREATE_SECONDARY=1]="CREATE_SECONDARY",o[o.FILTER=2]="FILTER",o[o.VALUES=3]="VALUES"})(gr||(gr={}));var UO=function(o){BO(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t}(nh),Mg=function(){function o(t,e){var r=this;this.moduleCtx=t,this.id=gn(this),this.nice=!0,this.dataDomain=[],this.keys=[],this.boundSeries=[],this.includeInvisibleDomains=!1,this.axisGroup=new le({name:this.id+"-axis",zIndex:Xe.AXIS_ZINDEX}),this.lineNode=this.axisGroup.appendChild(new nt),this.tickLineGroup=this.axisGroup.appendChild(new le({name:this.id+"-Axis-tick-lines",zIndex:Xe.AXIS_ZINDEX})),this.tickLabelGroup=this.axisGroup.appendChild(new le({name:this.id+"-Axis-tick-labels",zIndex:Xe.AXIS_ZINDEX})),this.crossLineGroup=new le({name:this.id+"-CrossLines"}),this.gridGroup=new le({name:this.id+"-Axis-grid"}),this.gridLineGroup=this.gridGroup.appendChild(new le({name:this.id+"-gridLines",zIndex:Xe.AXIS_GRID_ZINDEX})),this.tickLineGroupSelection=Ge.select(this.tickLineGroup,nt,!1),this.tickLabelGroupSelection=Ge.select(this.tickLabelGroup,Me,!1),this.gridLineGroupSelection=Ge.select(this.gridLineGroup,nt,!1),this.line=new Dg,this.tick=this.createTick(),this.label=new Ag,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.modules={},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new Bo,this._gridLength=0,this.gridStyle=[{stroke:"rgba(219, 219, 219, 1)",lineDash:[4,2]}],this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.maxThickness=1/0,this._scale=e,this.refreshScale(),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node);var n=t.interactionManager.addListener("hover",function(i){return r.checkAxisHover(i)});this.destroyFns.push(function(){return t.interactionManager.removeListener(n)}),this.animationManager=t.animationManager,this.animationState=new UO("empty",{empty:{on:{update:{target:"align",action:function(){return r.resetSelectionNodes()}}}},align:{on:{update:{target:"ready",action:function(){return r.resetSelectionNodes()}}}},ready:{on:{update:{target:"ready",action:function(i){return r.animateReadyUpdate(i)}}}}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines)}return Object.defineProperty(o.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"type",{get:function(){var t;return(t=this.constructor.type)!==null&&t!==void 0?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"crossLines",{get:function(){return this._crossLines},set:function(t){var e=this,r,n;(r=this._crossLines)===null||r===void 0||r.forEach(function(i){return e.detachCrossLine(i)}),t&&this.assignCrossLineArrayConstructor(t),this._crossLines=t,(n=this._crossLines)===null||n===void 0||n.forEach(function(i){e.attachCrossLine(i),e.initCrossLine(i)})},enumerable:!1,configurable:!0}),o.prototype.attachCrossLine=function(t){this.crossLineGroup.appendChild(t.group)},o.prototype.detachCrossLine=function(t){this.crossLineGroup.removeChild(t.group)},o.prototype.destroy=function(){var t,e;try{for(var r=rl(Object.entries(this.modules)),n=r.next();!n.done;n=r.next()){var i=Jr(n.value,2),a=i[0],s=i[1];s.instance.destroy(),delete this.modules[a],delete this[a]}}catch(l){t={error:l}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.destroyFns.forEach(function(l){return l()})},o.prototype.refreshScale=function(){var t=this,e;this.range=this.scale.range.slice(),(e=this.crossLines)===null||e===void 0||e.forEach(function(r){t.initCrossLine(r)})},o.prototype.updateRange=function(){var t,e=this,r=e.range,n=e.visibleRange,i=e.scale,a=(r[1]-r[0])/(n[1]-n[0]),s=a*n[0],l=r[0]-s;i.range=[l,l+a],(t=this.crossLines)===null||t===void 0||t.forEach(function(u){u.clippedRange=[r[0],r[1]]})},o.prototype.setCrossLinesVisible=function(t){this.crossLineGroup.visible=t},o.prototype.attachAxis=function(t){t.appendChild(this.gridGroup),t.appendChild(this.axisGroup),t.appendChild(this.crossLineGroup)},o.prototype.detachAxis=function(t){t.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)},o.prototype.inRange=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),this.inRangeEx(t,e,r)===0},o.prototype.inRangeEx=function(t,e,r){e===void 0&&(e=0),r===void 0&&(r=0);var n=this.range,i=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return t+e<i-r?-1:t>a+r?1:0},o.prototype.onLabelFormatChange=function(t,e){var r=this,n=r.scale,i=r.fractionDigits,a=n instanceof Pg,s=!a&&i>0?function(l){return typeof l=="number"?l.toFixed(i):String(l)}:function(l){return String(l)};if(e&&n&&n.tickFormat)try{this.labelFormatter=n.tickFormat({ticks:t,specifier:e})}catch{this.labelFormatter=s,re.warnOnce("the axis label format string "+e+" is invalid. No formatting will be applied")}else this.labelFormatter=s},o.prototype.setDomain=function(){var t,e=this,r=e.scale,n=e.dataDomain,i=e.tick.values;if(i&&r instanceof De){var a=Jr((t=Xt(i))!==null&&t!==void 0?t:[1/0,-1/0],2),s=a[0],l=a[1],u=Math.min(r.fromDomain(n[0]),s),c=Math.max(r.fromDomain(n[1]),l);r.domain=[r.toDomain(u),r.toDomain(c)]}else r.domain=n},o.prototype.setTickInterval=function(t){var e;this.scale.interval=(e=this.tick.interval)!==null&&e!==void 0?e:t},o.prototype.setTickCount=function(t,e,r){var n=this.scale;if(t&&n instanceof De){if(typeof t=="number"){n.tickCount=t,n.minTickCount=e??0,n.maxTickCount=r??1/0;return}n instanceof eh&&this.setTickInterval(t)}},Object.defineProperty(o.prototype,"gridLength",{get:function(){return this._gridLength},set:function(t){var e=this,r;(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineGroupSelection=this.gridLineGroupSelection.clear()),this._gridLength=t,(r=this.crossLines)===null||r===void 0||r.forEach(function(n){e.initCrossLine(n)})},enumerable:!1,configurable:!0}),o.prototype.createTick=function(){return new rh},o.prototype.checkAxisHover=function(t){var e=this.computeBBox(),r=e.containsPoint(t.offsetX,t.offsetY);r&&this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)},o.prototype.update=function(t){var e=this.tickLabelGroupSelection.nodes().map(function(g){return g.datum.tickId}),r=this.calculateRotations(),n=r.rotation,i=r.parallelFlipRotation,a=r.regularFlipRotation,s=this.label.getSideFlag(),l=s*(this.tick.size+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.updatePosition({rotation:n,sideFlag:s}),this.updateLine();var u=this.generateTicks({primaryTickCount:t,parallelFlipRotation:i,regularFlipRotation:a,labelX:l,sideFlag:s}),c=u.tickData,d=u.combinedRotation,h=u.textBaseline,f=u.textAlign,p=HO(u,["tickData","combinedRotation","textBaseline","textAlign"]);if(this.updateSelections(c.ticks),this.animationManager.skipAnimations)this.resetSelectionNodes();else{var v=this.calculateUpdateDiff(e,c);this.animationState.transition("update",v)}return this.updateLabels({tickLabelGroupSelection:this.tickLabelGroupSelection,combinedRotation:d,textBaseline:h,textAlign:f,labelX:l}),this.updateVisibility(),this.updateGridLines(s),this.updateTickLines(s),this.updateTitle({anyTickVisible:c.ticks.length>0,sideFlag:s}),this.updateCrossLines({rotation:n,parallelFlipRotation:i,regularFlipRotation:a,sideFlag:s}),this.updateLayoutState(),t=p.primaryTickCount,t},o.prototype.updateLayoutState=function(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}},o.prototype.updateScale=function(){this.updateRange(),this.calculateDomain(),this.setDomain(),this.setTickInterval(this.tick.interval);var t=this,e=t.scale,r=t.nice;e instanceof De&&(this.setTickCount(this.tick.count),e.nice=r,e.update())},o.prototype.calculateRotations=function(){var t=or(this.rotation),e=Rt(t),r=Rt(t-Math.PI/2);return{rotation:t,parallelFlipRotation:e,regularFlipRotation:r}},o.prototype.generateTicks=function(t){for(var e,r,n,i,a=t.primaryTickCount,s=t.parallelFlipRotation,l=t.regularFlipRotation,u=t.labelX,c=t.sideFlag,d=this,h=d.scale,f=d.tick,p=d.label,v=p.parallel,g=p.rotation,m=p.fontFamily,y=p.fontSize,S=p.fontStyle,C=p.fontWeight,w=a!==void 0,x=th({rotation:g,parallel:v,regularFlipRotation:l,parallelFlipRotation:s}),b=x.defaultRotation,_=x.configuredRotation,T=x.parallelFlipFlag,O=x.regularFlipFlag,P=_+b,M=new gi,I=this.estimateTickCount({minSpacing:f.minSpacing,maxSpacing:(i=f.maxSpacing)!==null&&i!==void 0?i:NaN}).maxTickCount,R=h instanceof De,L=f.count||!R||isNaN(I)?10:I,F=hc(v,_,0,c,O),k=kO(v,_,c,T),N={fontFamily:m,fontSize:y,fontStyle:S,fontWeight:C,textBaseline:k,textAlign:F},G={rawTicks:[],ticks:[],labelCount:0},$=0,j=0,z=!0,W=!1;z&&$<=L&&!W;){j=0,F=hc(v,_,0,c,O);var Y=this.getTickStrategies({secondaryAxis:w,index:$});try{for(var H=(e=void 0,rl(Y)),K=H.next();!K.done;K=H.next()){var q=K.value;n=q({index:$,tickData:G,textProps:N,labelOverlap:z,terminate:W,primaryTickCount:a}),G=n.tickData,$=n.index,j=n.autoRotation,W=n.terminate;var Q=G.ticks;F=hc(v,_,j,c,O);var se=_!==0||j!==0,ae=P+j;z=this.checkLabelOverlap(ae,se,M,Q,u,Si(Si({},N),{textAlign:F}))}}catch(_e){e={error:_e}}finally{try{K&&!K.done&&(r=H.return)&&r.call(H)}finally{if(e)throw e.error}}}var xe=b+_+j;return!w&&G.rawTicks.length>0&&(a=G.rawTicks.length),{tickData:G,primaryTickCount:a,combinedRotation:xe,textBaseline:k,textAlign:F}},o.prototype.getTickStrategies=function(t){var e=this,r=t.index,n=t.secondaryAxis,i=this,a=i.scale,s=i.label,l=i.tick,u=a instanceof De,c=s.enabled&&s.avoidCollisions,d=!(u&&this.tick.count===void 0)&&r!==0&&c,h=s.autoRotate===!0&&s.rotation===void 0,f=[],p;this.tick.values?p=gr.VALUES:n?p=gr.CREATE_SECONDARY:d?p=gr.FILTER:p=gr.CREATE;var v=function(S){var C=S.index,w=S.tickData,x=S.primaryTickCount,b=S.terminate;return e.createTickData(p,C,w,b,x)};if(f.push(v),!u&&!isNaN(l.minSpacing)){var g=function(S){var C=S.index,w=S.tickData,x=S.primaryTickCount,b=S.terminate;return e.createTickData(gr.FILTER,C,w,b,x)};f.push(g)}if(!c)return f;if(s.autoWrap){var m=function(S){var C=S.index,w=S.tickData,x=S.textProps;return e.wrapLabels(w,C,x)};f.push(m)}else if(h){var y=function(S){var C=S.index,w=S.tickData,x=S.labelOverlap,b=S.terminate;return{index:C,tickData:w,autoRotation:e.getAutoRotation(x),terminate:b}};f.push(y)}return f},o.prototype.createTickData=function(t,e,r,n,i){for(var a,s,l,u=this,c=u.scale,d=u.tick,h=this.estimateTickCount({minSpacing:d.minSpacing,maxSpacing:(a=d.maxSpacing)!==null&&a!==void 0?a:NaN}),f=h.maxTickCount,p=h.minTickCount,v=h.defaultTickCount,g=c instanceof De,m=d.count||!g||isNaN(f)?10:f,y=(s=d.count)!==null&&s!==void 0?s:g?Math.max(v-e,p):f,S=d.interval===void 0&&d.values===void 0&&d.count===void 0&&y>p&&(g||t===gr.FILTER),C=!0;C&&e<=m;){var w=r.rawTicks;y=(l=d.count)!==null&&l!==void 0?l:g?Math.max(v-e,p):f;var x=this.getTicks({tickGenerationType:t,previousTicks:w,tickCount:y,minTickCount:p,maxTickCount:f,primaryTickCount:i}),b=x.rawTicks,_=x.ticks,T=x.labelCount;r.rawTicks=b,r.ticks=_,r.labelCount=T,C=S?fO(b,w):!1,e++}var O=d.interval!==void 0||d.values!==void 0;return n||(n=O),{tickData:r,index:e,autoRotation:0,terminate:n}},o.prototype.checkLabelOverlap=function(t,e,r,n,i,a){gi.updateTransformMatrix(r,1,1,t,0,0);var s=this.createLabelData(n,i,a,r),l=FO(this.label.minSpacing,e);return Ib(s,l)},o.prototype.createLabelData=function(t,e,r,n){var i,a,s=[];try{for(var l=rl(t),u=l.next();!u.done;u=l.next()){var c=u.value,d=c.tickLabel,h=c.translationY;if(!(d===""||d==null)){var f=Yv(d),p=Aw(f,e,h,r),v=p.width,g=p.height,m=new Ee(e,h,v,g),y=NO(d,m,e,h,n);s.push(y)}}}catch(S){i={error:S}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return s},o.prototype.getAutoRotation=function(t){return t?Rt(or(this.label.autoRotateAngle)):0},o.prototype.getTicks=function(t){var e,r=t.tickGenerationType,n=t.previousTicks,i=t.tickCount,a=t.minTickCount,s=t.maxTickCount,l=t.primaryTickCount,u=this.scale,c=[];switch(r){case gr.VALUES:c=this.tick.values;break;case gr.CREATE_SECONDARY:c=this.updateSecondaryAxisTicks(l);break;case gr.FILTER:c=this.filterTicks(n,i);break;default:c=this.createTicks(i,a,s);break}this.onLabelFormatChange(c,this.label.format),this.fractionDigits=c.fractionDigits>=0?c.fractionDigits:0;for(var d=((e=this.scale.bandwidth)!==null&&e!==void 0?e:0)/2,h=[],f=0,p=new Map,v=0;v<c.length;v++){var g=c[v],m=u.convert(g)+d,y=this.formatTick(g,v),S=y;if(p.has(S)){var C=p.get(S);p.set(S,C+1),S=S+"_"+C}else p.set(S,1);h.push({tick:g,tickId:S,tickLabel:y,translationY:m}),!(y===""||y==null)&&f++}return{rawTicks:c,ticks:h,labelCount:f}},o.prototype.filterTicks=function(t,e){var r,n=!isNaN(this.tick.minSpacing)||!isNaN((r=this.tick.maxSpacing)!==null&&r!==void 0?r:NaN),i=n?Math.ceil(t.length/e):2;return t.filter(function(a,s){return s%i===0})},o.prototype.createTicks=function(t,e,r){var n,i,a;return this.setTickCount(t,e,r),(a=(i=(n=this.scale).ticks)===null||i===void 0?void 0:i.call(n))!==null&&a!==void 0?a:[]},o.prototype.estimateTickCount=function(t){var e=t.minSpacing,r=t.maxSpacing,n=this.calculateAvailableRange(),i=Math.max(o.defaultTickMinSpacing,n/De.defaultMaxTickCount);isNaN(e)&&isNaN(r)?(e=i,r=n,e>r&&(r=e)):isNaN(e)?(e=i,e>r&&(e=r)):isNaN(r)&&(r=n,e>r&&(r=e));var a=Math.max(1,Math.floor(n/e)),s=Math.min(a,Math.ceil(n/r)),l=De.defaultTickCount;return l>a?l=a:l<s&&(l=s),{minTickCount:s,maxTickCount:a,defaultTickCount:l}},o.prototype.updateVisibility=function(){var t=this.range,e=Math.min.apply(Math,qi([],Jr(t))),r=Math.max.apply(Math,qi([],Jr(t))),n=function(u){var c=Math.floor(e),d=Math.ceil(r);if(c===d){u.visible=!1;return}u.translationY>=c-1&&u.translationY<c&&(u.translationY=c),u.translationY>d&&u.translationY<=d+1&&(u.translationY=d);var h=u.translationY>=c&&u.translationY<=d;u.visible=h},i=this,a=i.gridLineGroupSelection,s=i.tickLineGroupSelection,l=i.tickLabelGroupSelection;a.each(n),s.each(n),l.each(n),this.tickLineGroup.visible=this.tick.enabled,this.tickLabelGroup.visible=this.label.enabled},o.prototype.updateCrossLines=function(t){var e=this,r,n=t.rotation,i=t.parallelFlipRotation,a=t.regularFlipRotation,s=t.sideFlag,l=this.isAnySeriesActive();(r=this.crossLines)===null||r===void 0||r.forEach(function(u){var c;u.sideFlag=-s,u.direction=n===-Math.PI/2?ee.X:ee.Y,u.label.parallel=(c=u.label.parallel)!==null&&c!==void 0?c:e.label.parallel,u.parallelFlipRotation=i,u.regularFlipRotation=a,u.update(l)})},o.prototype.updateTickLines=function(t){var e=this.tick;this.tickLineGroupSelection.each(function(r){r.strokeWidth=e.width,r.stroke=e.color,r.x1=t*e.size,r.x2=0,r.y1=0,r.y2=0})},o.prototype.calculateAvailableRange=function(){var t=this.range,e=Math.min.apply(Math,qi([],Jr(t))),r=Math.max.apply(Math,qi([],Jr(t)));return r-e},o.prototype.calculateDomain=function(){var t,e,r,n=this,i=n.direction,a=n.boundSeries,s=n.includeInvisibleDomains;if(this.linkedTo)this.dataDomain=this.linkedTo.dataDomain;else{var l=[],u=a.filter(function(p){return s||p.isEnabled()});try{for(var c=rl(u),d=c.next();!d.done;d=c.next()){var h=d.value;l.push(h.getDomain(i))}}catch(p){t={error:p}}finally{try{d&&!d.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}var f=(r=new Array).concat.apply(r,qi([],Jr(l)));this.dataDomain=this.normaliseDataDomain(f)}},o.prototype.updatePosition=function(t){var e=t.rotation,r=t.sideFlag,n=this,i=n.crossLineGroup,a=n.axisGroup,s=n.gridGroup,l=n.translation,u=n.gridLineGroupSelection,c=n.gridPadding,d=n.gridLength,h=Math.floor(l.x),f=Math.floor(l.y);i.translationX=h,i.translationY=f,i.rotation=e,a.translationX=h,a.translationY=f,a.rotation=e,s.translationX=h,s.translationY=f,s.rotation=e,u.each(function(p){p.x1=c,p.x2=-r*d+c,p.y1=0,p.y2=0})},o.prototype.updateSecondaryAxisTicks=function(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")},o.prototype.updateSelections=function(t){var e=this.gridLength?t:[],r=this.gridLineGroupSelection.update(e,function(a){var s=new nt;s.tag=ts.GridLine,a.append(s)},function(a){return a.tickId}),n=this.tickLineGroupSelection.update(t,function(a){var s=new nt;s.tag=ts.TickLine,a.appendChild(s)},function(a){return a.tickId}),i=this.tickLabelGroupSelection.update(t,function(a){var s=new Me;s.tag=ts.TickLabel,a.appendChild(s)},function(a){return a.tickId});this.tickLineGroupSelection=n,this.tickLabelGroupSelection=i,this.gridLineGroupSelection=r},o.prototype.updateGridLines=function(t){var e=this,r=e.gridStyle,n=e.tick,i=e.gridPadding,a=e.gridLength;if(!(a===0||r.length===0)){var s=r.length;this.gridLineGroupSelection.each(function(l,u,c){var d=r[c%s];l.x1=i,l.x2=-t*a+i,l.y1=0,l.y2=0,l.stroke=d.stroke,l.strokeWidth=n.width,l.lineDash=d.lineDash,l.fill=void 0})}},o.prototype.updateLabels=function(t){var e=t.tickLabelGroupSelection,r=t.combinedRotation,n=t.textBaseline,i=t.textAlign,a=t.labelX,s=this,l=s.label,u=s.label.enabled;u&&e.each(function(c,d){var h=d.tickLabel;c.fontStyle=l.fontStyle,c.fontWeight=l.fontWeight,c.fontSize=l.fontSize,c.fontFamily=l.fontFamily,c.fill=l.color,c.text=h;var f=c.text===""||c.text==null;if(f){c.visible=!1;return}c.textBaseline=n,c.textAlign=i,c.x=a,c.rotationCenterX=a,c.rotation=r,c.visible=!0})},o.prototype.wrapLabels=function(t,e,r){var n=this.label,i=n.parallel,a=n.maxWidth,s=n.maxHeight,l=i?Math.round(this.calculateAvailableRange()/t.labelCount):this.maxThickness,u=a??l,c=i?this.maxThickness:Math.round(this.calculateAvailableRange()/t.labelCount),d=s??c;return t.ticks.forEach(function(h){var f=h.tickLabel,p="hyphenate",v=Me.wrap(f,u,d,r,p);h.tickLabel=v}),{tickData:t,index:e,autoRotation:0,terminate:!0}},o.prototype.updateLine=function(){var t=this,e=t.lineNode,r=t.range;e.x1=0,e.x2=0,e.y1=r[0],e.y2=r[1],e.strokeWidth=this.line.width,e.stroke=this.line.color,e.visible=!0},o.prototype.updateTitle=function(t){var e,r=t.anyTickVisible,n=t.sideFlag,i=function(T){return T.defaultValue},a=this,s=a.rotation,l=a.title,u=a._titleCaption,c=a.lineNode,d=a.range,h=a.tickLineGroup,f=a.tickLabelGroup,p=a.moduleCtx.callbackCache,v=((e=this.title)!==null&&e!==void 0?e:{}).formatter,g=v===void 0?i:v;if(!l){u.enabled=!1;return}u.enabled=l.enabled,u.fontFamily=l.fontFamily,u.fontSize=l.fontSize,u.fontStyle=l.fontStyle,u.fontWeight=l.fontWeight,u.color=l.color,u.wrapping=l.wrapping;var m=!1,y=u.node;if(l.enabled&&c.visible){m=!0;var S=Rt(s),C=Bo.PADDING,w=n===-1&&S>Math.PI&&S<Math.PI*2?-1:1;y.rotation=w*n*Math.PI/2,y.x=Math.floor(w*n*(d[0]+d[1])/2);var x=0;if(r){var b=le.computeBBox([h,f]),_=s===0?b.width:b.height;Math.abs(_)<1/0&&(x+=_)}n===-1?y.y=Math.floor(w*(-C-x)):y.y=Math.floor(-C-x),y.textBaseline=w===1?"bottom":"top",y.text=p.call(g,this.getTitleFormatterParams())}y.visible=m},o.prototype.formatTick=function(t,e){var r,n,i=this,a=i.label,s=i.labelFormatter,l=i.fractionDigits,u=i.moduleCtx.callbackCache;if(a.formatter){var c=l>0?t:String(t);return(r=u.call(a.formatter,{value:c,index:e,fractionDigits:l,formatter:s}))!==null&&r!==void 0?r:c}else if(s)return(n=u.call(s,t))!==null&&n!==void 0?n:String(t);return String(t)},o.prototype.formatDatum=function(t){return String(t)},o.prototype.computeBBox=function(){return this.axisGroup.computeBBox()},o.prototype.initCrossLine=function(t){t.scale=this.scale,t.gridLength=this.gridLength},o.prototype.isAnySeriesActive=function(){var t=this;return this.boundSeries.some(function(e){return t.includeInvisibleDomains||e.isEnabled()})},o.prototype.clipTickLines=function(t,e,r,n){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new Ee(t,e,r,n))},o.prototype.clipGrid=function(t,e,r,n){this.gridGroup.setClipRectInGroupCoordinateSpace(new Ee(t,e,r,n))},o.prototype.calculatePadding=function(t,e){return[Math.abs(t*.01),Math.abs(t*.01)]},o.prototype.getTitleFormatterParams=function(){var t=this,e,r=this.boundSeries.reduce(function(n,i){for(var a=i.getKeys(t.direction),s=i.getNames(t.direction),l=0;l<a.length;l++)n.push({key:a[l],name:s[l]});return n},[]);return{direction:this.direction,boundSeries:r,defaultValue:(e=this.title)===null||e===void 0?void 0:e.text}},o.prototype.normaliseDataDomain=function(t){return t},o.prototype.getLayoutState=function(){return Si({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.tick.size},this.layout)},o.prototype.createAxisContext=function(){var t=this,e=function(){return t.boundSeries.map(function(r){return r.getKeys(t.direction)}).reduce(function(r,n){return r.push.apply(r,qi([],Jr(n))),r},[])};return{axisId:this.id,direction:this.direction,continuous:this.scale instanceof De,keys:e,scaleValueFormatter:function(r){var n,i,a;return(a=(i=(n=t.scale).tickFormat)===null||i===void 0?void 0:i.call(n,{specifier:r}))!==null&&a!==void 0?a:void 0},scaleBandwidth:function(){var r;return(r=t.scale.bandwidth)!==null&&r!==void 0?r:0},scaleConvert:function(r){return t.scale.convert(r)},scaleInvert:function(r){var n,i,a;return(a=(i=(n=t.scale).invert)===null||i===void 0?void 0:i.call(n,r))!==null&&a!==void 0?a:void 0}}},o.prototype.addModule=function(t){if(this.modules[t.optionsKey]!=null)throw new Error("AG Charts - module already initialised: "+t.optionsKey);this.axisContext==null&&(this.axisContext=this.createAxisContext());var e=new t.instanceConstructor(Si(Si({},this.moduleCtx),{parent:this.axisContext}));this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e},o.prototype.removeModule=function(t){var e,r;(r=(e=this.modules[t.optionsKey])===null||e===void 0?void 0:e.instance)===null||r===void 0||r.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]},o.prototype.isModuleEnabled=function(t){return this.modules[t.optionsKey]!=null},o.prototype.animateReadyUpdate=function(t){var e=this,r,n;if(!t.changed){this.resetSelectionNodes();return}var i=this,a=i.gridLineGroupSelection,s=i.tickLineGroupSelection,l=i.tickLabelGroupSelection,u=Object.keys(t.added).length,c=Object.keys(t.removed).length;if(c===t.tickCount){this.resetSelectionNodes();return}var d=(n=(r=this.animationManager)===null||r===void 0?void 0:r.defaultOptions.duration)!==null&&n!==void 0?n:1e3,h=Math.floor(d/2);u>0&&c>0&&(h=Math.floor(d/3));var f={delay:c>0?h:0,duration:h},p=this.id+"_"+Math.random();l.each(function(v,g){e.animateSelectionNode(l,t,f,v,g,p)}),a.each(function(v,g){e.animateSelectionNode(a,t,f,v,g,p)}),s.each(function(v,g){e.animateSelectionNode(s,t,f,v,g,p)})},o.prototype.animateSelectionNode=function(t,e,r,n,i,a){var s=Math.round(i.translationY),l={from:n.translationY,to:s},u={from:1,to:1},c=r.duration,d=r.delay,h=i.tickLabel;e.added[h]?(l={from:s,to:s},u={from:0,to:1},d+=c):e.removed[h]&&(u={from:1,to:0},d=0);var f=[l,u];this.animationManager.animateManyWithThrottle(this.id+"_ready-update_"+n.id,f,{disableInteractions:!1,delay:d,duration:c,ease:Yo,throttleId:this.id,throttleGroup:a,onUpdate:function(p){var v=Jr(p,2),g=v[0],m=v[1];n.translationY=g,n.opacity=m},onComplete:function(){t.cleanup()}})},o.prototype.resetSelectionNodes=function(){var t=this,e=t.gridLineGroupSelection,r=t.tickLineGroupSelection,n=t.tickLabelGroupSelection;e.cleanup(),r.cleanup(),n.cleanup();var i=function(a){a.translationY=Math.round(a.datum.translationY),a.opacity=1};e.each(i),r.each(i),n.each(i)},o.prototype.calculateUpdateDiff=function(t,e){for(var r,n=new Set,i=new Set,a=Math.max(t.length,e.ticks.length),s=0;s<a;s++){var l=t[s],u=(r=e.ticks[s])===null||r===void 0?void 0:r.tickId;l!==u&&(i.has(u)?i.delete(u):u&&n.add(u),n.has(l)?n.delete(l):l&&i.add(l))}var c={},d={};return n.forEach(function(h){c[h]=!0}),i.forEach(function(h){d[h]=!0}),{changed:n.size>0||i.size>0,tickCount:a,added:c,removed:d}},o.defaultTickMinSpacing=50,fc([A(Re)],o.prototype,"nice",void 0),fc([A(tg)],o.prototype,"keys",void 0),fc([A(WO)],o.prototype,"gridStyle",void 0),o}(),Qr=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},KO=function(){function o(){this.enabled=!1,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.color=void 0,this.wrapping="always",this.formatter=void 0}return Qr([A(Re)],o.prototype,"enabled",void 0),Qr([A(de)],o.prototype,"text",void 0),Qr([A(Mi)],o.prototype,"fontStyle",void 0),Qr([A(Ri)],o.prototype,"fontWeight",void 0),Qr([A(J(0))],o.prototype,"fontSize",void 0),Qr([A(St)],o.prototype,"fontFamily",void 0),Qr([A(Fe)],o.prototype,"color",void 0),Qr([A(Ud)],o.prototype,"wrapping",void 0),Qr([A(Be)],o.prototype,"formatter",void 0),o}(),$O=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ba=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},id=function(o){$O(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.enabled=!0,e.color="rgba(0, 0, 0, 0.5)",e.xOffset=0,e.yOffset=0,e.blur=5,e}return ba([A(Re),ie({redraw:Z.MAJOR})],t.prototype,"enabled",void 0),ba([A(Kt),ie({redraw:Z.MAJOR})],t.prototype,"color",void 0),ba([A(J()),ie({redraw:Z.MAJOR})],t.prototype,"xOffset",void 0),ba([A(J()),ie({redraw:Z.MAJOR})],t.prototype,"yOffset",void 0),ba([A(J(0)),ie({redraw:Z.MAJOR})],t.prototype,"blur",void 0),t}(jd),XO=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),pc=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},it=function(o){XO(t,o);function t(){var e=o.call(this,[0,1],[0,1])||this;return e.type="linear",e}return t.prototype.toDomain=function(e){return e},t.prototype.ticks=function(){var e,r=(e=this.tickCount)!==null&&e!==void 0?e:De.defaultTickCount;if(!this.domain||this.domain.length<2||r<1||this.domain.some(function(u){return!isFinite(u)}))return[];this.refresh();var n=pc(this.getDomain(),2),i=n[0],a=n[1],s=this.interval;if(s){var l=Math.abs(s);if(!this.isDenseInterval({start:i,stop:a,interval:l}))return Wl(i,a,l)}return Zd(i,a,r,this.minTickCount,this.maxTickCount)},t.prototype.update=function(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()},t.prototype.updateNiceDomain=function(){var e,r,n=(e=this.tickCount)!==null&&e!==void 0?e:De.defaultTickCount,i=pc(this.domain,2),a=i[0],s=i[1];if(n<1){this.niceDomain=[a,s];return}if(n===1){this.niceDomain=vO(a,s);return}for(var l=4,u=a,c=s,d=0;d<l;d++){var h=(r=this.interval)!==null&&r!==void 0?r:cs(a,s,n,this.minTickCount,this.maxTickCount),f=pc(this.domain,2),p=f[0],v=f[1];if(h>=1)a=Math.floor(p/h)*h,s=Math.ceil(v/h)*h;else{var g=1/h;a=Math.floor(p*g)/g,s=Math.ceil(v*g)/g}if(a===u&&s===c)break;u=a,c=s}this.niceDomain=[a,s]},t.prototype.tickFormat=function(e){var r=e.ticks,n=e.specifier;return MO(r??this.ticks(),n)},t}(De);function ih(o,t,e){return e===void 0&&(e=1e-10),Math.abs(o-t)<e}function Rg(o,t){t===void 0&&(t=2);var e=Math.floor(Math.log(Math.abs(o))/Math.LN10);return e>=0||!isFinite(e)?o.toFixed(t):o.toFixed(Math.abs(e)-1+t)}function YO(o,t){return o>=0?Math.floor(o%t):Math.floor(o%t+t)}function Ig(o,t,e){var r=Math.sqrt(Math.pow(o,2)+Math.pow(t,2)),n=e.innerRadius,i=e.outerRadius;if(r<Math.min(n,i)||r>Math.max(n,i))return!1;var a=Math.atan2(t,o);a<-Math.PI/2&&(a+=2*Math.PI);var s=e.startAngle,l=e.endAngle;return l===-Math.PI/2?a<s:s===3*Math.PI/2?a>l:a<=l&&a>=s}function If(o,t){var e=t.startAngle,r=t.endAngle,n=t.innerRadius,i=t.outerRadius,a={x:i*Math.cos(e),y:i*Math.sin(e)},s={x:i*Math.cos(r),y:i*Math.sin(r)},l=n===0?{x:0,y:0}:{x:n*Math.cos(e),y:n*Math.sin(e)},u=n===0?{x:0,y:0}:{x:n*Math.cos(r),y:n*Math.sin(r)};return Ja(o.start.x,o.start.y,o.end.x,o.end.y,a.x,a.y,l.x,l.y)!=null||Ja(o.start.x,o.start.y,o.end.x,o.end.y,s.x,s.y,u.x,u.y)!=null||mg(0,0,i,e,r,!0,o.start.x,o.start.y,o.end.x,o.end.y).length>0}function qO(o,t){var e={x:o.x,y:o.y},r={x:o.x+o.width,y:o.y},n={x:o.x,y:o.y+o.height},i={x:o.x+o.width,y:o.y+o.height};return If({start:e,end:r},t)||If({start:n,end:i},t)}var ZO=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qn=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Lg=function(o){ZO(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.centerX=0,e.centerY=0,e.innerRadius=10,e.outerRadius=20,e.startAngle=0,e.endAngle=Math.PI*2,e.angleOffset=0,e}return t.prototype.computeBBox=function(){var e=this.outerRadius;return new Ee(this.centerX-e,this.centerY-e,e*2,e*2)},t.prototype.updatePath=function(){var e=this.path,r=this.angleOffset,n=this.startAngle+r,i=this.endAngle+r,a=Math.min(this.innerRadius,this.outerRadius),s=Math.max(this.innerRadius,this.outerRadius),l=ih(Rt(this.startAngle),Rt(this.endAngle)),u=this.centerX,c=this.centerY;e.clear(),l?(e.arc(u,c,s,n,i),a>0&&(e.moveTo(u+a*Math.cos(i),c+a*Math.sin(i)),e.arc(u,c,a,i,n,!0))):(e.moveTo(u+a*Math.cos(n),c+a*Math.sin(n)),e.arc(u,c,s,n,i),a>0?e.arc(u,c,a,i,n,!0):e.lineTo(u,c)),e.closePath(),this.dirtyPath=!1},t.prototype.isPointInPath=function(e,r){var n=this.angleOffset,i=this.startAngle+n,a=this.endAngle+n,s=Math.min(this.innerRadius,this.outerRadius),l=Math.max(this.innerRadius,this.outerRadius),u=this.transformPoint(e,r);return Ig(u.x,u.y,{startAngle:i,endAngle:a,innerRadius:s,outerRadius:l})},t.className="Sector",Qn([Le()],t.prototype,"centerX",void 0),Qn([Le()],t.prototype,"centerY",void 0),Qn([Le()],t.prototype,"innerRadius",void 0),Qn([Le()],t.prototype,"outerRadius",void 0),Qn([Le()],t.prototype,"startAngle",void 0),Qn([Le()],t.prototype,"endAngle",void 0),Qn([Le()],t.prototype,"angleOffset",void 0),t}(It),JO=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fg=function(o){JO(t,o);function t(e){var r,n,i=e.moduleCtx,a=e.useLabelLayer,s=a===void 0?!1:a,l=e.pickModes,u=l===void 0?[tt.EXACT_SHAPE_MATCH]:l,c=o.call(this,{moduleCtx:i,useLabelLayer:s,pickModes:u,contentGroupVirtual:!1,directionKeys:(r={},r[ee.X]=["angleKey"],r[ee.Y]=["radiusKey"],r),directionNames:(n={},n[ee.X]=["angleName"],n[ee.Y]=["radiusName"],n)})||this;return c.centerX=0,c.centerY=0,c.radius=0,c}return t.prototype.getLabelData=function(){return[]},t.prototype.computeLabelsBBox=function(e,r){return null},t}(Cu),Kr=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),xt=function(){return xt=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},xt.apply(this,arguments)},ge=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Zi=function(o,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):n(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},Ji=function(o,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},_a=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Lf=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},kg=function(o){Kr(t,o);function t(e,r,n,i,a,s,l){var u=o.call(this,a,s,l)||this;return u.angleKey=e,u.calloutLabelKey=r,u.sectorLabelKey=n,u.radiusKey=i,u}return t}(ms),QO=function(o){Kr(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.type="nodeClick",e}return t}(kg),eE=function(o){Kr(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return t}(kg),yr;(function(o){o[o.Sector=0]="Sector",o[o.Callout=1]="Callout",o[o.Label=2]="Label"})(yr||(yr={}));var tE=function(o){Kr(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.offset=3,e.minAngle=0,e.formatter=void 0,e.minSpacing=4,e.maxCollisionOffset=50,e.avoidCollisions=!0,e}return ge([A(J(0))],t.prototype,"offset",void 0),ge([A(J(0))],t.prototype,"minAngle",void 0),ge([A(Be)],t.prototype,"formatter",void 0),ge([A(J(0))],t.prototype,"minSpacing",void 0),ge([A(J(0))],t.prototype,"maxCollisionOffset",void 0),ge([A(Re)],t.prototype,"avoidCollisions",void 0),t}(Or),rE=function(o){Kr(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.positionOffset=0,e.positionRatio=.5,e.formatter=void 0,e}return ge([A(J())],t.prototype,"positionOffset",void 0),ge([A(J(0,1))],t.prototype,"positionRatio",void 0),ge([A(Be)],t.prototype,"formatter",void 0),t}(Or),nE=function(){function o(){this.colors=void 0,this.length=10,this.strokeWidth=1}return ge([A(Nw)],o.prototype,"colors",void 0),ge([A(J(0))],o.prototype,"length",void 0),ge([A(J(0))],o.prototype,"strokeWidth",void 0),o}(),iE=function(o){Kr(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.renderer=void 0,e}return ge([A(Be)],t.prototype,"renderer",void 0),t}(Ii),oE=function(o){Kr(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.showInLegend=!1,e}return ge([A(Re)],t.prototype,"showInLegend",void 0),t}(Bo),aE=function(o){Kr(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.text="",e.margin=2,e}return ge([A(St)],t.prototype,"text",void 0),ge([A(J())],t.prototype,"margin",void 0),t}(Or),sE=function(){function o(){this.fill="transparent",this.fillOpacity=1}return ge([A(Kt)],o.prototype,"fill",void 0),ge([A(Pe(0,1))],o.prototype,"fillOpacity",void 0),o}(),lE=function(o){Kr(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t}(nh),Ng=function(o){Kr(t,o);function t(e){var r,n,i,a=o.call(this,{moduleCtx:e,useLabelLayer:!0})||this;a.radiusScale=new it,a.groupSelection=Ge.select(a.contentGroup,le),a.highlightSelection=Ge.select(a.highlightGroup,le),a.nodeData=[],a.seriesItemEnabled=[],a.title=void 0,a.calloutLabel=new tE,a.sectorLabel=new rE,a.calloutLine=new nE,a.tooltip=new iE,a.angleKey="",a.angleName="",a.innerLabels=[],a.innerCircle=void 0,a.radiusKey=void 0,a.radiusName=void 0,a.radiusMin=void 0,a.radiusMax=void 0,a.calloutLabelKey=void 0,a.calloutLabelName=void 0,a.sectorLabelKey=void 0,a.sectorLabelName=void 0,a.legendItemKey=void 0,a.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],a.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],a.fillOpacity=1,a.strokeOpacity=1,a.lineDash=[0],a.lineDashOffset=0,a.formatter=void 0,a.rotation=0,a.outerRadiusOffset=0,a.outerRadiusRatio=1,a.innerRadiusOffset=0,a.innerRadiusRatio=1,a.strokeWidth=1,a.shadow=void 0,a.highlightStyle=new Yd,a.surroundingRadius=void 0,a.angleScale=new it,a.angleScale.domain=[0,1],a.angleScale.range=[-Math.PI,Math.PI].map(function(c){return c+Math.PI/2}),a.backgroundGroup=a.rootGroup.appendChild(new le({name:a.id+"-background",layer:!0,zIndex:Xe.SERIES_BACKGROUND_ZINDEX}));var s=new le({name:"pieCalloutLabels"}),l=new le({name:"pieSectorLabels"}),u=new le({name:"innerLabels"});return(r=a.labelGroup)===null||r===void 0||r.append(s),(n=a.labelGroup)===null||n===void 0||n.append(l),(i=a.labelGroup)===null||i===void 0||i.append(u),a.calloutLabelSelection=Ge.select(s,le),a.sectorLabelSelection=Ge.select(l,Me),a.innerLabelsSelection=Ge.select(u,Me),a.animationState=new lE("empty",{empty:{on:{update:{target:"ready",action:function(){return a.animateEmptyUpdateReady()}}}},ready:{on:{update:{target:"ready",action:function(){return a.animateReadyUpdateReady()}}}}}),a}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this.processSeriesItemEnabled()},enumerable:!1,configurable:!0}),t.prototype.addChartEventListeners=function(){var e=this,r;(r=this.ctx.chartEventManager)===null||r===void 0||r.addListener("legend-item-click",function(n){return e.onLegendItemClick(n)})},t.prototype.visibleChanged=function(){this.processSeriesItemEnabled()},t.prototype.processSeriesItemEnabled=function(){var e,r=this,n=r.data,i=r.visible;this.seriesItemEnabled=(e=n==null?void 0:n.map(function(){return i}))!==null&&e!==void 0?e:[]},t.prototype.getDomain=function(e){return e===ee.X?this.angleScale.domain:this.radiusScale.domain},t.prototype.processData=function(e){var r,n;return Zi(this,void 0,void 0,function(){var i,a,s,l,u,c,d,h,f,p,v,g,m;return Ji(this,function(y){switch(y.label){case 0:return i=this.data,a=i===void 0?[]:i,s=this,l=s.angleKey,u=s.radiusKey,c=s.calloutLabelKey,d=s.sectorLabelKey,h=s.legendItemKey,f=s.seriesItemEnabled,l?(p=[],u&&(p.push(Cb(this,u,{id:"radiusValue",min:(r=this.radiusMin)!==null&&r!==void 0?r:0,max:this.radiusMax}),mt(this,u,!0,{id:"radiusRaw"}),rf(this,{id:"radiusValue"},[0,1],(n=this.radiusMin)!==null&&n!==void 0?n:0,this.radiusMax)),p.push()),c&&p.push(mt(this,c,!1,{id:"calloutLabelValue"})),d&&p.push(mt(this,d,!1,{id:"sectorLabelValue"})),h&&p.push(mt(this,h,!1,{id:"legendItemValue"})),a=a.map(function(S,C){var w;return f[C]?S:xt(xt({},S),(w={},w[l]=0,w))}),[4,e.request(this.id,a,{props:Lf([xb(this,l,!0,{id:"angleValue"}),mt(this,l,!0,{id:"angleRaw"}),rf(this,{id:"angleValue"},[0,1],0)],_a(p))})]):[2];case 1:return v=y.sent(),g=v.dataModel,m=v.processedData,this.dataModel=g,this.processedData=m,[2]}})})},t.prototype.maybeRefreshNodeData=function(){if(this.nodeDataRefresh){var e=_a(this._createNodeData(),1),r=e[0],n=r===void 0?{}:r,i=n.nodeData,a=i===void 0?[]:i;this.nodeData=a,this.nodeDataRefresh=!1}},t.prototype.createNodeData=function(){return Zi(this,void 0,void 0,function(){return Ji(this,function(e){return[2,this._createNodeData()]})})},t.prototype.getProcessedDataIndexes=function(e){var r=e.resolveProcessedDataIndexById(this,"angleValue").index,n=this.radiusKey?e.resolveProcessedDataIndexById(this,"radiusValue").index:-1,i=this.calloutLabelKey?e.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,a=this.sectorLabelKey?e.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,s=this.legendItemKey?e.resolveProcessedDataIndexById(this,"legendItemValue").index:-1;return{angleIdx:r,radiusIdx:n,calloutLabelIdx:i,sectorLabelIdx:a,legendItemIdx:s}},t.prototype._createNodeData=function(){var e=this,r=this,n=r.id,i=r.processedData,a=r.dataModel,s=r.rotation,l=r.angleScale;if(!i||!a||i.type!=="ungrouped")return[];var u=this.getProcessedDataIndexes(a),c=u.angleIdx,d=u.radiusIdx,h=u.calloutLabelIdx,f=u.sectorLabelIdx,p=u.legendItemIdx,v=0,g=i.data.map(function(m,y){var S,C=m.datum,w=m.values,x=w[c],b=l.convert(v)+or(s);v=x;var _=l.convert(v)+or(s),T=Math.abs(_-b),O=b+T/2,P=w[c+1],M=d>=0&&(S=w[d])!==null&&S!==void 0?S:1,I=d>=0?w[d+1]:void 0,R=p>=0?w[p]:void 0,L=e.getLabels(C,O,T,!0,x,I,w[h],w[f],R),F=e.getSectorFormat(C,y,y,!1);return xt({itemId:y,series:e,datum:C,index:y,angleValue:P,midAngle:O,midCos:Math.cos(O),midSin:Math.sin(O),startAngle:b,endAngle:_,sectorFormat:F,radius:M,radiusValue:I,legendItemValue:R},L)});return[{itemId:n,nodeData:g,labelData:g}]},t.prototype.getLabels=function(e,r,n,i,a,s,l,u,c){var d=this,h=d.calloutLabel,f=d.sectorLabel,p=d.legendItemKey,v=d.ctx.callbackCache,g=!i||h.enabled?this.calloutLabelKey:void 0,m=!i||f.enabled?this.sectorLabelKey:void 0;if(!g&&!m&&!p)return{};var y=this.getLabelFormatterParams(e,a,s,l,u),S;if(g){var C=or(h.minAngle),w=n>C;w?h.formatter?S=v.call(h.formatter,y):S=String(l):S=void 0}var x;return m&&(f.formatter?x=v.call(f.formatter,y):x=String(u)),xt(xt(xt({},S!=null?{calloutLabel:xt(xt({},this.getTextAlignment(r)),{text:S,hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})}:{}),x!=null?{sectorLabel:{text:x}}:{}),p!=null&&c!=null?{legendItem:{key:p,text:c}}:{})},t.prototype.getLabelFormatterParams=function(e,r,n,i,a){var s=this,l=s.id,u=s.radiusKey,c=s.radiusName,d=s.angleKey,h=s.angleName,f=s.calloutLabelKey,p=s.calloutLabelName,v=s.sectorLabelKey,g=s.sectorLabelName;return{datum:e,angleKey:d,angleValue:r,angleName:h,radiusKey:u,radiusValue:n,radiusName:c,calloutLabelKey:f,calloutLabelValue:i,calloutLabelName:p,sectorLabelKey:v,sectorLabelValue:a,sectorLabelName:g,seriesId:l}},t.prototype.getTextAlignment=function(e){var r=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],n=ww(e),i=-3*Math.PI/4,a=n-i,s=Math.floor(a/(Math.PI/2)),l=YO(s,r.length);return r[l]},t.prototype.getSectorFormat=function(e,r,n,i){var a,s,l,u,c,d,h,f,p=this,v=p.angleKey,g=p.radiusKey,m=p.fills,y=p.strokes,S=p.fillOpacity,C=p.formatter,w=p.id,x=p.ctx,b=x.callbackCache,_=x.highlightManager,T=_==null?void 0:_.getActiveHighlight(),O=i&&(T==null?void 0:T.series)===this&&r===T.itemId,P=O?this.highlightStyle.item:null,M=(a=P==null?void 0:P.fill)!==null&&a!==void 0?a:m[n%m.length],I=(s=P==null?void 0:P.fillOpacity)!==null&&s!==void 0?s:S,R=(l=P==null?void 0:P.stroke)!==null&&l!==void 0?l:y[n%y.length],L=(u=P==null?void 0:P.strokeWidth)!==null&&u!==void 0?u:this.getStrokeWidth(this.strokeWidth),F;return C&&(F=b.call(C,{datum:e,angleKey:v,radiusKey:g,fill:M,stroke:R,strokeWidth:L,highlighted:O,seriesId:w})),{fill:(c=F==null?void 0:F.fill)!==null&&c!==void 0?c:M,fillOpacity:(d=F==null?void 0:F.fillOpacity)!==null&&d!==void 0?d:I,stroke:(h=F==null?void 0:F.stroke)!==null&&h!==void 0?h:R,strokeWidth:(f=F==null?void 0:F.strokeWidth)!==null&&f!==void 0?f:L}},t.prototype.getInnerRadius=function(){var e=this,r=e.radius,n=e.innerRadiusRatio,i=e.innerRadiusOffset,a=r*(n??1)+(i||0);return a===r||a<0?0:a},t.prototype.getOuterRadius=function(){var e=this,r=e.radius,n=e.outerRadiusRatio,i=e.outerRadiusOffset,a=r*(n??1)+(i||0);return a<0?0:a},t.prototype.updateRadiusScale=function(){var e=this.getInnerRadius(),r=this.getOuterRadius();this.radiusScale.range=[e,r]},t.prototype.getTitleTranslationY=function(){var e,r,n=Math.max(0,this.radiusScale.range[1]);if(n===0)return NaN;var i=(r=(e=this.title)===null||e===void 0?void 0:e.spacing)!==null&&r!==void 0?r:0,a=2+i,s=Math.max(0,-n);return-n-a-s},t.prototype.update=function(e){var r=e.seriesRect;return Zi(this,void 0,void 0,function(){var n,i,a;return Ji(this,function(s){switch(s.label){case 0:return n=this.title,this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(),this.updateInnerCircleNodes(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),n&&(i=this.getTitleTranslationY(),a=n.node.computeBBox(),n.node.visible=n.enabled&&isFinite(i)&&!this.bboxIntersectsSurroundingSeries(a,0,i),n.node.translationY=isFinite(i)?i:0),this.updateNodeMidPoint(),[4,this.updateSelections()];case 1:return s.sent(),[4,this.updateNodes(r)];case 2:return s.sent(),[2]}})})},t.prototype.updateTitleNodes=function(){var e,r,n=this,i=n.title,a=n.oldTitle;a!==i&&(a&&((e=this.labelGroup)===null||e===void 0||e.removeChild(a.node)),i&&(i.node.textBaseline="bottom",(r=this.labelGroup)===null||r===void 0||r.appendChild(i.node)),this.oldTitle=i)},t.prototype.updateInnerCircleNodes=function(){var e,r=this,n=r.innerCircle,i=r.oldInnerCircle,a=r.innerCircleNode;if(i!==n){var s=void 0;a&&this.backgroundGroup.removeChild(a),n&&(s=new us,s.fill=n.fill,s.fillOpacity=(e=n.fillOpacity)!==null&&e!==void 0?e:1,this.backgroundGroup.appendChild(s)),this.oldInnerCircle=n,this.innerCircleNode=s}},t.prototype.updateNodeMidPoint=function(){var e=this;this.nodeData.forEach(function(r){var n=e.radiusScale.convert(r.radius);r.nodeMidPoint={x:r.midCos*Math.max(0,n/2),y:r.midSin*Math.max(0,n/2)}})},t.prototype.updateSelections=function(){return Zi(this,void 0,void 0,function(){return Ji(this,function(e){switch(e.label){case 0:return[4,this.updateGroupSelection()];case 1:return e.sent(),[2]}})})},t.prototype.updateGroupSelection=function(){return Zi(this,void 0,void 0,function(){var e,r,n,i,a,s,l,u=this;return Ji(this,function(c){return e=this,r=e.groupSelection,n=e.highlightSelection,i=e.calloutLabelSelection,a=e.sectorLabelSelection,s=e.innerLabelsSelection,l=function(d){return d.update(u.nodeData,function(h){var f=new Lg;f.tag=yr.Sector,h.appendChild(f)})},this.groupSelection=l(r),this.highlightSelection=l(n),i.update(this.nodeData,function(d){var h=new nt;h.tag=yr.Callout,h.pointerEvents=_t.None,d.appendChild(h);var f=new Me;f.tag=yr.Label,f.pointerEvents=_t.None,d.appendChild(f)}),a.update(this.nodeData,function(d){d.pointerEvents=_t.None}),s.update(this.innerLabels,function(d){d.pointerEvents=_t.None}),[2]})})},t.prototype.updateNodes=function(e){var r;return Zi(this,void 0,void 0,function(){var n,i,a,s,l,u=this;return Ji(this,function(c){return n=(r=this.ctx.highlightManager)===null||r===void 0?void 0:r.getActiveHighlight(),i=this.seriesItemEnabled.indexOf(!0)>=0,this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(n==null?void 0:n.series)===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.updateInnerCircle(),a=this.radiusScale,s=a.convert(0),l=function(d,h,f,p){var v=a.convert(h.radius),g=d.parent,m=g==null?void 0:g.parent;p&&g&&m&&(m.removeChild(g),m.appendChild(g)),d.innerRadius=Math.max(0,s),d.outerRadius=Math.max(0,v),p&&(d.startAngle=h.startAngle,d.endAngle=h.endAngle);var y=u.getSectorFormat(h.datum,h.itemId,f,p);d.fill=y.fill,d.stroke=y.stroke,d.strokeWidth=y.strokeWidth,d.fillOpacity=y.fillOpacity,d.strokeOpacity=u.strokeOpacity,d.lineDash=u.lineDash,d.lineDashOffset=u.lineDashOffset,d.fillShadow=u.shadow,d.lineJoin="round",d.visible=u.seriesItemEnabled[f]},this.groupSelection.selectByTag(yr.Sector).forEach(function(d,h){return l(d,d.datum,h,!1)}),this.highlightSelection.selectByTag(yr.Sector).forEach(function(d,h){var f=(n==null?void 0:n.series)===u&&d.datum.itemId===n.itemId;f?l(d,d.datum,h,f):d.visible=!1}),this.animationState.transition("update"),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),[2]})})},t.prototype.updateCalloutLineNodes=function(){var e,r=this,n=r.radiusScale,i=r.calloutLine,a=i.length,s=i.strokeWidth,l=(e=i.colors)!==null&&e!==void 0?e:this.strokes,u=this.calloutLabel.offset;this.calloutLabelSelection.selectByTag(yr.Callout).forEach(function(c,d){var h=c.datum,f=n.convert(h.radius),p=Math.max(0,f),v=h.calloutLabel;if(v!=null&&v.text&&!v.hidden&&p!==0){c.visible=!0,c.strokeWidth=s,c.stroke=l[d%l.length],c.fill=void 0;var g=h.midCos*p,m=h.midSin*p,y=h.midCos*(p+a),S=h.midSin*(p+a),C=v.collisionTextAlign||v.collisionOffsetY!==0;if(C&&v.box!=null){var w=v.box,x=y,b=S;y<w.x?x=w.x:y>w.x+w.width&&(x=w.x+w.width),S<w.y?b=w.y:S>w.y+w.height&&(b=w.y+w.height);var _=x-y,T=b-S,O=Math.sqrt(Math.pow(_,2)+Math.pow(T,2)),P=O-u;P>0&&(y=y+_*P/O,S=S+T*P/O)}c.x1=g,c.y1=m,c.x2=y,c.y2=S}else c.visible=!1})},t.prototype.getLabelOverflow=function(e,r,n){var i=n.x-this.centerX,a=n.x+n.width-this.centerX,s=n.y-this.centerY,l=n.y+n.height-this.centerY,u=1,c=1;r.x+u<i?c=(r.x+r.width-i)/r.width:r.x+r.width-u>a&&(c=(a-r.x)/r.width);var d=r.y+u<s||r.y+r.height-u>l,h=c===1?e.length:Math.floor(e.length*c)-1,f=this.bboxIntersectsSurroundingSeries(r);return{textLength:h,hasVerticalOverflow:d,hasSurroundingSeriesOverflow:f}},t.prototype.bboxIntersectsSurroundingSeries=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var i=this.surroundingRadius;if(i==null)return!1;var a=[{x:e.x+r,y:e.y+n},{x:e.x+e.width+r,y:e.y+n},{x:e.x+e.width+r,y:e.y+e.height+n},{x:e.x+r,y:e.y+e.height+n}],s=Math.pow(i,2);return a.some(function(l){return Math.pow(l.x,2)+Math.pow(l.y,2)>s})},t.prototype.computeCalloutLabelCollisionOffsets=function(){var e=this,r=this,n=r.radiusScale,i=r.calloutLabel,a=r.calloutLine,s=i.offset,l=i.minSpacing,u=n.convert(0),c=function(x){var b=x.calloutLabel,_=n.convert(x.radius),T=Math.max(0,_);return!b||T===0},d=this.nodeData,h=this.nodeData.filter(function(x){return!c(x)});if(h.forEach(function(x){var b=x.calloutLabel;b!=null&&(b.hidden=!1,b.collisionTextAlign=void 0,b.collisionOffsetY=0)}),!(h.length<=1)){var f=h.filter(function(x){return x.midCos<0}).sort(function(x,b){return x.midSin-b.midSin}),p=h.filter(function(x){return x.midCos>=0}).sort(function(x,b){return x.midSin-b.midSin}),v=h.filter(function(x){var b;return x.midSin<0&&((b=x.calloutLabel)===null||b===void 0?void 0:b.textAlign)==="center"}).sort(function(x,b){return x.midCos-b.midCos}),g=h.filter(function(x){var b;return x.midSin>=0&&((b=x.calloutLabel)===null||b===void 0?void 0:b.textAlign)==="center"}).sort(function(x,b){return x.midCos-b.midCos}),m=new Me,y=function(x){var b,_=x.calloutLabel;if(_==null)return new Ee(0,0,0,0);var T=n.convert(x.radius),O=Math.max(0,T),P=O+a.length+s,M=x.midCos*P,I=x.midSin*P+_.collisionOffsetY;return m.text=_.text,m.x=M,m.y=I,m.setFont(e.calloutLabel),m.setAlign({textAlign:(b=_.collisionTextAlign)!==null&&b!==void 0?b:_.textAlign,textBaseline:_.textBaseline}),m.computeBBox()},S=function(x,b,_){var T=y(x).grow(l/2),O=y(b).grow(l/2),P=T.x<O.x+O.width&&T.x+T.width>O.x&&(_==="to-top"?T.y<O.y+O.height:T.y+T.height>O.y);if(P){var M=_==="to-top"?T.y-O.y-O.height:T.y+T.height-O.y;b.calloutLabel.collisionOffsetY=M}},C=function(x){for(var b=x.slice().sort(function(M,I){return Math.abs(M.midSin)-Math.abs(I.midSin)})[0],_=x.indexOf(b),T=_-1;T>=0;T--){var O=x[T+1],P=x[T];S(O,P,"to-top")}for(var T=_+1;T<x.length;T++){var O=x[T-1],P=x[T];S(O,P,"to-bottom")}},w=function(x){for(var b=h.some(function(k){return k.calloutLabel.collisionOffsetY!==0}),_=x.map(function(k){return y(k)}),T=_.map(function(k){return k.clone().grow(l/2)}),O=!1,P=0;P<T.length&&!O;P++)for(var M=T[P],I=P+1;I<x.length;I++){var R=T[I];if(M.collidesBBox(R)){O=!0;break}}var L=d.map(function(k){var N=k.startAngle,G=k.endAngle,$=n.convert(k.radius),j=Math.max(0,$);return{startAngle:N,endAngle:G,innerRadius:u,outerRadius:j}}),F=_.some(function(k){return L.some(function(N){return qO(k,N)})});!O&&!b&&!F||x.filter(function(k){return k.calloutLabel.textAlign==="center"}).forEach(function(k){var N=k.calloutLabel;k.midCos<0?N.collisionTextAlign="right":k.midCos>0?N.collisionTextAlign="left":N.collisionTextAlign="center"})};C(f),C(p),w(v),w(g)}},t.prototype.updateCalloutLabelNodes=function(e){var r=this,n=this,i=n.radiusScale,a=n.calloutLabel,s=n.calloutLine,l=s.length,u=a.offset,c=a.color,d=new Me;this.calloutLabelSelection.selectByTag(yr.Label).forEach(function(h){var f,p=h.datum,v=p.calloutLabel,g=i.convert(p.radius),m=Math.max(0,g);if(!(v!=null&&v.text)||m===0||v.hidden){h.visible=!1;return}var y=m+l+u,S=p.midCos*y,C=p.midSin*y+v.collisionOffsetY,w={textAlign:(f=v.collisionTextAlign)!==null&&f!==void 0?f:v.textAlign,textBaseline:v.textBaseline};d.text=v.text,d.x=S,d.y=C,d.setFont(r.calloutLabel),d.setAlign(w);var x=d.computeBBox(),b=v.text,_=!0;if(a.avoidCollisions){var T=r.getLabelOverflow(v.text,x,e),O=T.textLength,P=T.hasVerticalOverflow;b=v.text.length===O?v.text:v.text.substring(0,O)+"…",_=!P}h.text=b,h.x=S,h.y=C,h.setFont(r.calloutLabel),h.setAlign(w),h.fill=c,h.visible=_})},t.prototype.computeLabelsBBox=function(e,r){var n=this,i,a=this,s=a.radiusScale,l=a.calloutLabel,u=a.calloutLine,c=u.length,d=l.offset,h=l.maxCollisionOffset,f=l.minSpacing;if(!l.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(),this.computeCalloutLabelCollisionOffsets();var p=[],v=new Me,g;if(!((i=this.title)===null||i===void 0)&&i.text&&this.title.enabled){var m=this.getTitleTranslationY();isFinite(m)&&(v.text=this.title.text,v.x=0,v.y=m,v.setFont(this.title),v.setAlign({textBaseline:"bottom",textAlign:"center"}),g=v.computeBBox(),p.push(g))}return this.nodeData.forEach(function(y){var S,C=y.calloutLabel,w=s.convert(y.radius),x=Math.max(0,w);if(!C||x===0)return null;var b=x+c+d,_=y.midCos*b,T=y.midSin*b+C.collisionOffsetY;v.text=C.text,v.x=_,v.y=T,v.setFont(n.calloutLabel),v.setAlign({textAlign:(S=C.collisionTextAlign)!==null&&S!==void 0?S:C.textAlign,textBaseline:C.textBaseline});var O=v.computeBBox();if(C.box=O,Math.abs(C.collisionOffsetY)>h){C.hidden=!0;return}if(g){var P=r.y-n.centerY,M=new Ee(g.x-f,P,g.width+2*f,g.y+g.height+f-P);if(O.collidesBBox(M)){C.hidden=!0;return}}if(e.hideWhenNecessary){var I=n.getLabelOverflow(C.text,O,r),R=I.textLength,L=I.hasVerticalOverflow,F=I.hasSurroundingSeriesOverflow,k=C.text.length>2&&R<2;if(L||k||F){C.hidden=!0;return}}C.hidden=!1,p.push(O)}),p.length===0?null:Ee.merge(p)},t.prototype.updateSectorLabelNodes=function(){var e=this.radiusScale,r=e.convert(0),n=this.sectorLabel,i=n.fontSize,a=n.fontStyle,s=n.fontWeight,l=n.fontFamily,u=n.positionOffset,c=n.positionRatio,d=n.color,h=r>0,f=this.seriesItemEnabled.filter(Boolean).length===1;this.sectorLabelSelection.each(function(p,v){var g=v.sectorLabel,m=e.convert(v.radius),y=Math.max(0,m),S=!1;if(g&&y!==0){var C=r*(1-c)+m*c+u;p.fill=d,p.fontStyle=a,p.fontWeight=s,p.fontSize=i,p.fontFamily=l,p.text=g.text;var w=!h&&f;w?(p.x=0,p.y=0):(p.x=v.midCos*C,p.y=v.midSin*C),p.textAlign="center",p.textBaseline="middle";var x=p.computeBBox(),b=[[x.x,x.y],[x.x+x.width,x.y],[x.x+x.width,x.y+x.height],[x.x,x.y+x.height]],_=v.startAngle,T=v.endAngle,O={startAngle:_,endAngle:T,innerRadius:r,outerRadius:y};b.every(function(P){var M=_a(P,2),I=M[0],R=M[1];return Ig(I,R,O)})&&(S=!0)}p.visible=S})},t.prototype.updateInnerCircle=function(){var e=this.innerCircleNode;if(e){var r=this.getInnerRadius();if(r===0)e.size=0;else{var n=Math.min(r,this.getOuterRadius()),i=1;e.size=Math.ceil(n*2+i)}}},t.prototype.updateInnerLabelNodes=function(){var e=[],r=[];this.innerLabelsSelection.each(function(g,m){var y=m.fontStyle,S=m.fontWeight,C=m.fontSize,w=m.fontFamily,x=m.color;g.fontStyle=y,g.fontWeight=S,g.fontSize=C,g.fontFamily=w,g.text=m.text,g.x=0,g.y=0,g.fill=x,g.textAlign="center",g.textBaseline="alphabetic",e.push(g.computeBBox()),r.push(m.margin)});for(var n=function(g){return g===0?0:r[g]},i=function(g){return g===r.length-1?0:r[g]},a=e.reduce(function(g,m,y){return g+m.height+n(y)+i(y)},0),s=Math.max.apply(Math,Lf([],_a(e.map(function(g){return g.width})))),l=this.getInnerRadius(),u=Math.sqrt(Math.pow(s/2,2)+Math.pow(a/2,2)),c=u<=(l>0?l:this.getOuterRadius()),d=[],h=0,f=-a/2;h<e.length;h++){var p=e[h],v=p.height+f+n(h);d.push(v),f=v+i(h)}this.innerLabelsSelection.each(function(g,m,y){g.y=d[y],g.visible=c})},t.prototype.getNodeClickEvent=function(e,r){return new QO(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,e,r,this)},t.prototype.getNodeDoubleClickEvent=function(e,r){return new eE(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,e,r,this)},t.prototype.getTooltipHtml=function(e){var r,n=this.angleKey;if(!n)return"";var i=this,a=i.tooltip,s=i.angleName,l=i.radiusKey,u=i.radiusName,c=i.calloutLabelKey,d=i.sectorLabelKey,h=i.calloutLabelName,f=i.sectorLabelName,p=i.id,v=a.renderer,g=e.datum,m=e.angleValue,y=e.radiusValue,S=e.sectorFormat.fill,C=e.calloutLabel,w=C===void 0?{}:C,x=w.text,b=x===void 0?"":x,_=typeof m=="number"?Rg(m):String(m),T=(r=this.title)===null||r===void 0?void 0:r.text,O=(b?b+": ":"")+_,P={title:T,backgroundColor:S,content:O};return v?Ct(v({datum:g,angleKey:n,angleValue:m,angleName:s,radiusKey:l,radiusValue:y,radiusName:u,calloutLabelKey:c,calloutLabelName:h,sectorLabelKey:d,sectorLabelName:f,title:T,color:S,seriesId:p}),P):Ct(P)},t.prototype.getLegendData=function(){var e,r,n,i=this,a=i.processedData,s=i.calloutLabelKey,l=i.legendItemKey,u=i.id,c=i.dataModel;if(!c||!a||a.data.length===0)return[];if(!l&&!s)return[];for(var d=this.getProcessedDataIndexes(c),h=d.angleIdx,f=d.radiusIdx,p=d.calloutLabelIdx,v=d.sectorLabelIdx,g=d.legendItemIdx,m=((e=this.title)===null||e===void 0?void 0:e.showInLegend)&&this.title.text,y=[],S=0;S<a.data.length;S++){var C=a.data[S],w=C.datum,x=C.values,b=[];m&&b.push(m);var _=this.getLabels(w,2*Math.PI,2*Math.PI,!1,x[h],x[f],x[p],x[v],x[g]);if(l&&_.legendItem!==void 0?b.push(_.legendItem.text):s&&((r=_.calloutLabel)===null||r===void 0?void 0:r.text)!==void 0&&b.push((n=_.calloutLabel)===null||n===void 0?void 0:n.text),b.length!==0){var T=this.getSectorFormat(w,S,S,!1);y.push({legendType:"category",id:u,itemId:S,seriesId:u,enabled:this.seriesItemEnabled[S],label:{text:b.join(" - ")},marker:{fill:T.fill,stroke:T.stroke,fillOpacity:this.fillOpacity,strokeOpacity:this.strokeOpacity}})}}return y},t.prototype.onLegendItemClick=function(e){var r=e.enabled,n=e.itemId,i=e.series;i.id===this.id?this.toggleSeriesItem(n,r):i.type==="pie"&&this.toggleOtherSeriesItems(i,n,r)},t.prototype.toggleSeriesItem=function(e,r){this.seriesItemEnabled[e]=r,this.nodeDataRefresh=!0},t.prototype.toggleOtherSeriesItems=function(e,r,n){var i=this,a,s,l=this,u=l.legendItemKey,c=l.dataModel;if(!(!u||!c)){var d=e.legendItemKey&&((a=e.data)===null||a===void 0?void 0:a.find(function(f,p){return p===r})[e.legendItemKey]);if(d){var h=c.resolveProcessedDataIndexById(this,"legendItemValue").index;(s=this.processedData)===null||s===void 0||s.data.forEach(function(f,p){var v=f.values;v[h]===d&&i.toggleSeriesItem(p,n)})}}},t.prototype.animateEmptyUpdateReady=function(){var e=this,r,n,i=(n=(r=this.ctx.animationManager)===null||r===void 0?void 0:r.defaultOptions.duration)!==null&&n!==void 0?n:1e3,a=200,s=Math.PI/-2+or(this.rotation);this.groupSelection.selectByTag(yr.Sector).forEach(function(u){var c,d=u.datum;(c=e.ctx.animationManager)===null||c===void 0||c.animateMany(e.id+"_empty-update-ready_"+u.id,[{from:s,to:d.startAngle},{from:s,to:d.endAngle}],{duration:i,ease:Yo,onUpdate:function(h){var f=_a(h,2),p=f[0],v=f[1];u.startAngle=p,u.endAngle=v}})});var l={from:0,to:1,delay:i,duration:a};this.calloutLabelSelection.each(function(u){var c;(c=e.ctx.animationManager)===null||c===void 0||c.animate(e.id+"_empty-update-ready_"+u.id,xt(xt({},l),{onUpdate:function(d){u.opacity=d}}))}),this.sectorLabelSelection.each(function(u){var c;(c=e.ctx.animationManager)===null||c===void 0||c.animate(e.id+"_empty-update-ready_"+u.id,xt(xt({},l),{onUpdate:function(d){u.opacity=d}}))}),this.innerLabelsSelection.each(function(u){var c;(c=e.ctx.animationManager)===null||c===void 0||c.animate(e.id+"_empty-update-ready_"+u.id,xt(xt({},l),{onUpdate:function(d){u.opacity=d}}))})},t.prototype.animateReadyUpdateReady=function(){this.groupSelection.selectByTag(yr.Sector).forEach(function(e){var r=e.datum;e.startAngle=r.startAngle,e.endAngle=r.endAngle})},t.className="PieSeries",t.type="pie",ge([A(St)],t.prototype,"angleKey",void 0),ge([A(St)],t.prototype,"angleName",void 0),ge([A(de)],t.prototype,"radiusKey",void 0),ge([A(de)],t.prototype,"radiusName",void 0),ge([A(Pe(0))],t.prototype,"radiusMin",void 0),ge([A(Pe(0))],t.prototype,"radiusMax",void 0),ge([A(de)],t.prototype,"calloutLabelKey",void 0),ge([A(de)],t.prototype,"calloutLabelName",void 0),ge([A(de)],t.prototype,"sectorLabelKey",void 0),ge([A(de)],t.prototype,"sectorLabelName",void 0),ge([A(de)],t.prototype,"legendItemKey",void 0),ge([A(ls)],t.prototype,"fills",void 0),ge([A(ls)],t.prototype,"strokes",void 0),ge([A(J(0,1))],t.prototype,"fillOpacity",void 0),ge([A(J(0,1))],t.prototype,"strokeOpacity",void 0),ge([A(ra)],t.prototype,"lineDash",void 0),ge([A(J(0))],t.prototype,"lineDashOffset",void 0),ge([A(Be)],t.prototype,"formatter",void 0),ge([A(J(-360,360))],t.prototype,"rotation",void 0),ge([A(J())],t.prototype,"outerRadiusOffset",void 0),ge([A(J(0))],t.prototype,"outerRadiusRatio",void 0),ge([A(J())],t.prototype,"innerRadiusOffset",void 0),ge([A(J(0))],t.prototype,"innerRadiusRatio",void 0),ge([A(J(0))],t.prototype,"strokeWidth",void 0),t}(Fg),rs=function(){return rs=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},rs.apply(this,arguments)},ds={constructors:{},constructedArrays:new WeakMap};function uE(o,t){var e;(e=ds.constructedArrays)===null||e===void 0||e.set(o,t)}var Ff={constructors:{title:Bo,subtitle:Bo,footnote:Bo,shadow:id,innerCircle:sE,"axes[].title":KO,"series[].innerLabels[]":aE},allowedTypes:{"legend.pagination.marker.shape":["primitive","function"],"series[].marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}};function Gg(){return{constructors:rs(rs({},Ff.constructors),ds.constructors),constructedArrays:ds.constructedArrays,allowedTypes:rs({},Ff.allowedTypes)}}var cE={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},dE={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function hE(o){var t=o.yDirection,e=o.padding,r=e===void 0?0:e,n=o.position,i=n===void 0?"top":n,a=o.bbox,s=t?cE:dE,l=s[i],u=l.xTranslationDirection,c=l.yTranslationDirection,d=t?a.width:a.height,h=t?a.height:a.width,f=u*(r+d/2),p=c*(r+h/2),v={xTranslation:f,yTranslation:p};return v}function fE(o){var t=o.yDirection,e=o.bbox,r=o.padding,n=r===void 0?0:r,i=o.position,a=i===void 0?"top":i,s={};return a.startsWith("inside")||(a==="top"&&!t?s.top=n+e.height:a==="bottom"&&!t?s.bottom=n+e.height:a==="left"&&t?s.left=n+e.width:a==="right"&&t&&(s.right=n+e.width)),s}var od=function(o){var t=o.yDirection,e=o.xEnd,r=o.yStart,n=o.yEnd;return t?{x:e/2,y:r}:{x:e,y:isNaN(n)?r:(r+n)/2}},kf=function(o){var t=o.yDirection,e=o.xStart,r=o.xEnd,n=o.yStart,i=o.yEnd;return t?{x:e,y:isNaN(i)?n:(n+i)/2}:{x:r/2,y:n}},Nf=function(o){var t=o.yDirection,e=o.xEnd,r=o.yStart,n=o.yEnd;return t?{x:e,y:isNaN(n)?r:(r+n)/2}:{x:e/2,y:isNaN(n)?r:n}},Gf=function(o){var t=o.yDirection,e=o.xStart,r=o.xEnd,n=o.yStart,i=o.yEnd;return t?{x:r/2,y:isNaN(i)?n:i}:{x:e,y:isNaN(i)?n:(n+i)/2}},pE=function(o){var t=o.xEnd,e=o.yStart,r=o.yEnd;return{x:t/2,y:isNaN(r)?e:(e+r)/2}},Vf=function(o){var t=o.yDirection,e=o.xStart,r=o.xEnd,n=o.yStart;return t?{x:e/2,y:n}:{x:r,y:n}},jf=function(o){var t=o.yDirection,e=o.xStart,r=o.yStart,n=o.yEnd;return t?{x:e,y:isNaN(n)?r:n}:{x:e,y:r}},Bf=function(o){var t=o.yDirection,e=o.xEnd,r=o.yStart,n=o.yEnd;return t?{x:e,y:r}:{x:e,y:isNaN(n)?r:n}},Hf=function(o){var t=o.yDirection,e=o.xStart,r=o.xEnd,n=o.yStart,i=o.yEnd;return t?{x:r,y:isNaN(i)?n:i}:{x:e,y:isNaN(i)?n:i}},vE={top:{c:od},bottom:{c:Gf},left:{c:kf},right:{c:Nf},topLeft:{c:Vf},topRight:{c:Bf},bottomLeft:{c:jf},bottomRight:{c:Hf},inside:{c:pE},insideLeft:{c:kf},insideRight:{c:Nf},insideTop:{c:od},insideBottom:{c:Gf},insideTopLeft:{c:Vf},insideBottomLeft:{c:jf},insideTopRight:{c:Bf},insideBottomRight:{c:Hf}},gE=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),$l=function(){return $l=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},$l.apply(this,arguments)},ei=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},yE=function(o){gE(t,o);function t(){var e=o.call(this)||this;return e.x1=0,e.y1=0,e.x2=0,e.y2=0,e.startLine=!1,e.endLine=!1,e.isRange=!1,e.restoreOwnStyles(),e}return t.prototype.computeBBox=function(){return new Ee(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)},t.prototype.isPointInPath=function(e,r){return!1},t.prototype.render=function(e){var r,n=e.ctx,i=e.forceRender,a=e.stats;if(this.dirty===Z.NONE&&!i){a&&(a.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(n);var s=this,l=s.x1,u=s.y1,c=s.x2,d=s.y2;l=this.align(l),u=this.align(u),c=this.align(c),d=this.align(d);var h=this,f=h.fill,p=h.opacity,v=h.isRange,g=!!(v&&f);if(g){var m=this.fillOpacity;n.fillStyle=f,n.globalAlpha=p*m,n.beginPath(),n.moveTo(l,u),n.lineTo(c,u),n.lineTo(c,d),n.lineTo(l,d),n.closePath(),n.fill()}var y=this,S=y.stroke,C=y.strokeWidth,w=y.startLine,x=y.endLine,b=!!((w||x)&&S&&C);if(b){var _=this,T=_.strokeOpacity,O=_.lineDash,P=_.lineDashOffset,M=_.lineCap,I=_.lineJoin;n.strokeStyle=S,n.globalAlpha=p*T,n.lineWidth=C,O&&n.setLineDash(O),P&&(n.lineDashOffset=P),M&&(n.lineCap=M),I&&(n.lineJoin=I),n.beginPath(),w&&(n.moveTo(l,u),n.lineTo(c,u)),x&&(n.moveTo(c,d),n.lineTo(l,d)),n.stroke()}(r=this.fillShadow)===null||r===void 0||r.markClean(),o.prototype.render.call(this,e)},t.className="Range",t.defaultStyles=$l($l({},Wr.defaultStyles),{strokeWidth:1}),ei([ie({redraw:Z.MINOR})],t.prototype,"x1",void 0),ei([ie({redraw:Z.MINOR})],t.prototype,"y1",void 0),ei([ie({redraw:Z.MINOR})],t.prototype,"x2",void 0),ei([ie({redraw:Z.MINOR})],t.prototype,"y2",void 0),ei([ie({redraw:Z.MINOR})],t.prototype,"startLine",void 0),ei([ie({redraw:Z.MINOR})],t.prototype,"endLine",void 0),ei([ie({redraw:Z.MINOR})],t.prototype,"isRange",void 0),t}(Wr),Ze=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},en=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},zf=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},mE=["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],SE=ue(function(o,t){return je(o,t,function(e){return mE.includes(e)})},"expecting an optional crossLine label position keyword such as 'topLeft', 'topRight' or 'inside'"),CE=ue(function(o,t){return je(o,t,function(e){return e==="range"||e==="line"})},"expecting a crossLine type keyword such as 'range' or 'line'"),xE=function(){function o(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}return Ze([A(Ur)],o.prototype,"enabled",void 0),Ze([A(de)],o.prototype,"text",void 0),Ze([A(Mi)],o.prototype,"fontStyle",void 0),Ze([A(Ri)],o.prototype,"fontWeight",void 0),Ze([A(J(0))],o.prototype,"fontSize",void 0),Ze([A(St)],o.prototype,"fontFamily",void 0),Ze([A(J(0))],o.prototype,"padding",void 0),Ze([A(Fe)],o.prototype,"color",void 0),Ze([A(SE)],o.prototype,"position",void 0),Ze([A(Pe(-360,360))],o.prototype,"rotation",void 0),Ze([A(Ur)],o.prototype,"parallel",void 0),o}(),wE=function(){function o(){this.id=gn(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new xE,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=ee.X,this.group=new le({name:""+this.id,layer:!0,zIndex:o.LINE_LAYER_ZINDEX}),this.crossLineRange=new yE,this.crossLineLabel=new Me,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;var t=this,e=t.group,r=t.crossLineRange,n=t.crossLineLabel;e.append([r,n]),r.pointerEvents=_t.None}return o.prototype.update=function(t){if(this.enabled&&(this.group.visible=t,!!t)){var e=this.createNodeData();if(!e){this.group.visible=!1;return}this.updateNodes(),this.group.zIndex=this.getZIndex(this.isRange)}},o.prototype.updateNodes=function(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())},o.prototype.createNodeData=function(){var t,e,r,n,i,a=this,s=a.scale,l=a.gridLength,u=a.sideFlag,c=a.direction,d=a.label.position,h=d===void 0?"top":d,f=a.clippedRange,p=a.strokeWidth,v=p===void 0?0:p;if(!s)return!1;var g=(n=s.bandwidth)!==null&&n!==void 0?n:0,m=function(G){return Math.max(Math.min.apply(Math,zf([],en(f))),Math.min(Math.max.apply(Math,zf([],en(f))),G))},y=en([0,u*l],2),S=y[0],C=y[1],w=en(this.getRange(),2),x=w[0],b=w[1],_=en([Number(s.convert(x,{strict:!1})),s.convert(b,{strict:!1})+g],2),T=_[0],O=_[1];T=m(T),O=m(O),t=en([Number(s.convert(x)),s.convert(b)+g],2),x=t[0],b=t[1];var P=!isNaN(T)&&!isNaN(O)&&(x===T||b===O||T!==O)&&Math.abs(O-T)>0;if(P){var M=T!==Math.min(T,O);M&&(e=en([Math.min(T,O),Math.max(T,O)],2),T=e[0],O=e[1],r=en([b,x],2),x=r[0],b=r[1])}if(this.isRange=P,this.startLine=!isNaN(x)&&v>0&&x===T,this.endLine=!isNaN(b)&&v>0&&b===O,!P&&!this.startLine&&!this.endLine)return!1;if(this.data=[T,O],this.label.enabled){var I=c===ee.Y,R=((i=vE[h])!==null&&i!==void 0?i:{}).c,L=R===void 0?od:R,F=L({yDirection:I,xStart:S,xEnd:C,yStart:T,yEnd:O}),k=F.x,N=F.y;this.labelPoint={x:k,y:N}}return!0},o.prototype.updateRangeNode=function(){var t,e=this,r=e.crossLineRange,n=e.sideFlag,i=e.gridLength,a=e.data,s=e.startLine,l=e.endLine,u=e.isRange,c=e.fill,d=e.fillOpacity,h=e.stroke,f=e.strokeWidth,p=e.lineDash;r.x1=0,r.x2=n*i,r.y1=a[0],r.y2=a[1],r.startLine=s,r.endLine=l,r.isRange=u,r.fill=c,r.fillOpacity=d??1,r.stroke=h,r.strokeWidth=f??1,r.strokeOpacity=(t=this.strokeOpacity)!==null&&t!==void 0?t:1,r.lineDash=p},o.prototype.updateLabel=function(){var t=this,e=t.crossLineLabel,r=t.label;r.text&&(e.fontStyle=r.fontStyle,e.fontWeight=r.fontWeight,e.fontSize=r.fontSize,e.fontFamily=r.fontFamily,e.fill=r.color,e.text=r.text)},o.prototype.positionLabel=function(){var t=this,e=t.crossLineLabel,r=t.labelPoint,n=r===void 0?{}:r,i=n.x,a=i===void 0?void 0:i,s=n.y,l=s===void 0?void 0:s,u=t.label,c=u.parallel,d=u.rotation,h=u.position,f=h===void 0?"top":h,p=u.padding,v=p===void 0?0:p,g=t.direction,m=t.parallelFlipRotation,y=t.regularFlipRotation;if(!(a===void 0||l===void 0)){var S=th({rotation:d,parallel:c,regularFlipRotation:y,parallelFlipRotation:m}),C=S.defaultRotation,w=S.configuredRotation;e.rotation=C+w,e.textBaseline="middle",e.textAlign="center";var x=this.computeLabelBBox();if(x){var b=g===ee.Y,_=hE({yDirection:b,padding:v,position:f,bbox:x}),T=_.xTranslation,O=_.yTranslation;e.translationX=a+T,e.translationY=l+O}}},o.prototype.getZIndex=function(t){return t===void 0&&(t=!1),t?o.RANGE_LAYER_ZINDEX:o.LINE_LAYER_ZINDEX},o.prototype.getRange=function(){var t=this,e=t.value,r=t.range,n=t.scale,i=n instanceof De,a=en(r??[e,void 0],2),s=a[0],l=a[1];return!i&&l===void 0&&(l=s),s=Fl(s,i)!=null?s:void 0,l=Fl(l,i)!=null?l:void 0,i&&s===l&&(l=void 0),s===void 0&&l!==void 0&&(s=l,l=void 0),[s,l]},o.prototype.computeLabelBBox=function(){return this.crossLineLabel.computeTransformedBBox()},o.prototype.calculatePadding=function(t){var e,r,n,i,a,s,l,u,c=this,d=c.isRange,h=c.startLine,f=c.endLine,p=c.direction,v=c.label,g=v.padding,m=g===void 0?0:g,y=v.position,S=y===void 0?"top":y;if(!(!d&&!h&&!f)){var C=this.computeLabelBBox(),w=C==null?void 0:C.x,x=C==null?void 0:C.y;if(!(!C||w==null||x==null)){var b=fE({yDirection:p===ee.Y,padding:m,position:S,bbox:C});t.left=Math.max((e=t.left)!==null&&e!==void 0?e:0,(r=b.left)!==null&&r!==void 0?r:0),t.right=Math.max((n=t.right)!==null&&n!==void 0?n:0,(i=b.right)!==null&&i!==void 0?i:0),t.top=Math.max((a=t.top)!==null&&a!==void 0?a:0,(s=b.top)!==null&&s!==void 0?s:0),t.bottom=Math.max((l=t.bottom)!==null&&l!==void 0?l:0,(u=b.bottom)!==null&&u!==void 0?u:0)}}},o.LINE_LAYER_ZINDEX=Xe.SERIES_CROSSLINE_LINE_ZINDEX,o.RANGE_LAYER_ZINDEX=Xe.SERIES_CROSSLINE_RANGE_ZINDEX,o.className="CrossLine",Ze([A(Ur)],o.prototype,"enabled",void 0),Ze([A(CE)],o.prototype,"type",void 0),Ze([A(zd(2))],o.prototype,"range",void 0),Ze([A(Fe)],o.prototype,"fill",void 0),Ze([A(Pe(0,1))],o.prototype,"fillOpacity",void 0),Ze([A(Fe)],o.prototype,"stroke",void 0),Ze([A(Pe())],o.prototype,"strokeWidth",void 0),Ze([A(Pe(0,1))],o.prototype,"strokeOpacity",void 0),Ze([A(ra)],o.prototype,"lineDash",void 0),o}(),bE=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xl=function(){return Xl=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Xl.apply(this,arguments)},Wf=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},xu=function(o){bE(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.thickness=0,e.position="left",e}return Object.defineProperty(t.prototype,"direction",{get:function(){return["top","bottom"].includes(this.position)?ee.X:ee.Y},enumerable:!1,configurable:!0}),t.prototype.updateDirection=function(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1;break}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)},t.prototype.update=function(e){return this.updateDirection(),o.prototype.update.call(this,e)},t.prototype.createAxisContext=function(){return Xl(Xl({},o.prototype.createAxisContext.call(this)),{position:this.position})},t.prototype.assignCrossLineArrayConstructor=function(e){uE(e,wE)},Wf([A(J(0))],t.prototype,"thickness",void 0),Wf([A(ng)],t.prototype,"position",void 0),t}(Mg),_E=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),OE=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},EE=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Uf=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Kf=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Zo=function(o){_E(t,o);function t(e){var r=o.call(this,e,new Lt)||this;return r._paddingOverrideEnabled=!1,r.groupPaddingInner=.1,r.includeInvisibleDomains=!0,r}return Object.defineProperty(t.prototype,"paddingInner",{get:function(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner},set:function(e){this._paddingOverrideEnabled=!0,this.scale.paddingInner=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paddingOuter",{get:function(){return this.scale.paddingOuter},set:function(e){this.scale.paddingOuter=e},enumerable:!1,configurable:!0}),t.prototype.normaliseDataDomain=function(e){var r,n,i,a,s={};try{for(var l=EE(e),u=l.next();!u.done;u=l.next()){var c=u.value;(i=s[a=String(c)])!==null&&i!==void 0||(s[a]=c)}}catch(d){r={error:d}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return Object.values(s)},t.prototype.calculateDomain=function(){if(!this._paddingOverrideEnabled){var e=this.boundSeries,r=e.map(function(n){var i;return(i=n.getBandScalePadding)===null||i===void 0?void 0:i.call(n)}).filter(function(n){return n!=null});r.length>0&&(this.scale.paddingInner=Math.min.apply(Math,Kf([],Uf(r.map(function(n){return n.inner})))),this.scale.paddingOuter=Math.max.apply(Math,Kf([],Uf(r.map(function(n){return n.outer})))))}return o.prototype.calculateDomain.call(this)},t.className="CategoryAxis",t.type="category",OE([A(J(0,1))],t.prototype,"groupPaddingInner",void 0),t}(xu),Vg=function(){function o(t,e,r){t===void 0&&(t=""),r===void 0&&(r=0),this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=r}return o.prototype.getLeftSibling=function(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0},o.prototype.getLeftmostSibling=function(){return this.number>0&&this.parent?this.parent.children[0]:void 0},o.prototype.nextLeft=function(){return this.children?this.children[0]:this.thread},o.prototype.nextRight=function(){return this.children?this.children[this.children.length-1]:this.thread},o.prototype.getSiblings=function(){var t=this;return this.parent?this.parent.children.filter(function(e,r){return r!==t.number}):[]},o}();function TE(o,t){t===void 0&&(t=!0);var e=new Vg,r=0;return t&&o.forEach(function(n){return r=Math.max(r,n.labels.length)}),o.forEach(function(n){if(t)for(;n.labels.length<r;)n.labels.unshift("");PE(e,n)}),e}function PE(o,t){var e=t.labels.slice().reverse(),r=e.length-1;e.forEach(function(n,i){var a=o.children,s=a.find(function(c){return c.label===n}),l=i!==r;if(s&&l)o=s;else{var u=new Vg(n,o);u.number=a.length,a.push(u),l&&(o=u)}})}function AE(o,t,e){var r=t.number-o.number,n=e/r;t.change-=n,t.shift+=e,o.change+=n,t.prelim+=e,t.mod+=e}function DE(o,t,e){return t.getSiblings().indexOf(o.ancestor)>=0?o.ancestor:e}function ME(o){var t=o.children;if(t)for(var e=0,r=0,n=t.length-1;n>=0;n--){var i=t[n];i.prelim+=e,i.mod+=e,r+=i.change,e+=i.shift+r}}function RE(o,t,e){var r=o.getLeftSibling();if(r){for(var n=o,i=o,a=r,s=i.getLeftmostSibling(),l=i.mod,u=n.mod,c=a.mod,d=s.mod;a.nextRight()&&i.nextLeft();){a=a.nextRight(),i=i.nextLeft(),s=s.nextLeft(),n=n.nextRight(),n.ancestor=o;var h=a.prelim+c-(i.prelim+l)+e;h>0&&(AE(DE(a,o,t),o,h),l+=h,u+=h),c+=a.mod,l+=i.mod,d+=s.mod,u+=n.mod}a.nextRight()&&!n.nextRight()?(n.thread=a.nextRight(),n.mod+=c-u):(i.nextLeft()&&!s.nextLeft()&&(s.thread=i.nextLeft(),s.mod+=l-d),t=o)}return t}function jg(o,t){var e=o.children;if(e.length){var r=e[0];e.forEach(function(a){jg(a,t),r=RE(a,r,t)}),ME(o);var n=(e[0].prelim+e[e.length-1].prelim)/2,i=o.getLeftSibling();i?(o.prelim=i.prelim+t,o.mod=o.prelim-n):o.prelim=n}else{var i=o.getLeftSibling();o.prelim=i?i.prelim+t:0}}var $f=function(){function o(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}return o.prototype.update=function(t,e){var r=e(t),n=r.x,i=r.y;n>this.right&&(this.right=n),n<this.left&&(this.left=n),i>this.bottom&&(this.bottom=i),i<this.top&&(this.top=i)},o}();function Bg(o,t,e){o.x=o.prelim+t,o.y=o.depth,e.update(o),o.children.forEach(function(r){return Bg(r,t+o.mod,e)})}function Hg(o){var t=o.children,e=0;t.forEach(function(r){Hg(r),r.children.length?e+=r.leafCount:e++}),o.leafCount=e,t.length?(o.subtreeLeft=t[0].subtreeLeft,o.subtreeRight=t[o.children.length-1].subtreeRight,o.x=(o.subtreeLeft+o.subtreeRight)/2):(o.subtreeLeft=o.x,o.subtreeRight=o.x)}function IE(o){var t=new LE;return jg(o,1),Bg(o,-o.prelim,t),Hg(o),t}var LE=function(){function o(){this.dimensions=new $f,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}return o.prototype.update=function(t){this.dimensions.update(t,function(e){return{x:e.x,y:e.y}}),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)},o.prototype.resize=function(t,e,r,n,i){r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=!1);var a=this.leafCount-1,s=this.depth,l=this.dimensions,u=1,c=1;if(t>0&&a){var d=(l.right-l.left)/a,h=t/a;u=h/d,i&&(u=-u)}if(e>0&&s){var f=(l.bottom-l.top)/s,p=e/s;c=p/f}var v=new $f;this.nodes.forEach(function(y){y.screenX=y.x*u,y.screenY=y.y*c,v.update(y,function(S){return{x:S.screenX,y:S.screenY}})});var g=-v.left,m=-v.top;this.nodes.forEach(function(y){y.screenX+=g+r,y.screenY+=m+n})},o}(),zg=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Wg=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},FE=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},kE=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},NE=function(o){zg(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.grid=!1,e}return Wg([A(Re)],t.prototype,"grid",void 0),t}(Ag),Yl=function(o){zg(t,o);function t(e){var r=o.call(this,e,new Lt)||this;r.tickScale=new Lt,r.translation={x:0,y:0},r.line=new Dg,r.label=new NE,r.labelColor="rgba(87, 87, 87, 1)",r.includeInvisibleDomains=!0;var n=r,i=n.tickLineGroup,a=n.tickLabelGroup,s=n.gridLineGroup,l=n.tickScale,u=n.scale;return u.paddingOuter=.1,u.paddingInner=u.paddingOuter*2,r.range=u.range.slice(),r.refreshScale(),l.paddingInner=1,l.paddingOuter=0,r.gridLineSelection=Ge.select(s,nt),r.axisLineSelection=Ge.select(i,nt),r.separatorSelection=Ge.select(i,nt),r.labelSelection=Ge.select(a,Me),r}return t.prototype.updateRange=function(){var e=this,r=e.range,n=e.visibleRange,i=e.scale,a=(r[1]-r[0])/(n[1]-n[0]),s=a*n[0],l=r[0]-s;this.tickScale.range=i.range=[l,l+a],this.resizeTickTree()},t.prototype.resizeTickTree=function(){var e,r=this.scale,n=r.domain.length?[r.convert(r.domain[0]),r.convert(r.domain[r.domain.length-1])]:r.range,i=this.tickTreeLayout,a=this.lineHeight;i&&i.resize(Math.abs(n[1]-n[0]),i.depth*a,(Math.min(n[0],n[1])||0)+((e=r.bandwidth)!==null&&e!==void 0?e:0)/2,-i.depth*a,n[1]-n[0]<0)},Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this.label.fontSize*1.5},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gridLength",{get:function(){return this._gridLength},set:function(e){(this._gridLength&&!e||!this._gridLength&&e)&&(this.gridLineSelection.clear(),this.labelSelection.clear()),this._gridLength=e},enumerable:!1,configurable:!0}),t.prototype.calculateDomain=function(){var e,r,n=this,i=n.direction,a=n.boundSeries,s=[],l=void 0;a.filter(function(d){return d.visible}).forEach(function(d){if(i===ee.X)if(l===void 0){var h=d.getDomain(i);s.push(h),l=typeof h[0]=="number"}else l&&s.push(d.getDomain(i));else s.push(d.getDomain(i))});var u=(e=new Array).concat.apply(e,kE([],FE(s))),c=(r=Xt(u))!==null&&r!==void 0?r:u;this.dataDomain=this.normaliseDataDomain(c),this.scale.domain=this.dataDomain},t.prototype.normaliseDataDomain=function(e){var r=e.filter(function(a,s,l){return l.indexOf(a)===s}),n=TE(r);this.tickTreeLayout=IE(n);var i=r.slice();return i.push(""),this.tickScale.domain=i,this.resizeTickTree(),r},t.prototype.update=function(e){var r=this;this.updateDirection(),this.calculateDomain(),this.updateRange();var n=this,i=n.scale,a=n.label,s=n.label.parallel,l=n.moduleCtx.callbackCache,u=n.tickScale,c=n.range,d=n.title,h=n.title,f=h===void 0?{}:h,p=f.formatter,v=p===void 0?function(U){return U.defaultValue}:p,g=n._titleCaption,m=i.range[0],y=i.range[1],S=Math.abs(y-m),C=S/i.domain.length||0,w=or(this.rotation),x=Math.abs(Math.cos(w))<1e-8,b=a.getSideFlag();this.updatePosition({rotation:w,sideFlag:b}),g.node.visible=!1;var _=this.lineHeight,T=this.tickTreeLayout,O=i.ticks(),P=T?T.nodes:[],M=T?T.depth>1:!1,I=u.ticks(),R=th({rotation:a.rotation,parallel:s,regularFlipRotation:Rt(w-Math.PI/2),parallelFlipRotation:Rt(w)}),L=R.defaultRotation,F=R.configuredRotation,k=R.parallelFlipFlag,N=this.gridLineSelection.update(this.gridLength?I:[]),G=this.labelSelection.update(P),$=a.formatter,j=new Map,z=0;G.each(function(U,ne,fe){var Se;U.fontStyle=a.fontStyle,U.fontWeight=a.fontWeight,U.fontSize=a.fontSize,U.fontFamily=a.fontFamily,U.fill=a.color,U.textBaseline=k===-1?"bottom":"hanging",U.textAlign="center",U.translationX=ne.screenY-a.fontSize*.25,U.translationY=ne.screenX,fe===0?d!=null&&d.enabled&&O.length>0?(U.visible=!0,U.text=l.call(v,r.getTitleFormatterParams()),U.fontSize=d.fontSize,U.fontStyle=d.fontStyle,U.fontWeight=d.fontWeight,U.fontFamily=d.fontFamily,U.textBaseline="hanging"):U.visible=!1:$?(U.text=(Se=l.call($,{value:String(ne.label),index:fe}))!==null&&Se!==void 0?Se:String(ne.label),U.visible=ne.screenX>=c[0]&&ne.screenX<=c[1]):(U.text=String(ne.label),U.visible=ne.screenX>=c[0]&&ne.screenX<=c[1]);var He=U.computeBBox();j.set(U.id,He),He.width>z&&(z=He.width)});var W=b*a.padding,Y=this.label.grid,H=[];G.each(function(U,ne,fe){if(U.x=W,U.rotationCenterX=W,ne.children.length){U.translationX-=z-_+r.label.padding;var He=ne.leafCount*C,Se=j.get(U.id);Se&&Se.width>He?U.visible=!1:x?U.rotation=L:U.rotation=-Math.PI/2}else{U.rotation=F,U.textAlign="end",U.textBaseline="middle";var Se=j.get(U.id);Se&&Se.height>C&&(U.visible=!1)}if(ne.parent&&M){var ut=ne.children.length?ne.screenX-ne.leafCount*C/2:ne.screenX-C/2;if(!ne.children.length)(ne.number!==ne.children.length-1||Y)&&H.push({y:ut,x1:0,x2:-z-r.label.padding*2,toString:function(){return String(fe)}});else{var ur=-z-r.label.padding*2+ne.screenY;H.push({y:ut,x1:ur+_,x2:ur,toString:function(){return String(fe)}})}}});var K=0;H.forEach(function(U){return K=Math.min(K,U.x2)}),H.push({y:Math.max(m,y),x1:0,x2:K,toString:function(){return String(H.length)}});var q=this.separatorSelection.update(H),Q=1e-7;q.each(function(U,ne){U.x1=ne.x1,U.x2=ne.x2,U.y1=ne.y,U.y2=ne.y,U.visible=ne.y>=c[0]-Q&&ne.y<=c[1]+Q,U.stroke=r.tick.color,U.fill=void 0,U.strokeWidth=1}),this.gridLineSelection=N,this.labelSelection=G;for(var se=T?T.depth+1:1,ae=[],xe=0;xe<se;xe++)ae.push(xe);var _e=this.axisLineSelection.update(ae);if(_e.each(function(U,ne,fe){var Se=fe>0?-z-r.label.padding*2-(fe-1)*_:0;U.x1=Se,U.x2=Se,U.y1=c[0],U.y2=c[1],U.strokeWidth=r.line.width,U.stroke=r.line.color,U.visible=O.length>0&&(fe===0||Y&&M)}),this.gridLength){var ye=this.gridStyle,me=ye.length;N.each(function(U,ne,fe){var Se=Math.round(u.convert(ne));U.x1=0,U.x2=-b*r.gridLength,U.y1=Se,U.y2=Se,U.visible=Se>=c[0]&&Se<=c[1];var He=ye[fe%me];U.stroke=He.stroke,U.strokeWidth=r.tick.width,U.lineDash=He.lineDash,U.fill=void 0})}return e},t.className="GroupedCategoryAxis",t.type="groupedCategory",Wg([A(Fe)],t.prototype,"labelColor",void 0),t}(xu),GE=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ns=function(){return ns=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},ns.apply(this,arguments)},VE=function(o,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):n(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},jE=function(o,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Xf=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},vc=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},BE=["top","right","bottom","left"],Ug=function(o){GE(t,o);function t(e,r,n){e===void 0&&(e=window.document);var i=o.call(this,e,r,n)||this;return i.paired=!0,i._lastAxisWidths={top:0,bottom:0,left:0,right:0},i._lastVisibility={crossLines:!0,series:!0},i}return t.prototype.performLayout=function(){return VE(this,void 0,void 0,function(){var e,r,n,i,a,s,l,u,c,d,h;return jE(this,function(f){switch(f.label){case 0:return[4,o.prototype.performLayout.call(this)];case 1:return e=f.sent(),r=this.updateAxes(e),n=r.seriesRect,i=r.visibility,a=r.clipSeries,this.seriesRoot.visible=i.series,this.seriesRect=n,this.seriesRoot.translationX=Math.floor(n.x),this.seriesRoot.translationY=Math.floor(n.y),s=this,l=s.seriesRoot,u=s.seriesAreaPadding,c=n.clone().grow({top:u.top,right:u.right,bottom:u.bottom,left:u.left}),d=20,h=c.clone().grow(d),this.hoverRect=h,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:n,paddedRect:c,hoverRect:h,visible:i.series},axes:this.axes.map(function(p){return ns({id:p.id},p.getLayoutState())})}),a?l.setClipRectInGroupCoordinateSpace(n):l.setClipRectInGroupCoordinateSpace(),[2,e]}})})},t.prototype.updateAxes=function(e){var r,n,i,a=ns({},this._lastAxisWidths),s=ns({},this._lastVisibility),l=new Set(this._axes.map(function(w){return w.position}));try{for(var u=Xf(Object.keys(a)),c=u.next();!c.done;c=u.next()){var d=c.value;l.has(d)||delete a[d]}}catch(w){r={error:w}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}var h=function(w,x){return Object.keys(w).some(function(b){return a[b]==null})?!1:s.crossLines===x.crossLines&&s.series===x.series&&Object.entries(a).every(function(b){var _=vc(b,2),T=_[0],O=_[1],P=w[T];return O!=null||P!=null?O===P:!0})},f=function(w){return Object.entries(w).reduce(function(x,b){var _=vc(b,2),T=_[0],O=_[1];return O&&Math.abs(O)===1/0&&(O=0),x[T]=O!=null?Math.ceil(O):O,x},{})},p={},v={},g=!1,m=(i=this.seriesRect)===null||i===void 0?void 0:i.clone(),y=0;do{Object.assign(a,p),Object.assign(s,v);var S=this.updateAxesPass(a,e.clone(),m);if(p=f(S.axisWidths),v=S.visibility,g=S.clipSeries,m=S.seriesRect,y++>10){re.warn("unable to find stable axis layout.");break}}while(!h(p,v));var C=5;return this.axes.forEach(function(w){if(w.setCrossLinesVisible(s.crossLines),!!m)switch(w.clipGrid(m.x,m.y,m.width+C,m.height+C),w.position){case"left":case"right":w.clipTickLines(e.x,m.y,e.width+C,m.height+C);break;case"top":case"bottom":w.clipTickLines(m.x,e.y,m.width+C,e.height+C);break}}),this._lastAxisWidths=a,this._lastVisibility=s,{seriesRect:m,visibility:s,clipSeries:g}},t.prototype.updateAxesPass=function(e,r,n){var i=this,a=this.axes,s={},l={},u={series:!0,crossLines:!0},c=!1,d={},h=this.applySeriesPadding(r),f=n?this.buildCrossLinePadding(e):{},p=this.buildAxisBound(h,e,f,u),v=this.buildSeriesRect(p,e);return a.forEach(function(g){var m,y,S=g.position,C=S===void 0?"left":S,w=i.calculateAxisDimensions({axis:g,seriesRect:v,paddedBounds:h,axisWidths:e,newAxisWidths:l,primaryTickCounts:d,clipSeries:c,addInterAxisPadding:((m=s[C])!==null&&m!==void 0?m:0)>0}),x=w.clipSeries,b=w.axisThickness,_=w.axisOffset;s[C]=((y=s[C])!==null&&y!==void 0?y:0)+1,c=c||x,i.positionAxis({axis:g,axisBound:p,axisOffset:_,axisThickness:b,axisWidths:e,primaryTickCounts:d,seriesRect:v})}),{clipSeries:c,seriesRect:v,axisWidths:l,visibility:u}},t.prototype.buildCrossLinePadding=function(e){var r,n,i,a={};this.axes.forEach(function(f){f.crossLines&&f.crossLines.forEach(function(p){p.calculatePadding(a)})});try{for(var s=Xf(Object.entries(a)),l=s.next();!l.done;l=s.next()){var u=vc(l.value,2),c=u[0],d=u[1],h=d===void 0?0:d;a[c]=Math.max(h-((i=e[c])!==null&&i!==void 0?i:0),0)}}catch(f){r={error:f}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.prototype.applySeriesPadding=function(e){var r=this,n=e.clone(),i=this.axes.slice().reverse();return BE.forEach(function(a){var s=r.seriesAreaPadding[a],l=i.find(function(u){return u.position===a});l?l.seriesAreaPadding=s:n.shrink(s,a)}),n},t.prototype.buildAxisBound=function(e,r,n,i){var a,s,l,u,c=e.clone(),d=n.top,h=d===void 0?0:d,f=n.right,p=f===void 0?0:f,v=n.bottom,g=v===void 0?0:v,m=n.left,y=m===void 0?0:m,S=y+p,C=h+g,w=((a=r.left)!==null&&a!==void 0?a:0)+((s=r.right)!==null&&s!==void 0?s:0)+S,x=((l=r.top)!==null&&l!==void 0?l:0)+((u=r.bottom)!==null&&u!==void 0?u:0)+C;return c.width<=w||c.height<=x?(i.crossLines=!1,i.series=!1,c):(c.x+=y,c.y+=h,c.width-=S,c.height-=C,c)},t.prototype.buildSeriesRect=function(e,r){var n=e.clone(),i=r.top,a=r.bottom,s=r.left,l=r.right;return n.x+=s??0,n.y+=i??0,n.width-=(s??0)+(l??0),n.height-=(i??0)+(a??0),n.width=Math.max(0,n.width),n.height=Math.max(0,n.height),n},t.prototype.clampToOutsideSeriesRect=function(e,r,n,i){var a=e.x,s=e.y,l=e.width,u=e.height,c=[a,s,a+l,s+u],d=i===1?Math.min:Math.max,h=c[(n==="x"?0:1)+(i===1?0:2)];return d(r,h)},t.prototype.calculateAxisDimensions=function(e){var r,n,i,a,s,l=e.axis,u=e.seriesRect,c=e.paddedBounds,d=e.axisWidths,h=e.newAxisWidths,f=e.primaryTickCounts,p=e.addInterAxisPadding,v=e.clipSeries,g=l.position,m=g===void 0?"left":g,y=l.direction,S=function(F){return F instanceof Zo||F instanceof Yl?[0,u.height]:[u.height,0]},C=(r=h[m])!==null&&r!==void 0?r:0;switch(m){case"top":case"bottom":l.range=[0,u.width],l.gridLength=u.height;break;case"right":case"left":l.range=S(l),l.gridLength=u.width;break}var w=this.zoomManager.getAxisZoom(l.id),x=w??{},b=x.min,_=b===void 0?0:b,T=x.max,O=T===void 0?1:T;l.visibleRange=[_,O],!v&&(l.visibleRange[0]>0||l.visibleRange[1]<1)&&(v=!0);var P=l.nice?f[y]:void 0,M=.3;l.thickness!=null&&l.thickness>0?l.maxThickness=l.thickness:y===ee.Y?l.maxThickness=c.width*M:l.maxThickness=c.height*M,P=l.update(P),f[y]=(n=f[y])!==null&&n!==void 0?n:P;var I=0;if(l.thickness!=null&&l.thickness>0)I=l.thickness;else{var R=l.computeBBox();I=y===ee.X?R.height:R.width}var L=15;return p&&(I+=L),I=Math.ceil(I),h[m]=((i=h[m])!==null&&i!==void 0?i:0)+I,l.gridPadding=((a=d[m])!==null&&a!==void 0?a:0)-((s=h[m])!==null&&s!==void 0?s:0),{clipSeries:v,axisThickness:I,axisOffset:C}},t.prototype.positionAxis=function(e){var r,n,i,a,s=e.axis,l=e.axisBound,u=e.axisWidths,c=e.seriesRect,d=e.axisOffset,h=e.axisThickness,f=s.position;switch(f){case"top":s.translation.x=l.x+((r=u.left)!==null&&r!==void 0?r:0),s.translation.y=this.clampToOutsideSeriesRect(c,l.y+1+d+h,"y",1);break;case"bottom":s.translation.x=l.x+((n=u.left)!==null&&n!==void 0?n:0),s.translation.y=this.clampToOutsideSeriesRect(c,l.y+l.height+1-h-d,"y",-1);break;case"left":s.translation.y=l.y+((i=u.top)!==null&&i!==void 0?i:0),s.translation.x=this.clampToOutsideSeriesRect(c,l.x+d+h,"x",1);break;case"right":s.translation.y=l.y+((a=u.top)!==null&&a!==void 0?a:0),s.translation.x=this.clampToOutsideSeriesRect(c,l.x+l.width-h-d,"x",-1);break}s.updatePosition({rotation:or(s.rotation),sideFlag:s.label.getSideFlag()})},t.className="CartesianChart",t.type="cartesian",t}(qd),HE=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yf=function(o){HE(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.shape="polygon",e}return t.prototype.computeLabelsBBox=function(e,r){return null},t}(Mg),zE=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),WE=function(o,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):n(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},UE=function(o,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},qf=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Zf=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},KE=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Kg=function(o){zE(t,o);function t(e,r,n){e===void 0&&(e=window.document);var i=o.call(this,e,r,n)||this;return i.padding=new Vl(40),i}return t.prototype.performLayout=function(){return WE(this,void 0,void 0,function(){var e,r,n,i;return UE(this,function(a){switch(a.label){case 0:return[4,o.prototype.performLayout.call(this)];case 1:return e=a.sent(),r=e.clone(),this.computeSeriesRect(e),this.computeCircle(e),this.axes.forEach(function(s){return s.update()}),n=20,i=e.clone().grow(n),this.hoverRect=i,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:r,paddedRect:e,hoverRect:i,visible:!0},axes:[]}),[2,e]}})})},t.prototype.updateAxes=function(e,r,n){var i;this.axes.forEach(function(u){var c;if(u.direction===ee.X){var d=or((c=u.rotation)!==null&&c!==void 0?c:0);u.range=[-Math.PI/2+d,3*Math.PI/2+d],u.gridLength=n,u.translation.x=e,u.translation.y=r}else u.direction===ee.Y&&(u.range=[n,0],u.translation.x=e,u.translation.y=r-n);u.updateScale()});var a=this.axes.find(function(u){return u.direction===ee.X}),s=a==null?void 0:a.scale,l=(i=s==null?void 0:s.ticks)===null||i===void 0?void 0:i.call(s).map(function(u){return s.convert(u)});this.axes.filter(function(u){return u instanceof Yf}).forEach(function(u){return u.gridAngles=l})},t.prototype.computeSeriesRect=function(e){var r=this.seriesAreaPadding;e.shrink(r.left,"left"),e.shrink(r.top,"top"),e.shrink(r.right,"right"),e.shrink(r.bottom,"bottom"),this.seriesRect=e},t.prototype.computeCircle=function(e){var r=this,n=this.series.filter(function(h){return h instanceof Fg}),i=this.axes.filter(function(h){return h instanceof Yf}),a=function(h,f,p){r.updateAxes(h,f,p),n.forEach(function(y){y.centerX=h,y.centerY=f,y.radius=p});var v=n.filter(function(y){return y instanceof Ng});if(v.length>1){var g=v.map(function(y){var S=y.getInnerRadius();return{series:y,innerRadius:S}}).sort(function(y,S){return y.innerRadius-S.innerRadius});g[g.length-1].series.surroundingRadius=void 0;for(var m=0;m<g.length-1;m++)g[m].series.surroundingRadius=g[m+1].innerRadius}},s=e.x+e.width/2,l=e.y+e.height/2,u=Math.max(0,Math.min(e.width,e.height)/2),c=u;a(s,l,c);var d=function(h){var f,p,v=h===void 0?{}:h,g=v.hideWhenNecessary,m=g===void 0?!1:g,y=[];try{for(var S=KE(Zf(Zf([],qf(i)),qf(n))),C=S.next();!C.done;C=S.next()){var w=C.value,x=w.computeLabelsBBox({hideWhenNecessary:m},e);x&&y.push(x)}}catch(T){f={error:T}}finally{try{C&&!C.done&&(p=S.return)&&p.call(S)}finally{if(f)throw f.error}}if(y.length===0){a(s,l,u);return}var b=Ee.merge(y),_=r.refineCircle(b,c,e);a(_.centerX,_.centerY,_.radius),_.radius!==c&&(c=_.radius)};return d(),d(),d(),d({hideWhenNecessary:!0}),d({hideWhenNecessary:!0}),{radius:c,centerX:s,centerY:l}},t.prototype.refineCircle=function(e,r,n){var i=.5,a=-r,s=-r,l=r,u=r,c=Math.max(0,a-e.x),d=Math.max(0,s-e.y),h=Math.max(0,e.x+e.width-l),f=Math.max(0,e.y+e.height-u),p=n.width-c-h,v=n.height-d-f,g=Math.min(p,v)/2,m=i*n.width/2,y=i*n.height/2,S=Math.min(m,y);if(g<S){g=S;var C=c+h,w=d+f;if(2*g+w>n.height){var x=n.height-2*g;Math.min(d,f)*2>x?(d=x/2,f=x/2):d>f?d=x-f:f=x-d}if(2*g+C>n.width){var b=n.width-2*g;Math.min(c,h)*2>b?(c=b/2,h=b/2):c>h?c=b-h:h=b-c}}var _=c+2*g+h,T=d+2*g+f;return{centerX:n.x+(n.width-_)/2+c+g,centerY:n.y+(n.height-T)/2+d+g,radius:g}},t.className="PolarChart",t.type="polar",t}(qd),$E=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jf=function(o,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):n(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},Qf=function(o,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},$g=function(o){$E(t,o);function t(e,r,n){e===void 0&&(e=window.document);var i=o.call(this,e,r,n)||this;return i._data={},i}return t.prototype.performLayout=function(){return Jf(this,void 0,void 0,function(){var e,r,n,i,a,s,l=this;return Qf(this,function(u){switch(u.label){case 0:return[4,o.prototype.performLayout.call(this)];case 1:return e=u.sent(),r=this.seriesAreaPadding,n=e.clone(),e.shrink(r.left,"left"),e.shrink(r.top,"top"),e.shrink(r.right,"right"),e.shrink(r.bottom,"bottom"),this.seriesRect=e,i=20,a=e.clone().grow(i),this.hoverRect=a,this.seriesRoot.translationX=Math.floor(e.x),this.seriesRoot.translationY=Math.floor(e.y),[4,Promise.all(this.series.map(function(c){return Jf(l,void 0,void 0,function(){return Qf(this,function(d){switch(d.label){case 0:return[4,c.update({seriesRect:e})];case 1:return d.sent(),[2]}})})}))];case 2:return u.sent(),s=this.seriesRoot,s.setClipRectInGroupCoordinateSpace(new Ee(e.x,e.y,e.width,e.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:n,paddedRect:e,hoverRect:a,visible:!0},axes:[]}),[2,e]}})})},t.className="HierarchyChart",t.type="hierarchy",t}(qd);function XE(o,t){var e=Math.floor(o[0]),r=o[1];e=YE(e,r,t);var n=ZE(e,r,t),i=t-1;r=e+i*n;var a=[e,r],s=qE(e,n,t);return[a,s]}function YE(o,t,e){var r=Math.abs(t-o)/(e-1),n=Math.floor(Math.log10(r)),i=Math.pow(10,n);return Math.floor(o/i)*i}function qE(o,t,e){for(var r=Math.floor(Math.log10(t)),n=t>0&&t<1?Math.abs(r):0,i=Math.pow(10,n),a=new Jd(n),s=0;s<e;s++){var l=o+t*s;a[s]=Math.round(l*i)/i}return a}function ZE(o,t,e){var r=e-1,n=(t-o)/r;return JE(n)}function JE(o){var t=Math.floor(Math.log10(o)),e=Math.pow(10,t),r=o/e*10;return r>0&&r<=1?e/10:r>1&&r<=2?2*e/10:r>1&&r<=5?5*e/10:r>5&&r<=10?10*e/10:r>10&&r<=20?20*e/10:r>20&&r<=40?40*e/10:r>40&&r<=50?50*e/10:r>50&&r<=100?100*e/10:r}var Xg=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ad=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},QE=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},eT=function(o){Xg(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.maxSpacing=NaN,e}return ad([A(vn(Vn(1),ys("minSpacing"))),jn(NaN)],t.prototype,"maxSpacing",void 0),t}(rh),ql=function(o){Xg(t,o);function t(e,r){r===void 0&&(r=new it);var n=o.call(this,e,r)||this;return n.min=NaN,n.max=NaN,r.strictClampByDefault=!0,n}return t.prototype.normaliseDataDomain=function(e){var r=this,n=r.min,i=r.max;return LO(e,n,i)},t.prototype.formatDatum=function(e){return typeof e=="number"?e.toFixed(2):(re.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(e))},t.prototype.createTick=function(){return new eT},t.prototype.updateSecondaryAxisTicks=function(e){if(this.dataDomain==null)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");var r=QE(XE(this.dataDomain,e??0),2),n=r[0],i=r[1];return this.scale.nice=!1,this.scale.domain=n,this.scale.update(),i},t.className="NumberAxis",t.type="number",ad([A(vn(Vn(),mu("max"))),jn(NaN)],t.prototype,"min",void 0),ad([A(vn(Vn(),ys("min"))),jn(NaN)],t.prototype,"max",void 0),t}(xu),tT=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ep=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i};function tp(){var o="expecting a non-zero Number";return ue(function(t){return typeof t=="number"&&t!==0},o)}var Zl=function(o){tT(t,o);function t(e){var r=o.call(this,e,new Pg)||this;return r.min=NaN,r.max=NaN,r.scale.strictClampByDefault=!0,r}return t.prototype.normaliseDataDomain=function(e){var r,n=this,i=n.min,a=n.max;e.length>2&&(e=(r=Xt(e))!==null&&r!==void 0?r:[NaN,NaN]),isNaN(i)||(e=[i,e[1]]),isNaN(a)||(e=[e[0],a]);var s=e[0]>e[1],l=e[0]<0&&e[1]>0,u=e[0]===0&&e[1]===0,c=s||l||u;return c&&(e=[],l?re.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):u&&re.warn("the data domain has 0 extent, no data is rendered.")),e[0]===0&&(e[0]=1),e[1]===0&&(e[1]=-1),e},Object.defineProperty(t.prototype,"base",{get:function(){return this.scale.base},set:function(e){this.scale.base=e},enumerable:!1,configurable:!0}),t.className="LogAxis",t.type="log",ep([A(vn(Vn(),mu("max"),tp())),jn(NaN)],t.prototype,"min",void 0),ep([A(vn(Vn(),ys("min"),tp())),jn(NaN)],t.prototype,"max",void 0),t}(ql),Yg=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),sd=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},rT=function(o){Yg(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.maxSpacing=NaN,e}return sd([A(vn(Vn(1),ys("minSpacing"))),jn(NaN)],t.prototype,"maxSpacing",void 0),t}(rh),ld=function(o){Yg(t,o);function t(e){var r=o.call(this,e,new eh)||this;r.datumFormat="%m/%d/%y, %H:%M:%S",r.min=void 0,r.max=void 0;var n=r.scale;return n.strictClampByDefault=!0,r.refreshScale(),r.datumFormatter=n.tickFormat({specifier:r.datumFormat}),r}return t.prototype.normaliseDataDomain=function(e){var r,n=this,i=n.min,a=n.max;return typeof i=="number"&&(i=new Date(i)),typeof a=="number"&&(a=new Date(a)),e.length>2&&(e=((r=Xt(e))!==null&&r!==void 0?r:[0,1e3]).map(function(s){return new Date(s)})),i instanceof Date&&(e=[i,e[1]]),a instanceof Date&&(e=[e[0],a]),e[0]>e[1]&&(e=[]),e},t.prototype.createTick=function(){return new rT},t.prototype.onLabelFormatChange=function(e,r){r?o.prototype.onLabelFormatChange.call(this,e,r):this.labelFormatter=this.scale.tickFormat({ticks:e})},t.prototype.formatDatum=function(e){var r;return(r=this.moduleCtx.callbackCache.call(this.datumFormatter,e))!==null&&r!==void 0?r:String(e)},t.prototype.calculatePadding=function(e,r){return[0,1]},t.className="TimeAxis",t.type="time",sd([A(vn(Qh,mu("max")))],t.prototype,"min",void 0),sd([A(vn(Qh,ys("min")))],t.prototype,"max",void 0),t}(xu),ti,Jl=(ti={},ti[ql.type]=ql,ti[Zo.type]=Zo,ti[ld.type]=ld,ti[Yl.type]=Yl,ti[Zl.type]=Zl,ti);function nT(o,t){Jl[o]=t}function iT(o,t){var e=Jl[o];if(e)return new e(t);throw new Error("AG Charts - unknown axis type: "+o)}var oh={has:function(o){return Object.prototype.hasOwnProperty.call(Jl,o)},get axesTypes(){return Object.keys(Jl)}},qg={};function rp(o,t){qg[o]=t}function oT(o){var t;return(t=qg[o])!==null&&t!==void 0?t:{}}var aT=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dr=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},sT=["circle","cross","diamond","heart","plus","square","triangle"],lT=ue(function(o){return sT.includes(o)||Object.getPrototypeOf(o)===Wn},"expecting a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),uT=function(o){aT(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.enabled=!0,e.shape=us,e.size=6,e.maxSize=30,e.domain=void 0,e.fill=void 0,e.stroke=void 0,e.strokeWidth=1,e.fillOpacity=void 0,e.strokeOpacity=void 0,e}return Dr([A(Re),ie({redraw:Z.MAJOR})],t.prototype,"enabled",void 0),Dr([A(lT),ie({redraw:Z.MAJOR})],t.prototype,"shape",void 0),Dr([A(J(0)),ie({redraw:Z.MAJOR})],t.prototype,"size",void 0),Dr([A(J(0)),ie({redraw:Z.MAJOR})],t.prototype,"maxSize",void 0),Dr([A(eg),ie({redraw:Z.MAJOR})],t.prototype,"domain",void 0),Dr([A(Fe),ie({redraw:Z.MAJOR})],t.prototype,"fill",void 0),Dr([A(Fe),ie({redraw:Z.MAJOR})],t.prototype,"stroke",void 0),Dr([A(Pe(0)),ie({redraw:Z.MAJOR})],t.prototype,"strokeWidth",void 0),Dr([A(Pe(0,1)),ie({redraw:Z.MAJOR})],t.prototype,"fillOpacity",void 0),Dr([A(Pe(0,1)),ie({redraw:Z.MAJOR})],t.prototype,"strokeOpacity",void 0),t}(jd),ia=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ql=function(){return Ql=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Ql.apply(this,arguments)},Zg=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},kt=function(o,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):n(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},Nt=function(o,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},bn=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cT=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},nl,il,dT=(nl={},nl[ee.X]=["xKey"],nl[ee.Y]=["yKey"],nl),hT=(il={},il[ee.X]=["xName"],il[ee.Y]=["yName"],il),ah=function(o){ia(t,o);function t(e,r,n,i,a){var s=o.call(this,n,i,a)||this;return s.xKey=e,s.yKey=r,s}return t}(ms),wu=function(o){ia(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.type="nodeClick",e}return t}(ah),bu=function(o){ia(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return t}(ah),fT=function(o){ia(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t}(nh),Cs=function(o){ia(t,o);function t(e){var r=o.call(this,Ql(Ql({},e),{useSeriesGroupLayer:!0,directionKeys:dT,directionNames:hT}))||this;r.legendItemName=void 0,r._contextNodeData=[],r.nodeDataDependencies={},r.highlightSelection=Ge.select(r.highlightNode,function(){return r.opts.hasMarkers?r.markerFactory():r.nodeFactory()}),r.highlightLabelSelection=Ge.select(r.highlightLabel,Me),r.subGroups=[],r.subGroupId=0,r.datumSelectionGarbageCollection=!0;var n=e.pathsPerSeries,i=n===void 0?1:n,a=e.hasMarkers,s=a===void 0?!1:a,l=e.hasHighlightedLabels,u=l===void 0?!1:l,c=e.pathsZIndexSubOrderOffset,d=c===void 0?[]:c;return r.opts={pathsPerSeries:i,hasMarkers:s,hasHighlightedLabels:u,pathsZIndexSubOrderOffset:d},r.animationState=new fT("empty",{empty:{on:{update:{target:"ready",action:function(h){return r.animateEmptyUpdateReady(h)}}}},ready:{on:{updateData:{target:"waiting",action:function(){}},update:{target:"ready",action:function(h){return r.animateReadyUpdate(h)}},highlight:{target:"ready",action:function(h){return r.animateReadyHighlight(h)}},highlightMarkers:{target:"ready",action:function(h){return r.animateReadyHighlightMarkers(h)}},resize:{target:"ready",action:function(h){return r.animateReadyResize(h)}}}},waiting:{on:{update:{target:"ready",action:function(h){return r.animateWaitingUpdateReady(h)}}}}}),r}return Object.defineProperty(t.prototype,"contextNodeData",{get:function(){var e;return(e=this._contextNodeData)===null||e===void 0?void 0:e.slice()},enumerable:!1,configurable:!0}),t.prototype.addChartEventListeners=function(){var e=this,r,n;(r=this.ctx.chartEventManager)===null||r===void 0||r.addListener("legend-item-click",function(i){return e.onLegendItemClick(i)}),(n=this.ctx.chartEventManager)===null||n===void 0||n.addListener("legend-item-double-click",function(i){return e.onLegendItemDoubleClick(i)})},t.prototype.destroy=function(){o.prototype.destroy.call(this),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)},t.prototype.checkDomainXY=function(e,r,n,i){var a=(n&&Ll(e)||!n&&ed(e))&&(i&&Ll(r)||!i&&ed(r));return a?[e,r]:void 0},t.prototype.checkRangeXY=function(e,r,n,i){return!isNaN(e)&&!isNaN(r)&&n.inRange(e)&&i.inRange(r)},t.prototype.update=function(e){var r,n,i=e.seriesRect;return kt(this,void 0,void 0,function(){var a,s,l,u,c;return Nt(this,function(d){switch(d.label){case 0:return a=this.visible,s=((n=(r=this.ctx.highlightManager)===null||r===void 0?void 0:r.getActiveHighlight())!==null&&n!==void 0?n:{}).series,l=s?s===this:void 0,u={seriesRectWidth:i==null?void 0:i.width,seriesRectHeight:i==null?void 0:i.height},c=Pi(this.nodeDataDependencies,u)!=null,c&&(this.nodeDataDependencies=u,this.markNodeDataDirty()),[4,this.updateSelections(l,a)];case 1:return d.sent(),[4,this.updateNodes(l,a)];case 2:return d.sent(),c&&this.animationState.transition("resize",{datumSelections:this.subGroups.map(function(h){var f=h.datumSelection;return f}),markerSelections:this.subGroups.map(function(h){var f=h.markerSelection;return f}),contextData:this._contextNodeData,paths:this.subGroups.map(function(h){var f=h.paths;return f})}),this.animationState.transition("update",{datumSelections:this.subGroups.map(function(h){var f=h.datumSelection;return f}),markerSelections:this.subGroups.map(function(h){var f=h.markerSelection;return f}),labelSelections:this.subGroups.map(function(h){var f=h.labelSelection;return f}),contextData:this._contextNodeData,paths:this.subGroups.map(function(h){var f=h.paths;return f}),seriesRect:i}),[2]}})})},t.prototype.updateSelections=function(e,r){var n;return kt(this,void 0,void 0,function(){var i,a=this;return Nt(this,function(s){switch(s.label){case 0:return[4,this.updateHighlightSelection(e)];case 1:return s.sent(),r?!this.nodeDataRefresh&&!this.isPathOrSelectionDirty()?[2]:this.nodeDataRefresh?(this.nodeDataRefresh=!1,!((n=this.chart)===null||n===void 0)&&n.debug&&re.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),i=this,[4,this.createNodeData()]):[3,4]:[2];case 2:return i._contextNodeData=s.sent(),[4,this.updateSeriesGroups()];case 3:s.sent(),s.label=4;case 4:return[4,Promise.all(this.subGroups.map(function(l,u){return a.updateSeriesGroupSelections(l,u)}))];case 5:return s.sent(),[2]}})})},t.prototype.updateSeriesGroupSelections=function(e,r){return kt(this,void 0,void 0,function(){var n,i,a,s,l,u,c,d,h;return Nt(this,function(f){switch(f.label){case 0:return n=e.datumSelection,i=e.labelSelection,a=e.markerSelection,s=this._contextNodeData[r],l=s.nodeData,u=s.labelData,c=e,[4,this.updateDatumSelection({nodeData:l,datumSelection:n,seriesIdx:r})];case 1:return c.datumSelection=f.sent(),d=e,[4,this.updateLabelSelection({labelData:u,labelSelection:i,seriesIdx:r})];case 2:return d.labelSelection=f.sent(),a?(h=e,[4,this.updateMarkerSelection({nodeData:l,markerSelection:a,seriesIdx:r})]):[3,4];case 3:h.markerSelection=f.sent(),f.label=4;case 4:return[2]}})})},t.prototype.nodeFactory=function(){return new le},t.prototype.markerFactory=function(){var e=na();return new e},t.prototype.updateSeriesGroups=function(){return kt(this,void 0,void 0,function(){var e,r,n,i,a,s,l,u,c,d,h,f,p,v,g,m=this;return Nt(this,function(y){if(e=this,r=e._contextNodeData,n=e.contentGroup,i=e.subGroups,a=e.opts,s=a.pathsPerSeries,l=a.hasMarkers,r.length===i.length)return[2];for(r.length<i.length&&i.splice(r.length).forEach(function(S){var C,w,x=S.dataNodeGroup,b=S.markerGroup,_=S.labelGroup,T=S.paths;n.removeChild(x),b&&n.removeChild(b),_&&n.removeChild(_);try{for(var O=bn(T),P=O.next();!P.done;P=O.next()){var M=P.value;n.removeChild(M)}}catch(I){C={error:I}}finally{try{P&&!P.done&&(w=O.return)&&w.call(O)}finally{if(C)throw C.error}}}),u=r.length;u>i.length;){for(c=!1,d=this.subGroupId++,h=new le({name:this.id+"-series-sub"+d+"-dataNodes",layer:c,zIndex:Xe.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data",d)}),f=l?new le({name:this.id+"-series-sub"+this.subGroupId+++"-markers",layer:c,zIndex:Xe.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("marker",d)}):void 0,p=new le({name:this.id+"-series-sub"+this.subGroupId+++"-labels",layer:c,zIndex:Xe.SERIES_LABEL_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("labels",d)}),n.appendChild(h),n.appendChild(p),f&&n.appendChild(f),v=[],g=0;g<s;g++)v[g]=new It,v[g].zIndex=Xe.SERIES_LAYER_ZINDEX,v[g].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",g),n.appendChild(v[g]);i.push({paths:v,dataNodeGroup:h,markerGroup:f,labelGroup:p,labelSelection:Ge.select(p,Me),datumSelection:Ge.select(h,function(){return m.nodeFactory()},this.datumSelectionGarbageCollection),markerSelection:f?Ge.select(f,function(){return m.markerFactory()}):void 0})}return[2]})})},t.prototype.getGroupZIndexSubOrder=function(e,r){var n;r===void 0&&(r=0);var i=o.prototype.getGroupZIndexSubOrder.call(this,e,r);if(e==="paths"){var a=(n=this.opts.pathsZIndexSubOrderOffset[r])!==null&&n!==void 0?n:0,s=i[0];typeof s=="function"?i[0]=function(){return+s()+a}:i[0]=+s+a}return i},t.prototype.updateNodes=function(e,r){var n;return kt(this,void 0,void 0,function(){var i,a,s,l,u,c,d,h,f,p=this;return Nt(this,function(v){switch(v.label){case 0:return i=this,a=i.highlightSelection,s=i.highlightLabelSelection,l=i._contextNodeData,u=i.opts,c=u.hasMarkers,d=u.hasHighlightedLabels,h=this.visible&&((n=this._contextNodeData)===null||n===void 0?void 0:n.length)>0&&r,this.rootGroup.visible=h,this.contentGroup.visible=h,this.highlightGroup.visible=h&&!!e,f=this.subGroups.map(function(g,m){var y=l[m].itemId;return p.getOpacity({itemId:y})}),c?[4,this.updateMarkerNodes({markerSelection:a,isHighlight:!0,seriesIdx:-1})]:[3,2];case 1:return v.sent(),this.animationState.transition("highlightMarkers",a),[3,4];case 2:return[4,this.updateDatumNodes({datumSelection:a,isHighlight:!0,seriesIdx:-1})];case 3:v.sent(),this.animationState.transition("highlight",a),v.label=4;case 4:return d?[4,this.updateLabelNodes({labelSelection:s,seriesIdx:-1})]:[3,6];case 5:v.sent(),v.label=6;case 6:return[4,Promise.all(this.subGroups.map(function(g,m){return kt(p,void 0,void 0,function(){var y,S,C,w,x,b,_,T,O,P,M,I,R,L;return Nt(this,function(F){switch(F.label){case 0:y=g.dataNodeGroup,S=g.markerGroup,C=g.datumSelection,w=g.labelSelection,x=g.markerSelection,b=g.paths,_=g.labelGroup,T=h,O=f[m],y.opacity=O,y.visible=T,_.visible=T,S&&(S.opacity=O,S.zIndex=y.zIndex>=Xe.SERIES_LAYER_ZINDEX?y.zIndex:y.zIndex+1,S.visible=T),_&&(_.opacity=O);try{for(P=bn(b),M=P.next();!M.done;M=P.next())I=M.value,I.opacity=O,I.visible=T}catch(k){R={error:k}}finally{try{M&&!M.done&&(L=P.return)&&L.call(P)}finally{if(R)throw R.error}}return y.visible?[4,this.updateDatumNodes({datumSelection:C,isHighlight:!1,seriesIdx:m})]:[2];case 1:return F.sent(),[4,this.updateLabelNodes({labelSelection:w,seriesIdx:m})];case 2:return F.sent(),c&&x?[4,this.updateMarkerNodes({markerSelection:x,isHighlight:!1,seriesIdx:m})]:[3,4];case 3:F.sent(),F.label=4;case 4:return[2]}})})}))];case 7:return v.sent(),[2]}})})},t.prototype.updateHighlightSelection=function(e){var r;return kt(this,void 0,void 0,function(){var n,i,a,s,l,u,c,d,h,f,p,v,g,m,y,S;return Nt(this,function(C){switch(C.label){case 0:return n=this,i=n.highlightSelection,a=n.highlightLabelSelection,s=n._contextNodeData,l=(r=this.ctx.highlightManager)===null||r===void 0?void 0:r.getActiveHighlight(),u=e&&(l!=null&&l.datum)?l:void 0,c=this,[4,this.updateHighlightSelectionItem({item:u,highlightSelection:i})];case 1:if(c.highlightSelection=C.sent(),this.isLabelEnabled()&&u!=null){h=u.itemId,f=h===void 0?void 0:h;try{for(p=bn(s),v=p.next();!v.done&&(g=v.value.labelData,d=g.find(function(w){return w.datum===u.datum&&w.itemId===f}),d==null);v=p.next());}catch(w){y={error:w}}finally{try{v&&!v.done&&(S=p.return)&&S.call(p)}finally{if(y)throw y.error}}}return m=this,[4,this.updateHighlightSelectionLabel({item:d,highlightLabelSelection:a})];case 2:return m.highlightLabelSelection=C.sent(),[2]}})})},t.prototype.pickNodeExactShape=function(e){var r,n,i=o.prototype.pickNodeExactShape.call(this,e);if(i)return i;var a=e.x,s=e.y,l=this.opts.hasMarkers;try{for(var u=bn(this.subGroups),c=u.next();!c.done;c=u.next()){var d=c.value,h=d.dataNodeGroup,f=d.markerGroup,p=h.pickNode(a,s);if(!p&&l&&(p=f==null?void 0:f.pickNode(a,s)),p)return{datum:p.datum,distance:0}}}catch(v){r={error:v}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}},t.prototype.pickNodeClosestDatum=function(e){var r,n,i,a,s,l,u=e.x,c=e.y,d=this,h=d.axes,f=d.rootGroup,p=d._contextNodeData,v=h[ee.X],g=h[ee.Y],m=f.transformPoint(u,c),y=1/0,S;try{for(var C=bn(p),w=C.next();!w.done;w=C.next()){var x=w.value;try{for(var b=(i=void 0,bn(x.nodeData)),_=b.next();!_.done;_=b.next()){var T=_.value,O=T.point,P=O===void 0?{}:O,M=P.x,I=M===void 0?NaN:M,R=P.y,L=R===void 0?NaN:R;if(!(isNaN(I)||isNaN(L))){var F=(v==null?void 0:v.inRange(I))&&(g==null?void 0:g.inRange(L));if(F){var k=Math.max(Math.pow(m.x-I,2)+Math.pow(m.y-L,2),0);k<y&&(y=k,S=T)}}}}catch(N){i={error:N}}finally{try{_&&!_.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}}}catch(N){r={error:N}}finally{try{w&&!w.done&&(n=C.return)&&n.call(C)}finally{if(r)throw r.error}}if(S){var k=Math.max(Math.sqrt(y)-((l=(s=S.point)===null||s===void 0?void 0:s.size)!==null&&l!==void 0?l:0),0);return{datum:S,distance:k}}},t.prototype.pickNodeMainAxisFirst=function(e,r){var n,i,a,s,l,u,c=e.x,d=e.y,h=this,f=h.axes,p=h.rootGroup,v=h._contextNodeData,g=f[ee.X],m=f[ee.Y],y=[g,m].filter(function(Q){return Q instanceof Zo}).map(function(Q){return Q.direction});if(!(r&&y.length===0)){var S=cT(y,1),C=S[0],w=C===void 0?ee.X:C,x=p.transformPoint(c,d),b=w===ee.X?[x.x,x.y]:[x.y,x.x],_=[1/0,1/0],T=void 0;try{for(var O=bn(v),P=O.next();!P.done;P=O.next()){var M=P.value;try{for(var I=(a=void 0,bn(M.nodeData)),R=I.next();!R.done;R=I.next()){var L=R.value,F=L.point,k=F===void 0?{}:F,N=k.x,G=N===void 0?NaN:N,$=k.y,j=$===void 0?NaN:$;if(!(isNaN(G)||isNaN(j))){var z=(g==null?void 0:g.inRange(G))&&(m==null?void 0:m.inRange(j));if(z){for(var W=w===ee.X?[G,j]:[j,G],Y=!0,H=0;H<W.length;H++){var K=Math.abs(W[H]-b[H]);if(K>_[H]){Y=!1;break}K<_[H]&&(_[H]=K,_.fill(1/0,H+1,_.length))}Y&&(T=L)}}}}catch(Q){a={error:Q}}finally{try{R&&!R.done&&(s=I.return)&&s.call(I)}finally{if(a)throw a.error}}}}catch(Q){n={error:Q}}finally{try{P&&!P.done&&(i=O.return)&&i.call(O)}finally{if(n)throw n.error}}if(T){var q=Math.max(Math.sqrt(Math.pow(_[0],2)+Math.pow(_[1],2))-((u=(l=T.point)===null||l===void 0?void 0:l.size)!==null&&u!==void 0?u:0),0);return{datum:T,distance:q}}}},t.prototype.onLegendItemClick=function(e){var r=e.enabled,n=e.itemId,i=e.series,a=e.legendItemName,s=this.legendItemName!=null&&this.legendItemName===a;i.id===this.id?this.toggleSeriesItem(n,r):s&&this.toggleSeriesItem(n,r)},t.prototype.onLegendItemDoubleClick=function(e){var r=e.enabled,n=e.itemId,i=e.series,a=e.numVisibleItems,s=e.legendItemName,l=Object.values(a).reduce(function(c,d){return c+d},0),u=this.legendItemName!=null&&this.legendItemName===s;i.id===this.id||u?this.toggleSeriesItem(n,!0):r&&l===1?this.toggleSeriesItem(n,!0):this.toggleSeriesItem(n,!1)},t.prototype.isPathOrSelectionDirty=function(){return!1},t.prototype.getLabelData=function(){return[]},t.prototype.updateHighlightSelectionItem=function(e){return kt(this,void 0,void 0,function(){var r,n,i,a,s;return Nt(this,function(l){return r=this.opts.hasMarkers,n=e.item,i=e.highlightSelection,a=n?[n]:[],r?(s=i,[2,this.updateMarkerSelection({nodeData:a,markerSelection:s,seriesIdx:-1})]):[2,this.updateDatumSelection({nodeData:a,datumSelection:i,seriesIdx:-1})]})})},t.prototype.updateHighlightSelectionLabel=function(e){return kt(this,void 0,void 0,function(){var r,n,i;return Nt(this,function(a){return r=e.item,n=e.highlightLabelSelection,i=r?[r]:[],[2,this.updateLabelSelection({labelData:i,labelSelection:n,seriesIdx:-1})]})})},t.prototype.updateDatumSelection=function(e){return kt(this,void 0,void 0,function(){return Nt(this,function(r){return[2,e.datumSelection]})})},t.prototype.updateDatumNodes=function(e){return kt(this,void 0,void 0,function(){return Nt(this,function(r){return[2]})})},t.prototype.updateMarkerSelection=function(e){return kt(this,void 0,void 0,function(){return Nt(this,function(r){return[2,e.markerSelection]})})},t.prototype.updateMarkerNodes=function(e){return kt(this,void 0,void 0,function(){return Nt(this,function(r){return[2]})})},t.prototype.animateEmptyUpdateReady=function(e){},t.prototype.animateReadyUpdate=function(e){},t.prototype.animateWaitingUpdateReady=function(e){},t.prototype.animateReadyHighlight=function(e){},t.prototype.animateReadyHighlightMarkers=function(e){},t.prototype.animateReadyResize=function(e){},Zg([A(de)],t.prototype,"legendItemName",void 0),t}(Cu),sh=function(o){ia(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.formatter=void 0,e}return Zg([A(Be),ie({redraw:Z.MAJOR})],t.prototype,"formatter",void 0),t}(uT),pT=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},vT=/(#\{(.*?)\})/g;function Jg(o,t,e){return o.replace(vT,function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=r[2],a=pT(i.split(":"),2),s=a[0],l=a[1],u=t[s];if(typeof u=="number"){var c=l&&e&&e[l];if(c){var d=c,h=d.locales,f=d.options;return u.toLocaleString(h,f)}return String(u)}if(u instanceof Date){var c=l&&e&&e[l];if(typeof c=="string"){var p=Ul(c);return p(u)}return u.toDateString()}return typeof u=="string"||u!=null&&u.toString?String(u):""})}var Qi=null;function vt(o){return Qi=Qi??document.createElement("div"),o?(Qi.textContent=o,Qi.innerHTML):""}var lh=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pn=function(){return Pn=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Pn.apply(this,arguments)},Pt=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},eo=function(o,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):n(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},to=function(o,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},tn=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},ro=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},gT=function(o){lh(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.formatter=void 0,e}return Pt([A(Be)],t.prototype,"formatter",void 0),t}(Or),yT=function(o){lh(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.renderer=void 0,e.format=void 0,e}return Pt([A(Be)],t.prototype,"renderer",void 0),Pt([A(de)],t.prototype,"format",void 0),t}(Ii),Lo;(function(o){o[o.Fill=0]="Fill",o[o.Stroke=1]="Stroke",o[o.Marker=2]="Marker",o[o.Label=3]="Label"})(Lo||(Lo={}));var mT=function(o){lh(t,o);function t(e){var r=o.call(this,{moduleCtx:e,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0})||this;r.tooltip=new yT,r.marker=new sh,r.label=new gT,r.fill="#c16068",r.stroke="#874349",r.fillOpacity=1,r.strokeOpacity=1,r.lineDash=[0],r.lineDashOffset=0,r.xKey=void 0,r.xName=void 0,r.strokeWidth=2,r.shadow=void 0;var n=r,i=n.marker,a=n.label;return i.enabled=!1,a.enabled=!1,r}return t.prototype.processData=function(e){return eo(this,void 0,void 0,function(){var r,n,i,a,s,l,u,c,d,h,f,p,v,g,m,y,S,C,w,x,b;return to(this,function(_){switch(_.label){case 0:return r=this,n=r.xKey,i=r.yKey,a=r.axes,s=r.normalizedTo,l=r.data,u=r.visible,c=r.seriesGrouping,d=c===void 0?{}:c,h=d.groupIndex,f=h===void 0?this.id:h,!n||!i||!l?[2]:(p=a[ee.X],v=a[ee.Y],g=(p==null?void 0:p.scale)instanceof De,m=(v==null?void 0:v.scale)instanceof De,y=["area-stack-"+f+"-yValues","area-stack-"+f+"-yValues-trailing","area-stack-"+f+"-yValues-prev","area-stack-"+f+"-yValues-trailing-prev","area-stack-"+f+"-yValues-marker"],S=[],C=s&&isFinite(s)?s:void 0,C&&(S.push(td(this,[y[0],y[1],y[4]],C,"range")),S.push(td(this,[y[2],y[3]],C,"range"))),[4,e.request(this.id,l,{props:ro(ro(ro(ro(ro(ro([Xd(this,n,g,{id:"xValue"}),mt(this,i,m,{id:"yValue-raw",invalidValue:null})],tn(mi(this,i,m,"window","current",{id:"yValue-end",invalidValue:null,groupId:y[0]}))),tn(mi(this,i,m,"window-trailing","current",{id:"yValue-start",invalidValue:null,groupId:y[1]}))),tn(mi(this,i,m,"window","last",{id:"yValue-previous-end",invalidValue:null,groupId:y[2]}))),tn(mi(this,i,m,"window-trailing","last",{id:"yValue-previous-start",invalidValue:null,groupId:y[3]}))),tn(mi(this,i,m,"normal","current",{id:"yValue-cumulative",invalidValue:null,groupId:y[4]}))),tn(S)),groupByKeys:!0,dataVisible:u})]);case 1:return w=_.sent(),x=w.dataModel,b=w.processedData,this.dataModel=x,this.processedData=b,[2]}})})},t.prototype.getDomain=function(e){var r=this,n=r.processedData,i=r.dataModel,a=r.axes;if(!n||!i)return[];var s=a[ee.X],l=a[ee.Y],u=i.resolveProcessedDataDefById(this,"xValue"),c=i.getDomain(this,"xValue","key",n),d=i.getDomain(this,/yValue-(previous-)?end/,"value",n);if(e===ee.X)return(u==null?void 0:u.def.type)==="key"&&u.def.valueType==="category"?c:this.fixNumericExtent(Xt(c),s);if(l instanceof Zl||l instanceof ld)return this.fixNumericExtent(d,l);var h=[d[0]>0?0:d[0],d[1]<0?0:d[1]];return this.fixNumericExtent(h,l)},t.prototype.createNodeData=function(){var e;return eo(this,void 0,void 0,function(){var r,n,i,a,s,l,u,c,d,h,f,p,v,g,m,y,S,C,w,x,b,_,T,O,P,M,I,R,L,F,k,N,G,$,j,z,W,Y,H,K,q,Q,se,ae,xe=this;return to(this,function(_e){if(r=this,n=r.axes,i=r.data,a=r.processedData,s=a===void 0?{}:a,l=s.data,u=r.dataModel,c=r.ctx.callbackCache,d=n[ee.X],h=n[ee.Y],!d||!h||!i||!u)return[2,[]];for(f=this,p=f.yKey,v=p===void 0?"":p,g=f.xKey,m=g===void 0?"":g,y=f.marker,S=f.label,C=f.fill,w=f.stroke,x=f.id,b=d.scale,_=h.scale,T=_ instanceof De,O=((e=b.bandwidth)!==null&&e!==void 0?e:0)/2,P=u.resolveProcessedDataIndexById(this,"yValue-start").index,M=u.resolveProcessedDataIndexById(this,"yValue-end").index,I=u.resolveProcessedDataIndexById(this,"yValue-raw").index,R=u.resolveProcessedDataIndexById(this,"yValue-previous-start").index,L=u.resolveProcessedDataIndexById(this,"yValue-previous-end").index,F=u.resolveProcessedDataIndexById(this,"yValue-cumulative").index,k=function(ye,me,U){var ne=b.convert(ye)+O,fe=_.convert(me,{strict:!1}),Se=_.convert(U,{strict:!1});return[{x:ne,y:Se,size:y.size},{x:ne,y:fe,size:y.size}]},N=function(ye,me,U){var ne,fe=xe.normalizedTo&&isFinite(xe.normalizedTo),Se=fe&&T&&Ll(U),He=!fe&&!isNaN(U)||Se;He&&(ne=me);var ut=b.convert(ye)+O,ur=_.convert(ne,{strict:!1});return{x:ut,y:ur,size:y.size}},G=[],$=[],j={itemId:v,points:[],yValues:[]},z={itemId:v,points:[]},W={itemId:v,fillSelectionData:z,labelData:G,nodeData:$,strokeSelectionData:j},Y=z.points,H=[],K=j.points,q=j.yValues,Q=-1,l==null||l.forEach(function(ye){var me=tn(ye.keys,1),U=me[0],ne=ye.datum,fe=ye.values;fe.forEach(function(Se,He){var ut;Q++;var ur=ne[He],cr=Se[I],Au=Se[P],Fi=Se[M],Du=Se[R],$r=Se[L],Os=Se[F],Es=cr!=null,ki=N(U,+Os,cr);if(Es&&y&&$.push({index:Q,series:xe,itemId:v,datum:ur,nodeMidPoint:{x:ki.x,y:ki.y},cumulativeValue:Fi,yValue:cr,xValue:U,yKey:v,xKey:m,point:ki,fill:C,stroke:w}),Es&&S){var Ni=void 0;S.formatter?Ni=(ut=c.call(S.formatter,{value:cr,seriesId:x}))!==null&&ut!==void 0?ut:"":Ni=Ot(cr)?Number(cr).toFixed(2):String(cr),G.push({index:Q,itemId:v,point:ki,label:Ni?{text:Ni,fontStyle:S.fontStyle,fontWeight:S.fontWeight,fontSize:S.fontSize,fontFamily:S.fontFamily,textAlign:"center",textBaseline:"bottom",fill:S.color}:void 0})}var Mu=[se,U],yn=[Du,Au],ua=[$r,Fi];if(Mu.some(function(ca){return ca==null})){se=U;return}yn.some(function(ca){return ca==null})&&(yn[0]=0,yn[1]=0),ua.some(function(ca){return ca==null})&&(ua[0]=0,ua[1]=0);var Ru=k(se,+yn[0],+ua[0]);Y.push(Ru[0]),H.push(Ru[1]);var Iu=k(U,+yn[1],+ua[1]);Y.push(Iu[0]),H.push(Iu[1]),K.push({x:NaN,y:NaN}),q.push(void 0),$r!=null&&(K.push(Ru[0]),q.push($r)),Fi!=null&&(K.push(Iu[0]),q.push(Fi)),se=U})}),ae=H.length-1;ae>=0;ae--)Y.push(H[ae]);return[2,[W]]})})},t.prototype.isPathOrSelectionDirty=function(){return this.marker.isDirty()},t.prototype.markerFactory=function(){var e=this.marker.shape,r=na(e);return new r},t.prototype.updateMarkerSelection=function(e){return eo(this,void 0,void 0,function(){var r,n,i,a;return to(this,function(s){return r=e.nodeData,n=e.markerSelection,i=this.marker.enabled,a=i&&r?r:[],this.marker.isDirty()&&n.clear(),[2,n.update(a,function(l){l.tag=Lo.Marker})]})})},t.prototype.updateMarkerNodes=function(e){var r;return eo(this,void 0,void 0,function(){var n,i,a,s,l,u,c,d,h,f,p,v,g,m,y,S,C,w,x,b,_,T,O,P,M;return to(this,function(I){return n=e.markerSelection,i=e.isHighlight,a=this,s=a.id,l=a.xKey,u=l===void 0?"":l,c=a.marker,d=a.fill,h=a.stroke,f=a.fillOpacity,p=a.marker.fillOpacity,v=p===void 0?f:p,g=a.strokeOpacity,m=a.highlightStyle.item,y=m.fill,S=m.fillOpacity,C=S===void 0?v:S,w=m.stroke,x=m.strokeWidth,b=a.visible,_=a.ctx.callbackCache,T=c.size,O=c.formatter,P=(r=c.strokeWidth)!==null&&r!==void 0?r:this.strokeWidth,M=typeof c.shape=="function",n.each(function(R,L){var F,k,N,G,$,j,z,W,Y=i&&y!==void 0?y:(F=c.fill)!==null&&F!==void 0?F:d,H=i?C:v,K=i&&w!==void 0?w:(k=c.stroke)!==null&&k!==void 0?k:h,q=i&&x!==void 0?x:P,Q=void 0;O&&(Q=_.call(O,{datum:L.datum,xKey:u,yKey:L.yKey,fill:Y,stroke:K,strokeWidth:q,size:T,highlighted:i,seriesId:s})),R.fill=(N=Q==null?void 0:Q.fill)!==null&&N!==void 0?N:Y,R.stroke=(G=Q==null?void 0:Q.stroke)!==null&&G!==void 0?G:K,R.strokeWidth=($=Q==null?void 0:Q.strokeWidth)!==null&&$!==void 0?$:q,R.fillOpacity=H??1,R.strokeOpacity=(z=(j=c.strokeOpacity)!==null&&j!==void 0?j:g)!==null&&z!==void 0?z:1,R.size=(W=Q==null?void 0:Q.size)!==null&&W!==void 0?W:T,R.translationX=L.point.x,R.translationY=L.point.y,R.visible=R.size>0&&b&&!isNaN(L.point.x)&&!isNaN(L.point.y),!(!M||R.dirtyPath)&&(R.path.clear({trackChanges:!0}),R.updatePath(),R.checkPathDirty())}),i||this.marker.markClean(),[2]})})},t.prototype.updateLabelSelection=function(e){return eo(this,void 0,void 0,function(){var r,n;return to(this,function(i){return r=e.labelData,n=e.labelSelection,[2,n.update(r,function(a){a.tag=Lo.Label})]})})},t.prototype.updateLabelNodes=function(e){return eo(this,void 0,void 0,function(){var r,n,i,a,s,l,u,c;return to(this,function(d){return r=e.labelSelection,n=this.label,i=n.enabled,a=n.fontStyle,s=n.fontWeight,l=n.fontSize,u=n.fontFamily,c=n.color,r.each(function(h,f){var p=f.point,v=f.label;v&&i?(h.fontStyle=a,h.fontWeight=s,h.fontSize=l,h.fontFamily=u,h.textAlign=v.textAlign,h.textBaseline=v.textBaseline,h.text=v.text,h.x=p.x,h.y=p.y-10,h.fill=c,h.visible=!0):h.visible=!1}),[2]})})},t.prototype.getNodeClickEvent=function(e,r){var n;return new wu((n=this.xKey)!==null&&n!==void 0?n:"",r.yKey,e,r,this)},t.prototype.getNodeDoubleClickEvent=function(e,r){var n;return new bu((n=this.xKey)!==null&&n!==void 0?n:"",r.yKey,e,r,this)},t.prototype.getTooltipHtml=function(e){var r,n,i,a=this,s=a.xKey,l=a.id,u=a.axes,c=a.xName,d=a.yName,h=a.fill,f=a.stroke,p=a.tooltip,v=a.marker,g=a.dataModel,m=e.yKey,y=e.xValue,S=e.yValue,C=e.datum,w=u[ee.X],x=u[ee.Y];if(!(s&&m)||!(w&&x&&Ot(S))||!g)return"";var b=g.resolveProcessedDataIndexById(this,"yValue-raw").index,_=v.size,T=v.formatter,O=v.strokeWidth,P=v.fill,M=v.stroke,I=w.formatDatum(y),R=x.formatDatum(S),L=(n=(r=this.processedData)===null||r===void 0?void 0:r.data[e.index])===null||n===void 0?void 0:n.values[0][b],F=vt(d),k=vt(I+": "+R),N=O??this.strokeWidth,G=P??h,$=M??f,j=void 0;T&&(j=T({datum:C,xKey:s,yKey:m,fill:G,stroke:$,strokeWidth:N,size:_,highlighted:!1,seriesId:l}));var z=(i=j==null?void 0:j.fill)!==null&&i!==void 0?i:G,W={title:F,backgroundColor:z,content:k},Y=p.renderer,H=p.format;if(H||Y){var K={datum:C,xKey:s,xName:c,xValue:y,yKey:m,yValue:S,processedYValue:L,yName:d,color:z,title:F,seriesId:l};if(H)return Ct({content:Jg(H,K)},W);if(Y)return Ct(Y(K),W)}return Ct(W)},t.prototype.getLegendData=function(){var e,r,n,i,a=this,s=a.data,l=a.id,u=a.xKey,c=a.yKey,d=a.yName,h=a.marker,f=a.fill,p=a.stroke,v=a.fillOpacity,g=a.strokeOpacity,m=a.visible;return!(s!=null&&s.length)||!u||!c?[]:[{legendType:"category",id:l,itemId:c,seriesId:l,enabled:m,label:{text:d??c},marker:{shape:h.shape,fill:(e=h.fill)!==null&&e!==void 0?e:f,stroke:(r=h.stroke)!==null&&r!==void 0?r:p,fillOpacity:(n=h.fillOpacity)!==null&&n!==void 0?n:v,strokeOpacity:(i=h.strokeOpacity)!==null&&i!==void 0?i:g}}]},t.prototype.animateEmptyUpdateReady=function(e){var r=this,n=e.markerSelections,i=e.labelSelections,a=e.contextData,s=e.paths,l=e.seriesRect,u=this,c=u.stroke,d=u.fill,h=u.fillOpacity,f=u.lineDash,p=u.lineDashOffset,v=u.strokeOpacity,g=u.strokeWidth,m=u.shadow;a.forEach(function(y,S){var C,w,x,b,_,T=y.fillSelectionData,O=y.strokeSelectionData,P=y.itemId,M=tn(s[S],2),I=M[0],R=M[1],L=(w=(C=r.ctx.animationManager)===null||C===void 0?void 0:C.defaultOptions.duration)!==null&&w!==void 0?w:1e3,F=200,k={from:0,to:(x=l==null?void 0:l.width)!==null&&x!==void 0?x:0,duration:L};{var N=O.points,G=O.yValues;R.tag=Lo.Stroke,R.fill=void 0,R.lineJoin=R.lineCap="round",R.pointerEvents=_t.None,R.stroke=c,R.strokeWidth=r.getStrokeWidth(r.strokeWidth,{itemId:P}),R.strokeOpacity=v,R.lineDash=f,R.lineDashOffset=p,(b=r.ctx.animationManager)===null||b===void 0||b.animate(r.id+"_empty-update-ready_stroke_"+S,Pn(Pn({},k),{onUpdate:function(W){R.path.clear({trackChanges:!0});var Y=!0;N.forEach(function(H,K){if(G[K]===void 0||isNaN(H.x)||isNaN(H.y))Y=!0;else if(H.x<=W)Y?(R.path.moveTo(H.x,H.y),Y=!1):R.path.lineTo(H.x,H.y);else if(K>0&&G[K]!==void 0&&G[K-1]!==void 0&&N[K-1].x<=W){var q=N[K-1],Q=H,se=W,ae=q.y+(se-q.x)*(Q.y-q.y)/(Q.x-q.x);R.path.lineTo(se,ae)}}),R.checkPathDirty()}}))}{var $=T.points,j=$.slice(0,$.length/2),z=$.slice($.length/2);I.tag=Lo.Fill,I.stroke=void 0,I.lineJoin="round",I.pointerEvents=_t.None,I.fill=d,I.fillOpacity=h,I.strokeOpacity=v,I.strokeWidth=g,I.lineDash=f,I.lineDashOffset=p,I.fillShadow=m,(_=r.ctx.animationManager)===null||_===void 0||_.animate(r.id+"_empty-update-ready_fill_"+S,Pn(Pn({},k),{onUpdate:function(W){I.path.clear({trackChanges:!0});var Y=0,H=0;j.forEach(function(K,q){if(K.x<=W)Y=K.x,H=K.y,I.path.lineTo(K.x,K.y);else if(q>0&&j[q-1].x<W){var Q=j[q-1],se=K;Y=W,H=Q.y+(Y-Q.x)*(se.y-Q.y)/(se.x-Q.x),I.path.lineTo(Y,H)}}),z.forEach(function(K,q){var Q=z.length-q-1;if(K.x<=W)I.path.lineTo(K.x,K.y);else if(Q>0&&j[Q-1].x<W){var se=K,ae=z[q+1],xe=se.y+(Y-se.x)*(ae.y-se.y)/(ae.x-se.x);I.path.lineTo(Y,xe)}}),z.length>0&&I.path.lineTo(z[z.length-1].x,z[z.length-1].y),I.path.closePath(),I.checkPathDirty()}}))}n[S].each(function(W,Y){var H,K,q,Q,se=l!=null&&l.width?Y.point.x/l.width*L:0,ae=r.animateFormatter(Y),xe=(K=(H=Y.point)===null||H===void 0?void 0:H.size)!==null&&K!==void 0?K:0;(q=r.ctx.animationManager)===null||q===void 0||q.animate(r.id+"_empty-update-ready_"+W.id,Pn(Pn({},k),{to:(Q=ae==null?void 0:ae.size)!==null&&Q!==void 0?Q:xe,delay:se,duration:F,onUpdate:function(_e){W.size=_e}}))}),i[S].each(function(W,Y){var H,K=l!=null&&l.width?Y.point.x/l.width*L:0;(H=r.ctx.animationManager)===null||H===void 0||H.animate(r.id+"_empty-update-ready_"+W.id,{from:0,to:1,delay:K,duration:F,onUpdate:function(q){W.opacity=q}})})})},t.prototype.animateReadyUpdate=function(e){var r=this,n=e.contextData,i=e.paths,a=this,s=a.stroke,l=a.fill,u=a.fillOpacity,c=a.lineDash,d=a.lineDashOffset,h=a.strokeOpacity,f=a.strokeWidth,p=a.shadow;n.forEach(function(v,g){var m=v.strokeSelectionData,y=v.fillSelectionData,S=v.itemId,C=tn(i[g],2),w=C[0],x=C[1];x.stroke=s,x.strokeWidth=r.getStrokeWidth(r.strokeWidth,{itemId:S}),x.strokeOpacity=h,x.lineDash=c,x.lineDashOffset=d,x.path.clear({trackChanges:!0});var b=!0;m.points.forEach(function(_,T){m.yValues[T]===void 0||isNaN(_.x)||isNaN(_.y)?b=!0:b?(x.path.moveTo(_.x,_.y),b=!1):x.path.lineTo(_.x,_.y)}),x.checkPathDirty(),w.fill=l,w.fillOpacity=u,w.strokeOpacity=h,w.strokeWidth=f,w.lineDash=c,w.lineDashOffset=d,w.fillShadow=p,w.path.clear({trackChanges:!0}),y.points.forEach(function(_){w.path.lineTo(_.x,_.y)}),w.path.closePath(),w.checkPathDirty()})},t.prototype.animateFormatter=function(e){var r,n,i,a=this,s=a.marker,l=a.fill,u=a.stroke,c=a.xKey,d=c===void 0?"":c,h=a.id,f=a.ctx.callbackCache,p=s.size,v=s.formatter,g=(r=s.fill)!==null&&r!==void 0?r:l,m=(n=s.stroke)!==null&&n!==void 0?n:u,y=(i=s.strokeWidth)!==null&&i!==void 0?i:this.strokeWidth,S=void 0;return v&&(S=f.call(v,{datum:e.datum,xKey:d,yKey:e.yKey,fill:g,stroke:m,strokeWidth:y,size:p,highlighted:!1,seriesId:h})),S},t.prototype.isLabelEnabled=function(){return this.label.enabled},t.className="AreaSeries",t.type="area",Pt([A(Kt)],t.prototype,"fill",void 0),Pt([A(Kt)],t.prototype,"stroke",void 0),Pt([A(J(0,1))],t.prototype,"fillOpacity",void 0),Pt([A(J(0,1))],t.prototype,"strokeOpacity",void 0),Pt([A(ra)],t.prototype,"lineDash",void 0),Pt([A(J(0))],t.prototype,"lineDashOffset",void 0),Pt([A(de)],t.prototype,"xKey",void 0),Pt([A(de)],t.prototype,"xName",void 0),Pt([A(de)],t.prototype,"yKey",void 0),Pt([A(de)],t.prototype,"yName",void 0),Pt([A(Pe(0))],t.prototype,"normalizedTo",void 0),Pt([A(J(0))],t.prototype,"strokeWidth",void 0),t}(Cs),ST=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),no=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},wr=function(o){ST(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.borderPath=new nd,e.x=0,e.y=0,e.width=10,e.height=10,e.radius=0,e.crisp=!1,e.lastUpdatePathStrokeWidth=Wr.defaultStyles.strokeWidth,e.effectiveStrokeWidth=Wr.defaultStyles.strokeWidth,e.microPixelEffectOpacity=1,e}return t.prototype.isDirtyPath=function(){var e;return!!(this.lastUpdatePathStrokeWidth!==this.strokeWidth||this.path.isDirty()||this.borderPath.isDirty()||!((e=this.clipPath)===null||e===void 0)&&e.isDirty())},t.prototype.updatePath=function(){var e,r,n,i=this,a=i.path,s=i.borderPath,l=i.crisp,u=this,c=u.x,d=u.y,h=u.width,f=u.height,p=u.strokeWidth,v=(r=(e=this.layerManager)===null||e===void 0?void 0:e.canvas.pixelRatio)!==null&&r!==void 0?r:1,g=1/v,m=1;if(a.clear({trackChanges:!0}),s.clear({trackChanges:!0}),l&&(h<=g&&(m*=h/g),f<=g&&(m*=f/g),h=this.align(c,h),f=this.align(d,f),c=this.align(c),d=this.align(d)),p)if(h<g){var y=c+g/2;s.moveTo(y,d),s.lineTo(y,d+f),p=g,this.borderClipPath=void 0}else if(f<g){var S=d+g/2;s.moveTo(c,S),s.lineTo(c+h,S),p=g,this.borderClipPath=void 0}else if(p<h&&p<f){var C=p/2;c+=C,d+=C,h-=p,f-=p,this.borderClipPath=void 0,a.rect(c,d,h,f),s.rect(c,d,h,f)}else this.borderClipPath=(n=this.borderClipPath)!==null&&n!==void 0?n:new nd,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(c,d,h,f),s.rect(c,d,h,f);else this.borderClipPath=void 0,a.rect(c,d,h,f);this.effectiveStrokeWidth=p,this.lastUpdatePathStrokeWidth=p,this.microPixelEffectOpacity=m},t.prototype.computeBBox=function(){var e=this,r=e.x,n=e.y,i=e.width,a=e.height;return new Ee(r,n,i,a)},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r),i=this.computeBBox();return i.containsPoint(n.x,n.y)},t.prototype.applyFillAlpha=function(e){var r=this,n=r.fillOpacity,i=r.microPixelEffectOpacity,a=r.opacity,s=e.globalAlpha;e.globalAlpha=s*a*n*i},t.prototype.renderStroke=function(e){var r=this,n=r.stroke,i=r.effectiveStrokeWidth,a=r.borderPath,s=r.borderClipPath,l=r.opacity,u=r.microPixelEffectOpacity,c=!!n&&!!i;if(c){var d=this,h=d.strokeOpacity,f=d.lineDash,p=d.lineDashOffset,v=d.lineCap,g=d.lineJoin;s&&(s.draw(e),e.clip()),a.draw(e);var m=e.globalAlpha;e.strokeStyle=n,e.globalAlpha=m*l*h*u,e.lineWidth=i,f&&e.setLineDash(f),p&&(e.lineDashOffset=p),v&&(e.lineCap=v),g&&(e.lineJoin=g),e.stroke(),e.globalAlpha=m}},t.className="Rect",no([Le()],t.prototype,"x",void 0),no([Le()],t.prototype,"y",void 0),no([Le()],t.prototype,"width",void 0),no([Le()],t.prototype,"height",void 0),no([Le()],t.prototype,"radius",void 0),no([Le()],t.prototype,"crisp",void 0),t}(It),ud=function(){return ud=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},ud.apply(this,arguments)},CT=function(o,t){var e={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&t.indexOf(r)<0&&(e[r]=o[r]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(o);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(o,r[n])&&(e[r[n]]=o[r[n]]);return e},xT=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i};function wT(o){var t=o.value,e=o.rect,r=o.placement,n=o.seriesId,i=o.padding,a=i===void 0?0:i,s=o.formatter,l=o.barAlongX,u=o.ctx.callbackCache,c;s&&(c=u.call(s,{value:Ot(t)?t:void 0,seriesId:n})),c===void 0&&(c=Ot(t)?t.toFixed(2):"");var d=e.x+e.width/2,h=e.y+e.height/2,f="center",p="middle",v=t>=0;switch(r){case"start":{l?(d=v?e.x-a:e.x+e.width+a,f=v?"start":"end"):(h=v?e.y+e.height+a:e.y-a,p=v?"top":"bottom");break}case"outside":case"end":{l?(d=v?e.x+e.width+a:e.x-a,f=v?"start":"end"):(h=v?e.y-a:e.y+e.height+a,p=v?"bottom":"top");break}case"inside":default:{p="middle";break}}return{text:c,textAlign:f,textBaseline:p,x:d,y:h}}function bT(o){var t=o.rect,e=o.config,r=e.crisp,n=r===void 0?!0:r,i=e.fill,a=e.stroke,s=e.strokeWidth,l=e.fillOpacity,u=e.strokeOpacity,c=e.lineDash,d=e.lineDashOffset,h=e.fillShadow,f=e.visible,p=f===void 0?!0:f;t.crisp=n,t.fill=i,t.stroke=a,t.strokeWidth=s,t.fillOpacity=l,t.strokeOpacity=u,t.lineDash=c,t.lineDashOffset=d,t.fillShadow=h,t.visible=p}function _T(o){var t,e,r,n,i,a,s,l=o.datum,u=o.isHighlighted,c=o.style,d=o.highlightStyle,h=o.formatter,f=o.seriesId,p=o.stackGroup,v=o.ctx.callbackCache,g=CT(o,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","stackGroup","ctx"]),m=u&&(t=d.fill)!==null&&t!==void 0?t:c.fill,y=u&&(e=d.stroke)!==null&&e!==void 0?e:c.stroke,S=u&&(r=d.strokeWidth)!==null&&r!==void 0?r:c.strokeWidth,C=u&&(n=d.fillOpacity)!==null&&n!==void 0?n:c.fillOpacity,w=c.strokeOpacity,x=c.fillShadow,b=c.lineDash,_=c.lineDashOffset,T=void 0;return h&&(T=v.call(h,ud({datum:l.datum,xKey:l.xKey,yKey:l.yKey,fill:m,stroke:y,strokeWidth:S,highlighted:u,seriesId:f,stackGroup:p},g))),{fill:(i=T==null?void 0:T.fill)!==null&&i!==void 0?i:m,stroke:(a=T==null?void 0:T.stroke)!==null&&a!==void 0?a:y,strokeWidth:(s=T==null?void 0:T.strokeWidth)!==null&&s!==void 0?s:S,fillOpacity:C,strokeOpacity:w,lineDash:b,lineDashOffset:_,fillShadow:x}}function OT(o){o===void 0&&(o=[]);var t=xT(o,2),e=t[0],r=t[1],n=e!==0||r!==1,i=!n;return i}function ET(o){var t=o.labelNode,e=o.labelDatum,r=o.config,n=o.visible;if(e&&r&&r.enabled){var i=e.x,a=e.y,s=e.text,l=e.textAlign,u=e.textBaseline,c=r.fontStyle,d=r.fontWeight,h=r.fontSize,f=r.fontFamily,p=r.color;t.fontStyle=c,t.fontWeight=d,t.fontSize=h,t.fontFamily=f,t.textAlign=l,t.textBaseline=u,t.text=s,t.x=i,t.y=a,t.fill=p,t.visible=n}else t.visible=!1}var _u=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),pt=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},io=function(o,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):n(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},oo=function(o,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ao=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},ol=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},TT=["inside","outside"],PT=function(o,t){return je(o,t,function(e){return TT.includes(e)})},eu;(function(o){o[o.Bar=0]="Bar",o[o.Label=1]="Label"})(eu||(eu={}));var AT=function(o){_u(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.formatter=void 0,e.placement="inside",e}return pt([A(Be)],t.prototype,"formatter",void 0),pt([A(PT)],t.prototype,"placement",void 0),t}(Or),DT=function(o){_u(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.renderer=void 0,e}return pt([A(Be)],t.prototype,"renderer",void 0),t}(Ii),Qg=function(o){_u(t,o);function t(e){var r=o.call(this,{moduleCtx:e,pickModes:[tt.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasHighlightedLabels:!0})||this;return r.label=new AT,r.tooltip=new DT,r.fill="#c16068",r.stroke="#874349",r.fillOpacity=1,r.strokeOpacity=1,r.lineDash=[0],r.lineDashOffset=0,r.formatter=void 0,r.xKey=void 0,r.xName=void 0,r.yKey=void 0,r.yName=void 0,r.groupScale=new Lt,r.stackGroup=void 0,r.strokeWidth=1,r.shadow=void 0,r.smallestDataInterval=void 0,r.datumSelectionGarbageCollection=!1,r.label.enabled=!1,r}return t.prototype.resolveKeyDirection=function(e){return this.getBarDirection()===ee.X?e===ee.X?ee.Y:ee.X:e},t.prototype.processData=function(e){var r,n,i,a,s;return io(this,void 0,void 0,function(){var l,u,c,d,h,f,p,v,g,m,y,S,C,w,x,b,_,T,O,P;return oo(this,function(M){switch(M.label){case 0:return l=this,u=l.xKey,c=l.yKey,d=l.normalizedTo,h=l.seriesGrouping,f=h===void 0?{}:h,p=f.groupIndex,v=p===void 0?this.id:p,g=l.data,m=g===void 0?[]:g,y=Math.abs(d??NaN),S=((r=this.getCategoryAxis())===null||r===void 0?void 0:r.scale)instanceof De,C=((n=this.getValueAxis())===null||n===void 0?void 0:n.scale)instanceof De,w="bar-stack-"+v+"-yValues",x=w+"-trailing",b=y&&isFinite(y)?y:void 0,_=[],b&&_.push(td(this,[w,x],b,"range")),!(!((i=this.ctx.animationManager)===null||i===void 0)&&i.skipAnimations)&&this.processedData&&_.push(ug(this.processedData)),[4,e.request(this.id,m,{props:ol(ol(ol(ol([Xd(this,u,S,{id:"xValue"}),mt(this,c,C,{id:"yValue-raw",invalidValue:null})],ao(mi(this,c,C,"normal","current",{id:"yValue-end",invalidValue:null,groupId:w}))),ao(mi(this,c,C,"trailing","current",{id:"yValue-start",invalidValue:null,groupId:x}))),ao(S?[ic]:[])),ao(_)),groupByKeys:!0,dataVisible:this.visible})];case 1:return T=M.sent(),O=T.dataModel,P=T.processedData,this.dataModel=O,this.processedData=P,this.smallestDataInterval={x:(s=(a=P.reduced)===null||a===void 0?void 0:a[ic.property])!==null&&s!==void 0?s:1/0,y:1/0},this.animationState.transition("updateData"),[2]}})})},t.prototype.getDomain=function(e){var r,n=this,i=n.processedData,a=n.dataModel;if(!i||!a)return[];var s=i,l=s.reduced,u=l===void 0?{}:l,c=ic.property,d=u[c],h=this.getCategoryAxis(),f=this.getValueAxis(),p=a.resolveProcessedDataDefById(this,"xValue"),v=a.getDomain(this,"xValue","key",i),g=a.getDomain(this,"yValue-end","value",i);if(e===this.getCategoryDirection()){if((p==null?void 0:p.def.type)==="key"&&(p==null?void 0:p.def.valueType)==="category")return v;var m=isFinite(d)?d:0,y=(r=Xt(v))!==null&&r!==void 0?r:[NaN,NaN];return e===ee.Y?this.fixNumericExtent([y[0]+-m,y[1]],h):this.fixNumericExtent([y[0],y[1]+m],h)}else{if(this.getValueAxis()instanceof Zl)return this.fixNumericExtent(g,f);var S=[g[0]>0?0:g[0],g[1]<0?0:g[1]];return this.fixNumericExtent(S,f)}},t.prototype.getNodeClickEvent=function(e,r){var n;return new wu((n=this.xKey)!==null&&n!==void 0?n:"",r.yKey,e,r,this)},t.prototype.getNodeDoubleClickEvent=function(e,r){var n;return new bu((n=this.xKey)!==null&&n!==void 0?n:"",r.yKey,e,r,this)},t.prototype.getCategoryAxis=function(){var e=this.getCategoryDirection();return this.axes[e]},t.prototype.getValueAxis=function(){var e=this.getBarDirection();return this.axes[e]},t.prototype.calculateStep=function(e){var r,n=this.smallestDataInterval,i=this.getCategoryAxis();if(i){var a=i.dataDomain[1]-i.dataDomain[0],s=a/((r=n==null?void 0:n.x)!==null&&r!==void 0?r:1)+1,l=Math.floor(e),u=Math.min(s,l),c=e/Math.max(1,u);return c}},t.prototype.createNodeData=function(){return io(this,void 0,void 0,function(){var e,r,n,i,a,s,l,u,c,d,h,f,p,v,g,m,y,S,C,w,x,b,_,T,O,P,M,I,R,L,F,k,N,G,$,j=this;return oo(this,function(z){if(e=this,r=e.visible,n=e.dataModel,i=this.getCategoryAxis(),a=this.getValueAxis(),!(n&&r&&i&&a))return[2,[]];for(s=i.scale,l=a.scale,u=this,c=u.groupScale,d=u.yKey,h=d===void 0?"":d,f=u.xKey,p=f===void 0?"":f,v=u.fill,g=u.stroke,m=u.strokeWidth,y=u.label,S=u.id,C=u.processedData,w=u.ctx,x=u.ctx.seriesStateManager,b=s.bandwidth,s instanceof De&&(_=Math.max(i.range[0],i.range[1]),T=this.calculateStep(_),b=T),O=[],P=x.getVisiblePeerGroupIndex(this),M=P.index,I=P.visibleGroupCount,R=0;R<I;R++)O.push(String(R));return c.domain=O,c.range=[0,b??0],i instanceof Zo?c.padding=i.groupPaddingInner:i instanceof Yl?c.padding=.1:c.padding=0,c.padding===0?c.round=!1:c.round=!0,L=c.bandwidth>=1?c.bandwidth:c.rawBandwidth,F=n.resolveProcessedDataIndexById(this,"xValue","key").index,k=n.resolveProcessedDataIndexById(this,"yValue-raw").index,N=n.resolveProcessedDataIndexById(this,"yValue-start").index,G=n.resolveProcessedDataIndexById(this,"yValue-end").index,$={itemId:h,nodeData:[],labelData:[]},C==null||C.data.forEach(function(W,Y){var H=W.keys,K=W.datum,q=W.values,Q=H[F],se=s.convert(Q),ae=+q[0][G],xe=+q[0][N],_e=q[0][k],ye=se+c.convert(String(M));if(i.inRange(ye,L)&&!isNaN(ae)){var me=l.convert(ae,{strict:!1}),U=l.convert(xe,{strict:!1}),ne=j.getBarDirection()===ee.X,fe={x:ne?Math.min(me,U):ye,y:ne?ye:Math.min(me,U),width:ne?Math.abs(U-me):L,height:ne?L:Math.abs(U-me)},Se={x:fe.x+fe.width/2,y:fe.y+fe.height/2},He=y.fontStyle,ut=y.fontWeight,ur=y.fontSize,cr=y.fontFamily,Au=y.color,Fi=y.formatter,Du=y.placement,$r=wT({value:_e,rect:fe,formatter:Fi,placement:Du,seriesId:S,barAlongX:ne,ctx:w}),Os=$r.text,Es=$r.textAlign,ki=$r.textBaseline,Ni=$r.x,Mu=$r.y,yn={index:Y,series:j,itemId:h,datum:K[0],cumulativeValue:xe+ae,xValue:Q,yValue:_e,yKey:h,xKey:p,x:fe.x,y:fe.y,width:fe.width,height:fe.height,nodeMidPoint:Se,fill:v,stroke:g,strokeWidth:m,label:Os?{text:Os,fontStyle:He,fontWeight:ut,fontSize:ur,fontFamily:cr,textAlign:Es,textBaseline:ki,fill:Au,x:Ni,y:Mu}:void 0};$.nodeData.push(yn),$.labelData.push(yn)}}),[2,[$]]})})},t.prototype.nodeFactory=function(){return new wr},t.prototype.updateDatumSelection=function(e){return io(this,void 0,void 0,function(){var r,n,i;return oo(this,function(a){return r=e.nodeData,n=e.datumSelection,i=function(s){return s.xValue},[2,n.update(r,function(s){return s.tag=eu.Bar},i)]})})},t.prototype.updateDatumNodes=function(e){return io(this,void 0,void 0,function(){var r,n,i,a,s,l,u,c,d,h,f,p,v,g,m,y,S,C,w=this;return oo(this,function(x){return r=e.datumSelection,n=e.isHighlight,i=this,a=i.fill,s=i.stroke,l=i.fillOpacity,u=i.strokeOpacity,c=i.lineDash,d=i.lineDashOffset,h=i.shadow,f=i.formatter,p=i.id,v=i.highlightStyle.item,g=i.ctx,m=i.stackGroup,y=this.axes[ee.X],S=OT(y==null?void 0:y.visibleRange),C=this.getCategoryDirection()===ee.X,r.each(function(b,_){var T={fill:a,stroke:s,fillOpacity:l,strokeOpacity:u,lineDash:c,lineDashOffset:d,fillShadow:h,strokeWidth:w.getStrokeWidth(w.strokeWidth,_)},O=C?_.width>0:_.height>0,P=_T({datum:_,isHighlighted:n,style:T,highlightStyle:v,formatter:f,seriesId:p,stackGroup:m,ctx:g});P.crisp=S,P.visible=O,bT({rect:b,config:P})}),[2]})})},t.prototype.updateLabelSelection=function(e){return io(this,void 0,void 0,function(){var r,n,i,a;return oo(this,function(s){return r=e.labelData,n=e.labelSelection,i=this.label.enabled,a=i?r:[],[2,n.update(a,function(l){l.tag=eu.Label,l.pointerEvents=_t.None})]})})},t.prototype.updateLabelNodes=function(e){return io(this,void 0,void 0,function(){var r,n=this;return oo(this,function(i){return r=e.labelSelection,r.each(function(a,s){var l=s.label;ET({labelNode:a,labelDatum:l,config:n.label,visible:!0})}),[2]})})},t.prototype.getTooltipHtml=function(e){var r,n=this,i=n.xKey,a=n.yKey,s=n.processedData,l=n.ctx.callbackCache,u=this.getCategoryAxis(),c=this.getValueAxis(),d=e.xValue,h=e.yValue,f=e.datum;if(!s||!i||!a||!u||!c)return"";var p=this,v=p.xName,g=p.yName,m=p.fill,y=p.stroke,S=p.tooltip,C=p.formatter,w=p.id,x=p.stackGroup,b=S.renderer,_=this.getStrokeWidth(this.strokeWidth),T=vt(u.formatDatum(d)),O=vt(c.formatDatum(h)),P=vt(g),M=T+": "+O,I=void 0;C&&(I=l.call(C,{datum:f,fill:m,stroke:y,strokeWidth:_,highlighted:!1,xKey:i,yKey:a,seriesId:w,stackGroup:x}));var R=(r=I==null?void 0:I.fill)!==null&&r!==void 0?r:m,L={title:P,backgroundColor:R,content:M};return b?Ct(b({datum:f,xKey:i,xValue:d,xName:v,yKey:a,yValue:h,yName:g,color:R,title:P,seriesId:w,stackGroup:x}),L):Ct(L)},t.prototype.getLegendData=function(){var e,r=this,n=r.id,i=r.data,a=r.xKey,s=r.yKey,l=r.yName,u=r.legendItemName,c=r.fill,d=r.stroke,h=r.fillOpacity,f=r.strokeOpacity,p=r.visible,v=r.showInLegend;if(!v||!(i!=null&&i.length)||!a||!s)return[];var g=[];return g.push({legendType:"category",id:n,itemId:s,seriesId:n,enabled:p,label:{text:(e=u??l)!==null&&e!==void 0?e:s},legendItemName:u,marker:{fill:c,stroke:d,fillOpacity:h,strokeOpacity:f}}),g},t.prototype.animateEmptyUpdateReady=function(e){var r=this,n,i,a=e.datumSelections,s=e.labelSelections,l=(i=(n=this.ctx.animationManager)===null||n===void 0?void 0:n.defaultOptions.duration)!==null&&i!==void 0?i:1e3,u=200,c=this.getDirectionStartingValues(a),d=c.startingX,h=c.startingY;a.forEach(function(f){f.each(function(p,v){var g,m=d,y=0,S=v.y,C=v.height;r.getBarDirection()===ee.Y&&(m=v.x,y=v.width,S=h,C=0);var w=[{from:m,to:v.x},{from:y,to:v.width},{from:S,to:v.y},{from:C,to:v.height}];(g=r.ctx.animationManager)===null||g===void 0||g.animateMany(r.id+"_empty-update-ready_"+p.id,w,{duration:l,ease:Yo,onUpdate:function(x){var b=ao(x,4),_=b[0],T=b[1],O=b[2],P=b[3];p.x=_,p.width=T,p.y=O,p.height=P}})})}),s.forEach(function(f){f.each(function(p){var v;(v=r.ctx.animationManager)===null||v===void 0||v.animate(r.id+"_empty-update-ready_"+p.id,{from:0,to:1,delay:l,duration:u,onUpdate:function(g){p.opacity=g}})})})},t.prototype.animateReadyHighlight=function(e){this.resetSelectionRects(e)},t.prototype.animateReadyResize=function(e){var r=this,n,i=e.datumSelections;(n=this.ctx.animationManager)===null||n===void 0||n.reset(),i.forEach(function(a){r.resetSelectionRects(a)})},t.prototype.animateWaitingUpdateReady=function(e){var r=this,n,i,a,s,l,u=e.datumSelections,c=e.labelSelections,d=this.processedData,h=(n=d==null?void 0:d.reduced)===null||n===void 0?void 0:n.diff;if(!(h!=null&&h.changed)){u.forEach(function(_){r.resetSelectionRects(_)});return}var f=(a=(i=this.ctx.animationManager)===null||i===void 0?void 0:i.defaultOptions.duration)!==null&&a!==void 0?a:1e3,p=200,v=f;(h.added.length>0||h.removed.length>0)&&(v=Math.floor(f/2));var g=this.getDirectionStartingValues(u),m=g.startingX,y=g.startingY,S=(l=(s=this.processedData)===null||s===void 0?void 0:s.defs.keys)===null||l===void 0?void 0:l[0],C={};h.added.forEach(function(_){C[_[0]]=!0});var w={};h.removed.forEach(function(_){w[_[0]]=!0});var x=this.id+"_"+Math.random(),b=this.id+"_"+Math.random();u.forEach(function(_){_.each(function(T,O){var P,M=[{from:T.x,to:O.x},{from:T.width,to:O.width},{from:T.y,to:O.y},{from:T.height,to:O.height}],I=h.removed.length>0?v:0,R=v,L=!1,F=S?O.xValue:"",k=m,N=0,G=O.y,$=O.height;r.getBarDirection()===ee.Y&&(k=O.x,N=O.width,G=y,$=0);var j=F!==void 0&&C[F]!==void 0,z=F!==void 0&&w[F]!==void 0;j?(M=[{from:k,to:O.x},{from:N,to:O.width},{from:G,to:O.y},{from:$,to:O.height}],R=v):z&&(M=[{from:O.x,to:k},{from:O.width,to:N},{from:O.y,to:G},{from:O.height,to:$}],I=0,R=v,L=!0),(P=r.ctx.animationManager)===null||P===void 0||P.animateManyWithThrottle(r.id+"_waiting-update-ready_"+T.id,M,{delay:I,duration:R,ease:Yo,throttleId:r.id+"_rects",throttleGroup:x,onUpdate:function(W){var Y=ao(W,4),H=Y[0],K=Y[1],q=Y[2],Q=Y[3];T.x=H,T.width=K,T.y=q,T.height=Q},onComplete:function(){L&&_.cleanup()}})})}),c.forEach(function(_){_.each(function(T){var O;T.opacity=0,(O=r.ctx.animationManager)===null||O===void 0||O.animateWithThrottle(r.id+"_waiting-update-ready_"+T.id,{from:0,to:1,delay:f,duration:p,throttleId:r.id+"_labels",throttleGroup:b,onUpdate:function(P){T.opacity=P}})})})},t.prototype.resetSelectionRects=function(e){e.each(function(r,n){r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height}),e.cleanup()},t.prototype.getDirectionStartingValues=function(e){var r=this.getBarDirection()===ee.Y,n=this.axes[ee.X],i=this.axes[ee.Y],a=(n==null?void 0:n.scale)instanceof De,s=(i==null?void 0:i.scale)instanceof De,l=1/0,u=0;return i&&r&&(s?u=i.scale.convert(0):e.forEach(function(c){return c.each(function(d,h){h.yValue>=0&&(u=Math.max(u,h.height+h.y))})})),n&&!r&&(a?l=n.scale.convert(0):e.forEach(function(c){return c.each(function(d,h){h.yValue>=0&&(l=Math.min(l,h.x))})})),{startingX:l,startingY:u}},t.prototype.isLabelEnabled=function(){return this.label.enabled},t.prototype.getBandScalePadding=function(){return{inner:.2,outer:.3}},t.prototype.getBarDirection=function(){return ee.X},t.prototype.getCategoryDirection=function(){return ee.Y},t.className="BarSeries",t.type="bar",pt([A(Fe)],t.prototype,"fill",void 0),pt([A(Fe)],t.prototype,"stroke",void 0),pt([A(J(0,1))],t.prototype,"fillOpacity",void 0),pt([A(J(0,1))],t.prototype,"strokeOpacity",void 0),pt([A(ra)],t.prototype,"lineDash",void 0),pt([A(J(0))],t.prototype,"lineDashOffset",void 0),pt([A(Be)],t.prototype,"formatter",void 0),pt([A(de)],t.prototype,"xKey",void 0),pt([A(de)],t.prototype,"xName",void 0),pt([A(de)],t.prototype,"yKey",void 0),pt([A(de)],t.prototype,"yName",void 0),pt([A(de)],t.prototype,"stackGroup",void 0),pt([A(Pe())],t.prototype,"normalizedTo",void 0),pt([A(J(0))],t.prototype,"strokeWidth",void 0),t}(Cs),MT=function(o){_u(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.getBarDirection=function(){return ee.Y},t.prototype.getCategoryDirection=function(){return ee.X},t.type="column",t.className="ColumnSeries",t}(Qg),uh=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ft=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},so=function(o,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):n(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},lo=function(o,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},_n=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},np=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},RT=["count","sum","mean"],IT=ue(function(o){return RT.includes(o)},"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean"),tu;(function(o){o[o.Bin=0]="Bin",o[o.Label=1]="Label"})(tu||(tu={}));var LT=function(o){uh(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.formatter=void 0,e}return ft([A(Be)],t.prototype,"formatter",void 0),t}(Or),ip=10,FT=function(o){uh(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.renderer=void 0,e}return ft([A(Be)],t.prototype,"renderer",void 0),t}(Ii),kT=function(o){uh(t,o);function t(e){var r=o.call(this,{moduleCtx:e,pickModes:[tt.EXACT_SHAPE_MATCH]})||this;return r.label=new LT,r.tooltip=new FT,r.fill=void 0,r.stroke=void 0,r.fillOpacity=1,r.strokeOpacity=1,r.lineDash=[0],r.lineDashOffset=0,r.xKey=void 0,r.areaPlot=!1,r.bins=void 0,r.aggregation="count",r.binCount=void 0,r.xName=void 0,r.yKey=void 0,r.yName=void 0,r.strokeWidth=1,r.shadow=void 0,r.calculatedBins=[],r.datumSelectionGarbageCollection=!1,r.label.enabled=!1,r}return t.prototype.deriveBins=function(e){if(this.binCount===void 0){var r=Zd(e[0],e[1],ip),n=cs(e[0],e[1],ip),i=r[0],a=function(s){return[s,s+n]};return np([[i-n,i]],_n(r.map(a)))}else return this.calculateNiceBins(e,this.binCount)},t.prototype.calculateNiceBins=function(e,r){var n=Math.floor(e[0]),i=e[1],a=r||1,s=this.calculateNiceStart(n,i,a),l=s.start,u=s.binSize;return this.getBins(l,i,u,a)},t.prototype.getBins=function(e,r,n,i){for(var a=[],s=0;s<i;s++){var l=Math.round((e+s*n)*10)/10,u=Math.round((e+(s+1)*n)*10)/10;s===i-1&&(u=Math.max(u,r)),a[s]=[l,u]}return a},t.prototype.calculateNiceStart=function(e,r,n){var i=Math.abs(r-e)/n,a=Math.floor(Math.log10(i)),s=Math.pow(10,a),l=Math.floor(e/s)*s;return{start:l,binSize:i}},t.prototype.processData=function(e){var r;return so(this,void 0,void 0,function(){var n,i,a,s,l,u,c,d,d,h,f,p,v,g=this;return lo(this,function(m){switch(m.label){case 0:return n=this,i=n.xKey,a=n.yKey,s=n.data,l=n.areaPlot,u=n.aggregation,c=[Xd(this,i,!0),hb],a?(d=ef(this,"groupCount"),u==="count"||(u==="sum"?d=lb(this,"groupAgg"):u==="mean"&&(d=ub(this,"groupAgg"))),l&&(d=tf(this,"groupAgg",d)),c.push(mt(this,a,!0,{invalidValue:void 0}),d)):(d=ef(this,"groupAgg"),l&&(d=tf(this,"groupAgg",d)),c.push(d)),h=function(y){var S,C=Cl(y.domain.keys[0]);if(C.length===0)return y.domain.groups=[],function(){return[]};var w=(S=g.bins)!==null&&S!==void 0?S:g.deriveBins(C),x=w.length;return g.calculatedBins=np([],_n(w)),function(b){for(var _=b.keys[0],T=0;T<x;T++){var O=w[T];if(_>=O[0]&&_<O[1]||T===x-1&&_<=O[1])return O}return[]}},!(!((r=this.ctx.animationManager)===null||r===void 0)&&r.skipAnimations)&&this.processedData&&c.push(ug(this.processedData,!1)),[4,e.request(this.id,s??[],{props:c,dataVisible:this.visible,groupByFn:h})];case 1:return f=m.sent(),p=f.dataModel,v=f.processedData,this.dataModel=p,this.processedData=v,this.animationState.transition("updateData"),[2]}})})},t.prototype.getDomain=function(e){var r,n,i,a,s=this,l=s.processedData,u=s.dataModel;if(!l||!u)return[];var c=u.getDomain(this,"groupAgg","aggregate",l),d=(r=this.calculatedBins)===null||r===void 0?void 0:r[0][0],h=(n=this.calculatedBins)===null||n===void 0?void 0:n[((a=(i=this.calculatedBins)===null||i===void 0?void 0:i.length)!==null&&a!==void 0?a:0)-1][1];return e===ee.X?Cl([d,h]):Cl(c)},t.prototype.getNodeClickEvent=function(e,r){var n,i;return new wu((n=this.xKey)!==null&&n!==void 0?n:"",(i=this.yKey)!==null&&i!==void 0?i:"",e,r,this)},t.prototype.getNodeDoubleClickEvent=function(e,r){var n,i;return new bu((n=this.xKey)!==null&&n!==void 0?n:"",(i=this.yKey)!==null&&i!==void 0?i:"",e,r,this)},t.prototype.createNodeData=function(){var e;return so(this,void 0,void 0,function(){var r,n,i,a,s,l,u,c,d,h,f,p,v,g,m,y,S,C,w,x,b,_,T,O,P,M,I,R=this;return lo(this,function(L){return r=this,n=r.axes,i=r.processedData,a=r.ctx.callbackCache,s=n[ee.X],l=n[ee.Y],!this.visible||!s||!l||!i||i.type!=="grouped"?[2,[]]:(u=s.scale,c=l.scale,d=this,h=d.fill,f=d.stroke,p=d.strokeWidth,v=d.id,g=d.yKey,m=g===void 0?"":g,y=d.xKey,S=y===void 0?"":y,C=[],w=function(F){return String(F.value)},x=this.label,b=x.formatter,_=b===void 0?w:b,T=x.fontStyle,O=x.fontWeight,P=x.fontSize,M=x.fontFamily,I=x.color,i.data.forEach(function(F){var k,N=F.aggValues,G=N===void 0?[[0,0]]:N,$=_n(G,1),j=_n($[0],2),z=j[0],W=j[1],Y=F.datum,H=F.datum.length,K=F.keys,q=_n(F.keys,2),Q=q[0],se=q[1],ae=u.convert(Q),xe=u.convert(se),_e=z+W,ye=c.convert(0),me=c.convert(_e),U=xe-ae,ne=Math.abs(me-ye),fe=_e!==0?{text:(k=a.call(_,{value:_e,seriesId:v}))!==null&&k!==void 0?k:String(_e),fontStyle:T,fontWeight:O,fontSize:P,fontFamily:M,fill:I,x:ae+U/2,y:me+ne/2}:void 0,Se={x:ae+U/2,y:me+ne/2};C.push({series:R,datum:Y,aggregatedValue:_e,frequency:H,domain:K,yKey:m,xKey:S,x:ae,y:me,xValue:ae,yValue:me,width:U,height:ne,nodeMidPoint:Se,fill:h,stroke:f,strokeWidth:p,label:fe})}),[2,[{itemId:(e=this.yKey)!==null&&e!==void 0?e:this.id,nodeData:C,labelData:C}]])})})},t.prototype.nodeFactory=function(){return new wr},t.prototype.updateDatumSelection=function(e){return so(this,void 0,void 0,function(){var r,n;return lo(this,function(i){return r=e.nodeData,n=e.datumSelection,[2,n.update(r,function(a){a.tag=tu.Bin,a.crisp=!0},function(a){return a.domain.join("_")})]})})},t.prototype.updateDatumNodes=function(e){return so(this,void 0,void 0,function(){var r,n,i,a,s,l,u,c,d,h,f,p,v=this;return lo(this,function(g){return r=e.datumSelection,n=e.isHighlight,i=this,a=i.fillOpacity,s=i.strokeOpacity,l=i.shadow,u=i.highlightStyle.item,c=u.fill,d=u.fillOpacity,h=d===void 0?a:d,f=u.stroke,p=u.strokeWidth,r.each(function(m,y,S){var C,w,x=n&&p!==void 0?p:y.strokeWidth,b=n?h:a;m.fill=(C=n?c:void 0)!==null&&C!==void 0?C:y.fill,m.stroke=(w=n?f:void 0)!==null&&w!==void 0?w:y.stroke,m.fillOpacity=b,m.strokeOpacity=s,m.strokeWidth=x,m.lineDash=v.lineDash,m.lineDashOffset=v.lineDashOffset,m.fillShadow=l,m.zIndex=n?Cu.highlightedZIndex:S,m.visible=y.height>0}),[2]})})},t.prototype.updateLabelSelection=function(e){return so(this,void 0,void 0,function(){var r,n;return lo(this,function(i){return r=e.labelData,n=e.labelSelection,[2,n.update(r,function(a){a.tag=tu.Label,a.pointerEvents=_t.None,a.textAlign="center",a.textBaseline="middle"})]})})},t.prototype.updateLabelNodes=function(e){return so(this,void 0,void 0,function(){var r,n;return lo(this,function(i){return r=e.labelSelection,n=this.label.enabled,r.each(function(a,s){var l=s.label;l&&n?(a.text=l.text,a.x=l.x,a.y=l.y,a.fontStyle=l.fontStyle,a.fontWeight=l.fontWeight,a.fontSize=l.fontSize,a.fontFamily=l.fontFamily,a.fill=l.fill,a.visible=!0):a.visible=!1}),[2]})})},t.prototype.getTooltipHtml=function(e){var r=this,n=r.xKey,i=r.yKey,a=i===void 0?"":i,s=r.axes,l=s[ee.X],u=s[ee.Y];if(!n||!l||!u)return"";var c=this,d=c.xName,h=c.yName,f=c.fill,p=c.tooltip,v=c.aggregation,g=c.id,m=p.renderer,y=e.aggregatedValue,S=e.frequency,C=e.domain,w=_n(e.domain,2),x=w[0],b=w[1],_=vt(d??n)+": "+l.formatDatum(x)+" - "+l.formatDatum(b),T=a?"<b>"+vt(h??a)+" ("+v+")</b>: "+u.formatDatum(y)+"<br>":"";T+="<b>Frequency</b>: "+S;var O={title:_,backgroundColor:f,content:T};return m?Ct(m({datum:{data:e.datum,aggregatedValue:e.aggregatedValue,domain:e.domain,frequency:e.frequency},xKey:n,xValue:C,xName:d,yKey:a,yValue:y,yName:h,color:f,title:_,seriesId:g}),O):Ct(O)},t.prototype.getLegendData=function(){var e,r=this,n=r.id,i=r.data,a=r.xKey,s=r.yName,l=r.visible,u=r.fill,c=r.stroke,d=r.fillOpacity,h=r.strokeOpacity;if(!i||i.length===0)return[];var f=[{legendType:"category",id:n,itemId:a,seriesId:n,enabled:l,label:{text:(e=s??a)!==null&&e!==void 0?e:"Frequency"},marker:{fill:u??"rgba(0, 0, 0, 0)",stroke:c??"rgba(0, 0, 0, 0)",fillOpacity:d,strokeOpacity:h}}];return f},t.prototype.animateEmptyUpdateReady=function(e){var r=this,n,i,a=e.datumSelections,s=e.labelSelections,l=(i=(n=this.ctx.animationManager)===null||n===void 0?void 0:n.defaultOptions.duration)!==null&&i!==void 0?i:1e3,u=200,c=0;a.forEach(function(d){return d.each(function(h,f){c=Math.max(c,f.height+f.y)})}),a.forEach(function(d){d.each(function(h,f){var p;(p=r.ctx.animationManager)===null||p===void 0||p.animateMany(r.id+"_empty-update-ready_"+h.id,[{from:c,to:f.y},{from:0,to:f.height}],{duration:l,ease:Yo,onUpdate:function(v){var g=_n(v,2),m=g[0],y=g[1];h.y=m,h.height=y,h.x=f.x,h.width=f.width}})})}),s.forEach(function(d){d.each(function(h){var f;(f=r.ctx.animationManager)===null||f===void 0||f.animate(r.id+"_empty-update-ready_"+h.id,{from:0,to:1,delay:l,duration:u,onUpdate:function(p){h.opacity=p}})})})},t.prototype.animateReadyUpdate=function(e){var r=this,n=e.datumSelections;n.forEach(function(i){r.resetSelectionRects(i)})},t.prototype.animateReadyHighlight=function(e){this.resetSelectionRects(e)},t.prototype.animateReadyResize=function(e){var r=this,n,i=e.datumSelections;(n=this.ctx.animationManager)===null||n===void 0||n.reset(),i.forEach(function(a){r.resetSelectionRects(a)})},t.prototype.animateWaitingUpdateReady=function(e){var r=this,n,i,a,s=e.datumSelections,l=e.labelSelections,u=this.processedData,c=(n=u==null?void 0:u.reduced)===null||n===void 0?void 0:n.diff;if(!(c!=null&&c.changed)){s.forEach(function(m){r.resetSelectionRects(m)});return}var d=(a=(i=this.ctx.animationManager)===null||i===void 0?void 0:i.defaultOptions.duration)!==null&&a!==void 0?a:1e3,h=200,f=d;c.added.length>0&&c.removed.length>0?f=Math.floor(d/3):(c.added.length>0||c.removed.length>0)&&(f=Math.floor(d/2));var p=0;s.forEach(function(m){return m.each(function(y,S){p=Math.max(p,S.height+S.y)})});var v={};c.added.forEach(function(m){v[m.join("_")]=!0});var g={};c.removed.forEach(function(m){g[m.join("_")]=!0}),s.forEach(function(m){m.each(function(y,S){var C,w=[{from:y.x,to:S.x},{from:y.width,to:S.width},{from:y.y,to:S.y},{from:y.height,to:S.height}],x=c.removed.length>0?f:0,b=!1,_=S.domain.join("_"),T=p,O=0;_!==void 0&&v[_]!==void 0?(w=[{from:S.x,to:S.x},{from:S.width,to:S.width},{from:T,to:S.y},{from:O,to:S.height}],x+=f):_!==void 0&&g[_]!==void 0&&(w=[{from:y.x,to:S.x},{from:y.width,to:S.width},{from:S.y,to:T},{from:S.height,to:O}],x=0,b=!0),(C=r.ctx.animationManager)===null||C===void 0||C.animateMany(r.id+"_waiting-update-ready_"+y.id,w,{disableInteractions:!0,delay:x,duration:f,ease:Yo,repeat:0,onUpdate:function(P){var M=_n(P,4),I=M[0],R=M[1],L=M[2],F=M[3];y.x=I,y.width=R,y.y=L,y.height=F},onComplete:function(){b&&m.cleanup()}})})}),l.forEach(function(m){m.each(function(y){var S;y.opacity=0,(S=r.ctx.animationManager)===null||S===void 0||S.animate(r.id+"_waiting-update-ready_"+y.id,{from:0,to:1,delay:d,duration:h,ease:gg,repeat:0,onUpdate:function(C){y.opacity=C}})})})},t.prototype.resetSelectionRects=function(e){e.each(function(r,n){r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height})},t.prototype.isLabelEnabled=function(){return this.label.enabled},t.className="HistogramSeries",t.type="histogram",ft([A(Fe)],t.prototype,"fill",void 0),ft([A(Fe)],t.prototype,"stroke",void 0),ft([A(J(0,1))],t.prototype,"fillOpacity",void 0),ft([A(J(0,1))],t.prototype,"strokeOpacity",void 0),ft([A(ra)],t.prototype,"lineDash",void 0),ft([A(J(0))],t.prototype,"lineDashOffset",void 0),ft([A(de)],t.prototype,"xKey",void 0),ft([A(Re)],t.prototype,"areaPlot",void 0),ft([A(zd())],t.prototype,"bins",void 0),ft([A(IT)],t.prototype,"aggregation",void 0),ft([A(Pe(0))],t.prototype,"binCount",void 0),ft([A(de)],t.prototype,"xName",void 0),ft([A(de)],t.prototype,"yKey",void 0),ft([A(de)],t.prototype,"yName",void 0),ft([A(J(0))],t.prototype,"strokeWidth",void 0),t}(Cs),ch=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fo=function(){return Fo=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Fo.apply(this,arguments)},Bt=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},uo=function(o,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):n(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},co=function(o,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},op=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},NT=function(o){ch(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.formatter=void 0,e}return Bt([A(Be)],t.prototype,"formatter",void 0),t}(Or),GT=function(o){ch(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.renderer=void 0,e.format=void 0,e}return Bt([A(Be)],t.prototype,"renderer",void 0),Bt([A(de)],t.prototype,"format",void 0),t}(Ii),VT=function(o){ch(t,o);function t(e){var r=o.call(this,{moduleCtx:e,hasMarkers:!0,pickModes:[tt.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,tt.NEAREST_NODE,tt.EXACT_SHAPE_MATCH]})||this;r.marker=new sh,r.label=new NT,r.title=void 0,r.stroke="#874349",r.lineDash=[0],r.lineDashOffset=0,r.strokeWidth=2,r.strokeOpacity=1,r.tooltip=new GT,r.xKey=void 0,r.xName=void 0,r.yKey=void 0,r.yName=void 0;var n=r,i=n.marker,a=n.label;return i.fill="#c16068",i.stroke="#874349",a.enabled=!1,r}return t.prototype.processData=function(e){return uo(this,void 0,void 0,function(){var r,n,i,a,s,l,u,c,d,h,f,p,v,g;return co(this,function(m){switch(m.label){case 0:return r=this,n=r.axes,i=r.xKey,a=i===void 0?"":i,s=r.yKey,l=s===void 0?"":s,u=a&&l&&this.data?this.data:[],c=n[ee.X],d=n[ee.Y],h=(c==null?void 0:c.scale)instanceof De,f=(d==null?void 0:d.scale)instanceof De,[4,e.request(this.id,u??[],{props:[mt(this,a,h,{id:"xValue"}),mt(this,l,f,{id:"yValue",invalidValue:void 0})],dataVisible:this.visible})];case 1:return p=m.sent(),v=p.dataModel,g=p.processedData,this.dataModel=v,this.processedData=g,[2]}})})},t.prototype.getDomain=function(e){var r=this,n=r.axes,i=r.dataModel,a=r.processedData;if(!a||!i)return[];var s=n[ee.X],l=n[ee.Y],u=i.resolveProcessedDataDefById(this,"xValue");if(e===ee.X){var c=i.getDomain(this,"xValue","value",a);return(u==null?void 0:u.def.type)==="value"&&u.def.valueType==="category"?c:this.fixNumericExtent(Xt(c),s)}else{var c=i.getDomain(this,"yValue","value",a);return this.fixNumericExtent(c,l)}},t.prototype.createNodeData=function(){var e,r,n,i,a;return uo(this,void 0,void 0,function(){var s,l,u,c,d,h,f,p,v,g,m,y,S,C,w,x,b,_,T,O,P,M,I,R,L,F,k,N,G,$,j,z,W,Y,H,K,q,Q,se,ae,xe,_e,ye;return co(this,function(me){if(s=this,l=s.processedData,u=s.dataModel,c=s.axes,d=s.marker,h=d.enabled,f=d.size,p=d.strokeWidth,v=s.ctx.callbackCache,g=c[ee.X],m=c[ee.Y],!l||!u||!g||!m)return[2,[]];for(y=this,S=y.label,C=y.yKey,w=C===void 0?"":C,x=y.xKey,b=x===void 0?"":x,_=y.id,T=g.scale,O=m.scale,P=((e=T.bandwidth)!==null&&e!==void 0?e:0)/2,M=((r=O.bandwidth)!==null&&r!==void 0?r:0)/2,I=new Array(l.data.length),R=h?f:0,L=u.resolveProcessedDataIndexById(this,"xValue").index,F=u.resolveProcessedDataIndexById(this,"yValue").index,k=!0,N=void 0,G=void 0,$=0,j=0;j<l.data.length;j++)if(z=G??l.data[j],W=z.datum,Y=z.values,H=Y[L],K=Y[F],K===void 0)N=void 0,k=!0;else{if(q=T.convert(H)+P,isNaN(q)){N=void 0,k=!0,G=void 0;continue}if(Q=((n=T.bandwidth)!==null&&n!==void 0?n:f*.5+(p??0))+1,G=((i=l.data[j+1])===null||i===void 0?void 0:i.values[F])===void 0?void 0:l.data[j+1],se=(a=l.data[j+1])===null||a===void 0?void 0:a.values[L],ae=g.inRangeEx(q,0,Q),xe=G&&g.inRangeEx(T.convert(se)+P,0,Q),ae===-1&&xe===-1){k=!0;continue}if(ae===1&&N===1){k=!0;continue}N=ae,_e=O.convert(K)+M,ye=void 0,S.formatter&&(ye=v.call(S.formatter,{value:K,seriesId:_})),ye!==void 0||(typeof K=="number"&&isFinite(K)?ye=K.toFixed(2):K&&(ye=String(K))),I[$++]={series:this,datum:W,yKey:w,xKey:b,point:{x:q,y:_e,moveTo:k,size:R},nodeMidPoint:{x:q,y:_e},yValue:K,xValue:H,label:ye?{text:ye,fontStyle:S.fontStyle,fontWeight:S.fontWeight,fontSize:S.fontSize,fontFamily:S.fontFamily,textAlign:"center",textBaseline:"bottom",fill:S.color}:void 0},k=!1}return I.length=$,[2,[{itemId:w,nodeData:I,labelData:I}]]})})},t.prototype.isPathOrSelectionDirty=function(){return this.marker.isDirty()},t.prototype.markerFactory=function(){var e=this.marker.shape,r=na(e);return new r},t.prototype.updateMarkerSelection=function(e){return uo(this,void 0,void 0,function(){var r,n,i,a,s;return co(this,function(l){return r=e.nodeData,n=e.markerSelection,i=this.marker,a=i.shape,s=i.enabled,r=a&&s?r:[],this.marker.isDirty()&&n.clear(),[2,n.update(r)]})})},t.prototype.updateMarkerNodes=function(e){var r;return uo(this,void 0,void 0,function(){var n,i,a,s,l,u,c,d,h,f,p,v,g,m,y,S,C,w,x,b,_,T,O;return co(this,function(P){return n=e.markerSelection,i=e.isHighlight,a=this,s=a.marker,l=a.marker.fillOpacity,u=a.xKey,c=u===void 0?"":u,d=a.yKey,h=d===void 0?"":d,f=a.stroke,p=a.strokeOpacity,v=a.highlightStyle.item,g=v.fill,m=v.fillOpacity,y=m===void 0?l:m,S=v.stroke,C=v.strokeWidth,w=a.id,x=a.ctx.callbackCache,b=s.size,_=s.formatter,T=(r=s.strokeWidth)!==null&&r!==void 0?r:this.strokeWidth,O=typeof s.shape=="function",n.each(function(M,I){var R,L,F,k,N,G,$,j=i&&g!==void 0?g:s.fill,z=i?y:l,W=i&&S!==void 0?S:(R=s.stroke)!==null&&R!==void 0?R:f,Y=i&&C!==void 0?C:T,H=void 0;_&&(H=x.call(_,{datum:I.datum,xKey:c,yKey:h,fill:j,stroke:W,strokeWidth:Y,size:b,highlighted:i,seriesId:w})),M.fill=(L=H==null?void 0:H.fill)!==null&&L!==void 0?L:j,M.stroke=(F=H==null?void 0:H.stroke)!==null&&F!==void 0?F:W,M.strokeWidth=(k=H==null?void 0:H.strokeWidth)!==null&&k!==void 0?k:Y,M.fillOpacity=z??1,M.strokeOpacity=(G=(N=s.strokeOpacity)!==null&&N!==void 0?N:p)!==null&&G!==void 0?G:1,M.size=($=H==null?void 0:H.size)!==null&&$!==void 0?$:b,M.translationX=I.point.x,M.translationY=I.point.y,M.visible=M.size>0&&!isNaN(I.point.x)&&!isNaN(I.point.y),!(!O||M.dirtyPath)&&(M.path.clear({trackChanges:!0}),M.updatePath(),M.checkPathDirty())}),i||this.marker.markClean(),[2]})})},t.prototype.updateLabelSelection=function(e){return uo(this,void 0,void 0,function(){var r,n,i,a,s;return co(this,function(l){return r=e.labelData,n=e.labelSelection,i=this.marker,a=i.shape,s=i.enabled,r=a&&s?r:[],[2,n.update(r)]})})},t.prototype.updateLabelNodes=function(e){return uo(this,void 0,void 0,function(){var r,n,i,a,s,l,u,c;return co(this,function(d){return r=e.labelSelection,n=this.label,i=n.enabled,a=n.fontStyle,s=n.fontWeight,l=n.fontSize,u=n.fontFamily,c=n.color,r.each(function(h,f){var p=f.point,v=f.label;f&&v&&i?(h.fontStyle=a,h.fontWeight=s,h.fontSize=l,h.fontFamily=u,h.textAlign=v.textAlign,h.textBaseline=v.textBaseline,h.text=v.text,h.x=p.x,h.y=p.y-10,h.fill=c,h.visible=!0):h.visible=!1}),[2]})})},t.prototype.getNodeClickEvent=function(e,r){var n,i;return new wu((n=this.xKey)!==null&&n!==void 0?n:"",(i=this.yKey)!==null&&i!==void 0?i:"",e,r,this)},t.prototype.getNodeDoubleClickEvent=function(e,r){var n,i;return new bu((n=this.xKey)!==null&&n!==void 0?n:"",(i=this.yKey)!==null&&i!==void 0?i:"",e,r,this)},t.prototype.getTooltipHtml=function(e){var r,n,i=this,a=i.xKey,s=i.yKey,l=i.axes,u=l[ee.X],c=l[ee.Y];if(!a||!s||!u||!c)return"";var d=this,h=d.xName,f=d.yName,p=d.tooltip,v=d.marker,g=d.id,m=p.renderer,y=p.format,S=e.datum,C=e.xValue,w=e.yValue,x=u.formatDatum(C),b=c.formatDatum(w),_=vt((r=this.title)!==null&&r!==void 0?r:f),T=vt(x+": "+b),O=v.formatter,P=v.fill,M=v.stroke,I=v.strokeWidth,R=v.size,L=I??this.strokeWidth,F=void 0;O&&(F=O({datum:S,xKey:a,yKey:s,fill:P,stroke:M,strokeWidth:L,size:R,highlighted:!1,seriesId:g}));var k=(n=F==null?void 0:F.fill)!==null&&n!==void 0?n:P,N={title:_,backgroundColor:k,content:T};if(y||m){var G={datum:S,xKey:a,xValue:C,xName:h,yKey:s,yValue:w,yName:f,title:_,color:k,seriesId:g};if(y)return Ct({content:Jg(y,G)},N);if(m)return Ct(m(G),N)}return Ct(N)},t.prototype.getLegendData=function(){var e,r,n,i,a,s,l,u=this,c=u.id,d=u.data,h=u.xKey,f=u.yKey,p=u.yName,v=u.visible,g=u.title,m=u.marker,y=u.stroke,S=u.strokeOpacity;if(!(d!=null&&d.length&&h&&f))return[];var C=[{legendType:"category",id:c,itemId:f,seriesId:c,enabled:v,label:{text:(e=g??p)!==null&&e!==void 0?e:f},marker:{shape:m.shape,fill:(r=m.fill)!==null&&r!==void 0?r:"rgba(0, 0, 0, 0)",stroke:(i=(n=m.stroke)!==null&&n!==void 0?n:y)!==null&&i!==void 0?i:"rgba(0, 0, 0, 0)",fillOpacity:(a=m.fillOpacity)!==null&&a!==void 0?a:1,strokeOpacity:(l=(s=m.strokeOpacity)!==null&&s!==void 0?s:S)!==null&&l!==void 0?l:1}}];return C},t.prototype.animateEmptyUpdateReady=function(e){var r=this,n=e.markerSelections,i=e.labelSelections,a=e.contextData,s=e.paths;a.forEach(function(l,u){var c,d,h,f=l.nodeData,p=op(s[u],1),v=p[0],g=v.path,m=[0],y=f.reduce(function(x,b,_){if(_===0)return x;var T=f[_-1];if(isNaN(b.point.x)||isNaN(b.point.y)||isNaN(T.point.x)||isNaN(T.point.y))return m.push(x),x;var O=Math.sqrt(Math.pow(b.point.x-T.point.x,2)+Math.pow(b.point.y-T.point.y,2));return m.push(x+O),x+O},0);v.fill=void 0,v.lineJoin="round",v.pointerEvents=_t.None,v.stroke=r.stroke,v.strokeWidth=r.getStrokeWidth(r.strokeWidth),v.strokeOpacity=r.strokeOpacity,v.lineDash=r.lineDash,v.lineDashOffset=r.lineDashOffset;var S=(d=(c=r.ctx.animationManager)===null||c===void 0?void 0:c.defaultOptions.duration)!==null&&d!==void 0?d:1e3,C=200,w={from:0,to:y};(h=r.ctx.animationManager)===null||h===void 0||h.animate(r.id+"_empty-update-ready",Fo(Fo({},w),{duration:S,onUpdate:function(x){g.clear({trackChanges:!0}),f.forEach(function(b,_){if(m[_]<=x)b.point.moveTo?g.moveTo(b.point.x,b.point.y):g.lineTo(b.point.x,b.point.y);else if(_>0&&m[_-1]<x){var T=f[_-1].point,O=b.point,P=m[_]-m[_-1],M=m[_]-x,I=(P-M)/P,R=(1-I)*T.x+I*O.x,L=(1-I)*T.y+I*O.y;b.point.moveTo?g.moveTo(R,L):g.lineTo(R,L)}}),v.checkPathDirty()}})),n[u].each(function(x,b,_){var T,O,P,M,I=y>0?m[_]/y*S:0,R=r.animateFormatter(b),L=(O=(T=b.point)===null||T===void 0?void 0:T.size)!==null&&O!==void 0?O:0;(P=r.ctx.animationManager)===null||P===void 0||P.animate(r.id+"_empty-update-ready_"+x.id,Fo(Fo({},w),{to:(M=R==null?void 0:R.size)!==null&&M!==void 0?M:L,delay:I,duration:C,onUpdate:function(F){x.size=F}}))}),i[u].each(function(x,b,_){var T,O=m[_]/y*S;(T=r.ctx.animationManager)===null||T===void 0||T.animate(r.id+"_empty-update-ready_"+x.id,{from:0,to:1,delay:O,duration:C,onUpdate:function(P){x.opacity=P}})})})},t.prototype.animateReadyUpdate=function(e){this.resetMarkersAndPaths(e)},t.prototype.animateReadyResize=function(e){var r;(r=this.ctx.animationManager)===null||r===void 0||r.reset(),this.resetMarkersAndPaths(e)},t.prototype.resetMarkersAndPaths=function(e){var r=this,n=e.markerSelections,i=e.contextData,a=e.paths;i.forEach(function(s,l){var u=s.nodeData,c=op(a[l],1),d=c[0],h=d.path;d.stroke=r.stroke,d.strokeWidth=r.getStrokeWidth(r.strokeWidth),d.strokeOpacity=r.strokeOpacity,d.lineDash=r.lineDash,d.lineDashOffset=r.lineDashOffset,h.clear({trackChanges:!0}),u.forEach(function(f){f.point.moveTo?h.moveTo(f.point.x,f.point.y):h.lineTo(f.point.x,f.point.y)}),d.checkPathDirty(),n[l].each(function(f,p){var v,g,m,y=r.animateFormatter(p),S=(g=(v=p.point)===null||v===void 0?void 0:v.size)!==null&&g!==void 0?g:0;f.size=(m=y==null?void 0:y.size)!==null&&m!==void 0?m:S})})},t.prototype.animateFormatter=function(e){var r,n,i=this,a=i.marker,s=i.xKey,l=s===void 0?"":s,u=i.yKey,c=u===void 0?"":u,d=i.stroke,h=i.id,f=i.ctx.callbackCache,p=a.size,v=a.formatter,g=a.fill,m=(r=a.stroke)!==null&&r!==void 0?r:d,y=(n=a.strokeWidth)!==null&&n!==void 0?n:this.strokeWidth,S=void 0;return v&&(S=f.call(v,{datum:e.datum,xKey:l,yKey:c,fill:g,stroke:m,strokeWidth:y,size:p,highlighted:!1,seriesId:h})),S},t.prototype.isLabelEnabled=function(){return this.label.enabled},t.className="LineSeries",t.type="line",Bt([A(de)],t.prototype,"title",void 0),Bt([A(Fe)],t.prototype,"stroke",void 0),Bt([A(ra)],t.prototype,"lineDash",void 0),Bt([A(J(0))],t.prototype,"lineDashOffset",void 0),Bt([A(J(0))],t.prototype,"strokeWidth",void 0),Bt([A(J(0,1))],t.prototype,"strokeOpacity",void 0),Bt([A(de)],t.prototype,"xKey",void 0),Bt([A(de)],t.prototype,"xName",void 0),Bt([A(de)],t.prototype,"yKey",void 0),Bt([A(de)],t.prototype,"yName",void 0),t}(Cs),ey=function(){function o(){this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(function(t){return rt.fromString(t)})}return o.prototype.update=function(){var t=this,e=t.domain,r=t.range;e.length<2&&(re.warnOnce("`colorDomain` should have at least 2 values."),e.length===0?e.push(0,1):e.length===1&&e.push(e[0]+1));for(var n=1;n<e.length;n++){var i=e[n-1],a=e[n];if(i>=a){re.warnOnce("`colorDomain` values should be supplied in ascending order."),e.sort(function(l,u){return l-u});break}}var s=r.length<e.length;if(s||e.length>2&&r.length>e.length)if(re.warnOnce("Number of elements in `colorRange` needs to match the number of elements in `colorDomain`."),s)for(var n=r.length;n<e.length;n++)r.push("black");else r.splice(e.length);this.parsedRange=this.range.map(function(l){return rt.fromString(l)})},o.prototype.convert=function(t){var e=this,r=e.domain,n=e.range,i=e.parsedRange,a=r[0],s=r[r.length-1],l=n[0],u=n[n.length-1];if(t<=a)return l;if(t>=s)return u;var c,d;if(r.length===2){var h=(t-a)/(s-a),f=1/(n.length-1);c=n.length<=2?0:Math.min(Math.floor(h*(n.length-1)),n.length-2),d=(h-c*f)/f}else{for(c=0;c<r.length-2&&!(t<r[c+1]);c++);var p=r[c],v=r[c+1];d=(t-p)/(v-p)}var g=i[c],m=i[c+1];return pg(g,m)(d)},o}(),oa=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),is=function(){return is=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},is.apply(this,arguments)},Tt=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ho=function(o,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):n(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},fo=function(o,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},gc=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},yc=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},jT=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},BT=function(o){oa(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.formatter=void 0,e}return Tt([A(Be)],t.prototype,"formatter",void 0),t}(Or),ty=function(o){oa(t,o);function t(e,r,n,i,a,s){var l=o.call(this,r,n,i,a,s)||this;return l.sizeKey=e,l}return t}(ah),HT=function(o){oa(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.type="nodeClick",e}return t}(ty),zT=function(o){oa(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return t}(ty),WT=function(o){oa(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.renderer=void 0,e}return Tt([A(Be)],t.prototype,"renderer",void 0),t}(Ii),UT=function(o){oa(t,o);function t(e){var r=o.call(this,{moduleCtx:e,pickModes:[tt.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,tt.NEAREST_NODE,tt.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0})||this;r.sizeScale=new it,r.marker=new sh,r.label=new BT,r.title=void 0,r.labelKey=void 0,r.xName=void 0,r.yName=void 0,r.sizeName="Size",r.labelName="Label",r.xKey=void 0,r.yKey=void 0,r.sizeKey=void 0,r.colorKey=void 0,r.colorName="Color",r.colorDomain=void 0,r.colorRange=["#ffff00","#00ff00","#0000ff"],r.colorScale=new ey,r.tooltip=new WT;var n=r.label;return n.enabled=!1,r}return t.prototype.processData=function(e){var r,n;return ho(this,void 0,void 0,function(){var i,a,s,l,u,c,d,h,f,p,v,g,m,y,S,C,w,x,b,_,T,O,P,M,I;return fo(this,function(R){switch(R.label){case 0:return i=this,a=i.xKey,s=a===void 0?"":a,l=i.yKey,u=l===void 0?"":l,c=i.sizeKey,d=i.labelKey,h=i.axes,f=i.marker,p=i.data,v=h[ee.X],g=h[ee.Y],m=(v==null?void 0:v.scale)instanceof De,y=(g==null?void 0:g.scale)instanceof De,S=this,C=S.colorScale,w=S.colorDomain,x=S.colorRange,b=S.colorKey,[4,e.request(this.id,p??[],{props:yc(yc(yc([mt(this,s,m,{id:"xValue"}),mt(this,u,y,{id:"yValue"})],gc(c?[mt(this,c,!0,{id:"sizeValue"})]:[])),gc(b?[mt(this,b,!0,{id:"colorValue"})]:[])),gc(d?[mt(this,d,!1,{id:"labelValue"})]:[])),dataVisible:this.visible})];case 1:return _=R.sent(),T=_.dataModel,O=_.processedData,this.dataModel=T,this.processedData=O,c&&(P=T.resolveProcessedDataIndexById(this,"sizeValue").index,M=(r=O.domain.values[P])!==null&&r!==void 0?r:[],this.sizeScale.domain=f.domain?f.domain:M),b&&(I=T.resolveProcessedDataIndexById(this,"colorValue").index,C.domain=(n=w??O.domain.values[I])!==null&&n!==void 0?n:[],C.range=x,C.update()),[2]}})})},t.prototype.getDomain=function(e){var r=this,n=r.dataModel,i=r.processedData;if(!i||!n)return[];var a=e===ee.X?"xValue":"yValue",s=n.resolveProcessedDataDefById(this,a,"value"),l=n.getDomain(this,a,"value",i);if((s==null?void 0:s.def.type)==="value"&&(s==null?void 0:s.def.valueType)==="category")return l;var u=this.axes[e];return this.fixNumericExtent(Xt(l),u)},t.prototype.getNodeClickEvent=function(e,r){var n,i;return new HT(this.sizeKey,(n=this.xKey)!==null&&n!==void 0?n:"",(i=this.yKey)!==null&&i!==void 0?i:"",e,r,this)},t.prototype.getNodeDoubleClickEvent=function(e,r){var n,i;return new zT(this.sizeKey,(n=this.xKey)!==null&&n!==void 0?n:"",(i=this.yKey)!==null&&i!==void 0?i:"",e,r,this)},t.prototype.createNodeData=function(){var e,r,n,i,a,s;return ho(this,void 0,void 0,function(){var l,u,c,d,h,f,p,v,g,m,y,S,C,w,x,b,_,T,O,P,M,I,R,L,F,k,N,G,$,j,z,W,Y,H,K,q,Q,se,ae,xe,_e,ye,me,U,ne,fe,Se,He,ut;return fo(this,function(ur){if(l=this,u=l.visible,c=l.axes,d=l.yKey,h=d===void 0?"":d,f=l.xKey,p=f===void 0?"":f,v=l.label,g=l.labelKey,m=l.ctx.callbackCache,y=l.dataModel,S=l.processedData,C=c[ee.X],w=c[ee.Y],!(y&&S&&u&&C&&w))return[2,[]];x=y.resolveProcessedDataIndexById(this,"xValue").index,b=y.resolveProcessedDataIndexById(this,"yValue").index,_=this.sizeKey?y.resolveProcessedDataIndexById(this,"sizeValue").index:-1,T=this.colorKey?y.resolveProcessedDataIndexById(this,"colorValue").index:-1,O=this.labelKey?y.resolveProcessedDataIndexById(this,"labelValue").index:-1,P=this,M=P.colorScale,I=P.sizeKey,R=P.colorKey,L=P.id,F=C.scale,k=w.scale,N=((e=F.bandwidth)!==null&&e!==void 0?e:0)/2,G=((r=k.bandwidth)!==null&&r!==void 0?r:0)/2,$=this,j=$.sizeScale,z=$.marker,W=new Array((i=(n=this.processedData)===null||n===void 0?void 0:n.data.length)!==null&&i!==void 0?i:0),j.range=[z.size,z.maxSize],Y=v.getFont(),H=0;try{for(K=jT((a=S.data)!==null&&a!==void 0?a:[]),q=K.next();!q.done;q=K.next())Q=q.value,se=Q.values,ae=Q.datum,xe=se[x],_e=se[b],ye=F.convert(xe)+N,me=k.convert(_e)+G,this.checkRangeXY(ye,me,C,w)&&(U=void 0,v.formatter&&(U=m.call(v.formatter,{value:_e,seriesId:L,datum:ae})),U===void 0&&(U=g?String(se[O]):""),ne=We.getTextSize(U,Y),fe=I?j.convert(se[_]):z.size,Se=R?M.convert(se[T]):void 0,W[H++]={series:this,itemId:h,yKey:h,xKey:p,datum:ae,xValue:xe,yValue:_e,sizeValue:se[_],point:{x:ye,y:me,size:fe},nodeMidPoint:{x:ye,y:me},fill:Se,label:is({text:U},ne)})}catch(cr){He={error:cr}}finally{try{q&&!q.done&&(ut=K.return)&&ut.call(K)}finally{if(He)throw He.error}}return W.length=H,[2,[{itemId:(s=this.yKey)!==null&&s!==void 0?s:this.id,nodeData:W,labelData:W}]]})})},t.prototype.isPathOrSelectionDirty=function(){return this.marker.isDirty()},t.prototype.getLabelData=function(){var e;return(e=this.contextNodeData)===null||e===void 0?void 0:e.reduce(function(r,n){return r.concat(n.labelData)},[])},t.prototype.markerFactory=function(){var e=this.marker.shape,r=na(e);return new r},t.prototype.updateMarkerSelection=function(e){return ho(this,void 0,void 0,function(){var r,n,i,a;return fo(this,function(s){return r=e.nodeData,n=e.markerSelection,i=this.marker.enabled,this.marker.isDirty()&&n.clear(),a=i?r:[],[2,n.update(a)]})})},t.prototype.updateMarkerNodes=function(e){return ho(this,void 0,void 0,function(){var r,n,i,a,s,l,u,c,d,h,f,p,v,g,m,y,S,C,w,x,b,_,T;return fo(this,function(O){return r=e.markerSelection,n=e.isHighlight,i=this,a=i.marker,s=i.xKey,l=s===void 0?"":s,u=i.yKey,c=u===void 0?"":u,d=i.sizeScale,h=i.marker,f=h.fillOpacity,p=h.strokeOpacity,v=h.strokeWidth,g=i.highlightStyle.item,m=g.fill,y=g.fillOpacity,S=y===void 0?f:y,C=g.stroke,w=g.strokeWidth,x=i.id,b=i.ctx.callbackCache,_=a.formatter,d.range=[a.size,a.maxSize],T=typeof a.shape=="function",r.each(function(P,M){var I,R,L,F,k,N,G,$,j,z,W=n&&m!==void 0?m:(I=M.fill)!==null&&I!==void 0?I:a.fill,Y=n?S:f,H=n&&C!==void 0?C:a.stroke,K=p,q=n&&w!==void 0?w:v??1,Q=(L=(R=M.point)===null||R===void 0?void 0:R.size)!==null&&L!==void 0?L:0,se=void 0;_&&(se=b.call(_,{datum:M.datum,xKey:l,yKey:c,fill:W,stroke:H,strokeWidth:q,size:Q,highlighted:n,seriesId:x})),P.fill=(F=se==null?void 0:se.fill)!==null&&F!==void 0?F:W,P.stroke=(k=se==null?void 0:se.stroke)!==null&&k!==void 0?k:H,P.strokeWidth=(N=se==null?void 0:se.strokeWidth)!==null&&N!==void 0?N:q,P.fillOpacity=Y??1,P.strokeOpacity=K??1,P.translationX=($=(G=M.point)===null||G===void 0?void 0:G.x)!==null&&$!==void 0?$:0,P.translationY=(z=(j=M.point)===null||j===void 0?void 0:j.y)!==null&&z!==void 0?z:0,P.visible=P.size>0,!(!T||P.dirtyPath)&&(P.path.clear({trackChanges:!0}),P.updatePath(),P.checkPathDirty())}),n||this.marker.markClean(),[2]})})},t.prototype.updateLabelSelection=function(e){var r,n;return ho(this,void 0,void 0,function(){var i,a,s,l;return fo(this,function(u){return i=e.labelSelection,a=this.label.enabled,s=a?(n=(r=this.chart)===null||r===void 0?void 0:r.placeLabels().get(this))!==null&&n!==void 0?n:[]:[],l=s.map(function(c){return is(is({},c.datum),{point:{x:c.x,y:c.y,size:c.datum.point.size}})}),[2,i.update(l)]})})},t.prototype.updateLabelNodes=function(e){return ho(this,void 0,void 0,function(){var r,n;return fo(this,function(i){return r=e.labelSelection,n=this.label,r.each(function(a,s){var l,u,c,d;a.text=s.label.text,a.fill=n.color,a.x=(u=(l=s.point)===null||l===void 0?void 0:l.x)!==null&&u!==void 0?u:0,a.y=(d=(c=s.point)===null||c===void 0?void 0:c.y)!==null&&d!==void 0?d:0,a.fontStyle=n.fontStyle,a.fontWeight=n.fontWeight,a.fontSize=n.fontSize,a.fontFamily=n.fontFamily,a.textAlign="left",a.textBaseline="top"}),[2]})})},t.prototype.getTooltipHtml=function(e){var r,n,i,a,s,l,u,c=this,d=c.xKey,h=c.yKey,f=c.axes,p=f[ee.X],v=f[ee.Y];if(!d||!h||!p||!v)return"";var g=this,m=g.marker,y=g.tooltip,S=g.xName,C=g.yName,w=g.sizeKey,x=g.sizeName,b=g.labelKey,_=g.labelName,T=g.id,O=g.ctx.callbackCache,P=m.stroke,M=(r=e.fill)!==null&&r!==void 0?r:m.fill,I=this.getStrokeWidth((n=m.strokeWidth)!==null&&n!==void 0?n:1),R=this.marker.formatter,L=void 0;R&&(L=O.call(R,{datum:e,xKey:d,yKey:h,fill:M,stroke:P,strokeWidth:I,size:(a=(i=e.point)===null||i===void 0?void 0:i.size)!==null&&a!==void 0?a:0,highlighted:!1,seriesId:T}));var F=(l=(s=L==null?void 0:L.fill)!==null&&s!==void 0?s:M)!==null&&l!==void 0?l:"gray",k=(u=this.title)!==null&&u!==void 0?u:C,N=e.datum,G=e.xValue,$=e.yValue,j=e.sizeValue,z=e.label.text,W=vt(p.formatDatum(G)),Y=vt(v.formatDatum($)),H="<b>"+vt(S??d)+"</b>: "+W+"<br>"+("<b>"+vt(C??h)+"</b>: "+Y);w&&(H+="<br><b>"+vt(x??w)+"</b>: "+vt(j)),b&&(H="<b>"+vt(_??b)+"</b>: "+vt(z)+"<br>"+H);var K={title:k,backgroundColor:F,content:H},q=y.renderer;return q?Ct(q({datum:N,xKey:d,xValue:G,xName:S,yKey:h,yValue:$,yName:C,sizeKey:w,sizeName:x,labelKey:b,labelName:_,title:k,color:F,seriesId:T}),K):Ct(K)},t.prototype.getLegendData=function(){var e,r,n,i,a,s=this,l=s.id,u=s.data,c=s.xKey,d=s.yKey,h=s.yName,f=s.title,p=s.visible,v=s.marker,g=v.fill,m=v.stroke,y=v.fillOpacity,S=v.strokeOpacity;if(!(u!=null&&u.length&&c&&d))return[];var C=[{legendType:"category",id:l,itemId:d,seriesId:l,enabled:p,label:{text:(e=f??h)!==null&&e!==void 0?e:d},marker:{shape:v.shape,fill:(n=(r=v.fill)!==null&&r!==void 0?r:g)!==null&&n!==void 0?n:"rgba(0, 0, 0, 0)",stroke:(a=(i=v.stroke)!==null&&i!==void 0?i:m)!==null&&a!==void 0?a:"rgba(0, 0, 0, 0)",fillOpacity:y??1,strokeOpacity:S??1}}];return C},t.prototype.animateEmptyUpdateReady=function(e){var r=this,n,i,a=e.markerSelections,s=e.labelSelections,l=(i=(n=this.ctx.animationManager)===null||n===void 0?void 0:n.defaultOptions.duration)!==null&&i!==void 0?i:1e3,u=200;a.forEach(function(c){c.each(function(d,h){var f,p,v,g,m=r.animateFormatter(d,h),y=(p=(f=h.point)===null||f===void 0?void 0:f.size)!==null&&p!==void 0?p:0,S=(v=m==null?void 0:m.size)!==null&&v!==void 0?v:y;(g=r.ctx.animationManager)===null||g===void 0||g.animate(r.id+"_empty-update-ready_"+d.id,{from:0,to:S,duration:l,onUpdate:function(C){d.size=C}})})}),s.forEach(function(c){c.each(function(d){var h;(h=r.ctx.animationManager)===null||h===void 0||h.animate(r.id+"_empty-update-ready_"+d.id,{from:0,to:1,delay:l,duration:u,onUpdate:function(f){d.opacity=f}})})})},t.prototype.animateReadyUpdate=function(e){var r=this,n=e.markerSelections;n.forEach(function(i){r.resetMarkers(i)})},t.prototype.animateReadyHighlightMarkers=function(e){this.resetMarkers(e)},t.prototype.resetMarkers=function(e){var r=this;e.each(function(n,i){var a,s,l,u=r.animateFormatter(n,i),c=(s=(a=i.point)===null||a===void 0?void 0:a.size)!==null&&s!==void 0?s:0;n.size=(l=u==null?void 0:u.size)!==null&&l!==void 0?l:c})},t.prototype.animateFormatter=function(e,r){var n,i,a,s=this,l=s.xKey,u=l===void 0?"":l,c=s.yKey,d=c===void 0?"":c,h=s.marker.strokeWidth,f=s.id,p=s.ctx.callbackCache,v=this.marker.formatter,g=(n=r.fill)!==null&&n!==void 0?n:e.fill,m=e.stroke,y=h??1,S=(a=(i=r.point)===null||i===void 0?void 0:i.size)!==null&&a!==void 0?a:0,C=void 0;return v&&(C=p.call(v,{datum:r.datum,xKey:u,yKey:d,fill:g,stroke:m,strokeWidth:y,size:S,highlighted:!1,seriesId:f})),C},t.prototype.isLabelEnabled=function(){return this.label.enabled},t.className="ScatterSeries",t.type="scatter",Tt([A(de)],t.prototype,"title",void 0),Tt([A(de)],t.prototype,"labelKey",void 0),Tt([A(de)],t.prototype,"xName",void 0),Tt([A(de)],t.prototype,"yName",void 0),Tt([A(de)],t.prototype,"sizeName",void 0),Tt([A(de)],t.prototype,"labelName",void 0),Tt([A(de)],t.prototype,"xKey",void 0),Tt([A(de)],t.prototype,"yKey",void 0),Tt([A(de)],t.prototype,"sizeKey",void 0),Tt([A(de)],t.prototype,"colorKey",void 0),Tt([A(de)],t.prototype,"colorName",void 0),Tt([A(eg)],t.prototype,"colorDomain",void 0),Tt([A(ls)],t.prototype,"colorRange",void 0),t}(Cs),KT=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),$T=function(o){KT(t,o);function t(e){return o.call(this,{moduleCtx:e,pickModes:[tt.EXACT_SHAPE_MATCH]})||this}return t.prototype.getLabelData=function(){return[]},t}(Cu),Un=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),cd=function(){return cd=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},cd.apply(this,arguments)},ke=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Oa=function(o,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):n(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},Ea=function(o,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},XT=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},YT=function(o){Un(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.renderer=void 0,e}return ke([A(Be)],t.prototype,"renderer",void 0),t}(Ii),ry=function(o){Un(t,o);function t(e,r,n,i,a,s){var l=o.call(this,i,a,s)||this;return l.labelKey=e,l.sizeKey=r,l.colorKey=n,l}return t}(ms),qT=function(o){Un(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.type="nodeClick",e}return t}(ry),ZT=function(o){Un(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return t}(ry),ap=function(o){Un(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.padding=10,e}return ke([A(J(0))],t.prototype,"padding",void 0),t}(Or),mc=function(o){Un(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.wrapping="on-space",e}return ke([A(Ud)],t.prototype,"wrapping",void 0),t}(Or),JT=function(){function o(){this.style=function(){var t=new Or;return t.color="white",t}()}return ke([A(de)],o.prototype,"key",void 0),ke([A(de)],o.prototype,"name",void 0),ke([A(Be)],o.prototype,"formatter",void 0),o}(),An;(function(o){o[o.Name=0]="Name",o[o.Value=1]="Value"})(An||(An={}));var Mr=new Me;function po(o,t){var e=t.fontStyle,r=t.fontWeight,n=t.fontSize,i=t.fontFamily;Mr.fontStyle=e,Mr.fontWeight=r,Mr.fontSize=n,Mr.fontFamily=i,Mr.text=o,Mr.x=0,Mr.y=0,Mr.textAlign="left",Mr.textBaseline="top";var a=Mr.computeBBox(),s=a.width,l=a.height;return{width:s,height:l}}function Sc(o){if(typeof o=="string"&&!rt.validColorString(o)){var t="black";return re.warnOnce('invalid Treemap tile colour string "'+o+'". Affected treemap tiles will be coloured '+t+"."),"black"}return o}var QT=function(){function o(){this.color="black"}return ke([A(Fe)],o.prototype,"color",void 0),o}(),eP=function(o){Un(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.text=new QT,e}return t}(Yd),tP=function(o){Un(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.groupSelection=Ge.select(e.contentGroup,le),e.highlightSelection=Ge.select(e.highlightGroup,le),e.title=function(){var r=new ap;return r.color="white",r.fontWeight="bold",r.fontSize=12,r.fontFamily="Verdana, sans-serif",r.padding=15,r}(),e.subtitle=function(){var r=new ap;return r.color="white",r.fontSize=9,r.fontFamily="Verdana, sans-serif",r.padding=13,r}(),e.labels={large:function(){var r=new mc;return r.color="white",r.fontWeight="bold",r.fontSize=18,r}(),medium:function(){var r=new mc;return r.color="white",r.fontWeight="bold",r.fontSize=14,r}(),small:function(){var r=new mc;return r.color="white",r.fontWeight="bold",r.fontSize=10,r}(),formatter:void 0,value:new JT},e.nodePadding=2,e.nodeGap=0,e.labelKey="label",e.sizeKey="size",e.colorKey="color",e.colorDomain=[-5,5],e.colorRange=["#cb4b3f","#6acb64"],e.groupFill="#272931",e.groupStroke="black",e.groupStrokeWidth=1,e.tileStroke="black",e.tileStrokeWidth=1,e.gradient=!0,e.formatter=void 0,e.colorName="Change",e.rootName="Root",e.highlightGroups=!0,e.tileShadow=new id,e.labelShadow=new id,e.tooltip=new YT,e.highlightStyle=new eP,e}return t.prototype.getNodePaddingTop=function(e,r){var n,i=this,a=i.title,s=i.subtitle,l=i.nodePadding,u=e.label;if(e.isLeaf||!u||e.depth===0)return l;var c=e.depth>1?s:a,d=po(u,c),h=3;return c.fontSize>r.width/h||c.fontSize>r.height/h||d.height>=r.height?l:d.height+l+((n=c.padding)!==null&&n!==void 0?n:0)},t.prototype.getNodePadding=function(e,r){var n=this.nodePadding,i=this.getNodePaddingTop(e,r);return{top:i,right:n,bottom:n,left:n}},t.prototype.squarify=function(e,r,n){if(n===void 0&&(n=new Map),r.width<=0||r.height<=0)return n;n.set(e,r);var i=1,a=this.getNodePadding(e,r),s=r.width-a.left-a.right,l=r.height-a.top-a.bottom;if(s<=0||l<=0||e.value<=0)return n;for(var u=0,c=0,d=1/0,h=e.value,f=e.children,p=new Ee(r.x+a.left,r.y+a.top,s,l),v=p.clone(),g=0;g<f.length;g++){var m=f[g].value,y=f[c].value,S=v.width<v.height;u+=m;var C=S?v.height:v.width,w=S?v.width:v.height,x=w*y/u,b=C*u/h,_=Math.max(x,b)/Math.min(x,b),T=Math.abs(i-_);if(T<d){d=T;continue}u-=m,b=C*u/h;for(var O=S?v.x:v.y,P=c;P<g;P++){var M=f[P],I=S?O:v.x,R=S?v.y:O,L=w*M.value/u,F=S?L:b,k=S?b:L,N=new Ee(I,R,F,k);this.applyGap(p,N),this.squarify(M,N,n),h-=M.value,O+=L}S?(v.y+=b,v.height-=b):(v.x+=b,v.width-=b),c=g,u=0,d=1/0,g--}for(var G=v.width<v.height,$=G?v.x:v.y,g=c;g<f.length;g++){var I=G?$:v.x,R=G?v.y:$,j=f[g].value/h,z=v.width*(G?j:1),W=v.height*(G?1:j),N=new Ee(I,R,z,W);this.applyGap(p,N),this.squarify(f[g],N,n),$+=G?z:W}return n},t.prototype.applyGap=function(e,r){var n=this.nodeGap/2,i=function(u){return{left:u.x,top:u.y,right:u.x+u.width,bottom:u.y+u.height}},a=i(e),s=i(r),l=Object.keys(a);l.forEach(function(u){ih(a[u],s[u])||r.shrink(n,u)})},t.prototype.processData=function(){return Oa(this,void 0,void 0,function(){var e,r,n,i,a,s,l,u,c,d,h,f=this;return Ea(this,function(p){return this.data?(e=this,r=e.data,n=e.sizeKey,i=e.labelKey,a=e.colorKey,s=e.colorDomain,l=e.colorRange,u=e.groupFill,c=this.labels.formatter,d=new ey,d.domain=s,d.range=l,d.update(),h=function(v,g,m){var y,S,C,w;g===void 0&&(g=0);var x;c&&(x=f.ctx.callbackCache.call(c,{datum:v})),x!==void 0||(i?x=(y=v[i])!==null&&y!==void 0?y:"":x="");var b=a&&(S=v[a])!==null&&S!==void 0?S:g;b=Sc(b);var _=!v.children,T=u;typeof b=="string"?T=b:(_||!u)&&(T=d.convert(b));var O={datum:v,depth:g,parent:m,value:0,label:x,fill:T,series:f,isLeaf:_,children:[]};return _?O.value=n&&(C=v[n])!==null&&C!==void 0?C:1:((w=v.children)===null||w===void 0||w.forEach(function(P){var M=h(P,g+1,O),I=M.value;isNaN(I)||!isFinite(I)||I===0||(O.value+=I,O.children.push(M))}),O.children.sort(function(P,M){return M.value-P.value})),O},this.dataRoot=h(r),[2]):[2]})})},t.prototype.createNodeData=function(){return Oa(this,void 0,void 0,function(){return Ea(this,function(e){return[2,[]]})})},t.prototype.update=function(){return Oa(this,void 0,void 0,function(){return Ea(this,function(e){switch(e.label){case 0:return[4,this.updateSelections()];case 1:return e.sent(),[4,this.updateNodes()];case 2:return e.sent(),[2]}})})},t.prototype.updateSelections=function(){return Oa(this,void 0,void 0,function(){var e,r,n,i,a,s,l,u,c,d;return Ea(this,function(h){return this.nodeDataRefresh?(this.nodeDataRefresh=!1,e=this,r=e.chart,n=e.dataRoot,!r||!n?[2]:(i=r.getSeriesRect(),i?(a=[],s=function(f){var p;a.push(f),(p=f.children)===null||p===void 0||p.forEach(s)},s(n),l=this,u=l.groupSelection,c=l.highlightSelection,d=function(f){return f.update(a,function(p){var v=new wr,g=new Me;g.tag=An.Name;var m=new Me;m.tag=An.Value,p.append([v,g,m])})},this.groupSelection=d(u),this.highlightSelection=d(c),[2]):[2])):[2]})})},t.prototype.isDatumHighlighted=function(e){var r,n=(r=this.ctx.highlightManager)===null||r===void 0?void 0:r.getActiveHighlight();return e===n&&(e.isLeaf||this.highlightGroups)},t.prototype.getTileFormat=function(e,r){var n,i=this,a=i.formatter,s=i.ctx.callbackCache;if(!a)return{};var l=this,u=l.gradient,c=l.colorKey,d=l.labelKey,h=l.sizeKey,f=l.tileStroke,p=l.tileStrokeWidth,v=l.groupStroke,g=l.groupStrokeWidth,m=e.isLeaf?f:v,y=e.isLeaf?p:g,S=s.call(a,{seriesId:this.id,datum:e.datum,depth:e.depth,parent:(n=e.parent)===null||n===void 0?void 0:n.datum,colorKey:c,sizeKey:h,labelKey:d,fill:e.fill,stroke:m,strokeWidth:y,gradient:u,highlighted:r});return S??{}},t.prototype.updateNodes=function(){return Oa(this,void 0,void 0,function(){var e,r,n,i,a,s,l,u,c,d,h,f,p,v,g,m,y,S,C,w,x,b,_=this;return Ea(this,function(T){return this.chart?(e=this,r=e.gradient,n=e.highlightStyle,i=n.item,a=i.fill,s=i.fillOpacity,l=i.stroke,u=i.strokeWidth,c=n.text.color,d=e.tileStroke,h=e.tileStrokeWidth,f=e.groupStroke,p=e.groupStrokeWidth,v=e.tileShadow,g=e.labelShadow,m=e.dataRoot,m?(y=this.chart.getSeriesRect(),S=this.squarify(m,new Ee(0,0,y.width,y.height)),C=this.buildLabelMeta(S),w=this.getHighlightedSubtree(m),this.updateNodeMidPoint(S),x=function(O,P,M){var I,R,L,F,k,N,G=S.get(P);if(!G){O.visible=!1;return}var $=M&&a!==void 0?a:P.fill,j=(I=M?s:1)!==null&&I!==void 0?I:1,z=f;M&&l!==void 0?z=l:P.isLeaf&&(z=d);var W=p;M&&u!==void 0?W=u:P.isLeaf&&(W=h);var Y=_.getTileFormat(P,M),H=Sc((R=Y==null?void 0:Y.fill)!==null&&R!==void 0?R:$);if((L=Y==null?void 0:Y.gradient)!==null&&L!==void 0?L:r){var K=rt.tryParseFromString($).brighter().toString(),q=rt.tryParseFromString($).darker().toString();O.fill="linear-gradient(180deg, "+K+", "+q+")"}else O.fill=H;O.fillOpacity=(F=Y==null?void 0:Y.fillOpacity)!==null&&F!==void 0?F:j,O.stroke=Sc((k=Y==null?void 0:Y.stroke)!==null&&k!==void 0?k:z),O.strokeWidth=(N=Y==null?void 0:Y.strokeWidth)!==null&&N!==void 0?N:W,O.fillShadow=v,O.crisp=!0,O.x=G.x,O.y=G.y,O.width=G.width,O.height=G.height,O.visible=!0},this.groupSelection.selectByClass(wr).forEach(function(O){return x(O,O.datum,!1)}),this.highlightSelection.selectByClass(wr).forEach(function(O){var P=_.isDatumHighlighted(O.datum);O.visible=P||w.has(O.datum),O.visible&&x(O,O.datum,P)}),b=function(O,P,M,I){var R=C.get(P),L=R==null?void 0:R[I];if(!L){O.visible=!1;return}O.text=L.text,O.fontFamily=L.style.fontFamily,O.fontSize=L.style.fontSize,O.fontWeight=L.style.fontWeight,O.fill=M?c??L.style.color:L.style.color,O.fillShadow=M?void 0:g,O.textAlign=L.hAlign,O.textBaseline=L.vAlign,O.x=L.x,O.y=L.y,O.visible=!0},this.groupSelection.selectByTag(An.Name).forEach(function(O){return b(O,O.datum,!1,"label")}),this.highlightSelection.selectByTag(An.Name).forEach(function(O){var P=_.isDatumHighlighted(O.datum);O.visible=P||w.has(O.datum),O.visible&&b(O,O.datum,P,"label")}),this.groupSelection.selectByTag(An.Value).forEach(function(O){return b(O,O.datum,!1,"value")}),this.highlightSelection.selectByTag(An.Value).forEach(function(O){var P=_.isDatumHighlighted(O.datum);O.visible=P||w.has(O.datum),O.visible&&b(O,O.datum,P,"value")}),[2]):[2]):[2]})})},t.prototype.updateNodeMidPoint=function(e){e.forEach(function(r,n){n.nodeMidPoint={x:r.x+r.width/2,y:r.y}})},t.prototype.getHighlightedSubtree=function(e){var r=this,n=new Set,i=function(a){var s;(r.isDatumHighlighted(a)||a.parent&&n.has(a.parent))&&n.add(a),(s=a.children)===null||s===void 0||s.forEach(i)};return i(e),n},t.prototype.buildLabelMeta=function(e){var r=this,n=r.labels,i=r.title,a=r.subtitle,s=r.nodePadding,l=r.labelKey,u=r.ctx.callbackCache,c=/-$/m,d=new Map;return e.forEach(function(h,f){var p,v,g;if(!(!l||f.depth===0)){var m=h.width-2*s,y=h.height-2*s,S=function(k){var N=3;return k.fontSize>h.width/N||k.fontSize>h.height/N},C=f.isLeaf?f.label:f.label.toUpperCase(),w="",x=n.value,b=x.style,_=Math.ceil(b.fontSize*2*(Me.defaultLineHeightRatio-1));f.isLeaf&&(x.formatter?w=(p=u.call(x.formatter,{datum:f.datum}))!==null&&p!==void 0?p:"":x.key&&(w=f.datum[x.key]));var T=po(w,b);w&&T.width>m&&(w="");var O,P="";if(f.isLeaf){var M=function(){var k,N,G=y-(w?b.fontSize+_:0),$=[n.large,n.medium,n.small];try{for(var j=XT($),z=j.next();!z.done;z=j.next()){var W=z.value,Y=po(C,W),H=Y.width,K=Y.height;if(!(K>G||S(W))){if(H<=m)return{style:W,wrappedText:void 0};var q=Me.wrap(C,m,G,W,W.wrapping);if(q&&q!=="…"&&(W===n.small||!(c.exec(q)||q.endsWith("…"))))return{style:W,wrappedText:q}}}}catch(se){k={error:se}}finally{try{z&&!z.done&&(N=j.return)&&N.call(j)}finally{if(k)throw k.error}}var Q=po(C,n.small);return Q.height<=G&&!S(n.small)?{style:n.small,wrappedText:void 0}:{style:void 0,wrappedText:void 0}},I=M();!I.style&&w&&(w="",I=M()),O=(v=I.style)!==null&&v!==void 0?v:n.small,P=(g=I.wrappedText)!==null&&g!==void 0?g:""}else f.depth===1?O=i:O=a;var R=po(P||C,O);if(!S(O)){if(R.width>m){var L=Math.floor(C.length*m/R.width)-1;C=C.substring(0,L).trim()+"…"}T=po(w,b);var F=w&&T.width<m&&T.height+R.height+_<y;d.set(f,{label:cd({text:P||C,style:O},f.isLeaf?{hAlign:"center",vAlign:"middle",x:h.x+h.width/2,y:h.y+h.height/2-(F?T.height/2+_/2:0)}:{hAlign:"left",vAlign:"top",x:h.x+s,y:h.y+s}),value:F?{text:w,style:b,hAlign:"center",vAlign:"middle",x:h.x+h.width/2,y:h.y+h.height/2+R.height/2+_/2}:void 0})}}}),d},t.prototype.getDomain=function(e){return[0,1]},t.prototype.getNodeClickEvent=function(e,r){return new qT(this.labelKey,this.sizeKey,this.colorKey,e,r,this)},t.prototype.getNodeDoubleClickEvent=function(e,r){return new ZT(this.labelKey,this.sizeKey,this.colorKey,e,r,this)},t.prototype.getTooltipHtml=function(e){var r,n,i,a;if(!this.highlightGroups&&!e.isLeaf)return"";var s=this,l=s.tooltip,u=s.sizeKey,c=s.labelKey,d=s.colorKey,h=s.rootName,f=s.id,p=s.labels,v=s.ctx.callbackCache,g=e.datum,m=l.renderer,y=e.depth?g[c]:(r=g[c])!==null&&r!==void 0?r:h,S="",C=this.getTileFormat(e,!1),w=(i=(n=C==null?void 0:C.fill)!==null&&n!==void 0?n:e.fill)!==null&&i!==void 0?i:"gray",x=p.value.key,b=p.value.formatter;if(x||b){var _="";if(b)_=v.call(b,{datum:g});else if(x!=null){var T=g[x];typeof T=="number"&&isFinite(T)&&(_=Rg(T))}_&&(p.value.name&&(S+="<b>"+p.value.name+":</b> "),S+=_)}var O={title:y,backgroundColor:w,content:S};return m?Ct(m({datum:e.datum,parent:(a=e.parent)===null||a===void 0?void 0:a.datum,depth:e.depth,sizeKey:u,labelKey:c,colorKey:d,title:y,color:w,seriesId:f}),O):!y&&!S?"":Ct(O)},t.prototype.getLegendData=function(){return[]},t.className="TreemapSeries",t.type="treemap",ke([A(J(0))],t.prototype,"nodePadding",void 0),ke([A(J(0))],t.prototype,"nodeGap",void 0),ke([A(St)],t.prototype,"labelKey",void 0),ke([A(de)],t.prototype,"sizeKey",void 0),ke([A(de)],t.prototype,"colorKey",void 0),ke([A(Qv)],t.prototype,"colorDomain",void 0),ke([A(ls)],t.prototype,"colorRange",void 0),ke([A(de)],t.prototype,"groupFill",void 0),ke([A(Fe)],t.prototype,"groupStroke",void 0),ke([A(Pe(0))],t.prototype,"groupStrokeWidth",void 0),ke([A(Fe)],t.prototype,"tileStroke",void 0),ke([A(Pe(0))],t.prototype,"tileStrokeWidth",void 0),ke([A(Re)],t.prototype,"gradient",void 0),ke([A(Be)],t.prototype,"formatter",void 0),ke([A(St)],t.prototype,"colorName",void 0),ke([A(St)],t.prototype,"rootName",void 0),ke([A(Ur)],t.prototype,"highlightGroups",void 0),t}($T),Eo={area:"cartesian",bar:"cartesian",column:"cartesian",histogram:"cartesian",line:"cartesian",scatter:"cartesian",treemap:"hierarchy",pie:"polar"},dd={},Je={has:function(o){return Object.prototype.hasOwnProperty.call(Eo,o)},isCartesian:function(o){return Eo[o]==="cartesian"},isPolar:function(o){return Eo[o]==="polar"},isHierarchy:function(o){return Eo[o]==="hierarchy"},get seriesTypes(){return Object.keys(Eo)},get cartesianTypes(){var o=this;return this.seriesTypes.filter(function(t){return o.isCartesian(t)})},get polarTypes(){var o=this;return this.seriesTypes.filter(function(t){return o.isPolar(t)})},get hierarchyTypes(){var o=this;return this.seriesTypes.filter(function(t){return o.isHierarchy(t)})}};function rP(o,t){Eo[o]=t}function nP(o,t){var e;dd[o]=Ye([(e=dd[o])!==null&&e!==void 0?e:{},t])}function sp(o){var t;return(t=dd[o])!==null&&t!==void 0?t:{}}var iP={area:mT,bar:Qg,column:MT,histogram:kT,line:VT,pie:Ng,scatter:UT,treemap:tP},ny={},iy={},oy={},ay={};function oP(o,t,e,r,n,i){ny[o]=e,iy[o]=r,oy[o]=n,i&&Kn(o,i),rP(o,t)}function aP(o,t){var e,r=(e=ny[o])!==null&&e!==void 0?e:iP[o];if(r)return new r(t);throw new Error("AG Charts - unknown series type: "+o)}function lp(o){return iy[o]}function sy(o){return oy[o]}function Kn(o,t){ay[o]=t}function sP(o){return ay[o]}var lP={axes:[{type:ql.type,position:"left"},{type:Zo.type,position:"bottom"}]},uP={axes:[{type:"number",position:"bottom"},{type:"category",position:"left"}]},cP={axes:[{type:"number",position:"bottom"},{type:"number",position:"left"}]};function kr(o,t){if(up(o)&&up(t)){var e={};return Object.keys(o).forEach(function(r){r in t?e[r]=kr(o[r],t[r]):e[r]=o[r]}),Object.keys(t).forEach(function(r){r in o||(e[r]=t[r])}),e}return Array.isArray(o)&&!Array.isArray(t)||hd(o)&&!hd(t)?o:t}function hd(o){return o&&typeof o=="object"}function up(o){return hd(o)&&o.constructor===Object}var ce=function(){return ce=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},ce.apply(this,arguments)},cp=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},dP=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},hP={fills:["#f3622d","#fba71b","#57b757","#41a9c9","#4258c9","#9a42c8","#c84164","#888888"],strokes:["#aa4520","#b07513","#3d803d","#2d768d","#2e3e8d","#6c2e8c","#8c2d46","#5f5f5f"]},fP=Symbol("extends-axes-defaults"),pP=Symbol("extends-axes-label-defaults"),vP=Symbol("extends-axes-line-defaults"),gP=Symbol("extends-series-defaults"),ly=Symbol("override-series-label-defaults"),yP=Symbol("default-font"),dp="bold",mP="inside",SP="bottom",Li=function(){function o(t){t=kr({},t??{});var e=t.overrides,r=e===void 0?null:e,n=t.palette,i=n===void 0?null:n,a=this.createChartConfigPerChartType(this.getDefaults());if(r){var s=r.common,l=r.cartesian,u=r.polar,c=r.hierarchy,d=function(h,f,p){p&&(a[h]=kr(a[h],p),f.forEach(function(v){var g=v;a[g]=kr(a[g],p)}))};d("common",Object.keys(a),s),d("cartesian",Je.cartesianTypes,l),d("polar",Je.polarTypes,u),d("hierarchy",Je.hierarchyTypes,c),Je.seriesTypes.forEach(function(h){var f,p=h,v=r[p];v&&(v.series&&(v.series=(f={},f[p]=v.series,f)),a[p]=kr(a[p],v))})}this.palette=i??this.getPalette(),this.config=Object.freeze(a)}return o.prototype.getPalette=function(){return hP},o.getAxisDefaults=function(){return{top:{},right:{},bottom:{},left:{},title:{enabled:!1,text:"Axis Title",fontStyle:void 0,fontWeight:dp,fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)"},label:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,rotation:void 0,color:"rgb(87, 87, 87)",formatter:void 0,autoRotate:!1,avoidCollisions:!0},line:{width:1,color:"rgb(195, 195, 195)"},tick:{width:1,size:6,color:"rgb(195, 195, 195)"},gridStyle:[{stroke:"rgb(219, 219, 219)",lineDash:[4,2]}],crossLines:{enabled:!1,fill:"rgb(187,221,232)",stroke:"rgb(70,162,192)",strokeWidth:1,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,color:"rgb(87, 87, 87)",rotation:void 0}}}},o.getSeriesDefaults=function(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"yellow",fillOpacity:1},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}},o.getBarSeriesDefaults=function(){return ce(ce({},this.getSeriesDefaults()),{fillOpacity:1,strokeOpacity:1,normalizedTo:void 0,strokeWidth:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0,placement:mP},shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5}})},o.getLineSeriesDefaults=function(){var t=this.getSeriesDefaults();return ce(ce({},t),{tooltip:ce(ce({},t.tooltip),{format:void 0,position:{type:"node"}})})},o.getAreaSeriesDefaults=function(){var t=this.getSeriesDefaults();return ce(ce({},t),{nodeClickRange:"nearest",tooltip:ce(ce({},t.tooltip),{position:{type:"node"}})})},o.getScatterSeriesDefaults=function(){var t=this.getSeriesDefaults();return ce(ce({},t),{tooltip:ce(ce({},t.tooltip),{position:{type:"node"}})})},o.getCartesianSeriesMarkerDefaults=function(){return{enabled:!0,shape:"circle",size:6,maxSize:30,strokeWidth:1,formatter:void 0}},o.getCaptionWrappingDefaults=function(){return"hyphenate"},o.getChartDefaults=function(){return{background:{visible:!0,fill:"white"},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontStyle:void 0,fontWeight:dp,fontSize:16,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",wrapping:o.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",wrapping:o.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",spacing:30,wrapping:o.getCaptionWrappingDefaults()},legend:{position:SP,spacing:20,listeners:{},item:{paddingX:16,paddingY:8,marker:{shape:void 0,size:15,strokeWidth:1,padding:8},label:{color:"black",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,formatter:void 0}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:"rgb(70, 70, 70)"},inactiveStyle:{fill:"rgb(219, 219, 219)"},highlightStyle:{fill:"rgb(70, 70, 70)"},label:{color:"rgb(70, 70, 70)"}}},tooltip:{enabled:!0,range:"nearest",delay:0},listeners:{}}},o.prototype.createChartConfigPerChartType=function(t){var e=this,r={cartesian:Je.cartesianTypes,polar:Je.polarTypes,hierarchy:Je.hierarchyTypes,groupedCategory:[]};return Object.entries(r).forEach(function(n){var i=cp(n,2),a=i[0],s=i[1],l=a,u=e.templateTheme(sp(l));s.forEach(function(c){var d=c;t[d]||(t[d]=kr({},t[l]),kr(t[d],u))})}),t},o.prototype.getDefaults=function(){var t=this,e=kr({},o.defaults),r=function(i,a){var s=t.templateTheme(sp(i));return s.series=a.reduce(function(l,u){var c=sy(u);return c&&(l[u]=t.templateTheme(c)),l},{}),(i==="cartesian"||i==="polar")&&(s.axes=oh.axesTypes.reduce(function(l,u){var c=oT(u);return c&&(l[u]=t.templateTheme(c)),l},{})),s},n={cartesian:r("cartesian",Je.cartesianTypes),groupedCategory:r("cartesian",Je.cartesianTypes),polar:r("polar",Je.polarTypes),hierarchy:r("hierarchy",Je.hierarchyTypes)};return kr(e,n)},o.prototype.templateTheme=function(t){var e=Ye([t]),r=this.getTemplateParameters(),n=r.extensions,i=r.properties;return Xo(e,function(a,s){var l,u;if(s.__extends__){var c=s.__extends__,d=n.get(c);if(d==null)throw new Error("AG Charts - no template variable provided for: "+c);Object.keys(d).forEach(function(y){y in s||(s[y]=d[y])}),delete s.__extends__}if(s.__overrides__){var c=s.__overrides__,h=n.get(c);if(h==null)throw new Error("AG Charts - no template variable provided for: "+c);Object.assign(s,h),delete s.__overrides__}try{for(var f=dP(Object.entries(s)),p=f.next();!p.done;p=f.next()){var v=cp(p.value,2),g=v[0],m=v[1];i.has(m)&&(s[g]=i.get(m))}}catch(y){l={error:y}}finally{try{p&&!p.done&&(u=f.return)&&u.call(f)}finally{if(l)throw l.error}}},{}),e},o.prototype.getTemplateParameters=function(){var t=new Map;t.set(fP,o.getAxisDefaults()),t.set(pP,o.getAxisDefaults().label),t.set(vP,o.getAxisDefaults().line),t.set(gP,o.getSeriesDefaults()),t.set(ly,{});var e=new Map;return e.set(yP,o.fontFamily),{extensions:t,properties:e}},o.prototype.mergeWithParentDefaults=function(t,e){return kr(t,e)},o.fontFamily="Verdana, sans-serif",o.cartesianDefaults=ce(ce({},o.getChartDefaults()),{axes:{number:ce({},o.getAxisDefaults()),log:ce(ce({},o.getAxisDefaults()),{base:10}),category:ce(ce({},o.getAxisDefaults()),{groupPaddingInner:.1,label:ce(ce({},o.getAxisDefaults().label),{autoRotate:!0})}),groupedCategory:ce({},o.getAxisDefaults()),time:ce({},o.getAxisDefaults())},series:{column:ce({},o.getBarSeriesDefaults()),bar:ce({},o.getBarSeriesDefaults()),line:ce(ce({},o.getLineSeriesDefaults()),{title:void 0,strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:ce(ce({},o.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),scatter:ce(ce({},o.getScatterSeriesDefaults()),{sizeName:"Size",labelName:"Label",marker:ce({},o.getCartesianSeriesMarkerDefaults()),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)"}}),area:ce(ce({},o.getAreaSeriesDefaults()),{normalizedTo:void 0,fillOpacity:.8,strokeOpacity:1,strokeWidth:2,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},marker:ce(ce({},o.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1,enabled:!1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),histogram:ce(ce({},o.getSeriesDefaults()),{strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,areaPlot:!1,bins:void 0,aggregation:"sum",label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0},shadow:{enabled:!0,color:"rgba(0, 0, 0, 0.5)",xOffset:0,yOffset:0,blur:5}})}}),o.polarDefaults=ce(ce({},o.getChartDefaults()),{series:{pie:ce(ce({},o.getSeriesDefaults()),{title:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)",spacing:0},radiusKey:void 0,radiusName:void 0,calloutLabelKey:void 0,calloutLabelName:void 0,sectorLabelKey:void 0,sectorLabelName:void 0,calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)",offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)",positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)",margin:2}})}}),o.hierarchyDefaults=ce(ce({},o.getChartDefaults()),{series:{treemap:ce(ce({},o.getSeriesDefaults()),{showInLegend:!1,labelKey:"label",sizeKey:"size",colorKey:"color",colorDomain:[-5,5],colorRange:["#cb4b3f","#6acb64"],groupFill:"#272931",groupStroke:"black",groupStrokeWidth:1,tileStroke:"black",tileStrokeWidth:1,gradient:!0,tileShadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},labelShadow:{enabled:!0,color:"rgba(0, 0, 0, 0.4)",xOffset:1.5,yOffset:1.5,blur:5},highlightGroups:!0,nodePadding:2,nodeGap:0,title:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:"Verdana, sans-serif",padding:2},subtitle:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:void 0,fontSize:9,fontFamily:"Verdana, sans-serif",padding:2},labels:{large:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:18,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},medium:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},small:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:10,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},value:{style:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:"Verdana, sans-serif",color:"white"}}}})}}),o.defaults={cartesian:o.cartesianDefaults,groupedCategory:o.cartesianDefaults,polar:o.polarDefaults,hierarchy:o.hierarchyDefaults},o}(),CP=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ie=function(){return Ie=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Ie.apply(this,arguments)},xs=function(o){CP(t,o);function t(e){return o.call(this,e)||this}return t.prototype.getDefaults=function(){var e=this,r=t.fontColor,n=t.mutedFontColor,i={title:{color:r},label:{color:r},gridStyle:[{stroke:"rgb(88, 88, 88)",lineDash:[4,2]}]},a={label:{color:r}},s={axes:{number:Ie({},i),category:Ie({},i),time:Ie({},i)}},l={background:{fill:"rgb(34, 38, 41)"},title:{color:r},subtitle:{color:n},legend:{item:{label:{color:r}},pagination:{activeStyle:{fill:r},inactiveStyle:{fill:n},highlightStyle:{fill:r},label:{color:r}}}},u=function(c){return c.reduce(function(d,h){var f=sy(h);return f&&(d[h]=e.templateTheme(f)),d},{})};return this.mergeWithParentDefaults(o.prototype.getDefaults.call(this),{cartesian:Ie(Ie(Ie({},l),s),{series:Ie({line:Ie({},a),bar:Ie({},a),column:Ie({},a),histogram:Ie({},a)},u(Je.cartesianTypes))}),groupedCategory:Ie(Ie(Ie({},l),s),{series:Ie({bar:Ie({},a),column:Ie({},a),histogram:Ie({},a)},u(Je.cartesianTypes))}),polar:Ie(Ie({},l),{series:Ie({pie:{calloutLabel:{color:r},sectorLabel:{color:r},title:{color:r},innerLabels:{color:r}}},u(Je.polarTypes))}),hierarchy:Ie(Ie({},l),{series:Ie({treemap:{tileStroke:"white",groupStroke:"white",title:{color:r},subtitle:{color:n},labels:{large:{color:r},medium:{color:r},small:{color:r},value:{style:{color:r}}}}},u(Je.hierarchyTypes))})})},t.prototype.getTemplateParameters=function(){var e=o.prototype.getTemplateParameters.call(this);return e.extensions.set(ly,t.seriesLabelDefaults.label),e},t.fontColor="rgb(200, 200, 200)",t.mutedFontColor="rgb(150, 150, 150)",t.seriesLabelDefaults={label:{color:t.fontColor}},t}(Li),xP=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),wP={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]},bP=function(o){xP(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.getPalette=function(){return wP},t}(Li),_P=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),OP={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]},EP=function(o){_P(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.getPalette=function(){return OP},t}(xs),TP=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),PP={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]},AP=function(o){TP(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.getPalette=function(){return PP},t}(Li),DP=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MP={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]},RP=function(o){DP(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.getPalette=function(){return MP},t}(xs),IP=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),LP={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]},FP=function(o){IP(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.getPalette=function(){return LP},t}(Li),kP=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),NP={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]},GP=function(o){kP(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.getPalette=function(){return NP},t}(xs),VP=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),jP={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]},BP=function(o){VP(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.getPalette=function(){return jP},t}(Li),HP=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zP={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]},WP=function(o){HP(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.getPalette=function(){return zP},t}(xs),hs=function(){return hs=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},hs.apply(this,arguments)},wl=function(){return new Li},Cc=function(){return new xs},UP={undefined:wl,null:wl,"ag-default":wl,"ag-material":function(){return new bP},"ag-pastel":function(){return new AP},"ag-solar":function(){return new FP},"ag-vivid":function(){return new BP}},KP={undefined:Cc,null:Cc,"ag-default-dark":Cc,"ag-material-dark":function(){return new EP},"ag-pastel-dark":function(){return new RP},"ag-solar-dark":function(){return new GP},"ag-vivid-dark":function(){return new WP}},uy=hs(hs({},KP),UP);function ws(o){var t;if(o instanceof Li)return o;var e=uy[o];if(e)return e();o=o;for(var r=[],n;typeof o=="object";)r.push((t=o.overrides)!==null&&t!==void 0?t:{}),o.palette&&n==null&&(n=o.palette),o=o.baseTheme;r.reverse();var i=hs({baseTheme:o,overrides:Ye(r)},n?{palette:n}:{});if(i.baseTheme||i.overrides){var a=ws(i.baseTheme);return new a.constructor(i)}return wl()}var ru=function(){return ru=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},ru.apply(this,arguments)},ko=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},fd=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},hp=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},$P=["bar","column","area"],XP=["bar","column"];function YP(o){var t,e,r,n,i,a,s,l,u,c,d={},h={},f={},p="default-ag-charts-group",v=[];try{for(var g=ko(o),m=g.next();!m.done;m=g.next()){var y=m.value,S=(i=y.type)!==null&&i!==void 0?i:"line",C=$P.includes(S),w=XP.includes(S);if(!C&&!w){v.push({type:"ungrouped",opts:[y]});continue}var x=y,b=x.stacked,_=x.stackGroup,T=x.grouped,O=T===void 0?void 0:T,P=x.xKey,M=_!=null||b===!0;(a=f[S])!==null&&a!==void 0||(f[S]=!1),f[S]||(f[S]=M);var I=O===!0,R=[_??(b===!0?"stacked":void 0),I?"grouped":void 0].filter(function(j){return j!=null}).join("-");R||(R=p);var L=S+"-"+P+"-"+R;if(M&&C){var F=(s=h[L])!==null&&s!==void 0?s:h[L]={type:"stack",opts:[]};F.opts.length===0&&v.push(F),F.opts.push(y)}else if(I&&w){var F=(l=d[L])!==null&&l!==void 0?l:d[L]={type:"group",opts:[]};F.opts.length===0&&v.push(F),F.opts.push(y)}else v.push({type:"ungrouped",opts:[y]})}}catch(j){t={error:j}}finally{try{m&&!m.done&&(e=g.return)&&e.call(g)}finally{if(t)throw t.error}}if(!Object.values(f).some(function(j){return j}))return v;try{for(var k=ko(Object.entries(d)),N=k.next();!N.done;N=k.next()){var G=fd(N.value,2),$=G[1],S=(c=(u=$.opts[0])===null||u===void 0?void 0:u.type)!==null&&c!==void 0?c:"line";f[S]===!0&&($.type="stack")}}catch(j){r={error:j}}finally{try{N&&!N.done&&(n=k.return)&&n.call(k)}finally{if(r)throw r.error}}return v}var qP=function(){return[!0,"opts"].includes(mr("agChartsDebug"))};function ZP(o,t){var e,r,n=[],i=t.map(function(f){var p;return(f.type==="bar"||f.type==="column")&&f.yKey!=null&&!f.stacked?ru(ru({},f),{grouped:(p=f.grouped)!==null&&p!==void 0?p:!0}):f}),a=YP(i),s=a.reduce(function(f,p){var v,g;if(p.type==="ungrouped")return f;var m=(v=p.opts[0].type)!==null&&v!==void 0?v:"line";return(g=f[m])!==null&&g!==void 0||(f[m]=0),f[m]+=p.type==="stack"?1:p.opts.length,f},{}),l={},u=function(f){var p,v,g,m,y,S,C,w,x=0,b=(C=f.opts[0].type)!==null&&C!==void 0?C:"line";if((w=l[b])!==null&&w!==void 0||(l[b]=0),f.type==="stack"){try{for(var _=ko(f.opts),T=_.next();!T.done;T=_.next()){var O=T.value;O.seriesGrouping={groupIndex:l[b],groupCount:s[b],stackIndex:x++,stackCount:f.opts.length}}}catch(L){p={error:L}}finally{try{T&&!T.done&&(v=_.return)&&v.call(_)}finally{if(p)throw p.error}}l[b]++}else if(f.type==="group")try{for(var P=ko(f.opts),M=P.next();!M.done;M=P.next()){var O=M.value;O.seriesGrouping={groupIndex:l[b],groupCount:s[b],stackIndex:0,stackCount:0},l[b]++}}catch(L){g={error:L}}finally{try{M&&!M.done&&(m=P.return)&&m.call(P)}finally{if(g)throw g.error}}else try{for(var I=ko(f.opts),R=I.next();!R.done;R=I.next()){var O=R.value;O.seriesGrouping=void 0}}catch(L){y={error:L}}finally{try{R&&!R.done&&(S=I.return)&&S.call(I)}finally{if(y)throw y.error}}return f.opts};qP()&&re.debug("processSeriesOptions() - series grouping: ",a);try{for(var c=ko(a),d=c.next();!d.done;d=c.next()){var h=d.value;switch(h.opts[0].type){case"column":case"bar":case"area":n.push.apply(n,hp([],fd(u(h))));break;case"line":default:h.opts.length>1&&re.warn("unexpected grouping of series type: "+h.opts[0].type),n.push.apply(n,hp([],fd(h.opts)));break}}}catch(f){e={error:f}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}return n}var cn=function(){return cn=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},cn.apply(this,arguments)},pd=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Jo=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},fp=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o};function aa(o){var t,e,r,n;return(n=(t=o.type)!==null&&t!==void 0?t:(r=(e=o.series)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.type)!==null&&n!==void 0?n:"line"}function Qo(o){var t=aa(o);return t==null?!0:t==="cartesian"?(re.warnOnce("type '"+t+"' is deprecated, use a series type instead"),!0):Je.isCartesian(t)}function Ou(o){var t=aa(o);return t==null?!1:t==="hierarchy"?(re.warnOnce("type '"+t+"' is deprecated, use a series type instead"),!0):Je.isHierarchy(t)}function Eu(o){var t=aa(o);return t==null?!1:t==="polar"?(re.warnOnce("type '"+t+"' is deprecated, use a series type instead"),!0):Je.isPolar(t)}function pp(o){return o==null?!1:Je.has(o)}function JP(o){return o==null?!1:oh.has(o)}function cy(o){var t,e,r=0;try{for(var n=pd(o),i=n.next();!i.done;i=n.next()){var a=i.value;a instanceof Array&&(r+=cy(a)),a!=null&&r++}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r}function vp(o,t,e){for(var r=[],n=0;n<e;n++)r.push(t[(n+o.colourIndex)%t.length]);return r}var Bn={avoidDeepClone:["data"]};function QP(o,t){var e,r,n,i,a,s,l,u,c,d,h=Ye([t,o],Bn);eA(h);var f=h.type,p=aa(h),v=(s=(a=h.tooltip)===null||a===void 0?void 0:a.position)!==null&&s!==void 0?s:{},g=function(k){if(k!=null&&!(pp(k)||lp(k)))throw new Error("AG Charts - unknown series type: "+k+"; expected one of: "+Je.seriesTypes)};g(p);try{for(var m=pd((l=h.series)!==null&&l!==void 0?l:[]),y=m.next();!y.done;y=m.next()){var S=y.value.type;S!=null&&g(S)}}catch(k){e={error:k}}finally{try{y&&!y.done&&(r=m.return)&&r.call(m)}finally{if(e)throw e.error}}h=cn(cn({},h),{type:p});var C="line";Qo(h)?C="line":Ou(h)?C="treemap":Eu(h)&&(C="pie");var w={},x=lp(p);x?w=x:p==="bar"?w=uP:p==="scatter"||p==="histogram"?w=cP:Qo(h)&&(w=lP),sA(h);var b=rA(w,h),_=b.context,T=b.mergedOptions,O=b.axesThemes,P=b.seriesThemes;T.series=ZP(T,((u=T.series)!==null&&u!==void 0?u:[]).map(function(k){var N=C;k.type?N=k.type:pp(f)&&(N=f);var G=tA(k,N,P,v);return N==="pie"&&cA(P.pie,k,G),G})).map(function(k){return iA(_,k)});var M=function(k){var N=JP(k);return N||re.warnOnce("AG Charts - unknown axis type: "+k+"; expected one of: "+oh.axesTypes+", ignoring."),N};if("axes"in T){var I=!0;try{for(var R=pd((c=T.axes)!==null&&c!==void 0?c:[]),L=R.next();!L.done;L=R.next()){var F=L.value.type;M(F)||(I=!1)}}catch(k){n={error:k}}finally{try{L&&!L.done&&(i=R.return)&&i.call(R)}finally{if(n)throw n.error}}I?T.axes=(d=T.axes)===null||d===void 0?void 0:d.map(function(k){var N,G,$=k.type,j=Ye([O[$],(G=O[$][(N=k.position)!==null&&N!==void 0?N:"unknown"])!==null&&G!==void 0?G:{}]);return aA(k,j)}):T.axes=w.axes,lA(h,T)}return uA(h,T),T}function eA(o){var t={yKeys:"yKey",yNames:"yName"};Object.entries(t).forEach(function(e){var r,n=Jo(e,2),i=n[0],a=n[1];!((r=o.series)===null||r===void 0)&&r.some(function(s){return s[i]!=null})&&re.warnOnce("property [series."+i+"] is deprecated, please use [series."+a+"] and multiple series instead.")})}function tA(o,t,e,r){var n,i,a=Ye([cn({},r),(n=o.tooltip)===null||n===void 0?void 0:n.position],Bn),s=Ye([(i=e[t])!==null&&i!==void 0?i:{},cn(cn({},o),{type:t,tooltip:cn(cn({},o.tooltip),{position:a})})],Bn);return s}function rA(o,t){var e=nA(t),r=e.theme,n=e.cleanedTheme,i=e.axesThemes,a=e.seriesThemes,s={colourIndex:0,palette:r.palette},l=Ye([o,n,t],Bn);return{context:s,mergedOptions:l,axesThemes:i,seriesThemes:a}}function nA(o){var t,e,r=ws(o.theme),n=r.config[(t=aa(o))!==null&&t!==void 0?t:"cartesian"],i=Object.entries(r.config).reduce(function(a,s){var l=Jo(s,2),u=l[0],c=l[1].series;return a[u]=c==null?void 0:c[u],a},{});return{theme:r,axesThemes:(e=n.axes)!==null&&e!==void 0?e:{},seriesThemes:i,cleanedTheme:Ye([n,{axes:Sr,series:Sr}])}}function iA(o,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var n=oA(o,t),i={stacked:Sr,grouped:Sr};return Ye(fp(fp([],Jo(e)),[n,t,i]),Bn)}Kn("pie",function(o){var t=o.takeColors,e=o.colorsCount;return t(e)});var sa=function(o){var t=o.takeColors,e=t(1),r=Jo(e.fills,1),n=r[0],i=Jo(e.strokes,1),a=i[0];return{fill:n,stroke:a}};Kn("area",sa);Kn("bar",sa);Kn("column",sa);Kn("histogram",sa);Kn("scatter",function(o){var t=sa(o),e=t.fill,r=t.stroke;return{marker:{fill:e,stroke:r}}});Kn("line",function(o){var t=sa(o),e=t.fill,r=t.stroke;return{stroke:e,marker:{fill:e,stroke:r}}});function oA(o,t){var e,r=sP(t.type);if(!r)return{};var n=o.palette,i=n.fills,a=n.strokes,s=t,l=cy((e=s.yKeys)!==null&&e!==void 0?e:[])||1,u=Math.max(i.length,a.length);return r({seriesCount:l,colorsCount:u,takeColors:function(c){var d={fills:vp(o,i,c),strokes:vp(o,a,c)};return o.colourIndex+=c,d}})}function aA(o,t){var e={top:Sr,bottom:Sr,left:Sr,right:Sr};if(o.crossLines){Array.isArray(o.crossLines)||(re.warn("axis[].crossLines should be an array."),o.crossLines=[]);var r=t.crossLines;o.crossLines=o.crossLines.map(function(i){return Ye([r,i])})}var n={crossLines:Sr};return Ye([t,n,o,e],Bn)}function sA(o){Xo(o,function(t,e){"enabled"in e&&e.enabled===!1&&Object.entries(e).forEach(function(r){var n=Jo(r,1),i=n[0];i!=="enabled"&&delete e[i]})},{skip:["data","theme"]})}function lA(o,t){var e,r,n,i;if(!(((e=o.legend)===null||e===void 0?void 0:e.enabled)!==void 0||((r=t.legend)===null||r===void 0?void 0:r.enabled)!==void 0)){if((n=t.legend)!==null&&n!==void 0||(t.legend={}),((i=o.series)!==null&&i!==void 0?i:[]).length>1){t.legend.enabled=!0;return}t.legend.enabled=!1}}function uA(o,t){Xo(o,function(e,r,n){if(n){var i=n._enabledFromTheme;i!=null&&delete n._enabledFromTheme,"enabled"in n&&(i||r.enabled==null&&(n.enabled=!0))}},{skip:["data","theme"]},t),Xo(t,function(e,r){r._enabledFromTheme!=null&&delete r._enabledFromTheme},{skip:["data","theme"]})}function cA(o,t,e){Array.isArray(t.innerLabels)?e.innerLabels=t.innerLabels.map(function(r){return Ye([o.innerLabels,r])}):e.innerLabels=Sr}var dA=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},dy=function(){function o(){this.destroyFns=[]}return o.prototype.destroy=function(){var t,e;try{for(var r=dA(this.destroyFns),n=r.next();!n.done;n=r.next()){var i=n.value;i()}}catch(a){t={error:a}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},o}(),bi=[];function hy(o){var t=bi.find(function(r){return o.type===r.type&&o.optionsKey===r.optionsKey&&o.identifier===r.identifier});if(t){if(o.packageType==="enterprise"&&t.packageType==="community"){var e=bi.indexOf(t);bi.splice(e,1,o)}}else bi.push(o)}var hA=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),On=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},gp=function(o){hA(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e._fill="#f2f2f2",e._stroke="#999999",e._strokeWidth=1,e._lineCap="square",e._centerX=0,e._centerY=0,e._width=8,e._gripLineGap=2,e._gripLineLength=8,e._height=16,e}return Object.defineProperty(t.prototype,"centerX",{get:function(){return this._centerX},set:function(e){this._centerX!==e&&(this._centerX=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"centerY",{get:function(){return this._centerY},set:function(e){this._centerY!==e&&(this._centerY=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gripLineGap",{get:function(){return this._gripLineGap},set:function(e){this._gripLineGap!==e&&(this._gripLineGap=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gripLineLength",{get:function(){return this._gripLineLength},set:function(e){this._gripLineLength!==e&&(this._gripLineLength=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),t.prototype.computeBBox=function(){var e=this,r=e.centerX,n=e.centerY,i=e.width,a=e.height,s=r-i/2,l=n-a/2;return new Ee(s,l,i,a)},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r),i=this.computeBBox();return i.containsPoint(n.x,n.y)},t.prototype.updatePath=function(){var e=this,r=e.path,n=e.centerX,i=e.centerY,a=e.width,s=e.height;r.clear();var l=n-a/2,u=i-s/2,c=this.align(l),d=this.align(u),h=c+this.align(l,a),f=d+this.align(u,s);r.moveTo(c,d),r.lineTo(h,d),r.lineTo(h,f),r.lineTo(c,f),r.lineTo(c,d);var p=this.gripLineGap/2,v=this.gripLineLength/2;r.moveTo(this.align(n-p),this.align(i-v)),r.lineTo(this.align(n-p),this.align(i+v)),r.moveTo(this.align(n+p),this.align(i-v)),r.lineTo(this.align(n+p),this.align(i+v))},t.className="RangeHandle",On([A(Kt)],t.prototype,"_fill",void 0),On([A(Kt)],t.prototype,"_stroke",void 0),On([A(J(0))],t.prototype,"_strokeWidth",void 0),On([A(Wd)],t.prototype,"_lineCap",void 0),On([A(J(0))],t.prototype,"_width",void 0),On([A(J(0))],t.prototype,"_gripLineGap",void 0),On([A(J(0))],t.prototype,"_gripLineLength",void 0),On([A(J(0))],t.prototype,"_height",void 0),t}(It),fA=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),rn=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},pA=function(o){fA(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e._stroke="#999999",e._strokeWidth=1,e._fill="#999999",e._fillOpacity=.2,e._lineCap="square",e._x=0,e._y=0,e._width=200,e._height=30,e.minRange=.05,e._min=0,e._max=1,e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(e){var r;e=Math.min(Math.max(e,0),this.max-this.minRange),!isNaN(e)&&this._min!==e&&(this._min=e,this.dirtyPath=!0,(r=this.onRangeChange)===null||r===void 0||r.call(this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(e){var r;e=Math.max(Math.min(e,1),this.min+this.minRange),!isNaN(e)&&this._max!==e&&(this._max=e,this.dirtyPath=!0,(r=this.onRangeChange)===null||r===void 0||r.call(this))},enumerable:!1,configurable:!0}),t.prototype.computeBBox=function(){var e=this,r=e.x,n=e.y,i=e.width,a=e.height;return new Ee(r,n,i,a)},t.prototype.computeVisibleRangeBBox=function(){var e=this,r=e.x,n=e.y,i=e.width,a=e.height,s=e.min,l=e.max,u=r+i*s,c=r+i*l;return new Ee(u,n,c-u,a)},t.prototype.updatePath=function(){var e=this,r=e.path,n=e.x,i=e.y,a=e.width,s=e.height,l=e.min,u=e.max;r.clear();var c=this.align(n),d=this.align(i),h=c+this.align(n,a),f=d+this.align(i,s);r.moveTo(c,d),r.lineTo(h,d),r.lineTo(h,f),r.lineTo(c,f),r.lineTo(c,d);var p=this.align(n+a*l),v=this.align(n+a*u);r.moveTo(p,d),r.lineTo(p,f),r.lineTo(v,f),r.lineTo(v,d),r.lineTo(p,d)},t.className="RangeMask",rn([A(Kt)],t.prototype,"_stroke",void 0),rn([A(J(0))],t.prototype,"_strokeWidth",void 0),rn([A(Kt)],t.prototype,"_fill",void 0),rn([A(J(0,1))],t.prototype,"_fillOpacity",void 0),rn([A(Wd)],t.prototype,"_lineCap",void 0),rn([A(J(0))],t.prototype,"_width",void 0),rn([A(J(0))],t.prototype,"_height",void 0),rn([A(J())],t.prototype,"_min",void 0),rn([A(J())],t.prototype,"_max",void 0),t}(It),vA=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),nu=function(){return nu=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},nu.apply(this,arguments)},gA=function(o){vA(t,o);function t(){var e=o.call(this,{name:"rangeSelectorGroup"})||this;return e.minHandle=new gp,e.maxHandle=new gp,e.mask=function(){var r=t.defaults,n=r.x,i=r.y,a=r.width,s=r.height,l=r.min,u=r.max,c=new pA;c.x=n,c.y=i,c.width=a,c.height=s,c.min=l,c.max=u;var d=e,h=d.minHandle,f=d.maxHandle;return h.centerX=n,f.centerX=n+a,h.centerY=f.centerY=i+s/2,e.append([c,h,f]),c.onRangeChange=function(){var p;e.updateHandles(),(p=e.onRangeChange)===null||p===void 0||p.call(e)},c}(),e._x=t.defaults.x,e._y=t.defaults.y,e._width=t.defaults.width,e._height=t.defaults.height,e._min=t.defaults.min,e._max=t.defaults.max,e.isContainerNode=!0,e}return Object.defineProperty(t.prototype,"x",{get:function(){return this.mask.x},set:function(e){this.mask.x=e,this.updateHandles()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.mask.y},set:function(e){this.mask.y=e,this.updateHandles()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.mask.width},set:function(e){this.mask.width=e,this.updateHandles()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.mask.height},set:function(e){this.mask.height=e,this.updateHandles()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this.mask.min},set:function(e){this.mask.min=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this.mask.max},set:function(e){this.mask.max=e},enumerable:!1,configurable:!0}),t.prototype.updateHandles=function(){var e=this,r=e.minHandle,n=e.maxHandle,i=e.x,a=e.y,s=e.width,l=e.height,u=e.mask;r.centerX=i+s*u.min,n.centerX=i+s*u.max,r.centerY=n.centerY=a+l/2},t.prototype.computeBBox=function(){return this.mask.computeBBox()},t.prototype.computeVisibleRangeBBox=function(){return this.mask.computeVisibleRangeBBox()},t.prototype.render=function(e){var r=e.ctx,n=e.forceRender,i=e.stats;if(this.dirty===Z.NONE&&!n){i&&i.nodesSkipped++;return}this.computeTransformMatrix(),this.matrix.toContext(r);var a=this,s=a.mask,l=a.minHandle,u=a.maxHandle;[s,l,u].forEach(function(c){c.visible&&(n||c.dirty>Z.NONE)&&(r.save(),c.render(nu(nu({},e),{ctx:r,forceRender:n})),r.restore())}),this.markClean({force:!0}),i&&i.nodesRendered++},t.className="Range",t.defaults={x:0,y:0,width:200,height:30,min:0,max:1},t}(le),yA=function(){function o(t){this.rm=t}return Object.defineProperty(o.prototype,"fill",{get:function(){return this.rm.fill},set:function(t){this.rm.fill=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"stroke",{get:function(){return this.rm.stroke},set:function(t){this.rm.stroke=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"strokeWidth",{get:function(){return this.rm.strokeWidth},set:function(t){this.rm.strokeWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"fillOpacity",{get:function(){return this.rm.fillOpacity},set:function(t){this.rm.fillOpacity=t},enumerable:!1,configurable:!0}),o}(),yp=function(){function o(t){this.rh=t}return Object.defineProperty(o.prototype,"fill",{get:function(){return this.rh.fill},set:function(t){this.rh.fill=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"stroke",{get:function(){return this.rh.stroke},set:function(t){this.rh.stroke=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"strokeWidth",{get:function(){return this.rh.strokeWidth},set:function(t){this.rh.strokeWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"width",{get:function(){return this.rh.width},set:function(t){this.rh.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this.rh.height},set:function(t){this.rh.height=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"gripLineGap",{get:function(){return this.rh.gripLineGap},set:function(t){this.rh.gripLineGap=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"gripLineLength",{get:function(){return this.rh.gripLineLength},set:function(t){this.rh.gripLineLength=t},enumerable:!1,configurable:!0}),o}(),mA=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mp=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},SA=function(o){mA(t,o);function t(e){var r,n=o.call(this)||this;return n.ctx=e,n.rs=new gA,n.mask=new yA(n.rs.mask),n.minHandle=new yp(n.rs.minHandle),n.maxHandle=new yp(n.rs.maxHandle),n.minHandleDragging=!1,n.maxHandleDragging=!1,n.panHandleOffset=NaN,n._enabled=!1,n.margin=10,n._visible=!0,n.rs.onRangeChange=function(){return n.ctx.zoomManager.updateZoom("navigator",{x:{min:n.rs.min,max:n.rs.max}})},[e.interactionManager.addListener("drag-start",function(i){return n.onDragStart(i)}),e.interactionManager.addListener("drag",function(i){return n.onDrag(i)}),e.interactionManager.addListener("hover",function(i){return n.onDrag(i)}),e.interactionManager.addListener("drag-end",function(){return n.onDragStop()})].forEach(function(i){return n.destroyFns.push(function(){return e.interactionManager.removeListener(i)})}),[e.layoutService.addListener("before-series",function(i){return n.layout(i)}),e.layoutService.addListener("layout-complete",function(i){return n.layoutComplete(i)})].forEach(function(i){return n.destroyFns.push(function(){return e.layoutService.removeListener(i)})}),(r=e.scene.root)===null||r===void 0||r.appendChild(n.rs),n.destroyFns.push(function(){var i;return(i=e.scene.root)===null||i===void 0?void 0:i.removeChild(n.rs)}),n.destroyFns.push(function(){return n.ctx.zoomManager.updateZoom("navigator")}),n.updateGroupVisibility(),n}return Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.rs.width},set:function(e){this.rs.width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.rs.height},set:function(e){this.rs.height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this.rs.min},set:function(e){this.rs.min=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this.rs.max},set:function(e){this.rs.max=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),t.prototype.updateGroupVisibility=function(){var e=this.enabled&&this.visible;this.rs.visible=e,e?this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max}}):this.ctx.zoomManager.updateZoom("navigator")},t.prototype.layout=function(e){var r=e.shrinkRect;if(this.enabled){var n=this.rs.height+this.margin;r.shrink(n,"bottom"),this.rs.y=r.y+r.height+this.margin}return{shrinkRect:r}},t.prototype.layoutComplete=function(e){var r=e.series,n=r.rect,i=r.visible;this.enabled&&i&&(this.rs.x=n.x,this.rs.width=n.width),this.visible=i},t.prototype.onDragStart=function(e){if(this.enabled){var r=e.offsetX,n=e.offsetY,i=this.rs,a=i.minHandle,s=i.maxHandle,l=i.x,u=i.width,c=i.min,d=i.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(a.containsPoint(r,n)?this.minHandleDragging=!0:s.containsPoint(r,n)?this.maxHandleDragging=!0:d.containsPoint(r,n)&&(this.panHandleOffset=(r-l)/u-c))}},t.prototype.onDrag=function(e){if(this.enabled){var r=this,n=r.rs,i=r.panHandleOffset,a=n.x,s=n.y,l=n.width,u=n.height,c=n.minHandle,d=n.maxHandle,h=e.offsetX,f=e.offsetY,p=a+l*n.min,v=a+l*n.max,g=new Ee(p,s,v-p,u),m=function(){return Math.min(Math.max((h-a)/l,0),1)};if(c.containsPoint(h,f)||d.containsPoint(h,f)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):g.containsPoint(h,f)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)n.min=m();else if(this.maxHandleDragging)n.max=m();else if(!isNaN(i)){var y=n.max-n.min,S=Math.min(m()-i,1-y);S<=n.min?(n.min=S,n.max=n.min+y):(n.max=S+y,n.min=n.max-y)}}},t.prototype.onDragStop=function(){this.stopHandleDragging()},t.prototype.stopHandleDragging=function(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN},mp([A(Re)],t.prototype,"_enabled",void 0),mp([A(J(0))],t.prototype,"margin",void 0),t}(dy),CA={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:SA,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}};hy(CA);var xA=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Sp=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},wA=function(o){xA(t,o);function t(e){var r,n=o.call(this)||this;n.onLayoutComplete=function(a){var s=a.chart,l=s.width,u=s.height;n.rectNode.width=l,n.rectNode.height=u},n.node=new le({name:"background"}),n.node.zIndex=Xe.SERIES_BACKGROUND_ZINDEX,n.rectNode=new wr,n.node.appendChild(n.rectNode),n.fill="white",n.visible=!0,(r=e.scene.root)===null||r===void 0||r.appendChild(n.node),n.destroyFns.push(function(){var a;return(a=e.scene.root)===null||a===void 0?void 0:a.removeChild(n.node)});var i=e.layoutService.addListener("layout-complete",n.onLayoutComplete);return n.destroyFns.push(function(){return e.layoutService.removeListener(i)}),n}return Sp([A(Re),et("node","visible")],t.prototype,"visible",void 0),Sp([A(Fe),et("rectNode","fill")],t.prototype,"fill",void 0),t}(dy),bA={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:wA};hy(bA);var xc=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function _A(){var o,t,e,r,n,i;try{for(var a=xc(bi),s=a.next();!s.done;s=a.next()){var l=s.value;if(ds.constructors!=null&&l.optionConstructors!=null&&Object.assign(ds.constructors,l.optionConstructors),l.type==="root"&&l.themeTemplate)try{for(var u=(e=void 0,xc(l.chartTypes)),c=u.next();!c.done;c=u.next()){var d=c.value;nP(d,l.themeTemplate)}}catch(v){e={error:v}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}if(l.type==="series"){if(l.chartTypes.length>1)throw new Error("AG Charts - Module definition error: "+l.identifier);oP(l.identifier,l.chartTypes[0],l.instanceConstructor,l.seriesDefaults,l.themeTemplate,l.paletteFactory)}if(l.type==="axis-option"&&l.themeTemplate)try{for(var h=(n=void 0,xc(l.axisTypes)),f=h.next();!f.done;f=h.next()){var p=f.value;rp(p,l.themeTemplate)}}catch(v){n={error:v}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}l.type==="axis"&&(nT(l.identifier,l.instanceConstructor),l.themeTemplate&&rp(l.identifier,l.themeTemplate)),l.type==="legend"&&tO(l.identifier,l.instanceConstructor)}}catch(v){o={error:v}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(o)throw o.error}}}var st=function(){return st=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},st.apply(this,arguments)},Ta=function(o,t,e,r){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):n(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},Pa=function(o,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},fy=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},py=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Tu=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function Cp(o){if(Qo(o))return"cartesian";if(Eu(o))return"polar";if(Ou(o))return"hierarchy";throw new Error("AG Chart - unknown type of chart for options with type: "+o.type)}var zo=function(){function o(){}return o.create=function(t){return To.createOrUpdate(t)},o.update=function(t,e){if(!Wa.isInstance(t))throw new Error("AG Charts - invalid chart reference passed");To.createOrUpdate(e,t)},o.updateDelta=function(t,e){if(!Wa.isInstance(t))throw new Error("AG Charts - invalid chart reference passed");return To.updateUserDelta(t,e)},o.download=function(t,e){if(!(t instanceof Wa))throw new Error("AG Charts - invalid chart reference passed");return To.download(t,e)},o.getImageDataURL=function(t,e){if(!(t instanceof Wa))throw new Error("AG Charts - invalid chart reference passed");return To.getImageDataURL(t,e)},o}(),Wa=function(){function o(t){this.chart=t}return o.isInstance=function(t){var e,r;if(t instanceof o||((e=t.constructor)===null||e===void 0?void 0:e.name)==="AgChartInstanceProxy"&&t.chart!=null)return!0;var n=Object.keys((r=t.constructor)===null||r===void 0?void 0:r.prototype),i=Object.keys(o.prototype).every(function(a){return n.includes(a)});return!!(i&&t.chart!=null)},o.prototype.getOptions=function(){return this.chart.getOptions()},o.prototype.destroy=function(){this.chart.destroy()},o}(),To=function(){function o(){}return o.initialiseModules=function(){o.initialised||(_A(),o.initialised=!0)},o.createOrUpdate=function(t,e){var r=this;o.initialiseModules(),_i(">>> AgChartV2.createOrUpdate() user options",t);var n={};o.DEBUG()===!0&&(n.debug=!0);var i=t.overrideDevicePixelRatio;delete t.overrideDevicePixelRatio;var a=QP(t,n),s=e==null?void 0:e.chart;(s==null||Cp(t)!==Cp(s.processedOptions))&&(s=o.createChartInstance(a,i,s)),e==null?e=new Wa(s):e.chart=s;var l=s;l.queuedUserOptions.push(t);var u=function(){var c=l.queuedUserOptions.indexOf(t);l.queuedUserOptions.splice(0,c)};return l.requestFactoryUpdate(function(){return Ta(r,void 0,void 0,function(){var c;return Pa(this,function(d){switch(d.label){case 0:return l.destroyed?[2]:(c=Pi(l.processedOptions,a),c==null?(u(),[2]):[4,o.updateDelta(l,c,t)]);case 1:return d.sent(),u(),[2]}})})}),e},o.updateUserDelta=function(t,e){var r,n=t.chart,i=t.chart.queuedUserOptions,a=(r=i[i.length-1])!==null&&r!==void 0?r:n.userOptions,s=Ye([a,e]);_i(">>> AgChartV2.updateUserDelta() user delta",e),_i("AgChartV2.updateUserDelta() - base options",a),o.createOrUpdate(s,t)},o.download=function(t,e){var r=this,n=function(){return Ta(r,void 0,void 0,function(){var i,a;return Pa(this,function(s){switch(s.label){case 0:return[4,o.prepareResizedChart(t,e)];case 1:return i=s.sent(),a=i.chart,a.scene.download(e==null?void 0:e.fileName,e==null?void 0:e.fileFormat),i!==t&&i.destroy(),[2]}})})};n().catch(function(i){return re.errorOnce(i)})},o.getImageDataURL=function(t,e){return Ta(this,void 0,void 0,function(){var r,n,i;return Pa(this,function(a){switch(a.label){case 0:return[4,o.prepareResizedChart(t,e)];case 1:return r=a.sent(),n=r.chart,i=n.scene.canvas.getDataURL(e==null?void 0:e.fileFormat),r!==t&&r.destroy(),[2,i]}})})},o.prepareResizedChart=function(t,e){return Ta(this,void 0,void 0,function(){var r,n,i,a,s,l,u,c,d;return Pa(this,function(h){switch(h.label){case 0:return r=t.chart,n=e??{},i=n.width,a=n.height,s=r.width,l=r.height,u=i===void 0&&a===void 0||r.scene.canvas.pixelRatio===1&&s===i&&l===a,u?[2,t]:(i=i??s,a=a??l,c=st(st({},r.userOptions),{container:document.createElement("div"),width:i,height:a,autoSize:!1,overrideDevicePixelRatio:1}),d=o.createOrUpdate(c),[4,d.chart.waitForUpdate()]);case 1:return h.sent(),[2,d]}})})},o.createChartInstance=function(t,e,r){var n=r==null?void 0:r.destroy({keepTransferableResources:!0});if(Qo(t))return new Ug(document,e,n);if(Ou(t))return new $g(document,e,n);if(Eu(t))return new Kg(document,e,n);throw new Error("AG Charts - couldn't apply configuration, check type of options: "+t.type)},o.updateDelta=function(t,e,r){var n;return Ta(this,void 0,void 0,function(){return Pa(this,function(i){switch(i.label){case 0:return e.type==null&&(e=st(st({},e),{type:(n=t.processedOptions.type)!==null&&n!==void 0?n:aa(e)})),[4,t.awaitUpdateCompletion()];case 1:return i.sent(),t.destroyed?[2]:(_i("AgChartV2.updateDelta() - applying delta",e),OA(t,e,r),[2])}})})},o.DEBUG=function(){var t;return(t=mr("agChartsDebug"))!==null&&t!==void 0?t:!1},o.initialised=!1,o}();function _i(o){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];[!0,"opts"].includes(To.DEBUG())&&re.debug.apply(re,py([o],fy(t)))}function OA(o,t,e){var r,n,i,a,s=Ye([(r=o.processedOptions)!==null&&r!==void 0?r:{},t],Bn),l=EA(o,s),u=["type","data","series","listeners","theme","legend"];if(Qo(t)||Eu(t))u.push("axes");else if(!Ou(t))throw new Error("AG Charts - couldn't apply configuration, check type of options and chart: "+t.type);t.listeners&&vy(o,t.listeners),Pu(o,t,{skip:u});var c=!1;if(t.series&&t.series.length>0&&(TA(o,t),c=!0),"axes"in t&&Array.isArray(t.axes)){var d=PA(o,t);d&&(c=!0)}AA(o,t);var h=t.series,f=!!t.data||(h==null?void 0:h.some(function(m){return m.data!=null})),p=(i=(n=t.legend)!==null&&n!==void 0?n:t.title)!==null&&i!==void 0?i:t.subtitle;c=c||f||!!p,t.data&&(o.data=t.data),t.listeners&&o.updateAllSeriesListeners(),o.processedOptions=s,o.userOptions=Ye([(a=o.userOptions)!==null&&a!==void 0?a:{},e],Bn);var v=c||l,g=v?we.PROCESS_DATA:we.PERFORM_LAYOUT;_i("AgChartV2.applyChartOptions() - update type",we[g]),o.update(g,{forceNodeDataRefresh:c})}function EA(o,t){var e,r,n=function(h){return o instanceof Ug&&h.chartTypes.includes("cartesian")||o instanceof Kg&&h.chartTypes.includes("polar")||o instanceof $g&&h.chartTypes.includes("hierarchy")},i=!1,a=bi.filter(function(h){return h.type==="root"});try{for(var s=Tu(a),l=s.next();!l.done;l=s.next()){var u=l.value,c=n(u)&&t[u.optionsKey]!=null,d=o.isModuleEnabled(u);c!==d&&(i=!0,c?o.addModule(u):o.removeModule(u))}}catch(h){e={error:h}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i}function TA(o,t){var e=t.series;if(e){var r=o.series.length===e.length&&o.series.every(function(n,i){var a;return n.type===((a=e[i])===null||a===void 0?void 0:a.type)});if(r){o.series.forEach(function(n,i){var a,s,l,u,c=(l=(s=(a=o.processedOptions)===null||a===void 0?void 0:a.series)===null||s===void 0?void 0:s[i])!==null&&l!==void 0?l:{},d=Pi(c,(u=e[i])!==null&&u!==void 0?u:{});d&&(_i("AgChartV2.applySeries() - applying series diff idx "+i,d),gy(n,d,{path:"series["+i+"]",index:i}),n.markNodeDataDirty())});return}o.series=DA(o,e)}}function PA(o,t){var e=t.axes;if(!e)return!1;var r=o.axes.length===e.length&&o.axes.every(function(i,a){return i.type===e[a].type});if(r){var n=o.processedOptions;if(Qo(n))return o.axes.forEach(function(i,a){var s,l,u=(l=(s=n.axes)===null||s===void 0?void 0:s[a])!==null&&l!==void 0?l:{},c=Pi(u,e[a]);_i("AgChartV2.applyAxes() - applying axis diff idx "+a,c);var d="axes["+a+"]",h=["axes[].type"];Pu(i,c,{path:d,skip:h})}),!0}return o.axes=MA(o,e),!0}function AA(o,t){var e=["listeners"];o.setLegendInit(function(r){var n,i,a,s;Pu(r,(n=t.legend)!==null&&n!==void 0?n:{},{skip:e}),!((i=t.legend)===null||i===void 0)&&i.listeners&&Object.assign((a=o.legend)===null||a===void 0?void 0:a.listeners,(s=t.legend.listeners)!==null&&s!==void 0?s:{})})}function DA(o,t){var e,r,n,i=[],a=o.getModuleContext(),s=0;try{for(var l=Tu(t??[]),u=l.next();!u.done;u=l.next()){var c=u.value,d="series["+s+++"]",h=aP((n=c.type)!==null&&n!==void 0?n:"unknown",a);gy(h,c,{path:d,index:s}),i.push(h)}}catch(f){e={error:f}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return i}function MA(o,t){var e,r,n=[],i=["axes[].type"],a=o.getModuleContext(),s=0;try{for(var l=Tu(t??[]),u=l.next();!u.done;u=l.next()){var c=u.value,d=iT(c.type,a),h="axes["+s+++"]";RA(d,c),Pu(d,c,{path:h,skip:i}),n.push(d)}}catch(f){e={error:f}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return n}function RA(o,t){var e,r,n=!1,i=bi.filter(function(d){return d.type==="axis-option"});try{for(var a=Tu(i),s=a.next();!s.done;s=a.next()){var l=s.value,u=t[l.optionsKey]!=null,c=o.isModuleEnabled(l);u!==c&&(n=!0,u?o.addModule(l):o.removeModule(l))}}catch(d){e={error:d}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n}function vy(o,t){o.clearEventListeners();for(var e in t){var r=t[e];typeof r=="function"&&o.addEventListener(e,r)}}function Pu(o,t,e){var r=e===void 0?{}:e,n=r.skip,i=r.path,a=st(st(st({},Gg()),{skip:n}),i?{path:i}:{});return Za(o,t,a)}function gy(o,t,e){var r,n,i=e===void 0?{}:e,a=i.path,s=i.index,l=["series[].listeners","series[].seriesGrouping"],u=Gg(),c=(r=u.constructors)!==null&&r!==void 0?r:{},d={constructors:st(st({},c),{title:o.type==="pie"?oE:c.title})},h=st(st(st(st(st({},u),d),{skip:py(["series[].type"],fy(l??[]))}),a?{path:a}:{}),{idx:s??-1}),f=Za(o,t,h),p=t==null?void 0:t.listeners;p!=null&&vy(o,p);var v=t.seriesGrouping;if("seriesGrouping"in(t??{}))if(v){var g=Object.freeze(st(st({},(n=o.seriesGrouping)!==null&&n!==void 0?n:{}),v));o.seriesGrouping=g}else o.seriesGrouping=v;return f}var IA="8.1.0",LA=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ri=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},No;(function(o){o[o.Open=0]="Open",o[o.Chord=1]="Chord",o[o.Round=2]="Round"})(No||(No={}));var yy=function(o){LA(t,o);function t(){var e=o.call(this)||this;return e.centerX=0,e.centerY=0,e.radius=10,e.startAngle=0,e.endAngle=Math.PI*2,e.counterClockwise=!1,e.type=No.Open,e.restoreOwnStyles(),e}return Object.defineProperty(t.prototype,"fullPie",{get:function(){return ih(Rt(this.startAngle),Rt(this.endAngle))},enumerable:!1,configurable:!0}),t.prototype.updatePath=function(){var e=this.path;e.clear(),e.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===No.Chord?e.closePath():this.type===No.Round&&!this.fullPie&&(e.lineTo(this.centerX,this.centerY),e.closePath())},t.prototype.computeBBox=function(){return new Ee(this.centerX-this.radius,this.centerY-this.radius,this.radius*2,this.radius*2)},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r),i=this.computeBBox();return this.type!==No.Open&&i.containsPoint(n.x,n.y)&&this.path.isPointInPath(n.x,n.y)},t.className="Arc",t.defaultStyles=Object.assign({},Wr.defaultStyles,{lineWidth:1,fillStyle:null}),ri([Le()],t.prototype,"centerX",void 0),ri([Le()],t.prototype,"centerY",void 0),ri([Le()],t.prototype,"radius",void 0),ri([Le()],t.prototype,"startAngle",void 0),ri([Le()],t.prototype,"endAngle",void 0),ri([Le()],t.prototype,"counterClockwise",void 0),ri([Le()],t.prototype,"type",void 0),t}(It),FA=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Aa=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i};(function(o){FA(t,o);function t(e){var r=o.call(this)||this;return r.x=0,r.y=0,r.width=0,r.height=0,r.opacity=1,r.sourceImage=e,r}return t.prototype.render=function(e){var r=e.ctx,n=e.forceRender,i=e.stats;if(this.dirty===Z.NONE&&!n){i&&i.nodesSkipped++;return}this.computeTransformMatrix(),this.matrix.toContext(r);var a=this.sourceImage;r.globalAlpha=this.opacity,r.drawImage(a,0,0,a.width,a.height,this.x,this.y,this.width,this.height),o.prototype.render.call(this,e)},Aa([ie({redraw:Z.MAJOR})],t.prototype,"x",void 0),Aa([ie({redraw:Z.MAJOR})],t.prototype,"y",void 0),Aa([ie({redraw:Z.MAJOR})],t.prototype,"width",void 0),Aa([ie({redraw:Z.MAJOR})],t.prototype,"height",void 0),Aa([ie({redraw:Z.MAJOR})],t.prototype,"opacity",void 0),t})(yu);var kA=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},NA=Object.entries(uy).reduce(function(o,t){var e=kA(t,2),r=e[0],n=e[1];return o[r]=n(),o},{}),GA=["area","bar","column","histogram","line","pie","scatter"];function sr(o){switch(o){case"bar":case"groupedBar":case"stackedBar":case"normalizedBar":return"bar";case"column":case"groupedColumn":case"stackedColumn":case"normalizedColumn":return"column";case"line":return"line";case"area":case"stackedArea":case"normalizedArea":return"area";case"scatter":case"bubble":return"scatter";case"histogram":return"histogram";case"pie":case"doughnut":return"pie";default:return"cartesian"}}var my=["number","category","groupedCategory","log","time"];function VA(o){switch(o){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","groupedCategory"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["groupedCategory","number"];case"scatter":case"bubble":return["number","number"];default:return}}var fs=function(){return fs=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},fs.apply(this,arguments)};function jA(o,t){var e,r=o.chartOptionsToRestore,n=o.chartPaletteToRestore,i=o.chartThemeToRestore,a=UA(o),s=Sy(a),l=s?{baseTheme:a}:(e=Cy(o,a))!==null&&e!==void 0?e:{},u=o.getGridOptionsChartThemeOverrides(),c=o.apiChartThemeOverrides,d=sr(o.chartType),h=d==="pie"?"polar":"cartesian",f=o.crossFiltering?HA(t,o,h):void 0,p=fs({},r??{}),v=function(){var S=function(C){return C?Object.keys(C).some(function(w){return E.get(C[w],"title.enabled",!1)}):!1};return S(u)||S(c)},g=[s?WA(o,v()):void 0,f,u,c,p],m=g.filter(function(S){return!!S}).reduce(function(S,C){return{baseTheme:S,overrides:C}},l);if(n&&a===i){var y=ws(l).palette;BA(n,y)||(m.palette=n)}return m}function BA(o,t){var e=function(r,n){return r.length!==n.length?!1:r.every(function(i,a){return i===n[a]})};return e(o.fills,t.fills)&&e(o.strokes,t.strokes)}function Sy(o){return E.includes(Object.keys(NA),o)}function HA(o,t,e){var r,n={listeners:{legendItemClick:function(a){var s=o.getChart();s.series.forEach(function(l){l.toggleSeriesItem(a.itemId,a.enabled),l.toggleSeriesItem(a.itemId+"-filtered-out",a.enabled)})}}},i={};return e==="polar"&&(i.pie={tooltip:{renderer:function(a){var s=a.angleName,l=a.datum,u=a.calloutLabelKey,c=a.radiusKey,d=a.angleValue,h=s,f=l[u],p=l[c],v=d;return{title:h,content:f+": "+v*p}}}}),r={},r[e]={tooltip:{delay:500},legend:n,listeners:{click:function(a){return t.crossFilterCallback(a,!0)}},series:i},r}var zA=my.reduce(function(o,t){var e;return fs(fs({},o),(e={},e[t]={title:{_enabledFromTheme:!0}},e))},{});function WA(o,t){var e=o.getExtraPaddingDirections();return{common:{axes:zA,padding:{top:!t&&e.includes("top")?40:20,right:e.includes("right")?30:20,bottom:e.includes("bottom")?40:20,left:e.includes("left")?30:20}},pie:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}}}}function UA(o){var t=o.getChartThemeName(),e=o.getChartThemes();return E.includes(e,t)||(t=e[0]),t}function Cy(o,t){var e=o.customChartThemes,r=e&&e[t];return r||console.warn("AG Grid: no stock theme exists with the name '"+t+"' and no custom chart theme with that name was supplied to 'customChartThemes'"),r}var Da=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},vo=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},KA=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},al=function(o){return function(t){return t===void 0?!0:o(t)}},xp=function(o){return typeof o=="string"},wp=function(o){return typeof o=="boolean"},$A=function(o){return typeof o=="object"},nn=function(o,t){return function(e){return"AG Grid - unable to update chart as invalid params supplied:  `"+o+": "+e+"`, expected "+t+"."}},XA=function(){function o(){}return o.validateChartParams=function(t){var e=t;switch(e.type){case"rangeChartUpdate":return o.validateUpdateRangeChartParams(t);case"pivotChartUpdate":return o.validateUpdatePivotChartParams(t);case"crossFilterChartUpdate":return o.validateUpdateCrossFilterChartParams(t);default:return console.warn("AG Grid - Invalid value supplied for 'type': "+t.type+". It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1}},o.validateUpdateRangeChartParams=function(t){var e=vo(vo(vo([],Da(o.commonValidations)),Da(o.cellRangeValidations)),[{property:"seriesChartTypes",validationFn:function(r){return r===void 0||Array.isArray(r)&&r.every($A)},warnMessage:nn("seriesChartTypes","Array of SeriesChartType")}]);return o.validateProperties(t,e,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc","seriesChartTypes"],"UpdateRangeChartParams")},o.validateUpdatePivotChartParams=function(t){var e=vo([],Da(o.commonValidations));return o.validateProperties(t,e,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart"],"UpdatePivotChartParams")},o.validateUpdateCrossFilterChartParams=function(t){var e=vo(vo([],Da(o.commonValidations)),Da(o.cellRangeValidations));return o.validateProperties(t,e,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc"],"UpdateCrossFilterChartParams")},o.validateProperties=function(t,e,r,n){var i,a;try{for(var s=KA(e),l=s.next();!l.done;l=s.next()){var u=l.value,c=u.property,d=u.validationFn,h=u.warnMessage;if(c in t){var f=t[c];if(!d(f))return console.warn(h(f)),!1}}}catch(p){i={error:p}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}for(var c in t)if(!r.includes(c))return console.warn("AG Grid - Unexpected property supplied. "+n+" does not contain: `"+c+"`."),!1;return!0},o.validChartTypes=["column","groupedColumn","stackedColumn","normalizedColumn","bar","groupedBar","stackedBar","normalizedBar","line","scatter","bubble","pie","doughnut","area","stackedArea","normalizedArea","histogram","columnLineCombo","areaColumnCombo","customCombo"],o.validateChartType=al(function(t){return o.validChartTypes.includes(t)}),o.validateAgChartThemeOverrides=al(function(t){return typeof t=="object"}),o.validateChartParamsCellRange=al(function(t){return typeof t=="object"}),o.validateAggFunc=al(function(t){return typeof t=="string"||typeof t=="function"}),o.commonValidations=[{property:"chartId",validationFn:xp,warnMessage:nn("chartId","string")},{property:"chartType",validationFn:o.validateChartType,warnMessage:nn("chartType",o.validChartTypes.join(", "))},{property:"chartThemeName",validationFn:xp,warnMessage:nn("chartThemeName","string")},{property:"chartThemeOverrides",validationFn:o.validateAgChartThemeOverrides,warnMessage:nn("chartThemeOverrides","AgChartThemeOverrides")},{property:"unlinkChart",validationFn:wp,warnMessage:nn("unlinkChart","boolean")}],o.cellRangeValidations=[{property:"cellRange",validationFn:o.validateChartParamsCellRange,warnMessage:nn("cellRange","ChartParamsCellRange")},{property:"suppressChartRanges",validationFn:wp,warnMessage:nn("suppressChartRanges","boolean")},{property:"aggFunc",validationFn:o.validateAggFunc,warnMessage:nn("aggFunc","string or IAggFunc")}],o}(),YA=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),vd=function(){return vd=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},vd.apply(this,arguments)},bp=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},xy=["ag-default","ag-material","ag-pastel","ag-vivid","ag-solar"],_r=function(o){YA(t,o);function t(e){var r=o.call(this)||this;return r.model=e,r}return t.prototype.init=function(){var e=this;this.setChartRange(),this.addManagedListener(this.eventService,V.EVENT_RANGE_SELECTION_CHANGED,function(r){r.id&&r.id===e.model.chartId&&e.updateForRangeChange()}),this.model.unlinked&&this.rangeService&&this.rangeService.setCellRanges([]),this.addManagedListener(this.eventService,V.EVENT_COLUMN_MOVED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PINNED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VISIBLE,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,V.EVENT_MODEL_UPDATED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,V.EVENT_CELL_VALUE_CHANGED,this.updateForDataChange.bind(this))},t.prototype.update=function(e){var r,n,i,a,s,l,u;if(!this.validUpdateType(e)||!XA.validateChartParams(e))return!1;var c=e.chartId,d=e.chartType,h=e.chartThemeName,f=e.unlinkChart,p={chartId:c,pivotChart:this.model.pivotChart,chartType:d??this.model.chartType,chartThemeName:h??this.model.chartThemeName,unlinkChart:f??this.model.unlinked,cellRange:this.model.suppliedCellRange,aggFunc:this.model.aggFunc,seriesChartTypes:void 0,suppressChartRanges:!1,crossFiltering:!1},v=vd({},p);switch(e.type){case"rangeChartUpdate":v.cellRange=(r=this.createCellRange(e))!==null&&r!==void 0?r:this.model.suppliedCellRange,v.aggFunc=(n=e.aggFunc)!==null&&n!==void 0?n:this.model.aggFunc,v.seriesChartTypes=e.seriesChartTypes,v.suppressChartRanges=(i=e.suppressChartRanges)!==null&&i!==void 0?i:this.model.suppressChartRanges;break;case"crossFilterChartUpdate":v.cellRange=(a=this.createCellRange(e))!==null&&a!==void 0?a:this.model.suppliedCellRange,v.aggFunc=(s=e.aggFunc)!==null&&s!==void 0?s:this.model.aggFunc,v.crossFiltering=!0,v.suppressChartRanges=(l=e.suppressChartRanges)!==null&&l!==void 0?l:this.model.suppressChartRanges;break}this.model.updateModel(v);var g=v.unlinkChart||v.suppressChartRanges;return g?(u=this.rangeService)===null||u===void 0||u.setCellRanges([]):this.setChartRange(),!0},t.prototype.updateForGridChange=function(){this.model.unlinked||(this.model.updateCellRanges(),this.model.updateData(),this.setChartRange())},t.prototype.updateForDataChange=function(){this.model.unlinked||(this.model.updateData(),this.raiseChartModelUpdateEvent())},t.prototype.updateForRangeChange=function(){this.updateForGridChange(),this.raiseChartRangeSelectionChangedEvent()},t.prototype.updateForPanelChange=function(e){this.model.updateCellRanges(e),this.model.updateData(),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()},t.prototype.getChartUpdateParams=function(e){var r=this.getSelectedValueColState(),n=r.map(function(s){return{colId:s.colId,displayName:s.displayName}}),i=this.getChartData(),a=this.getSelectedDimension();return{data:i,grouping:this.isGrouping(),category:{id:a.colId,name:a.displayName,chartDataType:this.model.getChartDataType(a.colId)},fields:n,chartId:this.getChartId(),getCrossFilteringContext:function(){return{lastSelectedChartId:"xxx"}},seriesChartTypes:this.getSeriesChartTypes(),updatedOverrides:e}},t.prototype.getChartModel=function(){var e=this.model.pivotChart?"pivot":"range",r=this.isComboChart()?this.model.comboChartModel.seriesChartTypes:void 0;return{modelType:e,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:r}},t.prototype.getChartId=function(){return this.model.chartId},t.prototype.getChartData=function(){return this.model.chartData},t.prototype.getChartType=function(){return this.model.chartType},t.prototype.setChartType=function(e){this.model.chartType=e,this.model.comboChartModel.updateSeriesChartTypes(),this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()},t.prototype.setChartThemeName=function(e){this.model.chartThemeName=e,this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()},t.prototype.getChartThemeName=function(){return this.model.chartThemeName},t.prototype.isPivotChart=function(){return this.model.pivotChart},t.prototype.isPivotMode=function(){return this.model.isPivotMode()},t.prototype.isGrouping=function(){return this.model.isGrouping()},t.prototype.isCrossFilterChart=function(){return this.model.crossFiltering},t.prototype.getThemes=function(){return this.gridOptionsService.get("chartThemes")||xy},t.prototype.getPalettes=function(){var e=this,r=this.getThemes();return r.map(function(n){var i=Sy(n),a=i?n:e.chartProxy.lookupCustomChartTheme(n);return ws(a).palette})},t.prototype.getValueColState=function(){return this.model.valueColState.map(this.displayNameMapper.bind(this))},t.prototype.getSelectedValueColState=function(){return this.getValueColState().filter(function(e){return e.selected})},t.prototype.getSelectedDimension=function(){return this.model.getSelectedDimension()},t.prototype.displayNameMapper=function(e){var r=this.model.columnNames[e.colId];return e.displayName=r?r.join(" - "):this.model.getColDisplayName(e.column),e},t.prototype.getColStateForMenu=function(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}},t.prototype.setChartRange=function(e){e===void 0&&(e=!1),this.rangeService&&!this.model.suppressChartRanges&&!this.model.unlinked&&this.rangeService.setCellRanges(this.getCellRanges()),e||this.raiseChartModelUpdateEvent()},t.prototype.detachChartRange=function(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeService&&this.rangeService.setCellRanges([]):this.updateForGridChange()},t.prototype.setChartProxy=function(e){this.chartProxy=e},t.prototype.getChartProxy=function(){return this.chartProxy},t.prototype.isActiveXYChart=function(){return E.includes(["scatter","bubble"],this.getChartType())},t.prototype.isChartLinked=function(){return!this.model.unlinked},t.prototype.customComboExists=function(){var e=this.model.comboChartModel.savedCustomSeriesChartTypes;return e&&e.length>0},t.prototype.getSeriesChartTypes=function(){return this.model.comboChartModel.seriesChartTypes},t.prototype.isComboChart=function(){return this.model.isComboChart()},t.prototype.updateSeriesChartType=function(e,r,n){var i=this.model.comboChartModel.seriesChartTypes.find(function(l){return l.colId===e});if(i){var a=this.model.chartType!=="customCombo";a&&(this.model.chartType="customCombo");var s=i.chartType;r!=null&&(i.chartType=r),n!=null&&(i.secondaryAxis=n),this.model.comboChartModel.savedCustomSeriesChartTypes=this.model.comboChartModel.seriesChartTypes,this.model.comboChartModel.updateSeriesChartTypes(),this.updateForDataChange(),a&&this.dispatchEvent({type:t.EVENT_CHART_TYPE_CHANGED}),s!==r&&this.dispatchEvent({type:t.EVENT_CHART_SERIES_CHART_TYPE_CHANGED}),this.raiseChartOptionsChangedEvent()}},t.prototype.getActiveSeriesChartTypes=function(){var e=this.getSelectedValueColState().map(function(r){return r.colId});return this.getSeriesChartTypes().filter(function(r){return e.includes(r.colId)})},t.prototype.getChartSeriesTypes=function(){var e=["line","column","area"];return this.isComboChart()?e:[sr(this.getChartType())]},t.prototype.getCellRanges=function(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter(function(e){return e})},t.prototype.createCellRange=function(e){var r;return e.cellRange&&((r=this.rangeService)===null||r===void 0?void 0:r.createCellRangeFromCellRangeParams(e.cellRange))},t.prototype.validUpdateType=function(e){var r=this,n;if(!e.type)return console.warn("AG Grid - Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1;var i={"Range Chart":function(){return!r.isPivotChart()&&!r.isCrossFilterChart()},"Pivot Chart":function(){return r.isPivotChart()},"Cross Filter Chart":function(){return r.isCrossFilterChart()}},a=(n=Object.keys(i).find(function(l){return i[l]()}))!==null&&n!==void 0?n:"Range Chart",s=e.type===""+a[0].toLowerCase()+a.slice(1).replace(/ /g,"")+"Update";return s||console.warn("AG Grid - Unable to update chart as a '"+e.type+"' update type is not permitted on a "+a+"."),s},t.prototype.getCellRangeParams=function(){var e=this.getCellRanges(),r=e[0],n=r&&r.startRow||null,i=r&&r.endRow||null;return{rowStartIndex:n&&n.rowIndex,rowStartPinned:n&&n.rowPinned,rowEndIndex:i&&i.rowIndex,rowEndPinned:i&&i.rowPinned,columns:e.reduce(function(a,s){return a.concat(s.columns.map(function(l){return l.getId()}))},[])}},t.prototype.raiseChartModelUpdateEvent=function(){var e={type:t.EVENT_CHART_MODEL_UPDATE};this.dispatchEvent(e)},t.prototype.raiseChartUpdatedEvent=function(){var e={type:t.EVENT_CHART_UPDATED};this.dispatchEvent(e)},t.prototype.raiseChartApiUpdateEvent=function(){var e={type:t.EVENT_CHART_API_UPDATE};this.dispatchEvent(e)},t.prototype.raiseChartOptionsChangedEvent=function(){var e=this.getChartModel(),r=e.chartId,n=e.chartType,i={type:V.EVENT_CHART_OPTIONS_CHANGED,chartId:r,chartType:n,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides()};this.eventService.dispatchEvent(i)},t.prototype.raiseChartRangeSelectionChangedEvent=function(){var e={type:V.EVENT_CHART_RANGE_SELECTION_CHANGED,id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()};this.eventService.dispatchEvent(e)},t.prototype.destroy=function(){o.prototype.destroy.call(this),this.rangeService&&this.rangeService.setCellRanges([])},t.EVENT_CHART_UPDATED="chartUpdated",t.EVENT_CHART_API_UPDATE="chartApiUpdate",t.EVENT_CHART_MODEL_UPDATE="chartModelUpdate",t.EVENT_CHART_TYPE_CHANGED="chartTypeChanged",t.EVENT_CHART_SERIES_CHART_TYPE_CHANGED="chartSeriesChartTypeChanged",bp([D("rangeService")],t.prototype,"rangeService",void 0),bp([te],t.prototype,"init",null),t}(pe),qA=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),wc=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},sl=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},ll=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},ZA=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},JA={groups:[{type:"categories",isOpen:!0},{type:"series",isOpen:!0},{type:"seriesChartType",isOpen:!0}]},QA=function(o){qA(t,o);function t(e,r){var n=o.call(this,t.TEMPLATE)||this;return n.chartController=e,n.chartOptionsService=r,n.columnComps=new Map,n}return t.prototype.init=function(){this.updatePanels(),this.addManagedListener(this.chartController,_r.EVENT_CHART_MODEL_UPDATE,this.updatePanels.bind(this)),this.addManagedListener(this.chartController,_r.EVENT_CHART_API_UPDATE,this.updatePanels.bind(this)),this.createAutoScrollService()},t.prototype.destroy=function(){this.clearComponents(),o.prototype.destroy.call(this)},t.prototype.updatePanels=function(){var e=this,r,n,i=this.chartType,a=this.chartController.getColStateForMenu(),s=a.dimensionCols,l=a.valueCols,u=s.map(function(f){return f.colId}).concat(l.map(function(f){return f.colId}));this.chartType=this.chartController.getChartType();var c=this.getGroupExpandedState();if(E.areEqual(E.keys(this.columnComps),u)&&this.chartType===i){if(ll(ll([],sl(s)),sl(l)).forEach(function(f){e.columnComps.get(f.colId).setValue(f.selected,!0)}),this.chartController.isActiveXYChart()){var d=this.generateGetSeriesLabel();l.forEach(function(f){e.columnComps.get(f.colId).setLabel(d(f))})}E.removeFromParent(this.getGui().querySelector("#seriesChartTypeGroup")),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp);var h=(r=this.getDataPanelDef().groups)===null||r===void 0?void 0:r.reduce(function(f,p,v){var g=p.type;return g==="seriesChartType"?v:f},-1);h!==-1&&this.createSeriesChartTypeGroup(l,h)}else this.clearComponents(),(n=this.getDataPanelDef().groups)===null||n===void 0||n.forEach(function(f){var p=f.type;p==="categories"?e.createCategoriesGroup(s):p==="series"?e.createSeriesGroup(l):p==="seriesChartType"?e.createSeriesChartTypeGroup(l):console.warn("AG Grid: invalid charts data panel group name supplied: '"+p+"'")});this.restoreGroupExpandedState(c)},t.prototype.getGroupExpandedState=function(){var e=this,r=[{groupType:"categories",comp:this.categoriesGroupComp},{groupType:"series",comp:this.seriesGroupComp},{groupType:"seriesChartType",comp:this.seriesChartTypeGroupComp}];return r.map(function(n){var i,a,s=n.groupType,l=n.comp,u=!!(!((a=(i=e.getDataPanelDef().groups)===null||i===void 0?void 0:i.find(function(c){var d=c.type;return d===s}))===null||a===void 0)&&a.isOpen);return l?l.isExpanded():u})},t.prototype.restoreGroupExpandedState=function(e){[this.categoriesGroupComp,this.seriesGroupComp,this.seriesChartTypeGroupComp].forEach(function(r,n){r&&r.toggleGroupExpand(e[n])})},t.prototype.createAutoScrollService=function(){var e=this.getGui();this.autoScrollService=new Md({scrollContainer:e,scrollAxis:"y",getVerticalPosition:function(){return e.scrollTop},setVerticalPosition:function(r){return e.scrollTop=r}})},t.prototype.createComponent=function(e,r){var n=document.createElement("div");return n.id=r,n.className="ag-chart-data-section",n.appendChild(e.getGui()),n},t.prototype.addComponent=function(e,r,n){var i=this.createComponent(r,n);e.appendChild(i)},t.prototype.addComponentAtIndex=function(e,r,n,i){var a=this.createComponent(r,n);e.insertBefore(a,e.children[i])},t.prototype.addChangeListener=function(e,r){var n=this;this.addManagedListener(e,V.EVENT_FIELD_VALUE_CHANGED,function(){r.selected=e.getValue(),n.chartController.updateForPanelChange(r)})},t.prototype.createCategoriesGroup=function(e){var r=this;this.categoriesGroupComp=this.createBean(new hn({title:this.getCategoryGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var n="chartDimension"+this.getCompId();e.forEach(function(i){var a=r.categoriesGroupComp.createManagedBean(new nm);a.setLabel(E.escapeString(i.displayName)),a.setValue(i.selected),a.setInputName(n),r.addChangeListener(a,i),r.categoriesGroupComp.addItem(a),r.columnComps.set(i.colId,a)}),this.addComponent(this.getGui(),this.categoriesGroupComp,"categoriesGroup")},t.prototype.createSeriesGroup=function(e){var r=this;if(this.seriesGroupComp=this.createManagedBean(new hn({title:this.getSeriesGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"})),this.chartController.isActiveXYChart()){var n=this.seriesGroupComp.createManagedBean(new bv);n.setLabel(this.chartTranslationService.translate("paired")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getPairedMode()).onValueChange(function(u){r.chartOptionsService.setPairedMode(!!u),r.chartController.updateForGridChange()}),this.seriesGroupComp.addItem(n)}var i=this.generateGetSeriesLabel();e.forEach(function(u){var c=r.seriesGroupComp.createManagedBean(new jc);c.addCssClass("ag-data-select-checkbox");var d=i(u);c.setLabel(d),c.setValue(u.selected),r.addChangeListener(c,u),r.seriesGroupComp.addItem(c),r.columnComps.set(u.colId,c),r.addDragHandle(c,u)});var a=this.getGui(),s=this.seriesGroupComp.getGui();this.addComponent(a,this.seriesGroupComp,"seriesGroup");var l={getIconName:function(){return Et.ICON_MOVE},getContainer:function(){return s},onDragging:function(u){return r.onDragging(u)},onDragLeave:function(){return r.onDragLeave()},isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(l),this.addDestroyFunc(function(){return r.dragAndDropService.removeDropTarget(l)})},t.prototype.createSeriesChartTypeGroup=function(e,r){var n=this;if(this.chartController.isComboChart()){this.seriesChartTypeGroupComp=this.createManagedBean(new hn({title:this.chartTranslationService.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var i=this.chartController.getSeriesChartTypes();e.forEach(function(a){if(a.selected){var s=i.filter(function(f){return f.colId===a.colId})[0];if(s){var l=n.seriesChartTypeGroupComp.createManagedBean(new hn({title:a.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),u=n.seriesChartTypeGroupComp.createManagedBean(new jc).setLabel(n.chartTranslationService.translate("secondaryAxis")).setLabelWidth("flex").setDisabled(["groupedColumn","stackedColumn","stackedArea"].includes(s.chartType)).setValue(!!s.secondaryAxis).onValueChange(function(f){return n.chartController.updateSeriesChartType(a.colId,void 0,f)});l.addItem(u);var c=function(f,p){return n.chartTranslationService.translate(f,p)},d=[{value:"line",text:c("line","Line")},{value:"area",text:c("area","Area")},{value:"stackedArea",text:c("stackedArea","StackedArea")},{value:"groupedColumn",text:c("groupedColumn","Grouped Column")},{value:"stackedColumn",text:c("stackedColumn","Stacked Column")}],h=l.createManagedBean(new Id);h.setLabelAlignment("left").setLabelWidth("flex").addOptions(d).setValue(s.chartType).onValueChange(function(f){return n.chartController.updateSeriesChartType(a.colId,f)}),l.addItem(h),n.seriesChartTypeGroupComp.addItem(l)}}}),r===void 0?this.addComponent(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup"):this.addComponentAtIndex(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup",r)}},t.prototype.addDragHandle=function(e,r){var n=this,i=E.createIconNoSpan("columnDrag",this.gridOptionsService);i.classList.add("ag-drag-handle","ag-chart-data-column-drag-handle"),e.getGui().insertAdjacentElement("beforeend",i);var a={type:Gn.ChartPanel,eElement:i,dragItemName:r.displayName,getDragItem:function(){return{columns:[r.column]}},onDragStopped:function(){return n.onDragStop()}};this.dragAndDropService.addDragSource(a,!0),this.addDestroyFunc(function(){return n.dragAndDropService.removeDragSource(a)})},t.prototype.generateGetSeriesLabel=function(){if(!this.chartController.isActiveXYChart())return function(a){return E.escapeString(a.displayName)};var e=this.chartType==="bubble",r=this.isInPairedMode(),n=0,i=new Map;return i.set(0,"X"),i.set(1,"Y"),i.set(2,"size"),function(a){var s=E.escapeString(a.displayName);if(!a.selected)return s;var l;return r?l=i.get(n%(e?3:2)):n===0?l="X":l=e&&n%2===0?"size":"Y",n++,s+" ("+l+")"}},t.prototype.getCategoryGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"labels":"categories")},t.prototype.getSeriesGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"xyValues":"series")},t.prototype.getDataPanelDef=function(){var e,r=(e=this.gridOptionsService.get("chartToolPanelsDef"))===null||e===void 0?void 0:e.dataPanel;return r||JA},t.prototype.isInPairedMode=function(){return this.chartController.isActiveXYChart()&&this.chartOptionsService.getSeriesOption("paired","scatter")},t.prototype.clearComponents=function(){E.clearElement(this.getGui()),this.categoriesGroupComp=this.destroyBean(this.categoriesGroupComp),this.seriesGroupComp=this.destroyBean(this.seriesGroupComp),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),this.columnComps.clear()},t.prototype.onDragging=function(e){var r=this.checkHoveredItem(e);if(r){this.lastDraggedColumn=e.dragItem.columns[0];var n=r.comp,i=r.position,a=this.lastHoveredItem||{},s=a.comp,l=a.position;if(!(n===s&&i===l)){this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredItem={comp:n,position:i};var u=n.getGui();u.classList.add("ag-list-item-hovered","ag-item-highlight-"+i)}}},t.prototype.checkHoveredItem=function(e){var r,n;if(E.missing(e.vDirection))return null;var i=e.event;try{for(var a=ZA(this.columnComps.values()),s=a.next();!s.done;s=a.next()){var l=s.value,u=l.getGui();if(u.querySelector(".ag-chart-data-column-drag-handle")){var c=u.getBoundingClientRect(),d=i.clientY>=c.top&&i.clientY<=c.bottom;if(d){var h=u.clientHeight,f=i.clientY>c.top+h/2?"bottom":"top";return{comp:l,position:f}}}}}catch(p){r={error:p}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return null},t.prototype.onDragLeave=function(){this.clearHoveredItems()},t.prototype.onDragStop=function(){var e=this;if(this.lastHoveredItem){var r=this.chartController.getColStateForMenu(),n=r.dimensionCols,i=r.valueCols,a=ll(ll([],sl(n)),sl(i)).find(function(l){return l.column===e.lastDraggedColumn});if(a){var s=Array.from(this.columnComps.values()).indexOf(this.lastHoveredItem.comp);this.lastHoveredItem.position==="bottom"&&s++,a.order=s,this.chartController.updateForPanelChange(a)}}this.clearHoveredItems(),this.lastDraggedColumn=void 0,this.autoScrollService.ensureCleared()},t.prototype.clearHoveredItems=function(){this.columnComps.forEach(function(e){e.getGui().classList.remove("ag-list-item-hovered","ag-item-highlight-top","ag-item-highlight-bottom")}),this.lastHoveredItem=void 0},t.prototype.isInterestedIn=function(e){return e===Gn.ChartPanel},t.TEMPLATE='<div class="ag-chart-data-wrapper ag-scrollable-container"></div>',wc([D("dragAndDropService")],t.prototype,"dragAndDropService",void 0),wc([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),wc([te],t.prototype,"init",null),t}(oe),eD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ni=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ps=function(o){eD(t,o);function t(e){var r=o.call(this)||this;return r.activeComps=[],r.params=e,r}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(t.TEMPLATE,{fontGroup:e}),this.initGroup(),this.initFontFamilySelect(),this.initFontWeightStyleSelect(),this.initFontSizeSelect(),this.initFontColorPicker()},t.prototype.addCompToPanel=function(e){this.fontGroup.addItem(e),this.activeComps.push(e)},t.prototype.setEnabled=function(e){this.fontGroup.setEnabled(e)},t.prototype.initGroup=function(){var e=this;this.fontGroup.setTitle(this.params.name||this.chartTranslationService.translate("font")).setEnabled(this.params.enabled).hideEnabledCheckbox(!!this.params.suppressEnabledCheckbox).hideOpenCloseIcons(!0).onEnableChange(function(r){e.params.setEnabled&&e.params.setEnabled(r)})},t.prototype.initFontFamilySelect=function(){var e=this,r=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],n=this.params.initialFont.family,i=r[0];if(n){var a=r.map(function(c){return c.toLowerCase()}),s=a.indexOf(n.toLowerCase());if(s>=0)i=r[s];else{var l=E.capitalise(n);r.push(l),i=l}}var u=r.sort().map(function(c){return{value:c,text:c}});this.familySelect.addOptions(u).setInputWidth("flex").setValue(""+i).onValueChange(function(c){return e.params.setFont({family:c})})},t.prototype.initFontSizeSelect=function(){var e=this,r=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],n=this.params.initialFont.size;E.includes(r,n)||r.push(n);var i=r.sort(function(a,s){return a-s}).map(function(a){return{value:""+a,text:""+a}});this.sizeSelect.addOptions(i).setInputWidth("flex").setValue(""+n).onValueChange(function(a){return e.params.setFont({size:parseInt(a,10)})}),this.sizeSelect.setLabel(this.chartTranslationService.translate("size"))},t.prototype.initFontWeightStyleSelect=function(){var e=this,r=this.params.initialFont,n=r.weight,i=n===void 0?"normal":n,a=r.style,s=a===void 0?"normal":a,l=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}],u=l.find(function(d){return d.weight===i&&d.style===s});u||(u={name:"predefined",weight:i,style:s},l.unshift(u));var c=l.map(function(d){return{value:d.name,text:e.chartTranslationService.translate(d.name)}});this.weightStyleSelect.addOptions(c).setInputWidth("flex").setValue(u.name).onValueChange(function(d){var h=l.find(function(f){return f.name===d});e.params.setFont({weight:h.weight,style:h.style})})},t.prototype.initFontColorPicker=function(){var e=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setInputWidth(45).setValue(""+this.params.initialFont.color).onValueChange(function(r){return e.params.setFont({color:r})})},t.prototype.addItemToPanel=function(e){this.fontGroup.addItem(e),this.activeComps.push(e)},t.prototype.destroyActiveComps=function(){var e=this;this.activeComps.forEach(function(r){E.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActiveComps(),o.prototype.destroy.call(this)},t.TEMPLATE=`<div class="ag-font-panel">
            <ag-group-component ref="fontGroup">
                <ag-select ref="familySelect"></ag-select>
                <ag-select ref="weightStyleSelect"></ag-select>
                <div class="ag-charts-font-size-color">
                    <ag-select ref="sizeSelect"></ag-select>
                    <ag-color-picker ref="colorPicker"></ag-color-picker>
                </div>
            </ag-group-component>
        </div>`,ni([B("fontGroup")],t.prototype,"fontGroup",void 0),ni([B("familySelect")],t.prototype,"familySelect",void 0),ni([B("weightStyleSelect")],t.prototype,"weightStyleSelect",void 0),ni([B("sizeSelect")],t.prototype,"sizeSelect",void 0),ni([B("colorPicker")],t.prototype,"colorPicker",void 0),ni([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),ni([te],t.prototype,"init",null),t}(oe),tD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rr=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},rD=function(o){tD(t,o);function t(e){var r=e.chartOptionsService,n=e.isExpandedOnInit,i=n===void 0?!1:n,a=o.call(this)||this;return a.activePanels=[],a.chartOptionsService=r,a.isExpandedOnInit=i,a}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{legendGroup:e}),this.initLegendGroup(),this.initLegendPosition(),this.initLegendPadding(),this.initLegendItems(),this.initLabelPanel()},t.prototype.initLegendGroup=function(){var e=this;this.legendGroup.setTitle(this.chartTranslationService.translate("legend")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("legend.enabled")||!1).toggleGroupExpand(this.isExpandedOnInit).onEnableChange(function(r){e.chartOptionsService.setChartOption("legend.enabled",r),e.legendGroup.toggleGroupExpand(!0)})},t.prototype.initLegendPosition=function(){var e=this,r=["top","right","bottom","left"];this.legendPositionSelect.setLabel(this.chartTranslationService.translate("position")).setLabelWidth("flex").setInputWidth(80).addOptions(r.map(function(n){return{value:n,text:e.chartTranslationService.translate(n)}})).setValue(this.chartOptionsService.getChartOption("legend.position")).onValueChange(function(n){return e.chartOptionsService.setChartOption("legend.position",n)})},t.prototype.initLegendPadding=function(){var e=this,r=this.chartOptionsService.getChartOption("legend.spacing");this.legendPaddingSlider.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(gt(r,200)).setValue(""+r).setTextFieldWidth(45).onValueChange(function(n){return e.chartOptionsService.setChartOption("legend.spacing",n)})},t.prototype.initLegendItems=function(){var e=this,r=function(n,i,a,s){var l=e.chartOptionsService.getChartOption("legend."+n);a.setLabel(e.chartTranslationService.translate(i)).setMaxValue(gt(l,s)).setValue(""+l).setTextFieldWidth(45).onValueChange(function(u){e.chartOptionsService.setChartOption("legend."+n,u)})};r("item.marker.size","markerSize",this.markerSizeSlider,40),r("item.marker.strokeWidth","markerStroke",this.markerStrokeSlider,10),r("item.marker.padding","itemSpacing",this.markerPaddingSlider,20),r("item.paddingX","layoutHorizontalSpacing",this.itemPaddingXSlider,50),r("item.paddingY","layoutVerticalSpacing",this.itemPaddingYSlider,50)},t.prototype.initLabelPanel=function(){var e=this,r=this.chartOptionsService,n={family:r.getChartOption("legend.item.label.fontFamily"),style:r.getChartOption("legend.item.label.fontStyle"),weight:r.getChartOption("legend.item.label.fontWeight"),size:r.getChartOption("legend.item.label.fontSize"),color:r.getChartOption("legend.item.label.color")},i=function(l){var u=e.chartOptionsService;l.family&&u.setChartOption("legend.item.label.fontFamily",l.family),l.weight&&u.setChartOption("legend.item.label.fontWeight",l.weight),l.style&&u.setChartOption("legend.item.label.fontStyle",l.style),l.size&&u.setChartOption("legend.item.label.fontSize",l.size),l.color&&u.setChartOption("legend.item.label.color",l.color)},a={enabled:!0,suppressEnabledCheckbox:!0,initialFont:n,setFont:i},s=this.createBean(new ps(a));this.legendGroup.addItem(s),this.activePanels.push(s)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){E.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),o.prototype.destroy.call(this)},t.TEMPLATE=`<div>
            <ag-group-component ref="legendGroup">
                <ag-select ref="legendPositionSelect"></ag-select>
                <ag-slider ref="legendPaddingSlider"></ag-slider>
                <ag-slider ref="markerSizeSlider"></ag-slider>
                <ag-slider ref="markerStrokeSlider"></ag-slider>
                <ag-slider ref="markerPaddingSlider"></ag-slider>
                <ag-slider ref="itemPaddingXSlider"></ag-slider>
                <ag-slider ref="itemPaddingYSlider"></ag-slider>
            </ag-group-component>
        </div>`,Rr([B("legendGroup")],t.prototype,"legendGroup",void 0),Rr([B("legendPositionSelect")],t.prototype,"legendPositionSelect",void 0),Rr([B("legendPaddingSlider")],t.prototype,"legendPaddingSlider",void 0),Rr([B("markerSizeSlider")],t.prototype,"markerSizeSlider",void 0),Rr([B("markerStrokeSlider")],t.prototype,"markerStrokeSlider",void 0),Rr([B("markerPaddingSlider")],t.prototype,"markerPaddingSlider",void 0),Rr([B("itemPaddingXSlider")],t.prototype,"itemPaddingXSlider",void 0),Rr([B("itemPaddingYSlider")],t.prototype,"itemPaddingYSlider",void 0),Rr([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Rr([te],t.prototype,"init",null),t}(oe),nD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),go=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},iD=function(o){nD(t,o);function t(e){var r=o.call(this)||this;return r.chartOptionsService=e,r}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(t.TEMPLATE,{axisTicksGroup:e}),this.initAxisTicks()},t.prototype.initAxisTicks=function(){var e=this;this.axisTicksGroup.setTitle(this.chartTranslationService.translate("ticks")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0),this.axisTicksColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("tick.color")).onValueChange(function(n){return e.chartOptionsService.setAxisProperty("tick.color",n)});var r=function(n,i,a,s){var l=e.chartOptionsService.getAxisProperty(n);i.setLabel(a).setMaxValue(gt(l,s)).setValue(""+l).setTextFieldWidth(45).onValueChange(function(u){return e.chartOptionsService.setAxisProperty(n,u)})};r("tick.width",this.axisTicksWidthSlider,this.chartTranslationService.translate("width"),10),r("tick.size",this.axisTicksSizeSlider,this.chartTranslationService.translate("length"),30)},t.TEMPLATE=`<div>
            <ag-group-component ref="axisTicksGroup">
                <ag-color-picker ref="axisTicksColorPicker"></ag-color-picker>
                <ag-slider ref="axisTicksWidthSlider"></ag-slider>
                <ag-slider ref="axisTicksSizeSlider"></ag-slider>
            </ag-group-component>
        </div>`,go([B("axisTicksGroup")],t.prototype,"axisTicksGroup",void 0),go([B("axisTicksColorPicker")],t.prototype,"axisTicksColorPicker",void 0),go([B("axisTicksWidthSlider")],t.prototype,"axisTicksWidthSlider",void 0),go([B("axisTicksSizeSlider")],t.prototype,"axisTicksSizeSlider",void 0),go([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),go([te],t.prototype,"init",null),t}(oe),oD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ma=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},wy=function(o){oD(t,o);function t(e){var r=o.call(this,e,t.TEMPLATE)||this;return r.radius=0,r.offsetX=0,r.offsetY=0,r}return t.prototype.postConstruct=function(){var e=this;o.prototype.postConstruct.call(this),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:function(r){e.parentCircleRect=e.eParentCircle.getBoundingClientRect()},onDragging:function(r){return e.calculateAngleDrag(r)},onDragStop:function(){}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(""+this.degrees).onValueChange(function(r){(r==null||r==="")&&(r="0"),r=e.eAngleValue.normalizeValue(r);var n=parseFloat(r);n>180&&(n=n-360),e.setValue(n)}),this.updateNumberInput(),E.exists(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,V.EVENT_FIELD_VALUE_CHANGED,function(){var r=e.gridOptionsService.getDocument();e.eAngleValue.getInputElement().contains(r.activeElement)||e.updateNumberInput()})},t.prototype.updateNumberInput=function(){var e=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(e.toString())},t.prototype.positionChildCircle=function(e){var r=this.parentCircleRect||{width:24,height:24},n=this.eChildCircle,i=r.width/2,a=r.height/2;n.style.left=i+Math.cos(e)*8+"px",n.style.top=a+Math.sin(e)*8+"px"},t.prototype.calculatePolar=function(){var e=this.offsetX,r=this.offsetY,n=Math.atan2(r,e);this.degrees=this.toDegrees(n),this.radius=Math.sqrt(e*e+r*r),this.positionChildCircle(n)},t.prototype.calculateCartesian=function(){var e=this.toRadians(this.getValue()),r=this.getRadius();this.setOffsetX(Math.cos(e)*r).setOffsetY(Math.sin(e)*r)},t.prototype.setOffsetX=function(e){return this.offsetX!==e&&(this.offsetX=e,this.calculatePolar()),this},t.prototype.setOffsetY=function(e){return this.offsetY!==e&&(this.offsetY=e,this.calculatePolar()),this},t.prototype.calculateAngleDrag=function(e){var r=this.parentCircleRect,n=r.width/2,i=r.height/2,a=e.clientX-r.left,s=e.clientY-r.top,l=a-n,u=s-i,c=Math.atan2(u,l);this.setValue(c,!0)},t.prototype.toDegrees=function(e){return e/Math.PI*180},t.prototype.toRadians=function(e){return e/180*Math.PI},t.prototype.normalizeNegativeValue=function(e){return e<0?360+e:e},t.prototype.normalizeAngle180=function(e){return e%=Math.PI*2,e<-Math.PI?e+=Math.PI*2:e>=Math.PI&&(e-=Math.PI*2),e},t.prototype.getRadius=function(){return this.radius},t.prototype.setRadius=function(e){return this.radius===e?this:(this.radius=e,this.calculateCartesian(),this)},t.prototype.onValueChange=function(e){var r=this;return this.addManagedListener(this,V.EVENT_FIELD_VALUE_CHANGED,function(){e(r.degrees)}),this},t.prototype.getValue=function(e){return e?this.toRadians(this.degrees):this.degrees},t.prototype.setValue=function(e,r){var n;return r?n=e:n=this.normalizeAngle180(this.toRadians(e)),e=this.toDegrees(n),this.degrees!==e&&(this.degrees=Math.floor(e),this.calculateCartesian(),this.positionChildCircle(n),this.dispatchEvent({type:V.EVENT_FIELD_VALUE_CHANGED})),this},t.prototype.setWidth=function(e){return E.setFixedWidth(this.getGui(),e),this},t.prototype.setDisabled=function(e){return o.prototype.setDisabled.call(this,e),this.eAngleValue.setDisabled(e),this},t.prototype.destroy=function(){this.dragService.removeDragSource(this.dragListener),o.prototype.destroy.call(this)},t.TEMPLATE=`<div class="ag-angle-select">
            <div ref="eLabel"></div>
            <div class="ag-wrapper ag-angle-select-wrapper">
                <div ref="eAngleSelectField" class="ag-angle-select-field">
                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">
                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>
                    </div>
                </div>
                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>
            </div>
        </div>`,Ma([B("eLabel")],t.prototype,"eLabel",void 0),Ma([B("eParentCircle")],t.prototype,"eParentCircle",void 0),Ma([B("eChildCircle")],t.prototype,"eChildCircle",void 0),Ma([B("eAngleValue")],t.prototype,"eAngleValue",void 0),Ma([D("dragService")],t.prototype,"dragService",void 0),t}(im),aD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ra=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},sD=function(o){aD(t,o);function t(e){var r=e.chartController,n=e.chartOptionsService,i=e.isExpandedOnInit,a=i===void 0?!1:i,s=o.call(this)||this;return s.activePanels=[],s.axisLabelUpdateFuncs=[],s.prevXRotation=0,s.prevYRotation=0,s.chartController=r,s.chartOptionsService=n,s.isExpandedOnInit=a,s}return t.prototype.init=function(){var e=this,r={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{axisGroup:r}),this.initAxis(),this.initAxisTicks(),this.initAxisLabels();var n=function(){return e.axisLabelUpdateFuncs.forEach(function(i){return i()})};this.addManagedListener(this.chartController,_r.EVENT_CHART_UPDATED,n)},t.prototype.initAxis=function(){var e=this;this.axisGroup.setTitle(this.translate("axis")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.axisColorInput.setLabel(this.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("line.color")).onValueChange(function(n){return e.chartOptionsService.setAxisProperty("line.color",n)});var r=this.chartOptionsService.getAxisProperty("line.width");this.axisLineWidthSlider.setMaxValue(gt(r,10)).setLabel(this.translate("thickness")).setTextFieldWidth(45).setValue(""+r).onValueChange(function(n){return e.chartOptionsService.setAxisProperty("line.width",n)})},t.prototype.initAxisTicks=function(){var e=this.createBean(new iD(this.chartOptionsService));this.axisGroup.addItem(e),this.activePanels.push(e)},t.prototype.initAxisLabels=function(){var e=this,r={family:this.chartOptionsService.getAxisProperty("label.fontFamily"),style:this.chartOptionsService.getAxisProperty("label.fontStyle"),weight:this.chartOptionsService.getAxisProperty("label.fontWeight"),size:this.chartOptionsService.getAxisProperty("label.fontSize"),color:this.chartOptionsService.getAxisProperty("label.color")},n=function(s){s.family&&e.chartOptionsService.setAxisProperty("label.fontFamily",s.family),s.weight&&e.chartOptionsService.setAxisProperty("label.fontWeight",s.weight),s.style&&e.chartOptionsService.setAxisProperty("label.fontStyle",s.style),s.size&&e.chartOptionsService.setAxisProperty("label.fontSize",s.size),s.color&&e.chartOptionsService.setAxisProperty("label.color",s.color)},i={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,initialFont:r,setFont:n},a=this.createBean(new ps(i));this.axisGroup.addItem(a),this.activePanels.push(a),this.addAdditionalLabelComps(a)},t.prototype.addAdditionalLabelComps=function(e){this.addLabelPadding(e);var r=this.createRotationWidgets(),n=r.xRotationComp,i=r.yRotationComp,a=this.initLabelRotations(n,i);e.addCompToPanel(a),e.addCompToPanel(n),e.addCompToPanel(i)},t.prototype.initLabelRotations=function(e,r){var n=this,i=function(d){return n.chartOptionsService.getLabelRotation(d)},a=function(d,h){n.chartOptionsService.setLabelRotation(d,h)},s=function(d){n.chartOptionsService.setAxisProperty("label.autoRotate",d),d?(n.prevXRotation=i("xAxis"),n.prevYRotation=i("yAxis"),a("xAxis",void 0),a("yAxis",void 0)):(a("xAxis",n.prevXRotation),a("yAxis",n.prevYRotation)),e.setDisabled(d),r.setDisabled(d)},l=function(){var d=i("xAxis"),h=i("yAxis");return d==null&&h==null?n.chartOptionsService.getAxisProperty("label.autoRotate"):!1},u=l(),c=this.createBean(new jc).setLabel(this.translate("autoRotate")).setValue(u).onValueChange(s);return e.setDisabled(u),r.setDisabled(u),c},t.prototype.createRotationWidgets=function(){var e=this,r=String.fromCharCode(176),n=function(i,a){var s=e.chartTranslationService.translate(i)+" "+r,l=e.chartOptionsService.getLabelRotation(a),u=new wy().setLabel(s).setLabelWidth("flex").setValue(l||0).onValueChange(function(c){return e.chartOptionsService.setLabelRotation(a,c)});return e.axisLabelUpdateFuncs.push(function(){var c=e.chartOptionsService.getLabelRotation(a);u.setValue(c||0)}),e.createBean(u)};return{xRotationComp:n("xRotation","xAxis"),yRotationComp:n("yRotation","yAxis")}},t.prototype.addLabelPadding=function(e){var r=this,n=this.createBean(new sn),i=this.chartOptionsService.getAxisProperty("label.padding");n.setLabel(this.chartTranslationService.translate("padding")).setMaxValue(gt(i,30)).setValue(""+i).setTextFieldWidth(45).onValueChange(function(a){return r.chartOptionsService.setAxisProperty("label.padding",a)}),e.addCompToPanel(n)},t.prototype.translate=function(e,r){return this.chartTranslationService.translate(e,r)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){E.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),o.prototype.destroy.call(this)},t.TEMPLATE=`<div>
            <ag-group-component ref="axisGroup">
                <ag-color-picker ref="axisColorInput"></ag-color-picker>
                <ag-slider ref="axisLineWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`,Ra([B("axisGroup")],t.prototype,"axisGroup",void 0),Ra([B("axisColorInput")],t.prototype,"axisColorInput",void 0),Ra([B("axisLineWidthSlider")],t.prototype,"axisLineWidthSlider",void 0),Ra([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Ra([te],t.prototype,"init",null),t}(oe),lD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ul=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},uD=function(o){lD(t,o);function t(e){var r=e.chartOptionsService,n=e.isExpandedOnInit,i=n===void 0?!1:n,a=o.call(this)||this;return a.chartOptionsService=r,a.isExpandedOnInit=i,a}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{navigatorGroup:e}),this.initNavigator()},t.prototype.initNavigator=function(){var e=this,r=this.chartTranslationService;this.navigatorGroup.setTitle(r.translate("navigator")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("navigator.enabled")||!1).onEnableChange(function(i){e.chartOptionsService.setChartOption("navigator.enabled",i),e.navigatorGroup.toggleGroupExpand(!0)}).toggleGroupExpand(this.isExpandedOnInit);var n=this.chartOptionsService.getChartOption("navigator.height");this.navigatorHeightSlider.setLabel(r.translate("height")).setMinValue(10).setMaxValue(gt(n,60)).setTextFieldWidth(45).setValue(""+(n||30)).onValueChange(function(i){return e.chartOptionsService.setChartOption("navigator.height",i)})},t.prototype.destroy=function(){o.prototype.destroy.call(this)},t.TEMPLATE=`<div>
            <ag-group-component ref="navigatorGroup">
                <ag-slider ref="navigatorHeightSlider"></ag-slider>
            </ag-group-component>
        </div>`,ul([B("navigatorGroup")],t.prototype,"navigatorGroup",void 0),ul([B("navigatorHeightSlider")],t.prototype,"navigatorHeightSlider",void 0),ul([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),ul([te],t.prototype,"init",null),t}(oe),cD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ii=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},dD=function(o){cD(t,o);function t(e,r){var n=o.call(this)||this;return n.chartOptionsService=e,n.chartController=r,n}return t.prototype.init=function(){var e=this,r={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(t.TEMPLATE,{chartPaddingGroup:r}),this.addManagedListener(this.eventService,V.EVENT_CHART_OPTIONS_CHANGED,function(n){e.updateTopPadding(n.chartOptions)}),this.initGroup(),this.initChartPaddingItems()},t.prototype.initGroup=function(){this.chartPaddingGroup.setTitle(this.chartTranslationService.translate("padding")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0)},t.prototype.initChartPaddingItems=function(){var e=this,r=function(n,i){var a=e.chartOptionsService.getChartOption("padding."+n);i.setLabel(e.chartTranslationService.translate(n)).setMaxValue(gt(a,200)).setValue(""+a).setTextFieldWidth(45).onValueChange(function(s){return e.chartOptionsService.setChartOption("padding."+n,s)})};r("top",this.paddingTopSlider),r("right",this.paddingRightSlider),r("bottom",this.paddingBottomSlider),r("left",this.paddingLeftSlider)},t.prototype.updateTopPadding=function(e){var r,n,i=this.chartController.getChartSeriesTypes()[0],a=(n=(r=e[i])===null||r===void 0?void 0:r.padding)===null||n===void 0?void 0:n.top;a!=null&&this.paddingTopSlider.setValue(a)},t.TEMPLATE=`<div>
            <ag-group-component ref="chartPaddingGroup">
                <ag-slider ref="paddingTopSlider"></ag-slider>
                <ag-slider ref="paddingRightSlider"></ag-slider>
                <ag-slider ref="paddingBottomSlider"></ag-slider>
                <ag-slider ref="paddingLeftSlider"></ag-slider>
            </ag-group-component>
        <div>`,ii([B("chartPaddingGroup")],t.prototype,"chartPaddingGroup",void 0),ii([B("paddingTopSlider")],t.prototype,"paddingTopSlider",void 0),ii([B("paddingRightSlider")],t.prototype,"paddingRightSlider",void 0),ii([B("paddingBottomSlider")],t.prototype,"paddingBottomSlider",void 0),ii([B("paddingLeftSlider")],t.prototype,"paddingLeftSlider",void 0),ii([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),ii([te],t.prototype,"init",null),t}(oe),hD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),cl=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},fD=function(o){hD(t,o);function t(e){var r=o.call(this)||this;return r.chartOptionsService=e,r}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(t.TEMPLATE,{chartBackgroundGroup:e}),this.initGroup(),this.initColorPicker()},t.prototype.initGroup=function(){var e=this;this.group.setTitle(this.chartTranslationService.translate("background")).setEnabled(this.chartOptionsService.getChartOption("background.visible")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange(function(r){return e.chartOptionsService.setChartOption("background.visible",r)})},t.prototype.initColorPicker=function(){var e=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getChartOption("background.fill")).onValueChange(function(r){return e.chartOptionsService.setChartOption("background.fill",r)})},t.TEMPLATE=`<div>
            <ag-group-component ref="chartBackgroundGroup">
                <ag-color-picker ref="colorPicker"></ag-color-picker>
            </ag-group-component>
        <div>`,cl([B("chartBackgroundGroup")],t.prototype,"group",void 0),cl([B("colorPicker")],t.prototype,"colorPicker",void 0),cl([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),cl([te],t.prototype,"init",null),t}(oe),pD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_p=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},vD=function(o){pD(t,o);function t(e){var r=o.call(this,t.TEMPLATE)||this;return r.chartOptionsService=e,r.activePanels=[],r}return t.prototype.init=function(){this.initFontPanel(),this.titlePlaceholder=this.chartTranslationService.translate("titlePlaceholder")},t.prototype.hasTitle=function(){var e=this.getOption("title");return e&&e.enabled&&e.text&&e.text.length>0},t.prototype.initFontPanel=function(){var e=this,r=this.hasTitle(),n=function(l,u){l.family&&e.setOption("title.fontFamily",l.family,u),l.weight&&e.setOption("title.fontWeight",l.weight,u),l.style&&e.setOption("title.fontStyle",l.style,u),l.size&&e.setOption("title.fontSize",l.size,u),l.color&&e.setOption("title.color",l.color,u)},i={family:this.getOption("title.fontFamily"),style:this.getOption("title.fontStyle"),weight:this.getOption("title.fontWeight"),size:this.getOption("title.fontSize"),color:this.getOption("title.color")};r||n(i,!0);var a={name:this.chartTranslationService.translate("title"),enabled:r,suppressEnabledCheckbox:!1,initialFont:i,setFont:n,setEnabled:function(l){if(e.toolbarExists()){var u=e.getOption("padding.top");e.setOption("padding.top",l?u-20:u+20)}e.setOption("title.enabled",l);var c=e.getOption("title.text"),d=c==="Title"||(c==null?void 0:c.trim().length)===0;l&&d&&e.setOption("title.text",e.titlePlaceholder)}},s=this.createBean(new ps(a));s.addItemToPanel(this.createSpacingSlicer()),this.getGui().appendChild(s.getGui()),this.activePanels.push(s),this.addManagedListener(this.eventService,"chartTitleEdit",function(){s.setEnabled(e.hasTitle())})},t.prototype.createSpacingSlicer=function(){var e=this,r=this.createBean(new sn),n=this.chartOptionsService.getChartOption("title.spacing");return r.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(Math.max(n,100)).setValue(""+n).setTextFieldWidth(45).onValueChange(function(i){return e.chartOptionsService.setChartOption("title.spacing",i)}),r},t.prototype.toolbarExists=function(){var e=this.gridOptionsService.getCallback("getChartToolbarItems");if(!e)return!0;var r={defaultItems:["chartUnlink","chartDownload"]},n=["chartLink","chartUnlink","chartDownload"];return n.some(function(i){var a;return(a=e&&e(r))===null||a===void 0?void 0:a.includes(i)})},t.prototype.getOption=function(e){return this.chartOptionsService.getChartOption(e)},t.prototype.setOption=function(e,r,n){this.chartOptionsService.setChartOption(e,r,n)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){E.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),o.prototype.destroy.call(this)},t.TEMPLATE="<div></div>",_p([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),_p([te],t.prototype,"init",null),t}(oe),gD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),bc=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},yD=function(o){gD(t,o);function t(e){var r=e.chartController,n=e.chartOptionsService,i=e.isExpandedOnInit,a=i===void 0?!1:i,s=o.call(this)||this;return s.activePanels=[],s.chartController=r,s.chartOptionsService=n,s.isExpandedOnInit=a,s}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{chartGroup:e}),this.initGroup(),this.initTitles(),this.initPaddingPanel(),this.initBackgroundPanel()},t.prototype.initGroup=function(){this.chartGroup.setTitle(this.chartTranslationService.translate("chart")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0)},t.prototype.initTitles=function(){var e=this.createBean(new vD(this.chartOptionsService));this.chartGroup.addItem(e),this.activePanels.push(e)},t.prototype.initPaddingPanel=function(){var e=this.createBean(new dD(this.chartOptionsService,this.chartController));this.chartGroup.addItem(e),this.activePanels.push(e)},t.prototype.initBackgroundPanel=function(){var e=this.createBean(new fD(this.chartOptionsService));this.chartGroup.addItem(e),this.activePanels.push(e)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){E.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),o.prototype.destroy.call(this)},t.TEMPLATE=`<div>
            <ag-group-component ref="chartGroup"></ag-group-component>
        </div>`,bc([B("chartGroup")],t.prototype,"chartGroup",void 0),bc([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),bc([te],t.prototype,"init",null),t}(oe),mD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),oi=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},SD=function(o){mD(t,o);function t(e,r){var n=o.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=r,n}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(t.TEMPLATE,{shadowGroup:e}),this.shadowBlurSlider.setTextFieldWidth(45),this.shadowXOffsetSlider.setTextFieldWidth(45),this.shadowYOffsetSlider.setTextFieldWidth(45),this.initSeriesShadow()},t.prototype.initSeriesShadow=function(){var e=this;this.shadowGroup.setTitle(this.chartTranslationService.translate("shadow")).setEnabled(this.chartOptionsService.getSeriesOption("shadow.enabled",this.getSelectedSeries())).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange(function(n){return e.chartOptionsService.setSeriesOption("shadow.enabled",n,e.getSelectedSeries())}),this.shadowColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getSeriesOption("shadow.color",this.getSelectedSeries())).onValueChange(function(n){return e.chartOptionsService.setSeriesOption("shadow.color",n,e.getSelectedSeries())});var r=function(n,i,a,s){var l=e.chartOptionsService.getSeriesOption("shadow."+i,e.getSelectedSeries());n.setLabel(e.chartTranslationService.translate(i)).setMinValue(a).setMaxValue(gt(l,s)).setValue(""+l).onValueChange(function(u){return e.chartOptionsService.setSeriesOption("shadow."+i,u,e.getSelectedSeries())})};r(this.shadowBlurSlider,"blur",0,20),r(this.shadowXOffsetSlider,"xOffset",-10,10),r(this.shadowYOffsetSlider,"yOffset",-10,10)},t.TEMPLATE=`<div>
            <ag-group-component ref="shadowGroup">
                <ag-color-picker ref="shadowColorPicker"></ag-color-picker>
                <ag-slider ref="shadowBlurSlider"></ag-slider>
                <ag-slider ref="shadowXOffsetSlider"></ag-slider>
                <ag-slider ref="shadowYOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`,oi([B("shadowGroup")],t.prototype,"shadowGroup",void 0),oi([B("shadowColorPicker")],t.prototype,"shadowColorPicker",void 0),oi([B("shadowBlurSlider")],t.prototype,"shadowBlurSlider",void 0),oi([B("shadowXOffsetSlider")],t.prototype,"shadowXOffsetSlider",void 0),oi([B("shadowYOffsetSlider")],t.prototype,"shadowYOffsetSlider",void 0),oi([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),oi([te],t.prototype,"init",null),t}(oe);function Op(o){var t=o.labelName,e=o.chartOptionsService,r=o.getSelectedSeries,n=o.seriesOptionLabelProperty,i=function(d){return n+"."+d},a=function(d){var h=i(d);return e.getSeriesOption(h,r())},s=function(d,h){var f=i(d);e.setSeriesOption(f,h,r())},l={family:a("fontFamily"),style:a("fontStyle"),weight:a("fontWeight"),size:a("fontSize"),color:a("color")},u=function(d){d.family&&s("fontFamily",d.family),d.weight&&s("fontWeight",d.weight),d.style&&s("fontStyle",d.style),d.size&&s("fontSize",d.size),d.color&&s("color",d.color)},c={name:t,enabled:a("enabled")||!1,setEnabled:function(d){return s("enabled",d)},suppressEnabledCheckbox:!1,initialFont:l,setFont:u};return c}var CD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ai=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},xD=function(o){CD(t,o);function t(e,r){var n=o.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=r,n}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-sub-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{seriesMarkersGroup:e}),this.initMarkers()},t.prototype.initMarkers=function(){var e=this,r=[{value:"square",text:"Square"},{value:"circle",text:"Circle"},{value:"cross",text:"Cross"},{value:"diamond",text:"Diamond"},{value:"plus",text:"Plus"},{value:"triangle",text:"Triangle"},{value:"heart",text:"Heart"}];this.seriesMarkerShapeSelect.addOptions(r).setLabel(this.chartTranslationService.translate("shape")).setValue(this.getSeriesOption("marker.shape")).onValueChange(function(s){return e.setSeriesOption("marker.shape",s)});var n=this.chartOptionsService.getChartType(),i=E.includes(["scatter","bubble"],n);this.seriesMarkersGroup.setTitle(this.chartTranslationService.translate("markers")).hideEnabledCheckbox(i).setEnabled(this.getSeriesOption("marker.enabled")||!1).hideOpenCloseIcons(!0).onEnableChange(function(s){return e.setSeriesOption("marker.enabled",s)});var a=function(s,l,u,c){var d=e.getSeriesOption(s);l.setLabel(e.chartTranslationService.translate(u)).setMaxValue(gt(d,c)).setValue(""+d).setTextFieldWidth(45).onValueChange(function(h){return e.setSeriesOption(s,h)})};n==="bubble"?(a("marker.maxSize",this.seriesMarkerMinSizeSlider,"maxSize",60),a("marker.size",this.seriesMarkerSizeSlider,"minSize",60)):(this.seriesMarkerMinSizeSlider.setDisplayed(!1),a("marker.size",this.seriesMarkerSizeSlider,"size",60)),a("marker.strokeWidth",this.seriesMarkerStrokeWidthSlider,"strokeWidth",10)},t.prototype.getSeriesOption=function(e){return this.chartOptionsService.getSeriesOption(e,this.getSelectedSeries())},t.prototype.setSeriesOption=function(e,r){this.chartOptionsService.setSeriesOption(e,r,this.getSelectedSeries())},t.TEMPLATE=`<div>
            <ag-group-component ref="seriesMarkersGroup">
                <ag-select ref="seriesMarkerShapeSelect"></ag-select>
                <ag-slider ref="seriesMarkerMinSizeSlider"></ag-slider>
                <ag-slider ref="seriesMarkerSizeSlider"></ag-slider>
                <ag-slider ref="seriesMarkerStrokeWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`,ai([B("seriesMarkersGroup")],t.prototype,"seriesMarkersGroup",void 0),ai([B("seriesMarkerShapeSelect")],t.prototype,"seriesMarkerShapeSelect",void 0),ai([B("seriesMarkerSizeSlider")],t.prototype,"seriesMarkerSizeSlider",void 0),ai([B("seriesMarkerMinSizeSlider")],t.prototype,"seriesMarkerMinSizeSlider",void 0),ai([B("seriesMarkerStrokeWidthSlider")],t.prototype,"seriesMarkerStrokeWidthSlider",void 0),ai([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),ai([te],t.prototype,"init",null),t}(oe),wD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),yo=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},bD=function(o){wD(t,o);function t(e,r){var n=o.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=r,n}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-sub-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{calloutGroup:e}),this.initCalloutOptions()},t.prototype.initCalloutOptions=function(){var e=this;this.calloutGroup.setTitle(this.chartTranslationService.translate("callout")).setEnabled(!0).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0);var r=function(n,i,a,s){var l=e.chartOptionsService.getSeriesOption(n,e.getSelectedSeries());i.setLabel(e.chartTranslationService.translate(a)).setMaxValue(gt(l,s)).setValue(""+l).setTextFieldWidth(45).onValueChange(function(u){return e.chartOptionsService.setSeriesOption(n,u,e.getSelectedSeries())})};r("calloutLine.length",this.calloutLengthSlider,"length",40),r("calloutLine.strokeWidth",this.calloutStrokeWidthSlider,"strokeWidth",10),r("calloutLabel.offset",this.labelOffsetSlider,"offset",30)},t.TEMPLATE=`<div>
            <ag-group-component ref="calloutGroup">
                <ag-slider ref="calloutLengthSlider"></ag-slider>
                <ag-slider ref="calloutStrokeWidthSlider"></ag-slider>
                <ag-slider ref="labelOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`,yo([B("calloutGroup")],t.prototype,"calloutGroup",void 0),yo([B("calloutLengthSlider")],t.prototype,"calloutLengthSlider",void 0),yo([B("calloutStrokeWidthSlider")],t.prototype,"calloutStrokeWidthSlider",void 0),yo([B("labelOffsetSlider")],t.prototype,"labelOffsetSlider",void 0),yo([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),yo([te],t.prototype,"init",null),t}(oe),_D=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_c=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},OD=function(o){_D(t,o);function t(e){var r=e.chartController,n=e.chartOptionsService,i=e.seriesType,a=e.isExpandedOnInit,s=a===void 0?!1:a,l=o.call(this)||this;return l.activePanels=[],l.widgetFuncs={lineWidth:function(){return l.initLineWidth()},strokeWidth:function(){return l.initStrokeWidth()},lineDash:function(){return l.initLineDash()},lineOpacity:function(){return l.initLineOpacity()},fillOpacity:function(){return l.initFillOpacity()},markers:function(){return l.initMarkers()},labels:function(){return l.initLabels()},shadow:function(){return l.initShadow()},tooltips:function(){return l.initTooltips()},bins:function(){return l.initBins()}},l.seriesWidgetMappings={area:["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],bar:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],column:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],line:["tooltips","lineWidth","lineDash","lineOpacity","markers","labels"],histogram:["tooltips","bins","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],scatter:["tooltips","markers","labels"],pie:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"]},l.chartController=r,l.chartOptionsService=n,l.seriesType=i||l.getChartSeriesType(),l.isExpandedOnInit=s,l}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{seriesGroup:e}),this.seriesGroup.setTitle(this.translate("series")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.addManagedListener(this.chartController,_r.EVENT_CHART_SERIES_CHART_TYPE_CHANGED,this.refreshWidgets.bind(this)),this.refreshWidgets()},t.prototype.refreshWidgets=function(){var e=this;this.destroyActivePanels();var r=this.chartController.getChartProxy().getChart();r.waitForUpdate().then(function(){e.chartController.isComboChart()&&(e.updateSeriesType(),e.initSeriesSelect()),e.seriesWidgetMappings[e.seriesType].forEach(function(n){return e.widgetFuncs[n]()})}).catch(function(n){return console.error("AG Grid - chart rendering failed",n)})},t.prototype.initSeriesSelect=function(){var e=this,r=this.seriesGroup.createManagedBean(new Id);r.setLabel(this.translate("seriesType")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(100).addOptions(this.getSeriesSelectOptions()).setValue(""+this.seriesType).onValueChange(function(n){e.seriesType=n,e.refreshWidgets()}),this.seriesGroup.addItem(r),this.activePanels.push(r)},t.prototype.initTooltips=function(){var e=this,r=this.createBean(new bv);r.setLabel(this.translate("tooltips")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.getSeriesOption("tooltip.enabled")||!1).onValueChange(function(n){return e.setSeriesOption("tooltip.enabled",n)}),this.addWidget(r)},t.prototype.initStrokeWidth=function(){var e=this,r=this.getSeriesOption("strokeWidth"),n=this.createBean(new sn);n.setLabel(this.translate("strokeWidth")).setMaxValue(gt(r,10)).setTextFieldWidth(45).setValue(""+r).onValueChange(function(i){return e.setSeriesOption("strokeWidth",i)}),this.addWidget(n)},t.prototype.initLineWidth=function(){var e=this,r=this.getSeriesOption("strokeWidth"),n=this.createBean(new sn);n.setLabel(this.translate("lineWidth")).setMaxValue(gt(r,10)).setTextFieldWidth(45).setValue(""+r).onValueChange(function(i){return e.setSeriesOption("strokeWidth",i)}),this.addWidget(n)},t.prototype.initLineDash=function(){var e=this,r=this.getSeriesOption("lineDash"),n=r?r[0]:0,i=this.createBean(new sn);i.setLabel(this.translate("lineDash")).setMaxValue(gt(n,30)).setTextFieldWidth(45).setValue(""+n).onValueChange(function(a){return e.setSeriesOption("lineDash",[a])}),this.addWidget(i)},t.prototype.initLineOpacity=function(){var e=this,r=this.getSeriesOption("strokeOpacity"),n=this.createBean(new sn);n.setLabel(this.translate("strokeOpacity")).setStep(.05).setMaxValue(gt(r,1)).setTextFieldWidth(45).setValue(""+r).onValueChange(function(i){return e.setSeriesOption("strokeOpacity",i)}),this.addWidget(n)},t.prototype.initFillOpacity=function(){var e=this,r=this.getSeriesOption("fillOpacity"),n=this.createBean(new sn);n.setLabel(this.translate("fillOpacity")).setStep(.05).setMaxValue(gt(r,1)).setTextFieldWidth(45).setValue(""+r).onValueChange(function(i){return e.setSeriesOption("fillOpacity",i)}),this.addWidget(n)},t.prototype.initLabels=function(){var e=this,r=this.seriesType==="pie"?"calloutLabel":"label",n=this.seriesType==="pie"?this.chartTranslationService.translate("calloutLabels"):this.chartTranslationService.translate("labels"),i=Op({labelName:n,chartOptionsService:this.chartOptionsService,getSelectedSeries:function(){return e.seriesType},seriesOptionLabelProperty:r}),a=this.createBean(new ps(i));if(this.seriesType==="pie"){var s=this.createBean(new bD(this.chartOptionsService,function(){return e.seriesType}));a.addCompToPanel(s),this.activePanels.push(s)}if(this.addWidget(a),this.seriesType==="pie"){var l=Op({labelName:this.chartTranslationService.translate("sectorLabels"),chartOptionsService:this.chartOptionsService,getSelectedSeries:function(){return e.seriesType},seriesOptionLabelProperty:"sectorLabel"}),u=this.createBean(new ps(l)),c=this.getSectorLabelPositionRatio();u.addCompToPanel(c),this.addWidget(u)}},t.prototype.getSectorLabelPositionRatio=function(){var e=this,r="sectorLabel.positionRatio",n=this.chartOptionsService.getSeriesOption(r,this.seriesType),i=this.createBean(new sn);return i.setLabel(this.translate("positionRatio")).setStep(.05).setMaxValue(gt(n,1)).setTextFieldWidth(45).setValue(""+n).onValueChange(function(a){return e.chartOptionsService.setSeriesOption(r,a,e.seriesType)})},t.prototype.initShadow=function(){var e=this,r=this.createBean(new SD(this.chartOptionsService,function(){return e.seriesType}));this.addWidget(r)},t.prototype.initMarkers=function(){var e=this,r=this.createBean(new xD(this.chartOptionsService,function(){return e.seriesType}));this.addWidget(r)},t.prototype.initBins=function(){var e=this,r,n=((r=this.getSeriesOption("bins"))!==null&&r!==void 0?r:this.getSeriesOption("calculatedBins")).length,i=this.createBean(new sn);i.setLabel(this.translate("histogramBinCount")).setMinValue(0).setMaxValue(gt(n,20)).setTextFieldWidth(45).setValue(""+n).onValueChange(function(a){return e.setSeriesOption("binCount",a)}),this.addWidget(i)},t.prototype.addWidget=function(e){this.seriesGroup.addItem(e),this.activePanels.push(e)},t.prototype.getSeriesOption=function(e){return this.chartOptionsService.getSeriesOption(e,this.seriesType)},t.prototype.setSeriesOption=function(e,r){this.chartOptionsService.setSeriesOption(e,r,this.seriesType)},t.prototype.getChartSeriesType=function(){if(this.chartController.getSeriesChartTypes().length===0)return"column";var e=this.chartController.getSeriesChartTypes()[0].chartType;return e==="columnLineCombo"?"column":e==="areaColumnCombo"?"area":sr(e)},t.prototype.getSeriesSelectOptions=function(){var e=this;this.seriesSelectOptions||(this.seriesSelectOptions=new Map([["area",{value:"area",text:this.translate("area","Area")}],["bar",{value:"bar",text:this.translate("bar","Bar")}],["column",{value:"column",text:this.translate("column","Column")}],["line",{value:"line",text:this.translate("line","Line")}],["scatter",{value:"scatter",text:this.translate("scatter","Scatter")}],["histogram",{value:"histogram",text:this.translate("histogram","Histogram")}],["pie",{value:"pie",text:this.translate("pie","Pie")}]]));var r=new Set;return this.chartController.getActiveSeriesChartTypes().forEach(function(n){var i=sr(n.chartType);r.add(e.seriesSelectOptions.get(i))}),Array.from(r)},t.prototype.updateSeriesType=function(){var e=this.chartController.getActiveSeriesChartTypes().map(function(n){return sr(n.chartType)}),r=!e.includes(this.seriesType);r&&e.length>0&&(this.seriesType=e[0])},t.prototype.translate=function(e,r){return this.chartTranslationService.translate(e,r)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){E.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),o.prototype.destroy.call(this)},t.TEMPLATE=`<div>
            <ag-group-component ref="seriesGroup">
            </ag-group-component>
        </div>`,_c([B("seriesGroup")],t.prototype,"seriesGroup",void 0),_c([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),_c([te],t.prototype,"init",null),t}(oe),ED=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),TD=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i};function gt(o,t){return Math.max(o,t)}var PD={groups:[{type:"chart"},{type:"legend"},{type:"series"},{type:"axis"},{type:"navigator"}]},AD=function(o){ED(t,o);function t(e,r){var n=o.call(this,t.TEMPLATE)||this;return n.chartController=e,n.chartOptionsService=r,n.panels=[],n.isGroupPanelShownInSeries=function(i,a){var s=["chart","legend","series"];if(s.includes(i))return!0;var l=["axis","navigator"],u=["bar","column","line","area","scatter","histogram","cartesian"];return!!(l.includes(i)&&u.includes(a))},n}return t.prototype.init=function(){var e=this;this.createPanels(),this.addManagedListener(this.chartController,_r.EVENT_CHART_UPDATED,function(){return e.createPanels(!0)}),this.addManagedListener(this.chartController,_r.EVENT_CHART_API_UPDATE,function(){return e.createPanels(!1)})},t.prototype.createPanels=function(e){var r=this,n,i=this.chartController.getChartType(),a=this.chartController.isGrouping(),s=sr(i);e&&i===this.chartType&&a===this.isGrouping||(this.destroyPanels(),(n=this.getFormatPanelDef().groups)===null||n===void 0||n.forEach(function(l){var u=l.type;if(r.isGroupPanelShownInSeries(u,s)){var c={chartController:r.chartController,chartOptionsService:r.chartOptionsService,isExpandedOnInit:l.isOpen,seriesType:s};u==="chart"?r.addComponent(new yD(c)):u==="legend"?r.addComponent(new rD(c)):u==="axis"?r.addComponent(new sD(c)):u==="series"?r.addComponent(new OD(c)):u==="navigator"?r.addComponent(new uD(c)):console.warn("AG Grid: invalid charts format panel group name supplied: '"+l.type+"'")}}),this.chartType=i,this.isGrouping=a)},t.prototype.getFormatPanelDef=function(){var e,r=(e=this.gridOptionsService.get("chartToolPanelsDef"))===null||e===void 0?void 0:e.formatPanel;return r||PD},t.prototype.addComponent=function(e){this.createBean(e),this.panels.push(e),e.addCssClass("ag-chart-format-section"),this.getGui().appendChild(e.getGui())},t.prototype.destroyPanels=function(){var e=this;this.panels.forEach(function(r){E.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyPanels(),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-chart-format-wrapper"></div>',TD([te],t.prototype,"init",null),t}(oe),DD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ep=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},dh=function(o){DD(t,o);function t(e,r){var n=o.call(this)||this;n.size=58,n.padding=5,n.root=new le;var i=new Bd({document:window.document,width:n.size,height:n.size});return i.canvas.element.classList.add("ag-chart-mini-thumbnail-canvas"),i.root=n.root,i.container=e,n.scene=i,n.tooltipName=r,n}return t.prototype.init=function(){this.scene.canvas.element.title=this.chartTranslationService.translate(this.tooltipName),this.scene.render().catch(function(e){return console.error("AG Grid - chart update failed",e)})},Ep([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Ep([te],t.prototype,"init",null),t}(oe),MD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),RD=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},lr=function(o){MD(t,o);function t(e,r){var n=o.call(this,e,r)||this;return n.stroke="gray",n.axisOvershoot=3,n}return t.prototype.addAxes=function(){var e=this.size,r=this.padding,n=new nt;n.x1=r,n.y1=r,n.x2=r,n.y2=e-r+this.axisOvershoot,n.stroke=this.stroke;var i=new nt;i.x1=r-this.axisOvershoot+1,i.y1=e-r,i.x2=e-r+1,i.y2=e-r,i.stroke=this.stroke;var a=this.root;a.append(n),a.append(i)},RD([te],t.prototype,"addAxes",null),t}(dh);function bs(o){var t=o.stacked,e=o.size,r=o.padding,n=o.xScalePadding,i=o.xScaleDomain,a=o.yScaleDomain,s=new Lt;s.domain=i,s.range=[r,e-r],s.paddingInner=n,s.paddingOuter=n;var l=new it;l.domain=a,l.range=[e-r,r];var u=function(c,d,h){return c.map(function(f,p){var v=h.convert(f),g=new wr;return g.x=d.convert(p),g.y=v,g.width=d.bandwidth,g.height=h.convert(0)-v,g.strokeWidth=1,g.crisp=!0,g})};return t?o.data.map(function(c){return u(c,s,l)}):u(o.data,s,l)}function hh(o,t,e,r){var n=new it;n.domain=[0,4],n.range=[r,e-r];var i=new it;i.domain=[0,10],i.range=[e-r,r];var a=t.map(function(l){var u=new It;return u.strokeWidth=3,u.lineCap="round",u.fill=void 0,l.forEach(function(c,d){u.path[d>0?"lineTo":"moveTo"](n.convert(d),i.convert(c))}),u}),s=new le;return s.setClipRectInGroupCoordinateSpace(new Ee(r,r,e-r*2,e-r*2)),s.append(a),o.append(s),a}var ID=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),LD=function(o){ID(t,o);function t(e,r,n){var i=o.call(this,e,"groupedColumnTooltip")||this;i.columnData=[2,3,4];var a=i,s=a.root,l=a.columnData,u=a.size,c=a.padding;return i.columns=bs({stacked:!1,root:s,data:l,size:u,padding:c,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3}),s.append(i.columns),i.updateColors(r,n),i}return t.prototype.updateColors=function(e,r){this.columns.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]})},t.chartType="groupedColumn",t}(lr),FD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),by=function(o){FD(t,o);function t(e,r,n,i,a,s){i===void 0&&(i=t.data),a===void 0&&(a=[0,16]),s===void 0&&(s="stackedColumnTooltip");var l=o.call(this,e,s)||this,u=l,c=u.root,d=u.size,h=u.padding;return l.stackedColumns=bs({stacked:!0,root:c,data:i,size:d,padding:h,xScaleDomain:[0,1,2],yScaleDomain:a,xScalePadding:.3}),c.append([].concat.apply([],l.stackedColumns)),l.updateColors(r,n),l}return t.prototype.updateColors=function(e,r){this.stackedColumns.forEach(function(n,i){return n.forEach(function(a){a.fill=e[i],a.stroke=r[i]})})},t.chartType="stackedColumn",t.data=[[8,12,16],[6,9,12],[2,3,4]],t}(lr),kD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ND=function(o){kD(t,o);function t(e,r,n){return o.call(this,e,r,n,t.data,[0,10],"normalizedColumnTooltip")||this}return t.chartType="normalizedColumn",t.data=[[10,10,10],[6,7,8],[2,4,6]],t}(by),GD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),VD=function(o){GD(t,o);function t(e,r,n){var i=o.call(this,e,"groupedBarTooltip")||this,a=i.padding,s=i.size,l=[2,3,4],u=new Lt;u.domain=[0,1,2],u.range=[a,s-a],u.paddingInner=.3,u.paddingOuter=.3;var c=new it;c.domain=[0,4],c.range=[s-a,a];var d=c.convert(0),h=u.bandwidth;return i.bars=l.map(function(f,p){var v=new wr;return v.x=a,v.y=u.convert(p),v.width=d-c.convert(f),v.height=h,v.strokeWidth=1,v.crisp=!0,v}),i.updateColors(r,n),i.root.append(i.bars),i}return t.prototype.updateColors=function(e,r){this.bars.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]})},t.chartType="groupedBar",t}(lr),jD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_y=function(o){jD(t,o);function t(e,r,n,i,a,s){i===void 0&&(i=t.data),a===void 0&&(a=[0,16]),s===void 0&&(s="stackedBarTooltip");var l=o.call(this,e,s)||this,u=l.size,c=l.padding,d=new Lt;d.domain=[0,1,2],d.range=[c,u-c],d.paddingInner=.3,d.paddingOuter=.3;var h=new it;h.domain=a,h.range=[u-c,c];var f=h.convert(0),p=d.bandwidth;return l.bars=i.map(function(v){return v.map(function(g,m){var y=new wr;return y.x=c,y.y=d.convert(m),y.width=f-h.convert(g),y.height=p,y.strokeWidth=1,y.crisp=!0,y})}),l.updateColors(r,n),l.root.append([].concat.apply([],l.bars)),l}return t.prototype.updateColors=function(e,r){this.bars.forEach(function(n,i){return n.forEach(function(a){a.fill=e[i],a.stroke=r[i]})})},t.chartType="stackedBar",t.data=[[8,12,16],[6,9,12],[2,3,4]],t}(lr),BD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),HD=function(o){BD(t,o);function t(e,r,n){return o.call(this,e,r,n,t.data,[0,10],"normalizedBarTooltip")||this}return t.chartType="normalizedBar",t.data=[[10,10,10],[6,7,8],[2,4,6]],t}(_y),zD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),WD=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},er=or,Oy=function(o){zD(t,o);function t(e,r,n,i,a){i===void 0&&(i=.6),a===void 0&&(a="doughnutTooltip");var s=o.call(this,e,a)||this,l=(s.size-s.padding*2)/2,u=l+s.padding,c=[[er(-90),er(30)],[er(30),er(120)],[er(120),er(180)],[er(180),er(210)],[er(210),er(240)],[er(240),er(270)]];return s.sectors=c.map(function(d){var h=WD(d,2),f=h[0],p=h[1],v=new Lg;return v.centerX=u,v.centerY=u,v.innerRadius=l*i,v.outerRadius=l,v.startAngle=f,v.endAngle=p,v.stroke=void 0,v.strokeWidth=1,v}),s.updateColors(r,n),s.root.append(s.sectors),s}return t.prototype.updateColors=function(e,r){this.sectors.forEach(function(n,i){n.fill=e[i%e.length],n.stroke=r[i%r.length]})},t.chartType="doughnut",t}(dh),UD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),KD=function(o){UD(t,o);function t(e,r,n){return o.call(this,e,r,n,0,"pieTooltip")||this}return t.chartType="pie",t}(Oy),$D=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),XD=function(o){$D(t,o);function t(e,r,n){var i=o.call(this,e,"lineTooltip")||this;return i.data=[[9,7,8,5,6],[5,6,3,4,1],[1,3,4,8,7]],i.lines=hh(i.root,i.data,i.size,i.padding),i.updateColors(r,n),i}return t.prototype.updateColors=function(e,r){this.lines.forEach(function(n,i){n.stroke=e[i]})},t.chartType="line",t}(lr),YD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),qD=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},ZD=function(o){YD(t,o);function t(e,r,n){var i=o.call(this,e,"scatterTooltip")||this,a=i.size,s=i.padding,l=[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]],u=new it;u.domain=[-.5,4],u.range=[s*2,a-s];var c=new it;c.domain=[-.5,3.5],c.range=[a-s,s];var d=[];l.forEach(function(f){f.forEach(function(p){var v=qD(p,2),g=v[0],m=v[1],y=new yy;y.strokeWidth=1,y.centerX=u.convert(g),y.centerY=c.convert(m),y.radius=2.5,d.push(y)})}),i.points=d,i.updateColors(r,n);var h=new le;return h.setClipRectInGroupCoordinateSpace(new Ee(s,s,a-s*2,a-s*2)),h.append(i.points),i.root.append(h),i}return t.prototype.updateColors=function(e,r){this.points.forEach(function(n,i){n.stroke=r[i%r.length],n.fill=e[i%e.length]})},t.chartType="scatter",t}(lr),JD=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),QD=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},eM=function(o){JD(t,o);function t(e,r,n){var i=o.call(this,e,"bubbleTooltip")||this,a=i.size,s=i.padding,l=[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]],u=new it;u.domain=[0,1],u.range=[s*2,a-s];var c=new it;c.domain=[0,1],c.range=[a-s,s];var d=[];l.forEach(function(f){f.forEach(function(p){var v=QD(p,3),g=v[0],m=v[1],y=v[2],S=new yy;S.strokeWidth=1,S.centerX=u.convert(g),S.centerY=c.convert(m),S.radius=y,S.fillOpacity=.7,d.push(S)})}),i.points=d,i.updateColors(r,n);var h=new le;return h.setClipRectInGroupCoordinateSpace(new Ee(s,s,a-s*2,a-s*2)),h.append(i.points),i.root.append(h),i}return t.prototype.updateColors=function(e,r){this.points.forEach(function(n,i){n.stroke=r[i%r.length],n.fill=e[i%e.length]})},t.chartType="bubble",t}(lr),tM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),rM=function(o){tM(t,o);function t(e,r,n,i){i===void 0&&(i=t.data);var a=o.call(this,e,"groupedAreaTooltip")||this,s=a.size,l=a.padding,u=new Lt;u.domain=[0,1,2],u.paddingInner=1,u.paddingOuter=0,u.range=[l+.5,s-l-.5];var c=new it;c.domain=[0,6],c.range=[s-l+.5,l];var d=i.length,h=d*2-1,f=[],p=c.convert(0);return i.forEach(function(v,g){var m=u.convert(g);v.forEach(function(y,S){var C=c.convert(y),w=f[S]||(f[S]=[]);w[g]={x:m,y:C},w[h-g]={x:m,y:p}})}),a.areas=f.reverse().map(function(v){var g=new It;g.strokeWidth=1,g.fillOpacity=.7;var m=g.path;return m.clear(),v.forEach(function(y,S){return m[S>0?"lineTo":"moveTo"](y.x,y.y)}),m.closePath(),g}),a.updateColors(r,n),a.root.append(a.areas),a}return t.prototype.updateColors=function(e,r){this.areas.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]})},t.chartType="area",t.data=[[1,3,5],[2,6,4],[5,3,1]],t}(lr),nM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),gd=function(o){nM(t,o);function t(e,r,n,i,a){i===void 0&&(i=t.data),a===void 0&&(a="stackedAreaTooltip");var s=o.call(this,e,a)||this,l=s.size,u=s.padding,c=new Lt;c.domain=[0,1,2],c.paddingInner=1,c.paddingOuter=0,c.range=[u+.5,l-u-.5];var d=new it;d.domain=[0,16],d.range=[l-u+.5,u+.5];var h=i.length,f=h*2-1,p=[];return i.forEach(function(v,g){var m=c.convert(g),y=0;v.forEach(function(S,C){var w=d.convert(y+S),x=p[C]||(p[C]=[]);x[g]={x:m,y:w},x[f-g]={x:m,y:d.convert(y)},y+=S})}),s.areas=p.map(function(v){var g=new It;g.strokeWidth=1;var m=g.path;return m.clear(),v.forEach(function(y,S){return m[S>0?"lineTo":"moveTo"](y.x,y.y)}),m.closePath(),g}),s.updateColors(r,n),s.root.append(s.areas),s}return t.prototype.updateColors=function(e,r){this.areas.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]})},t.chartType="stackedArea",t.data=[[2,3,2],[3,6,5],[6,2,2]],t}(lr),iM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),oM=function(o){iM(t,o);function t(e,r,n,i){return i===void 0&&(i=t.data),o.call(this,e,r,n,i,"normalizedAreaTooltip")||this}return t.chartType="normalizedArea",t.data=gd.data.map(function(e){var r=e.reduce(function(n,i){return n+i},0);return e.map(function(n){return n/r*16})}),t}(gd),aM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tp=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},sM=function(o){aM(t,o);function t(e,r,n){var i=o.call(this,e,"histogramTooltip")||this,a=i.padding,s=i.size,l=[2,5,11,13,10,6,1],u=new it;u.domain=[0,l.length],u.range=[a,s-a];var c=new it;c.domain=[0,l.reduce(function(h,f){return Math.max(h,f)},0)],c.range=[s-a,a];var d=c.convert(0);return i.bars=l.map(function(h,f){var p=c.convert(h),v=u.convert(f),g=u.convert(f+1),m=new wr;return m.x=v,m.y=p,m.width=g-v,m.height=d-p,m.strokeWidth=1,m.crisp=!0,m}),i.updateColors(r,n),i.root.append(i.bars),i}return t.prototype.updateColors=function(e,r){var n=Tp(e,1),i=n[0],a=Tp(r,1),s=a[0];this.bars.forEach(function(l){l.fill=i,l.stroke=s})},t.chartType="histogram",t}(lr),lM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),uM=function(o){lM(t,o);function t(e,r,n){var i=o.call(this,e,"columnLineComboTooltip")||this;i.columnData=[3,4],i.lineData=[[5,4,6,5,4]];var a=i,s=a.root,l=a.columnData,u=a.lineData,c=a.size,d=a.padding;return i.columns=bs({stacked:!1,root:s,data:l,size:c,padding:d,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(i.columns),i.lines=hh(s,u,c,d),i.updateColors(r,n),i}return t.prototype.updateColors=function(e,r){this.columns.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]}),this.lines.forEach(function(n,i){n.stroke=e[i+2]})},t.chartType="columnLineCombo",t}(lr),cM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),dM=function(o){cM(t,o);function t(e,r,n){var i=o.call(this,e,"areaColumnComboTooltip")||this;i.columnData=[3,4.5],i.areaData=[[5,4,6,5,4]];var a=i,s=a.root,l=a.columnData,u=a.areaData,c=a.size,d=a.padding;i.columns=bs({stacked:!1,root:s,data:l,size:c,padding:d,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5});var h=new Lt;h.range=[d,c-d],h.domain=[0,1,2,3,4],h.paddingInner=1,h.paddingOuter=0;var f=new it;f.range=[c-d,d],f.domain=[0,6];var p=[],v=f.convert(0),g=h.convert(0);return u.forEach(function(m,y){var S=p[y]||(p[y]=[]);m.forEach(function(w,x){var b=w,_=x,T=h.convert(_),O=f.convert(b);S[x]={x:T,y:O}});var C=h.convert(m.length-1);p[y].push({x:C,y:v},{x:g,y:v})}),i.areas=p.map(function(m){var y=new It;y.strokeWidth=1,y.fillOpacity=.8;var S=y.path;return m.forEach(function(C,w){return S[w>0?"lineTo":"moveTo"](C.x,C.y)}),y}),s.append(i.areas),s.append([].concat.apply([],i.columns)),i.updateColors(r,n),i}return t.prototype.updateColors=function(e,r){this.areas.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]}),this.columns.forEach(function(n,i){n.fill=e[i+1],n.stroke=r[i+1]})},t.chartType="areaColumnCombo",t}(lr),hM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),fM=function(o){hM(t,o);function t(e,r,n){var i=o.call(this,e,"customComboTooltip")||this;i.columnData=[3,4],i.lineData=[[5,4,6,5,4]];var a=i,s=a.root,l=a.columnData,u=a.lineData,c=a.size,d=a.padding;i.columns=bs({stacked:!1,root:s,data:l,size:c,padding:d,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(i.columns),i.lines=hh(s,u,c,d);var h="grey",f=3,p=new nt;p.x1=d,p.y1=d,p.x2=d,p.y2=c-d+f,p.stroke=h;var v=new nt;v.x1=d-f+1,v.y1=c-d,v.x2=c-d+1,v.y2=c-d,v.stroke=h;var g=new It;return i.buildPenIconPath(g),g.fill="whitesmoke",g.stroke="darkslategrey",g.strokeWidth=1,s.append([v,p,g]),i.updateColors(r,n),i}return t.prototype.updateColors=function(e,r){this.columns.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]}),this.lines.forEach(function(n,i){n.stroke=e[i+2]})},t.prototype.buildPenIconPath=function(e){var r=e.path;r.moveTo(25.76,43.46),r.lineTo(31.27,48.53),r.moveTo(49.86,22),r.lineTo(49.86,22),r.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41),r.lineTo(46.86,21.41),r.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55),r.lineTo(25.51,43.8),r.lineTo(25.43,43.89),r.lineTo(23.01,51.89),r.lineTo(22.83,52.46),r.lineTo(31.02,48.86),r.lineTo(49.02,28.52),r.lineTo(49.02,28.52),r.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93),r.lineTo(50.75,24.93),r.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22),r.closePath(),r.moveTo(41.76,25.5),r.lineTo(47.34,30.5),r.moveTo(40.74,26.65),r.lineTo(46.25,31.71)},t.chartType="customCombo",t}(dh),pM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),yd=function(){return yd=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},yd.apply(this,arguments)},Pp=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ap={columnGroup:{column:LD,stackedColumn:by,normalizedColumn:ND},barGroup:{bar:VD,stackedBar:_y,normalizedBar:HD},pieGroup:{pie:KD,doughnut:Oy},lineGroup:{line:XD},scatterGroup:{scatter:ZD,bubble:eM},areaGroup:{area:rM,stackedArea:gd,normalizedArea:oM},histogramGroup:{histogram:sM},combinationGroup:{columnLineCombo:uM,areaColumnCombo:dM,customCombo:fM}},vM=function(o){pM(t,o);function t(e,r,n,i){i===void 0&&(i=hm);var a=o.call(this,t.TEMPLATE)||this;return a.wrappers={},a.chartController=e,a.fills=r,a.strokes=n,a.chartGroups=yd({},i),a}return t.prototype.init=function(){var e=this;!this.chartController.customComboExists()&&this.chartGroups.combinationGroup&&(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter(function(n){return n!=="customCombo"}));var r=this.getGui();Object.keys(this.chartGroups).forEach(function(n){var i=e.chartGroups[n],a=e.createBean(new hn({title:e.chartTranslationService.translate(n),suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal"}));i.forEach(function(s){var l,u=(l=Ap[n])===null||l===void 0?void 0:l[s];if(!u){Ap[n]?E.doOnce(function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+n+"."+s+"'")},"invalid_chartGroupsDef"+s+"_"+n):E.doOnce(function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+n+"'")},"invalid_chartGroupsDef"+n);return}var c=document.createElement("div");c.classList.add("ag-chart-mini-thumbnail");var d=u.chartType;e.addManagedListener(c,"click",function(){e.chartController.setChartType(d),e.updateSelectedMiniChart()}),e.wrappers[d]=c,e.createBean(new u(c,e.fills,e.strokes)),a.addItem(c)}),r.appendChild(a.getGui())}),this.updateSelectedMiniChart()},t.prototype.updateSelectedMiniChart=function(){var e=this.chartController.getChartType();for(var r in this.wrappers){var n=this.wrappers[r],i=r===e;n.classList.toggle("ag-selected",i)}},t.TEMPLATE='<div class="ag-chart-settings-mini-wrapper"></div>',Pp([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Pp([te],t.prototype,"init",null),t}(oe),gM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),si=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},yM=function(o){gM(t,o);function t(e){var r=o.call(this,t.TEMPLATE)||this;return r.miniChartsContainers=[],r.cardItems=[],r.activePaletteIndex=0,r.palettes=[],r.themes=[],r.chartController=e,r}return t.prototype.postConstruct=function(){var e=this;this.resetPalettes(),this.ePrevBtn.insertAdjacentElement("afterbegin",E.createIconNoSpan("previous",this.gridOptionsService)),this.eNextBtn.insertAdjacentElement("afterbegin",E.createIconNoSpan("next",this.gridOptionsService)),this.addManagedListener(this.ePrevBtn,"click",function(){return e.setActivePalette(e.getPrev(),"left")}),this.addManagedListener(this.eNextBtn,"click",function(){return e.setActivePalette(e.getNext(),"right")}),this.addManagedListener(this.chartController,_r.EVENT_CHART_TYPE_CHANGED,function(){return e.resetPalettes(!0)}),this.addManagedListener(this.chartController,_r.EVENT_CHART_API_UPDATE,function(){return e.resetPalettes(!0)}),this.scrollSelectedIntoView()},t.prototype.scrollSelectedIntoView=function(){var e=this;setTimeout(function(){var r=function(s){return!s.getGui().classList.contains("ag-hidden")},n=e.miniChartsContainers.find(r),i=n.getGui().querySelector(".ag-selected");if(i){var a=i.offsetParent;a&&e.eMiniChartsContainer.scrollTo(0,a.offsetTop)}},250)},t.prototype.resetPalettes=function(e){var r=this,n,i,a=this.chartController.getPalettes(),s=(i=(n=this.gridOptionsService.get("chartToolPanelsDef"))===null||n===void 0?void 0:n.settingsPanel)===null||i===void 0?void 0:i.chartGroupsDef;E.shallowCompare(a,this.palettes)&&!e||this.isAnimating||(this.palettes=a,this.themes=this.chartController.getThemes(),this.activePaletteIndex=this.themes.findIndex(function(l){return l===r.chartController.getChartThemeName()}),this.cardItems=[],E.clearElement(this.eCardSelector),this.destroyMiniCharts(),this.palettes.forEach(function(l,u){var c=r.activePaletteIndex===u,d=l.fills,h=l.strokes,f=r.createBean(new vM(r.chartController,d,h,s));r.miniChartsContainers.push(f),r.eMiniChartsContainer.appendChild(f.getGui()),r.addCardLink(u),c?f.updateSelectedMiniChart():f.setDisplayed(!1)}),E.setDisplayed(this.eNavBar,this.palettes.length>1),E.radioCssClass(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected"))},t.prototype.addCardLink=function(e){var r=this,n=document.createElement("div");n.classList.add("ag-chart-settings-card-item"),this.addManagedListener(n,"click",function(){r.setActivePalette(e,e<r.activePaletteIndex?"left":"right")}),this.eCardSelector.appendChild(n),this.cardItems.push(n)},t.prototype.getPrev=function(){var e=this.activePaletteIndex-1;return e<0&&(e=this.palettes.length-1),e},t.prototype.getNext=function(){var e=this.activePaletteIndex+1;return e>=this.palettes.length&&(e=0),e},t.prototype.setActivePalette=function(e,r){var n=this;if(!(this.isAnimating||this.activePaletteIndex===e)){E.radioCssClass(this.cardItems[e],"ag-selected","ag-not-selected");var i=this.miniChartsContainers[this.activePaletteIndex],a=i.getGui(),s=this.miniChartsContainers[e],l=s.getGui();i.updateSelectedMiniChart(),s.updateSelectedMiniChart();var u=r==="left"?-1:1,c=l.style.left=E.getAbsoluteWidth(this.getGui())*u+"px";this.activePaletteIndex=e,this.isAnimating=!0;var d="ag-animating";s.setDisplayed(!0),i.addCssClass(d),s.addCssClass(d),this.chartController.setChartThemeName(this.themes[e]),window.setTimeout(function(){a.style.left=-parseFloat(c)+"px",l.style.left="0px"},0),window.setTimeout(function(){n.isAnimating=!1,i.removeCssClass(d),s.removeCssClass(d),i.setDisplayed(!1)},300)}},t.prototype.destroyMiniCharts=function(){E.clearElement(this.eMiniChartsContainer),this.miniChartsContainers=this.destroyBeans(this.miniChartsContainers)},t.prototype.destroy=function(){this.destroyMiniCharts(),o.prototype.destroy.call(this)},t.TEMPLATE=`<div class="ag-chart-settings-wrapper">
            <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>
            <div ref="eNavBar" class="ag-chart-settings-nav-bar">
                <div ref="ePrevBtn" class="ag-chart-settings-prev">
                    <button type="button" class="ag-button ag-chart-settings-prev-button"></button>
                </div>
                <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>
                <div ref="eNextBtn" class="ag-chart-settings-next">
                    <button type="button" class="ag-button ag-chart-settings-next-button"></button>
                </div>
            </div>
        </div>`,si([D("resizeObserverService")],t.prototype,"resizeObserverService",void 0),si([B("eMiniChartsContainer")],t.prototype,"eMiniChartsContainer",void 0),si([B("eNavBar")],t.prototype,"eNavBar",void 0),si([B("eCardSelector")],t.prototype,"eCardSelector",void 0),si([B("ePrevBtn")],t.prototype,"ePrevBtn",void 0),si([B("eNextBtn")],t.prototype,"eNextBtn",void 0),si([te],t.prototype,"postConstruct",null),t}(oe),mM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dp=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},SM=function(o){mM(t,o);function t(e){var r=o.call(this)||this;r.tabs=[];var n=e.controller,i=e.panels,a=e.chartOptionsService;return r.chartController=n,r.chartOptionsService=a,r.panels=i,r}return t.prototype.init=function(){var e=this;this.panels.forEach(function(r){var n=r.replace("chart","").toLowerCase(),i=e.createTab(r,n,e.getPanelClass(n)),a=i.comp,s=i.tab;e.tabs.push(s),e.addDestroyFunc(function(){return e.destroyBean(a)})}),this.tabbedLayout=new _v({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0}),this.getContext().createBean(this.tabbedLayout)},t.prototype.createTab=function(e,r,n){var i=document.createElement("div");i.classList.add("ag-chart-tab","ag-chart-"+r);var a=new n(this.chartController,this.chartOptionsService);this.getContext().createBean(a),i.appendChild(a.getGui());var s=document.createElement("div"),l=this.chartTranslationService.translate(r);return s.innerText=l,{comp:a,tab:{title:s,titleLabel:l,bodyPromise:$e.resolve(i),getScrollableContainer:function(){var u=i.querySelector(".ag-scrollable-container");return u||i},name:e}}},t.prototype.showTab=function(e){var r=this.tabs[e];this.tabbedLayout.showItem(r)},t.prototype.getGui=function(){return this.tabbedLayout&&this.tabbedLayout.getGui()},t.prototype.destroy=function(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),o.prototype.destroy.call(this)},t.prototype.getPanelClass=function(e){switch(e){case t.TAB_DATA:return QA;case t.TAB_FORMAT:return AD;default:return yM}},t.TAB_DATA="data",t.TAB_FORMAT="format",Dp([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Dp([te],t.prototype,"init",null),t}(oe),CM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ia=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Mp=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},xM=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Rp=function(o){CM(t,o);function t(e,r,n,i){var a=o.call(this,t.TEMPLATE)||this;return a.eChartContainer=e,a.eMenuPanelContainer=r,a.chartController=n,a.chartOptionsService=i,a.buttons={chartSettings:["menu",function(){return a.showMenu(a.defaultPanel)}],chartData:["menu",function(){return a.showMenu("chartData")}],chartFormat:["menu",function(){return a.showMenu("chartFormat")}],chartLink:["linked",function(s){return a.toggleDetached(s)}],chartUnlink:["unlinked",function(s){return a.toggleDetached(s)}],chartDownload:["save",function(){return a.saveChart()}]},a.panels=[],a.buttonListenersDestroyFuncs=[],a.menuVisible=!1,a}return t.prototype.postConstruct=function(){var e=this;this.createButtons(),this.addManagedListener(this.eventService,V.EVENT_CHART_CREATED,function(r){var n;if(r.chartId===e.chartController.getChartId()){var i=!!(!((n=e.gridOptionsService.get("chartToolPanelsDef"))===null||n===void 0)&&n.defaultToolPanel);i&&e.showMenu(e.defaultPanel,!1)}}),this.refreshMenuClasses(),!this.gridOptionsService.is("suppressChartToolPanelsButton")&&this.panels.length>0&&(this.getGui().classList.add("ag-chart-tool-panel-button-enable"),this.addManagedListener(this.eHideButton,"click",this.toggleMenu.bind(this))),this.addManagedListener(this.chartController,_r.EVENT_CHART_API_UPDATE,this.createButtons.bind(this))},t.prototype.isVisible=function(){return this.menuVisible},t.prototype.getExtraPaddingDirections=function(){var e=this,r=["chartLink","chartUnlink","chartDownload"],n=["chartSettings","chartData","chartFormat"],i=[];return r.some(function(a){return e.chartToolbarOptions.includes(a)})&&i.push("top"),n.some(function(a){return e.chartToolbarOptions.includes(a)})&&i.push(this.gridOptionsService.is("enableRtl")?"left":"right"),i},t.prototype.getToolbarOptions=function(){var e=this,r,n,i,a=!!this.gridOptionsService.get("chartToolPanelsDef");if(a){var s=[this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"],l=this.gridOptionsService.getCallback("getChartToolbarItems"),u={defaultItems:s},c=l?l(u).filter(function(g){if(!gh.includes(g)){var m=Lu.includes(g)?"AG Grid: '"+g+"' is a Chart Tool Panel option and will be ignored since 'chartToolPanelsDef' is used. Please use 'chartToolPanelsDef.panels' grid option instead":"AG Grid: '"+g+"' is not a valid Chart Toolbar Option";return console.warn(m),!1}return!0}):s,d=(n=(r=this.gridOptionsService.get("chartToolPanelsDef"))===null||r===void 0?void 0:r.panels)===null||n===void 0?void 0:n.map(function(g){var m=ml[g];return m||console.warn("AG Grid - invalid panel in chartToolPanelsDef.panels: '"+g+"'"),m}).filter(function(g){return!!g});this.panels=d||Object.values(ml),this.chartController.isPivotChart()&&(this.panels=this.panels.filter(function(g){return g!=="chartData"}));var h=(i=this.gridOptionsService.get("chartToolPanelsDef"))===null||i===void 0?void 0:i.defaultToolPanel;return this.defaultPanel=h&&ml[h]||this.panels[0],this.panels.length>0?xM([this.panels[0]],Mp(c)):c}else{var f=["chartSettings","chartData","chartFormat",this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"],l=this.gridOptionsService.getCallback("getChartToolbarItems");if(l){var p=this.gridOptionsService.is("suppressChartToolPanelsButton"),u={defaultItems:p?f:gh};f=l(u).filter(function(y){if(e.buttons[y]){if(!p&&Lu.includes(y)){var S="AG Grid: '"+y+"' is a Chart Tool Panel option and will be ignored. Please use 'chartToolPanelsDef.panels' grid option instead";return console.warn(S),!1}}else return console.warn("AG Grid: '"+y+"' is not a valid Chart Toolbar Option"),!1;return!0}),p||(f=f.concat(Lu))}this.chartController.isPivotChart()&&(f=f.filter(function(m){return m!=="chartData"}));var v=["chartUnlink","chartLink","chartDownload"];return this.panels=f.filter(function(m){return v.indexOf(m)===-1}),this.defaultPanel=this.panels[0],f.filter(function(m){return v.indexOf(m)!==-1||e.panels.length&&m===e.panels[0]})}},t.prototype.toggleDetached=function(e){var r=e.target,n=r.classList.contains("ag-icon-linked");r.classList.toggle("ag-icon-linked",!n),r.classList.toggle("ag-icon-unlinked",n);var i=n?"chartUnlinkToolbarTooltip":"chartLinkToolbarTooltip",a=this.chartTranslationService.translate(i);a&&(r.title=a),this.chartController.detachChartRange()},t.prototype.createButtons=function(){var e=this;this.buttonListenersDestroyFuncs.forEach(function(n){return n()}),this.buttonListenersDestroyFuncs=[],this.chartToolbarOptions=this.getToolbarOptions();var r=this.eMenu;E.clearElement(r),this.chartToolbarOptions.forEach(function(n){var i=e.buttons[n],a=Mp(i,2),s=a[0],l=a[1],u=E.createIconNoSpan(s,e.gridOptionsService,void 0,!0);u.classList.add("ag-chart-menu-icon");var c=e.chartTranslationService.translate(n+"ToolbarTooltip");c&&u instanceof HTMLElement&&(u.title=c),e.buttonListenersDestroyFuncs.push(e.addManagedListener(u,"click",l)),r.appendChild(u)})},t.prototype.saveChart=function(){var e={type:t.EVENT_DOWNLOAD_CHART};this.dispatchEvent(e)},t.prototype.createMenuPanel=function(e){var r=this,n=this.environment.chartMenuPanelWidth(),i=this.menuPanel=this.createBean(new om({minWidth:n,width:n,height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return i.setParentComponent(this),this.eMenuPanelContainer.appendChild(i.getGui()),this.tabbedMenu=this.createBean(new SM({controller:this.chartController,type:this.chartController.getChartType(),panels:this.panels,chartOptionsService:this.chartOptionsService})),this.addManagedListener(i,oe.EVENT_DESTROYED,function(){return r.destroyBean(r.tabbedMenu)}),new $e(function(a){window.setTimeout(function(){i.setBodyComponent(r.tabbedMenu),r.tabbedMenu.showTab(e),a(i),r.addManagedListener(r.eChartContainer,"click",function(s){r.getGui().contains(s.target)||r.menuVisible&&r.hideMenu()})},100)})},t.prototype.showContainer=function(){this.menuPanel&&(this.menuVisible=!0,this.showParent(this.menuPanel.getWidth()),this.refreshMenuClasses())},t.prototype.toggleMenu=function(){this.menuVisible?this.hideMenu():this.showMenu()},t.prototype.showMenu=function(e,r){var n=this;if(r===void 0&&(r=!0),r||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.menuPanel&&!e)this.showContainer();else{var i=e||this.defaultPanel,a=this.panels.indexOf(i);a<0&&(console.warn("AG Grid: '"+e+"' is not a valid Chart Tool Panel name"),a=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(a),this.showContainer()):this.createMenuPanel(a).then(this.showContainer.bind(this))}r||setTimeout(function(){n.isAlive()&&n.eMenuPanelContainer.classList.remove("ag-no-transition")},500)},t.prototype.hideMenu=function(){var e=this;this.hideParent(),window.setTimeout(function(){e.menuVisible=!1,e.refreshMenuClasses()},500)},t.prototype.refreshMenuClasses=function(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible),this.gridOptionsService.is("suppressChartToolPanelsButton")||(this.eHideButtonIcon.classList.toggle("ag-icon-contracted",this.menuVisible),this.eHideButtonIcon.classList.toggle("ag-icon-expanded",!this.menuVisible))},t.prototype.showParent=function(e){this.eMenuPanelContainer.style.minWidth=e+"px"},t.prototype.hideParent=function(){this.eMenuPanelContainer.style.minWidth="0"},t.prototype.destroy=function(){o.prototype.destroy.call(this),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel),this.tabbedMenu&&this.tabbedMenu.isAlive()&&this.destroyBean(this.tabbedMenu)},t.EVENT_DOWNLOAD_CHART="downloadChart",t.TEMPLATE=`<div>
        <div class="ag-chart-menu" ref="eMenu"></div>
        <button class="ag-button ag-chart-menu-close" ref="eHideButton">
            <span class="ag-icon ag-icon-contracted" ref="eHideButtonIcon"></span>
        </button>
    </div>`,Ia([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Ia([B("eMenu")],t.prototype,"eMenu",void 0),Ia([B("eHideButton")],t.prototype,"eHideButton",void 0),Ia([B("eHideButtonIcon")],t.prototype,"eHideButtonIcon",void 0),Ia([te],t.prototype,"postConstruct",null),t}(oe),wM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),iu=function(){return iu=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},iu.apply(this,arguments)},Ip=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},bM=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_M=function(o){wM(t,o);function t(e){var r=o.call(this,t.TEMPLATE)||this;return r.chartMenu=e,r.destroyableChartListeners=[],r.editing=!1,r}return t.prototype.init=function(){var e=this;this.addManagedListener(this.getGui(),"keydown",function(r){e.editing&&r.key==="Enter"&&!r.shiftKey&&(e.handleEndEditing(),r.preventDefault())}),this.addManagedListener(this.getGui(),"input",function(){e.editing&&e.updateHeight()}),this.addManagedListener(this.getGui(),"blur",function(){return e.endEditing()})},t.prototype.refreshTitle=function(e,r){var n,i,a=this;this.chartController=e,this.chartOptionsService=r;try{for(var s=bM(this.destroyableChartListeners),l=s.next();!l.done;l=s.next()){var u=l.value;u()}}catch(g){n={error:g}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}this.destroyableChartListeners=[];var c=this.chartController.getChartProxy(),d=c.getChart(),h=d.scene.canvas.element,f=this.addManagedListener(h,"dblclick",function(g){var m=d.title;if(m&&m.node.containsPoint(g.offsetX,g.offsetY)){var y=m.node.computeBBox(),S=m.node.inverseTransformPoint(y.x,y.y);a.startEditing(iu(iu({},y),S),h.width)}}),p=!1,v=this.addManagedListener(h,"mousemove",function(g){var m=d.title,y=!!(m&&m.enabled&&m.node.containsPoint(g.offsetX,g.offsetY));p!==y&&(h.style.cursor=y?"pointer":""),p=y});this.destroyableChartListeners=[f,v]},t.prototype.startEditing=function(e,r){if(!(this.chartMenu&&this.chartMenu.isVisible())&&!this.editing){this.editing=!0;var n=300,i=Math.max(Math.min(e.width+20,r),n),a=this.getGui();a.classList.add("currently-editing");var s=a.style;s.fontFamily=this.chartOptionsService.getChartOption("title.fontFamily"),s.fontWeight=this.chartOptionsService.getChartOption("title.fontWeight"),s.fontStyle=this.chartOptionsService.getChartOption("title.fontStyle"),s.fontSize=this.chartOptionsService.getChartOption("title.fontSize")+"px",s.color=this.chartOptionsService.getChartOption("title.color");var l=this.chartOptionsService.getChartOption("title.text"),u=l===this.chartTranslationService.translate("titlePlaceholder");a.value=u?"":l;var c=l.split(/\r?\n/g).length;s.left=Math.round(e.x+e.width/2-i/2-1)+"px",s.top=Math.round(e.y+e.height/2-c*this.getLineHeight()/2-2)+"px",s.width=Math.round(i)+"px",s.lineHeight=this.getLineHeight()+"px",this.updateHeight(),a.focus()}},t.prototype.updateHeight=function(){var e=this.getGui(),r=this.chartOptionsService.getChartOption("title.text").split(/\r?\n/g).length,n=e.value.split(/\r?\n/g).length;e.style.height=Math.round(Math.max(r,n)*this.getLineHeight())+4+"px"},t.prototype.getLineHeight=function(){var e=this.chartOptionsService.getChartOption("title.lineHeight");return e?parseInt(e):Math.round(parseInt(this.chartOptionsService.getChartOption("title.fontSize"))*1.2)},t.prototype.handleEndEditing=function(){var e=this,r=this.chartOptionsService.getChartOption("title.color"),n="rgba(0, 0, 0, 0)";this.chartOptionsService.setChartOption("title.color",n),this.chartOptionsService.awaitChartOptionUpdate(function(){return e.endEditing()}),this.chartOptionsService.awaitChartOptionUpdate(function(){e.chartOptionsService.setChartOption("title.color",r)})},t.prototype.endEditing=function(){var e=this;if(this.editing){this.editing=!1;var r=this.getGui().value;r&&r.trim()!==""?(this.chartOptionsService.setChartOption("title.text",r),this.chartOptionsService.setChartOption("title.enabled",!0)):(this.chartOptionsService.setChartOption("title.text",""),this.chartOptionsService.setChartOption("title.enabled",!1)),this.getGui().classList.remove("currently-editing"),this.chartOptionsService.awaitChartOptionUpdate(function(){e.eventService.dispatchEvent({type:"chartTitleEdit"})})}},t.TEMPLATE=`<textarea
             class="ag-chart-title-edit"
             style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center; resize: none;" />
        `,Ip([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Ip([te],t.prototype,"init",null),t}(oe),OM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mo=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},EM=function(o){OM(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.getData=function(e){if(e.crossFiltering){if(e.grouping)return console.warn("AG Grid: crossing filtering with row grouping is not supported."),{chartData:[],columnNames:{}};if(!this.gridOptionsService.isRowModelType("clientSide"))return console.warn("AG Grid: crossing filtering is only supported in the client side row model."),{chartData:[],columnNames:{}}}var r=this.gridOptionsService.isRowModelType("serverSide");r&&e.pivoting&&this.updatePivotKeysForSSRM();var n=this.extractRowsFromGridRowModel(e);return n.chartData=this.aggregateRowsByDimension(e,n.chartData),n},t.prototype.extractRowsFromGridRowModel=function(e){var r=this,n=[],i={},a={},s={},l={},u=[],c;if(e.crossFiltering)l=this.getFilteredRowNodes(),u=this.getAllRowNodes(),c=u.length;else{var d=this.gridRowModel.getRowCount()-1,h=e.endRow>=0?Math.min(e.endRow,d):d;c=h-e.startRow+1}for(var f=function(y){var S={},C=e.crossFiltering?u[y]:p.gridRowModel.getRow(y+e.startRow);e.dimensionCols.forEach(function(w){var x=w.colId,b=r.columnModel.getGridColumn(x);if(b){var _=r.valueService.getValue(b,C);if(e.grouping){var T=_&&_.toString?String(_.toString()):"",O=t.getGroupLabels(C,T);S[x]={labels:O,toString:function(){return this.labels.filter(function(M){return!!M}).reverse().join(" - ")}},C.group&&(a[O.toString()]=y);var P=O.slice(1,O.length).toString();P&&(s[P]=a[P])}else S[x]=_}else S[fh.DEFAULT_CATEGORY]=y+1}),e.valueCols.forEach(function(w){var x=[],b=w.getColDef().pivotKeys;b&&(x=b.slice());var _=w.getColDef().headerName;_&&x.push(_),x.length>0&&(i[w.getId()]=x);var T=w.getColId();if(e.crossFiltering){var O=T+"-filtered-out",P=r.valueService.getValue(w,C),M=P!=null&&typeof P.toNumber=="function"?P.toNumber():P;l[C.id]?(S[T]=M,S[O]=e.aggFunc||e.isScatter?void 0:0):(S[T]=e.aggFunc||e.isScatter?void 0:0,S[O]=M)}else{var P=r.valueService.getValue(w,C);P&&P.hasOwnProperty("toString")&&(P=parseFloat(P.toString())),S[T]=P!=null&&typeof P.toNumber=="function"?P.toNumber():P}}),C.footer&&(S.footer=!0),n.push(S)},p=this,v=0;v<c;v++)f(v);if(e.grouping){var g=E.values(s),m=function(y,S){return!y.footer&&!E.includes(g,S)};n=n.filter(m)}return{chartData:n,columnNames:i}},t.prototype.aggregateRowsByDimension=function(e,r){var n=this,i=e.dimensionCols;if(!e.aggFunc||i.length===0)return r;var a=E.last(i),s=a&&a.colId,l={},u=[];return r.forEach(function(c){var d=l;i.forEach(function(h){var f=h.colId,p=c[f];if(f===s){var v=d[p];v||(v={__children:[]},i.forEach(function(g){var m=g.colId;v[m]=c[m]}),d[p]=v,u.push(v)),v.__children.push(c)}else d[p]||(d[p]={}),d=d[p]})}),Ke.__assertRegistered(Ce.RowGroupingModule,"Charting Aggregation",this.context.getGridId())&&u.forEach(function(c){return e.valueCols.forEach(function(d){if(e.crossFiltering)e.valueCols.forEach(function(p){var v=p.getColId(),g=c.__children.filter(function(w){return typeof w[v]<"u"}).map(function(w){return w[v]}),m=n.aggregationStage.aggregateValues(g,e.aggFunc);c[p.getId()]=m&&typeof m.value<"u"?m.value:m;var y=v+"-filtered-out",S=c.__children.filter(function(w){return typeof w[y]<"u"}).map(function(w){return w[y]}),C=n.aggregationStage.aggregateValues(S,e.aggFunc);c[y]=C&&typeof C.value<"u"?C.value:C});else{var h=c.__children.map(function(p){return p[d.getId()]}),f=0;Ke.__assertRegistered(Ce.RowGroupingModule,"Charting Aggregation",n.context.getGridId())&&(f=n.aggregationStage.aggregateValues(h,e.aggFunc)),c[d.getId()]=f&&typeof f.value<"u"?f.value:f}})}),u},t.prototype.updatePivotKeysForSSRM=function(){var e=this.columnModel.getSecondaryColumns();if(e){var r=this.extractPivotKeySeparator(e);e.forEach(function(n){if(r==="")n.getColDef().pivotKeys=[];else{var i=n.getColId().split(r);n.getColDef().pivotKeys=i.slice(0,i.length-1)}})}},t.prototype.extractPivotKeySeparator=function(e){if(e.length===0)return"";var r=function(i,a){var s=i.getGroupId();return i.getParent()?r(i.getParent(),s):a.split(s)[1][0]},n=e[0];return n.getParent()==null?"":r(n.getParent(),n.getColId())},t.getGroupLabels=function(e,r){for(var n=[r];e&&e.level!==0;)e=e.parent,e&&n.push(e.key);return n},t.prototype.getFilteredRowNodes=function(){var e={};return this.gridRowModel.forEachNodeAfterFilterAndSort(function(r){e[r.id]=r}),e},t.prototype.getAllRowNodes=function(){var e=[];return this.gridRowModel.forEachNode(function(r){e.push(r)}),this.sortRowNodes(e)},t.prototype.sortRowNodes=function(e){var r=this.sortController.getSortOptions(),n=!r||r.length==0;return n?e:this.rowNodeSorter.doFullSort(e,r)},mo([D("rowModel")],t.prototype,"gridRowModel",void 0),mo([D("valueService")],t.prototype,"valueService",void 0),mo([D("columnModel")],t.prototype,"columnModel",void 0),mo([D("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0),mo([D("sortController")],t.prototype,"sortController",void 0),mo([zr("aggregationStage")],t.prototype,"aggregationStage",void 0),t}(pe),TM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),dl=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},PM=function(o){TM(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.getColumn=function(e){return this.columnModel.getPrimaryColumn(e)},t.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},t.prototype.getColDisplayName=function(e){return this.columnModel.getDisplayNameForColumn(e,"chart")},t.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},t.prototype.getGroupDisplayColumns=function(){return this.columnModel.getGroupDisplayColumns()},t.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},t.prototype.isPivotActive=function(){return this.columnModel.isPivotActive()},t.prototype.getChartColumns=function(){var e=this,r=this.columnModel.getAllDisplayedColumns(),n=new Set,i=new Set;return r.forEach(function(a){var s=a.getColDef(),l=s.chartDataType;if(l)switch(l){case"category":case"time":n.add(a);return;case"series":i.add(a);return;case"excluded":return;default:console.warn("AG Grid: unexpected chartDataType value '"+l+"' supplied, instead use 'category', 'series' or 'excluded'");break}if(s.colId==="ag-Grid-AutoColumn"){n.add(a);return}if(!a.isPrimary()){i.add(a);return}(e.isNumberCol(a)?i:n).add(a)}),{dimensionCols:n,valueCols:i}},t.prototype.isNumberCol=function(e){if(e.getColId()==="ag-Grid-AutoColumn")return!1;var r=this.rowRenderer.getRowNode({rowIndex:0,rowPinned:null});if(!r)return!1;var n=this.valueService.getValue(e,r);return n==null&&(n=this.extractLeafData(r,e)),n!=null&&typeof n.toNumber=="function"&&(n=n.toNumber()),typeof n=="number"},t.prototype.extractLeafData=function(e,r){if(!e.allLeafChildren)return null;for(var n=0;n<e.allLeafChildren.length;n++){var i=e.allLeafChildren[n],a=this.valueService.getValue(r,i);if(a!=null)return a}return null},dl([D("columnModel")],t.prototype,"columnModel",void 0),dl([D("valueService")],t.prototype,"valueService",void 0),dl([D("rowRenderer")],t.prototype,"rowRenderer",void 0),t=dl([be("chartColumnService")],t),t}(pe),AM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),DM=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},MM=function(o){AM(t,o);function t(e){var r,n=o.call(this)||this;return n.suppressComboChartWarnings=!1,n.chartDataModel=e,n.seriesChartTypes=(r=e.params.seriesChartTypes)!==null&&r!==void 0?r:[],n}return t.prototype.init=function(){this.initComboCharts()},t.prototype.update=function(e){this.seriesChartTypes=e??this.seriesChartTypes,this.initComboCharts(),this.updateSeriesChartTypes()},t.prototype.initComboCharts=function(){var e=this.seriesChartTypes&&this.seriesChartTypes.length>0,r=this.chartDataModel.chartType==="customCombo"||e;r&&(this.chartDataModel.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])},t.prototype.updateSeriesChartTypes=function(){if(this.chartDataModel.isComboChart()){if(this.seriesChartTypes=this.seriesChartTypes.map(function(e){var r=["groupedColumn","stackedColumn","stackedArea"].includes(e.chartType);return e.secondaryAxis=r?!1:e.secondaryAxis,e}),this.chartDataModel.chartType==="customCombo"){this.updateSeriesChartTypesForCustomCombo();return}this.updateChartSeriesTypesForBuiltInCombos()}},t.prototype.updateSeriesChartTypesForCustomCombo=function(){var e=this,r=this.seriesChartTypes&&this.seriesChartTypes.length>0;!r&&!this.suppressComboChartWarnings&&console.warn("AG Grid: 'seriesChartTypes' are required when the 'customCombo' chart type is specified."),this.seriesChartTypes=this.seriesChartTypes.map(function(a){return t.SUPPORTED_COMBO_CHART_TYPES.includes(a.chartType)||(console.warn("AG Grid: invalid chartType '"+a.chartType+"' supplied in 'seriesChartTypes', converting to 'line' instead."),a.chartType="line"),a});var n=function(a){(!e.savedCustomSeriesChartTypes||e.savedCustomSeriesChartTypes.length===0)&&(e.savedCustomSeriesChartTypes=e.seriesChartTypes);var s=e.savedCustomSeriesChartTypes.find(function(l){return l.colId===a.colId});return s||(a.selected&&!e.suppressComboChartWarnings&&console.warn("AG Grid: no 'seriesChartType' found for colId = '"+a.colId+"', defaulting to 'line'."),{colId:a.colId,chartType:"line",secondaryAxis:!1})},i=this.chartDataModel.valueColState.map(n);this.seriesChartTypes=i,this.savedCustomSeriesChartTypes=i,this.suppressComboChartWarnings=!0},t.prototype.updateChartSeriesTypesForBuiltInCombos=function(){var e=this.chartDataModel,r=e.chartType,n=e.valueColState,i=r==="columnLineCombo"?"groupedColumn":"stackedArea",a=r==="columnLineCombo"?"line":"groupedColumn",s=n.filter(function(u){return u.selected}),l=Math.ceil(s.length/2);this.seriesChartTypes=s.map(function(u,c){var d=c>=l?a:i;return{colId:u.colId,chartType:d,secondaryAxis:!1}})},t.SUPPORTED_COMBO_CHART_TYPES=["line","groupedColumn","stackedColumn","area","stackedArea"],DM([te],t.prototype,"init",null),t}(pe),RM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ou=function(){return ou=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},ou.apply(this,arguments)},Oc=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},La=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Fa=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},fh=function(o){RM(t,o);function t(e){var r=o.call(this)||this;return r.unlinked=!1,r.chartData=[],r.valueColState=[],r.dimensionColState=[],r.columnNames={},r.crossFiltering=!1,r.grouping=!1,r.params=e,r.chartId=e.chartId,r.chartType=e.chartType,r.pivotChart=e.pivotChart,r.chartThemeName=e.chartThemeName,r.aggFunc=e.aggFunc,r.referenceCellRange=e.cellRange,r.suppliedCellRange=e.cellRange,r.suppressChartRanges=e.suppressChartRanges,r.unlinked=!!e.unlinkChart,r.crossFiltering=!!e.crossFiltering,r}return t.prototype.init=function(){this.datasource=this.createManagedBean(new EM),this.chartColumnService=this.createManagedBean(new PM),this.comboChartModel=this.createManagedBean(new MM(this)),this.updateCellRanges(),this.updateData()},t.prototype.updateModel=function(e){var r=e.cellRange,n=e.chartType,i=e.pivotChart,a=e.chartThemeName,s=e.aggFunc,l=e.suppressChartRanges,u=e.unlinkChart,c=e.crossFiltering,d=e.seriesChartTypes;r!==this.suppliedCellRange&&(this.dimensionCellRange=void 0,this.valueCellRange=void 0),this.chartType=n,this.pivotChart=i,this.chartThemeName=a,this.aggFunc=s,this.referenceCellRange=r,this.suppliedCellRange=r,this.suppressChartRanges=l,this.unlinked=!!u,this.crossFiltering=!!c,this.updateSelectedDimension(r==null?void 0:r.columns),this.updateCellRanges();var h=this.isComboChart()||d;h&&this.comboChartModel.update(d),this.unlinked||this.updateData()},t.prototype.updateCellRanges=function(e){this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);var r=this.chartColumnService.getChartColumns(),n=r.dimensionCols,i=r.valueCols,a=this.getAllColumnsFromRanges();e&&this.updateColumnState(e),this.setDimensionCellRange(n,a,e),this.setValueCellRange(i,a,e),e||(this.resetColumnState(),this.syncDimensionCellRange()),this.comboChartModel.updateSeriesChartTypes()},t.prototype.updateData=function(){var e=this.getRowIndexes(),r=e.startRow,n=e.endRow;this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();var i={aggFunc:this.aggFunc,dimensionCols:[this.getSelectedDimension()],grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow:r,endRow:n,isScatter:E.includes(["scatter","bubble"],this.chartType)},a=this.datasource.getData(i),s=a.chartData,l=a.columnNames;this.chartData=s,this.columnNames=l},t.prototype.isGrouping=function(){var e=this.gridOptionsService.isTreeData(),r=e?null:this.chartColumnService.getRowGroupColumns(),n=e||r&&r.length>0,i=this.getSelectedDimension().colId,a=this.chartColumnService.getGroupDisplayColumns(),s=a.map(function(l){return l.getColId()}).some(function(l){return l===i});return!!n&&s},t.prototype.getSelectedValueCols=function(){return this.valueColState.filter(function(e){return e.selected}).map(function(e){return e.column})},t.prototype.getSelectedDimension=function(){return this.dimensionColState.filter(function(e){return e.selected})[0]},t.prototype.getColDisplayName=function(e){return this.chartColumnService.getColDisplayName(e)},t.prototype.isPivotMode=function(){return this.chartColumnService.isPivotMode()},t.prototype.getChartDataType=function(e){var r=this.chartColumnService.getColumn(e);return r?r.getColDef().chartDataType:void 0},t.prototype.isPivotActive=function(){return this.chartColumnService.isPivotActive()},t.prototype.createCellRange=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:r,startColumn:e===pi.DIMENSION?r[0]:this.referenceCellRange.startColumn,type:e}},t.prototype.getAllColumnsFromRanges=function(){if(this.pivotChart)return E.convertToSet(this.chartColumnService.getAllDisplayedColumns());var e=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&e.push.apply(e,Fa([],La(this.dimensionCellRange.columns))),this.valueCellRange&&e.push.apply(e,Fa([],La(this.valueCellRange.columns))),E.convertToSet(e)},t.prototype.getRowIndexes=function(){var e=0,r=0,n=this,i=n.rangeService,a=n.valueCellRange;if(i&&a){e=i.getRangeStartRow(a).rowIndex;var s=i.getRangeEndRow(a);r=s.rowPinned==="bottom"?-1:s.rowIndex}return{startRow:e,endRow:r}},t.prototype.resetColumnState=function(){var e=this,r=this.chartColumnService.getChartColumns(),n=r.dimensionCols,i=r.valueCols,a=this.getAllColumnsFromRanges(),s=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];var l=!1,u=1,c=this.suppliedCellRange.columns[0];n.forEach(function(f){var p=f.getColId()==="ag-Grid-AutoColumn",v=!1;e.crossFiltering&&e.aggFunc?c.getColId()===f.getColId()&&(v=!0):v=p?!0:!l&&a.has(f),e.dimensionColState.push({column:f,colId:f.getColId(),displayName:e.getColDisplayName(f),selected:v,order:u++}),v&&(l=!0)});var d={colId:t.DEFAULT_CATEGORY,displayName:this.chartTranslationService.translate("defaultCategory"),selected:!l,order:0};this.dimensionColState.unshift(d);var h=this.referenceCellRange.columns.filter(function(f){return i.has(f)});i.forEach(function(f){s&&E.includes(e.referenceCellRange.columns,f)&&(f=h.shift()),e.valueColState.push({column:f,colId:f.getColId(),displayName:e.getColDisplayName(f),selected:a.has(f),order:u++})})},t.prototype.updateColumnState=function(e){var r=function(u){return u.colId===e.colId},n=this,i=n.dimensionColState,a=n.valueColState;i.filter(r).length>0?i.forEach(function(u){return u.selected=r(u)}):a.filter(r).forEach(function(u){return u.selected=e.selected});var s=Fa(Fa([],La(i)),La(a)),l=[];s.forEach(function(u,c){c===e.order&&l.push(e.colId),u.colId!==e.colId&&l.push(u.colId)}),s.forEach(function(u){var c=l.indexOf(u.colId);u.order=c>=0?l.indexOf(u.colId):s.length-1}),this.reorderColState()},t.prototype.reorderColState=function(){var e=function(r,n){return r.order-n.order};this.dimensionColState.sort(e),this.valueColState.sort(e)},t.prototype.setDimensionCellRange=function(e,r,n){var i=this;if(this.dimensionCellRange=void 0,!n&&!this.dimensionColState.length){e.forEach(function(l){i.dimensionCellRange||!r.has(l)||(i.dimensionCellRange=i.createCellRange(pi.DIMENSION,l))});return}var a=n;if(this.crossFiltering&&this.aggFunc){var s=this.suppliedCellRange.columns[0];a=this.dimensionColState.filter(function(l){return l.colId===s.getColId()})[0]}else(!a||!e.has(a.column))&&(a=this.dimensionColState.filter(function(l){return l.selected})[0]);a&&a.colId!==t.DEFAULT_CATEGORY&&(this.dimensionCellRange=this.createCellRange(pi.DIMENSION,a.column))},t.prototype.setValueCellRange=function(e,r,n){this.valueCellRange=void 0;var i=[];if(e.forEach(function(s){n&&n.colId===s.getColId()?n.selected&&i.push(n.column):r.has(s)&&i.push(s)}),i.length>0){var a=[];this.valueColState.length>0?a=this.valueColState.map(function(s){return s.colId}):r.forEach(function(s){return a.push(s.getColId())}),i.sort(function(s,l){return a.indexOf(s.getColId())-a.indexOf(l.getColId())}),this.valueCellRange=this.createCellRange.apply(this,Fa([pi.VALUE],La(i)))}},t.prototype.updateSelectedDimension=function(e){var r=new Set(e.map(function(i){return i.getColId()})),n=this.dimensionColState.find(function(i){return r.has(i.colId)})||this.dimensionColState[0];this.dimensionColState=this.dimensionColState.map(function(i){return ou(ou({},i),{selected:i.colId===n.colId})})},t.prototype.syncDimensionCellRange=function(){var e=this.getSelectedDimension();e&&e.column&&(this.dimensionCellRange=this.createCellRange(pi.DIMENSION,e.column))},t.prototype.isComboChart=function(){return["columnLineCombo","areaColumnCombo","customCombo"].includes(this.chartType)},t.DEFAULT_CATEGORY="AG-GRID-DEFAULT-CATEGORY",Oc([D("rangeService")],t.prototype,"rangeService",void 0),Oc([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Oc([te],t.prototype,"init",null),t}(pe);function Lp(o){return o.chart!=null?o.chart:o}var Ci=function(){return Ci=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Ci.apply(this,arguments)},Ey=function(){function o(t){this.chartProxyParams=t,this.clearThemeOverrides=!1,this.chart=t.chartInstance,this.chartType=t.chartType,this.crossFiltering=t.crossFiltering,this.crossFilterCallback=t.crossFilterCallback,this.standaloneChartType=sr(this.chartType),this.chart==null?this.chart=zo.create(this.getCommonChartOptions()):this.clearThemeOverrides=!0}return o.prototype.getChart=function(){return Lp(this.chart)},o.prototype.getChartRef=function(){return this.chart},o.prototype.downloadChart=function(t,e,r){var n=this.chart,i=Lp(n),a=e||(i.title?i.title.text:"chart"),s=t||{},l=s.width,u=s.height;zo.download(n,{width:l,height:u,fileName:a,fileFormat:r})},o.prototype.getChartImageDataURL=function(t){return this.getChart().scene.getDataURL(t)},o.prototype.getChartOptions=function(){return this.chart.getOptions()},o.prototype.getChartThemeOverrides=function(){var t,e=this.getChartOptions().theme;return(t=e.overrides)!==null&&t!==void 0?t:{}},o.prototype.getChartPalette=function(){return ws(this.getChartOptions().theme).palette},o.prototype.setPaired=function(t){var e,r=sr(this.chartProxyParams.chartType);zo.updateDelta(this.chart,{theme:{overrides:(e={},e[r]={paired:t},e)}})},o.prototype.isPaired=function(){var t=sr(this.chartProxyParams.chartType);return E.get(this.getChartThemeOverrides(),t+".paired",!0)},o.prototype.lookupCustomChartTheme=function(t){return Cy(this.chartProxyParams,t)},o.prototype.transformData=function(t,e,r){return r?t.map(function(n,i){var a=n[e],s=a&&a.toString?a.toString():"",l=Ci({},n);return l[e]={id:i,value:a,toString:function(){return s}},l}):t},o.prototype.getCommonChartOptions=function(t){var e,r,n=this.clearThemeOverrides?{}:(r=(e=this.chart)===null||e===void 0?void 0:e.getOptions())!==null&&r!==void 0?r:{},i=this.chart!=null?{overrides:this.getActiveFormattingPanelOverrides()}:{};return this.clearThemeOverrides=!1,Ci(Ci({},n),{theme:Ci(Ci({},jA(this.chartProxyParams,this)),t?{overrides:t}:i),container:this.chartProxyParams.parentElement,mode:"integrated"})},o.prototype.getActiveFormattingPanelOverrides=function(){var t,e;if(this.clearThemeOverrides)return{};var r=(t=this.chart)===null||t===void 0?void 0:t.getOptions().theme;return(e=r==null?void 0:r.overrides)!==null&&e!==void 0?e:{}},o.prototype.destroy=function(t){var e=t===void 0?{}:t,r=e.keepChartInstance,n=r===void 0?!1:r;if(n)return this.chart;this.destroyChart()},o.prototype.destroyChart=function(){this.chart&&(this.chart.destroy(),this.chart=void 0)},o}(),IM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),au=function(){return au=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},au.apply(this,arguments)},la=function(o){IM(t,o);function t(e){var r=o.call(this,e)||this;return r.crossFilteringAllPoints=new Set,r.crossFilteringSelectedPoints=[],r}return t.prototype.update=function(e){var r=this.getAxes(e),n=au(au({},this.getCommonChartOptions(e.updatedOverrides)),{data:this.getData(e,r),axes:r,series:this.getSeries(e)});zo.update(this.getChartRef(),n)},t.prototype.getData=function(e,r){var n,i=["area","line"].includes(this.standaloneChartType),a=this.standaloneChartType==="bar"?"left":"bottom",s=((n=r.find(function(l){return l.position===a}))===null||n===void 0?void 0:n.type)==="category";return this.crossFiltering&&i?this.getCrossFilterData(e):this.getDataTransformedData(e,s)},t.prototype.getDataTransformedData=function(e,r){return this.transformData(e.data,e.category.id,r)},t.prototype.getXAxisType=function(e){return e.grouping?"groupedCategory":t.isTimeAxis(e)?"time":"category"},t.isTimeAxis=function(e){if(e.category&&e.category.chartDataType)return e.category.chartDataType==="time";var r=e.data[0];return(r&&r[e.category.id])instanceof Date},t.prototype.crossFilteringReset=function(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()},t.prototype.crossFilteringPointSelected=function(e){return this.crossFilteringSelectedPoints.length==0||this.crossFilteringSelectedPoints.includes(e)},t.prototype.crossFilteringDeselectedPoints=function(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length},t.prototype.extractLineAreaCrossFilterSeries=function(e,r){var n=this,i=function(a){if(n.standaloneChartType==="area"){var s=r.getCrossFilteringContext().lastSelectedChartId;return s===r.chartId?a+"-total":a}return a+"-total"};return e.map(function(a){return a.yKey=i(a.yKey),a.listeners={nodeClick:function(s){var l=s.datum[a.xKey],u=s.event.metaKey||s.event.ctrlKey;n.crossFilteringAddSelectedPoint(u,l),n.crossFilterCallback(s)}},a.marker={formatter:function(s){var l=s.datum[r.category.id];return{fill:s.highlighted?"yellow":s.fill,size:s.highlighted?14:n.crossFilteringPointSelected(l)?8:0}}},n.standaloneChartType==="area"&&(a.fillOpacity=n.crossFilteringDeselectedPoints()?.3:1),n.standaloneChartType==="line"&&(a.strokeOpacity=n.crossFilteringDeselectedPoints()?.3:1),a})},t.prototype.getCrossFilterData=function(e){var r=this;this.crossFilteringAllPoints.clear();var n=e.fields[0].colId,i=n+"-filtered-out",a=e.getCrossFilteringContext().lastSelectedChartId;return e.data.map(function(s){var l=s[e.category.id];r.crossFilteringAllPoints.add(l);var u=r.crossFilteringPointSelected(l);return r.standaloneChartType==="area"&&a===e.chartId&&(s[n+"-total"]=u?s[n]:s[n]+s[i]),r.standaloneChartType==="line"&&(s[n+"-total"]=u?s[n]:s[n]+s[i]),s})},t.prototype.crossFilteringAddSelectedPoint=function(e,r){e?this.crossFilteringSelectedPoints.push(r):this.crossFilteringSelectedPoints=[r]},t}(Ey);function LM(o){return Array.isArray(o)?[]:{}}function vs(o,t){return t.clone!==!1&&t.isMergeableObject(o)?Ai(LM(o),o,t):o}function FM(o,t,e){return o.concat(t).map(function(r){return vs(r,e)})}function kM(o,t){if(!t.customMerge)return Ai;var e=t.customMerge(o);return typeof e=="function"?e:Ai}function NM(o){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(o).filter(function(t){return o.propertyIsEnumerable(t)}):[]}function Fp(o){return Object.keys(o).concat(NM(o))}function Ty(o,t){try{return t in o}catch{return!1}}function GM(o,t){return Ty(o,t)&&!(Object.hasOwnProperty.call(o,t)&&Object.propertyIsEnumerable.call(o,t))}function VM(o,t,e){o===void 0&&(o={}),t===void 0&&(t={});var r={};return e.isMergeableObject(o)&&Fp(o).forEach(function(n){r[n]=vs(o[n],e)}),Fp(t).forEach(function(n){GM(o,n)||(Ty(o,n)&&e.isMergeableObject(t[n])?r[n]=kM(n,e)(o[n],t[n],e):r[n]=vs(t[n],e))}),r}function jM(o){return BM(o)&&!HM(o)}function BM(o){return!!o&&typeof o=="object"}function HM(o){var t=Object.prototype.toString.call(o);return t==="[object RegExp]"||t==="[object Date]"}function Ai(o,t,e){e=e||{},e.arrayMerge=e.arrayMerge||FM,e.isMergeableObject=e.isMergeableObject||jM,e.cloneUnlessOtherwiseSpecified=vs;var r=Array.isArray(t),n=Array.isArray(o),i=r===n;return i?r?e.arrayMerge(o,t,e):VM(o,t,e):vs(t,e)}function kp(o,t){var e=parseInt(o.slice(1,3),16),r=parseInt(o.slice(3,5),16),n=parseInt(o.slice(5,7),16);return t?"rgba("+e+", "+r+", "+n+", "+t+")":"rgba("+e+", "+r+", "+n+")"}function Np(o,t){return o.map(function(e){var r=rt.fromString(e);return new rt(r.r,r.g,r.b,t).toHexString()})}var zM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dn=function(){return Dn=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Dn.apply(this,arguments)},WM=function(o){zM(t,o);function t(e){return o.call(this,e)||this}return t.prototype.getAxes=function(e){var r=this.standaloneChartType==="bar",n=[{type:this.getXAxisType(e),position:r?"left":"bottom"},{type:"number",position:r?"bottom":"left"}];if(this.isNormalised()){var i=n[1];i.label=Dn(Dn({},i.label),{formatter:function(a){return Math.round(a.value)+"%"}})}return n},t.prototype.getSeries=function(e){var r=this,n=["groupedColumn","groupedBar"],i=!this.crossFiltering&&E.includes(n,this.chartType),a=e.fields.map(function(s){return{type:r.standaloneChartType,grouped:i,stacked:["stackedColumn","normalizedColumn","stackedBar","normalizedBar"].includes(r.chartType),normalizedTo:r.isNormalised()?100:void 0,xKey:e.category.id,xName:e.category.name,yKey:s.colId,yName:s.displayName}});return this.crossFiltering?this.extractCrossFilterSeries(a):a},t.prototype.extractCrossFilterSeries=function(e){for(var r=this,n=this.getChartPalette(),i=function(c,d){return Dn(Dn({},c),{highlightStyle:{item:{fill:void 0}},fill:n==null?void 0:n.fills[d],stroke:n==null?void 0:n.strokes[d],listeners:{nodeClick:r.crossFilterCallback}})},a=function(c){var d=c.yKey+"-filtered-out";return Dn(Dn({},Ai({},c)),{yKey:d,fill:kp(c.fill,"0.3"),stroke:kp(c.stroke,"0.3"),showInLegend:!1})},s=[],l=0;l<e.length;l++){var u=i(e[l],l);s.push(u),s.push(a(u))}return s},t.prototype.isNormalised=function(){var e=["normalizedColumn","normalizedBar"];return!this.crossFiltering&&E.includes(e,this.chartType)},t}(la),UM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),su=function(){return su=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},su.apply(this,arguments)},KM=function(o){UM(t,o);function t(e){return o.call(this,e)||this}return t.prototype.getAxes=function(e){var r=[{type:this.getXAxisType(e),position:"bottom"},{type:"number",position:"left"}];if(this.isNormalised()){var n=r[1];n.label=su(su({},n.label),{formatter:function(i){return Math.round(i.value)+"%"}})}return r},t.prototype.getSeries=function(e){var r=this,n=e.fields.map(function(i){return{type:r.standaloneChartType,xKey:e.category.id,xName:e.category.name,yKey:i.colId,yName:i.displayName,normalizedTo:r.chartType==="normalizedArea"?100:void 0,stacked:["normalizedArea","stackedArea"].includes(r.chartType)}});return this.crossFiltering?this.extractLineAreaCrossFilterSeries(n,e):n},t.prototype.isNormalised=function(){return!this.crossFiltering&&this.chartType==="normalizedArea"},t}(la),$M=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),XM=function(o){$M(t,o);function t(e){return o.call(this,e)||this}return t.prototype.getAxes=function(e){return[{type:this.getXAxisType(e),position:"bottom"},{type:"number",position:"left"}]},t.prototype.getSeries=function(e){var r=this,n=e.fields.map(function(i){return{type:r.standaloneChartType,xKey:e.category.id,xName:e.category.name,yKey:i.colId,yName:i.displayName}});return this.crossFiltering?this.extractLineAreaCrossFilterSeries(n,e):n},t}(la),YM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),nr=function(){return nr=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},nr.apply(this,arguments)},qM=function(o){YM(t,o);function t(e){return o.call(this,e)||this}return t.prototype.update=function(e){var r=e.data,n=e.category,i=nr(nr({},this.getCommonChartOptions(e.updatedOverrides)),{data:this.crossFiltering?this.getCrossFilterData(e):this.transformData(r,n.id),series:this.getSeries(e)});zo.update(this.getChartRef(),i)},t.prototype.getSeries=function(e){var r=this,n=e.fields.length,i={currentOffset:0,offsetAmount:n>1?20:40},a=this.getFields(e).map(function(s){var l,u={type:r.standaloneChartType,angleKey:s.colId,angleName:s.displayName,sectorLabelKey:s.colId,calloutLabelKey:e.category.id,calloutLabelName:e.category.name};if(r.chartType==="doughnut"){var c=t.calculateOffsets(i),d=c.outerRadiusOffset,h=c.innerRadiusOffset,f=s.displayName?{title:{text:s.displayName,showInLegend:n>1}}:void 0;return nr(nr(nr(nr({},u),{outerRadiusOffset:d,innerRadiusOffset:h}),f),{calloutLine:{colors:(l=r.getChartPalette())===null||l===void 0?void 0:l.strokes}})}return u});return this.crossFiltering?this.extractCrossFilterSeries(a):a},t.prototype.getCrossFilterData=function(e){var r=e.fields[0].colId,n=r+"-filtered-out";return e.data.map(function(i){var a=i[r]+i[n];return i[r+"-total"]=a,i[n]=1,i[r]=i[r]/a,i})},t.prototype.extractCrossFilterSeries=function(e){var r=this,n=this.getChartPalette(),i=function(c){return nr(nr({},c),{calloutLabel:{enabled:!1},highlightStyle:{item:{fill:void 0}},radiusKey:c.angleKey,angleKey:c.angleKey+"-total",radiusMin:0,radiusMax:1,listeners:{nodeClick:r.crossFilterCallback}})},a=function(c,d){var h,f;return nr(nr({},Ai({},u)),{radiusKey:d+"-filtered-out",fills:Np((h=c.fills)!==null&&h!==void 0?h:n.fills,.3),strokes:Np((f=c.strokes)!==null&&f!==void 0?f:n.strokes,.3),showInLegend:!1})},s=e[0],l=s.angleKey,u=i(s);return[a(s,l),u]},t.calculateOffsets=function(e){var r=e.currentOffset;e.currentOffset-=e.offsetAmount;var n=e.currentOffset;return e.currentOffset-=e.offsetAmount,{outerRadiusOffset:r,innerRadiusOffset:n}},t.prototype.getFields=function(e){return this.chartType==="pie"?e.fields.slice(0,1):e.fields},t.prototype.crossFilteringReset=function(){},t}(Ey),ZM=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),at=function(){return at=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},at.apply(this,arguments)},JM=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Gp=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Vp=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},QM=function(o){ZM(t,o);function t(e){return o.call(this,e)||this}return t.prototype.getAxes=function(e){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]},t.prototype.getSeries=function(e){var r=this,n=this.isPaired(),i=this.getSeriesDefinitions(e.fields,n),a=e.category.id===fh.DEFAULT_CATEGORY?void 0:e.category,s=i.map(function(l){return{type:r.standaloneChartType,xKey:l.xField.colId,xName:l.xField.displayName,yKey:l.yField.colId,yName:l.yField.displayName,title:l.yField.displayName+" vs "+l.xField.displayName,sizeKey:l.sizeField?l.sizeField.colId:void 0,sizeName:l.sizeField?l.sizeField.displayName:void 0,labelKey:a?a.id:l.yField.colId,labelName:a?a.name:void 0}});return this.crossFiltering?this.extractCrossFilterSeries(s,e):s},t.prototype.extractCrossFilterSeries=function(e,r){var n=this,i=r.data,a=this.getChartPalette(),s=function(h){return h+"-filtered-out"},l=function(h,f){var p,v,g,m=[1/0,-1/0];if(f!=null)try{for(var y=JM(h),S=y.next();!S.done;S=y.next()){var C=S.value,w=(g=C[f])!==null&&g!==void 0?g:C[s(f)];w<m[0]&&(m[0]=w),w>m[1]&&(m[1]=w)}}catch(x){p={error:x}}finally{try{S&&!S.done&&(v=y.return)&&v.call(y)}finally{if(p)throw p.error}}if(m[0]<=m[1])return m},u=function(h,f){var p=h.sizeKey,v=a==null?void 0:a.fills[f],g=a==null?void 0:a.strokes[f],m=l(i,p),y=at(at({},h.marker),{fill:v,stroke:g,domain:m});return at(at({},h),{marker:y,highlightStyle:{item:{fill:"yellow"}},listeners:at(at({},h.listeners),{nodeClick:n.crossFilterCallback})})},c=function(h){var f=h.sizeKey,p=h.yKey,v=h.xKey;return f!=null&&(f=s(f)),at(at({},h),{yKey:s(p),xKey:s(v),marker:at(at({},h.marker),{fillOpacity:.3,strokeOpacity:.3}),sizeKey:f,showInLegend:!1,listeners:at(at({},h.listeners),{nodeClick:function(g){var m,y=g.datum[s(v)],S=at(at({},g),{xKey:v,datum:at(at({},g.datum),(m={},m[v]=y,m))});n.crossFilterCallback(S)}})})},d=e.map(u);return Vp(Vp([],Gp(d)),Gp(d.map(c)))},t.prototype.getSeriesDefinitions=function(e,r){if(e.length<2)return[];var n=this.chartType==="bubble";if(r)return n?e.map(function(a,s){return s%3===0?{xField:a,yField:e[s+1],sizeField:e[s+2]}:null}).filter(function(a){return a&&a.yField&&a.sizeField}):e.map(function(a,s){return s%2===0?{xField:a,yField:e[s+1]}:null}).filter(function(a){return a&&a.yField});var i=e[0];return n?e.map(function(a,s){return s%2===1?{xField:i,yField:a,sizeField:e[s+1]}:null}).filter(function(a){return a&&a.sizeField}):e.filter(function(a,s){return s>0}).map(function(a){return{xField:i,yField:a}})},t}(la),eR=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),tR=function(o){eR(t,o);function t(e){return o.call(this,e)||this}return t.prototype.getSeries=function(e){var r=e.fields[0];return[{type:this.standaloneChartType,xKey:r.colId,xName:r.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1}]},t.prototype.getAxes=function(e){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]},t}(la),rR=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),nR=function(o){rR(t,o);function t(e){var r=o.call(this)||this;return r.chartController=e,r}return t.prototype.getChartOption=function(e){return E.get(this.getChart(),e,void 0)},t.prototype.setChartOption=function(e,r,n){var i=this,a=this.chartController.getChartSeriesTypes();this.chartController.isComboChart()&&a.push("cartesian");var s={};a.forEach(function(l){s=Ai(s,i.createChartOptions({seriesType:l,expression:e,value:r}))}),this.updateChart(s),n||this.raiseChartOptionsChangedEvent()},t.prototype.awaitChartOptionUpdate=function(e){var r=this.chartController.getChartProxy().getChart();r.waitForUpdate().then(function(){return e()}).catch(function(n){return console.error("AG Grid - chart update failed",n)})},t.prototype.getAxisProperty=function(e){var r;return E.get((r=this.getChart().axes)===null||r===void 0?void 0:r[0],e,void 0)},t.prototype.setAxisProperty=function(e,r){var n=this,i,a=this.getChart(),s={};(i=a.axes)===null||i===void 0||i.forEach(function(l){s=Ai(s,n.getUpdateAxisOptions(l,e,r))}),this.updateChart(s),this.raiseChartOptionsChangedEvent()},t.prototype.getLabelRotation=function(e){var r=this.getAxis(e);return E.get(r,"label.rotation",void 0)},t.prototype.setLabelRotation=function(e,r){var n=this.getAxis(e);if(n){var i=this.getUpdateAxisOptions(n,"label.rotation",r);this.updateChart(i),this.raiseChartOptionsChangedEvent()}},t.prototype.getSeriesOption=function(e,r){var n=this.getChart().series.find(function(i){return t.isMatchingSeries(r,i)});return E.get(n,e,void 0)},t.prototype.setSeriesOption=function(e,r,n){var i=this.createChartOptions({seriesType:n,expression:"series."+e,value:r});this.updateChart(i),this.raiseChartOptionsChangedEvent()},t.prototype.getPairedMode=function(){return this.chartController.getChartProxy().isPaired()},t.prototype.setPairedMode=function(e){this.chartController.getChartProxy().setPaired(e)},t.prototype.getAxis=function(e){var r=this.getChart();if(!(!r.axes||r.axes.length<1))return e==="xAxis"?r.axes&&r.axes[0].direction==="x"?r.axes[0]:r.axes[1]:r.axes&&r.axes[1].direction==="y"?r.axes[1]:r.axes[0]},t.prototype.getUpdateAxisOptions=function(e,r,n){var i=sr(this.getChartType()),a=["number","category","time","groupedCategory"];return a.includes(e.type)?this.createChartOptions({seriesType:i,expression:"axes."+e.type+"."+r,value:n}):{}},t.prototype.getChartType=function(){return this.chartController.getChartType()},t.prototype.getChart=function(){return this.chartController.getChartProxy().getChart()},t.prototype.updateChart=function(e){var r=this.chartController.getChartProxy().getChartRef();zo.updateDelta(r,e)},t.prototype.createChartOptions=function(e){var r=e.seriesType,n=e.expression,i=e.value,a={},s={theme:{overrides:a}};return E.set(a,r+"."+n,i),s},t.prototype.raiseChartOptionsChangedEvent=function(){var e=this.chartController.getChartModel(),r={type:V.EVENT_CHART_OPTIONS_CHANGED,chartId:e.chartId,chartType:e.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:e.chartOptions};this.eventService.dispatchEvent(r)},t.isMatchingSeries=function(e,r){return GA.includes(e)&&r.type===e},t.prototype.destroy=function(){o.prototype.destroy.call(this)},t}(pe),iR=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),md=function(){return md=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},md.apply(this,arguments)},oR=function(o){iR(t,o);function t(e){return o.call(this,e)||this}return t.prototype.getAxes=function(e){var r=e?e.fields:[],n=new Map(r.map(function(u){return[u.colId,u]})),i=this.getYKeys(r,e.seriesChartTypes),a=i.primaryYKeys,s=i.secondaryYKeys,l=[{type:this.getXAxisType(e),position:"bottom",gridStyle:[{stroke:void 0}]}];return a.length>0&&l.push({type:"number",keys:a,position:"left"}),s.length>0&&s.forEach(function(u,c){var d=n.get(u),h=d&&d.colId===u;if(h){var f={type:"number",keys:[u],position:"right"},p=a.some(function(g){return!!n.get(g)}),v=c===s.length-1;!p&&v||(f.gridStyle=[{stroke:void 0}]),l.push(f)}}),l},t.prototype.getSeries=function(e){var r=e.fields,n=e.category,i=e.seriesChartTypes;return r.map(function(a){var s=i.find(function(d){return d.colId===a.colId});if(s){var l=s.chartType,u=["groupedColumn","groupedBar"].includes(l),c=u?{grouped:!0}:{};return md({type:sr(l),xKey:n.id,yKey:a.colId,yName:a.displayName,stacked:["stackedArea","stackedColumn"].includes(l)},c)}})},t.prototype.getYKeys=function(e,r){var n=[],i=[];return e.forEach(function(a){var s=a.colId,l=r.find(function(u){return u.colId===s});l&&(l.secondaryAxis?i.push(s):n.push(s))}),{primaryYKeys:n,secondaryYKeys:i}},t}(la),aR=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ir=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},sR=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},jp=function(o){aR(t,o);function t(e){var r=o.call(this,t.TEMPLATE)||this;return r.params=e,r}return t.prototype.init=function(){var e=this,r=this.gridOptionsService.get("chartThemes")||xy;if(r.length<1)throw new Error("Cannot create chart: no chart themes are available to be used.");var n=this.params.chartThemeName;E.includes(r,n)||(n=r[0]);var i={chartId:this.params.chartId,pivotChart:this.params.pivotChart,chartType:this.params.chartType,chartThemeName:n,aggFunc:this.params.aggFunc,cellRange:this.params.cellRange,suppressChartRanges:this.params.suppressChartRanges,unlinkChart:this.params.unlinkChart,crossFiltering:this.params.crossFiltering,seriesChartTypes:this.params.seriesChartTypes},a=this.gridOptionsService.is("enableRtl");this.addCssClass(a?"ag-rtl":"ag-ltr");var s=this.createBean(new fh(i));this.chartController=this.createManagedBean(new _r(s)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog&&this.addDialog(),this.addMenu(),this.addTitleEditComp(),this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this)),this.addManagedListener(this.chartController,_r.EVENT_CHART_MODEL_UPDATE,this.update.bind(this)),this.chartMenu&&this.addManagedListener(this.chartMenu,Rp.EVENT_DOWNLOAD_CHART,function(){return e.downloadChart()}),this.update(),this.raiseChartCreatedEvent()},t.prototype.validateCustomThemes=function(){var e=this.getChartThemes(),r=this.gridOptionsService.get("customChartThemes");r&&E.getAllKeysInObjects([r]).forEach(function(n){E.includes(e,n)||console.warn("AG Grid: a custom chart theme with the name '"+n+"' has been supplied but not added to the 'chartThemes' list")})},t.prototype.createChart=function(){var e=this,r=void 0;this.chartProxy&&(r=this.chartProxy.destroy({keepChartInstance:!0}));var n=function(l,u){var c=e.params.crossFilteringContext;c.lastSelectedChartId=u?"":e.chartController.getChartId(),u&&e.params.crossFilteringResetCallback(),e.crossFilterService.filter(l,u)},i=this.chartController.getChartType(),a={chartType:i,chartInstance:r,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gridOptionsService.get("customChartThemes"),getGridOptionsChartThemeOverrides:function(){return e.getGridOptionsChartThemeOverrides()},getExtraPaddingDirections:function(){var l,u;return(u=(l=e.chartMenu)===null||l===void 0?void 0:l.getExtraPaddingDirections())!==null&&u!==void 0?u:[]},apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:this.params.crossFiltering,crossFilterCallback:n,parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:function(l,u){return e.chartTranslationService.translate(l,u)}};if(this.params.chartOptionsToRestore=void 0,this.chartType=i,this.chartThemeName=this.chartController.getChartThemeName(),this.chartProxy=t.createChartProxy(a),!this.chartProxy){console.warn("AG Grid: invalid chart type supplied: ",a.chartType);return}var s=this.eChart.querySelector("canvas");s&&s.classList.add("ag-charts-canvas"),this.chartController.setChartProxy(this.chartProxy),this.chartOptionsService=this.createBean(new nR(this.chartController)),this.titleEdit&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)},t.prototype.getChartThemeName=function(){return this.chartController.getChartThemeName()},t.prototype.getChartThemes=function(){return this.chartController.getThemes()},t.prototype.getGridOptionsChartThemeOverrides=function(){return this.gridOptionsService.get("chartThemeOverrides")},t.createChartProxy=function(e){switch(e.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new WM(e);case"pie":case"doughnut":return new qM(e);case"area":case"stackedArea":case"normalizedArea":return new KM(e);case"line":return new XM(e);case"scatter":case"bubble":return new QM(e);case"histogram":return new tR(e);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new oR(e);default:throw"AG Grid: Unable to create chart as an invalid chartType = '"+e.chartType+"' was supplied."}},t.prototype.addDialog=function(){var e=this,r=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),n=this.getBestDialogSize(),i=n.width,a=n.height;this.chartDialog=new Bc({resizable:!0,movable:!0,maximizable:!0,title:r,width:i,height:a,component:this,centered:!0,closable:!0}),this.getContext().createBean(this.chartDialog),this.chartDialog.addEventListener(Bc.EVENT_DESTROYED,function(){return e.destroy()})},t.prototype.getBestDialogSize=function(){var e=this.popupService.getPopupParent(),r=E.getAbsoluteWidth(e)*.75,n=E.getAbsoluteHeight(e)*.75,i=.553,a=this.chartProxy.getChart(),s=this.params.insideDialog?850:a.width,l=this.params.insideDialog?470:a.height;return(s>r||l>n)&&(s=Math.min(s,r),l=Math.round(s*i),l>n&&(l=n,s=Math.min(s,Math.round(l/i)))),{width:s,height:l}},t.prototype.addMenu=function(){this.params.crossFiltering||(this.chartMenu=this.createBean(new Rp(this.eChartContainer,this.eMenuContainer,this.chartController,this.chartOptionsService)),this.eChartContainer.appendChild(this.chartMenu.getGui()))},t.prototype.addTitleEditComp=function(){this.titleEdit=this.createBean(new _M(this.chartMenu)),this.eTitleEditContainer.appendChild(this.titleEdit.getGui()),this.chartProxy&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)},t.prototype.update=function(e){var r=this;if(e!=null&&e.chartId){var n=this.chartController.update(e);if(!n)return}var i=this.chartTypeChanged(e);i&&this.createChart(),this.updateChart(e==null?void 0:e.chartThemeOverrides),e!=null&&e.chartId&&this.chartProxy.getChart().waitForUpdate().then(function(){r.chartController.raiseChartApiUpdateEvent()})},t.prototype.updateChart=function(e){var r=this,n=this.chartProxy,i=this.chartController.getSelectedValueColState(),a=i.map(function(c){return{colId:c.colId,displayName:c.displayName}}),s=this.chartController.getChartData(),l=this.handleEmptyChart(s,a);if(!l){var u=this.chartController.getChartUpdateParams(e);n.update(u),this.chartProxy.getChart().waitForUpdate().then(function(){r.chartController.raiseChartUpdatedEvent()}),this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}},t.prototype.chartTypeChanged=function(e){var r=sR([this.chartController.getChartType(),e==null?void 0:e.chartType],2),n=r[0],i=r[1];return this.chartType!==n||!!i&&this.chartType!==i},t.prototype.getChartModel=function(){return this.chartController.getChartModel()},t.prototype.getChartImageDataURL=function(e){return this.chartProxy.getChartImageDataURL(e)},t.prototype.handleEmptyChart=function(e,r){var n=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),i=1;this.chartController.isActiveXYChart()&&(i=this.chartController.getChartType()==="bubble"?3:2);var a=r.length<i||e.length===0;if(this.eChart){var s=n||a;E.setDisplayed(this.eChart,!s),E.setDisplayed(this.eEmpty,s)}return n?(this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode"),!0):a?(this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart"),!0):!1},t.prototype.downloadChart=function(e,r,n){this.chartProxy.downloadChart(e,r,n)},t.prototype.openChartToolPanel=function(e){var r=e&&ml[e];this.chartMenu.showMenu(r)},t.prototype.closeChartToolPanel=function(){this.chartMenu.hideMenu()},t.prototype.getChartId=function(){return this.chartController.getChartId()},t.prototype.getUnderlyingChart=function(){return this.chartProxy.getChartRef()},t.prototype.crossFilteringReset=function(){this.chartProxy.crossFilteringReset()},t.prototype.setActiveChartCellRange=function(e){this.getGui().contains(e.relatedTarget)||(this.chartController.setChartRange(!0),this.gridApi.focusService.clearFocusedCell())},t.prototype.raiseChartCreatedEvent=function(){var e=this,r={type:V.EVENT_CHART_CREATED,chartId:this.chartController.getChartId()};this.chartProxy.getChart().waitForUpdate().then(function(){e.eventService.dispatchEvent(r)})},t.prototype.raiseChartDestroyedEvent=function(){var e={type:V.EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId()};this.eventService.dispatchEvent(e)},t.prototype.destroy=function(){o.prototype.destroy.call(this),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.destroyBean(this.titleEdit),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog);var e=this.getGui();E.clearElement(e),E.removeFromParent(e),this.raiseChartDestroyedEvent()},t.TEMPLATE=`<div class="ag-chart" tabindex="-1">
            <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">
                <div ref="eChart" class="ag-chart-canvas-wrapper"></div>
                <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>
            </div>
            <div ref="eTitleEditContainer"></div>
            <div ref="eMenuContainer" class="ag-chart-docked-container"></div>
        </div>`,Ir([B("eChart")],t.prototype,"eChart",void 0),Ir([B("eChartContainer")],t.prototype,"eChartContainer",void 0),Ir([B("eMenuContainer")],t.prototype,"eMenuContainer",void 0),Ir([B("eEmpty")],t.prototype,"eEmpty",void 0),Ir([B("eTitleEditContainer")],t.prototype,"eTitleEditContainer",void 0),Ir([D("chartCrossFilterService")],t.prototype,"crossFilterService",void 0),Ir([D("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Ir([D("gridApi")],t.prototype,"gridApi",void 0),Ir([D("popupService")],t.prototype,"popupService",void 0),Ir([te],t.prototype,"init",null),t}(oe),gs="30.1.0",Ne=function(){return Ne=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Ne.apply(this,arguments)},Nn=function(o,t){var e={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&t.indexOf(r)<0&&(e[r]=o[r]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(o);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(o,r[n])&&(e[r[n]]=o[r[n]]);return e},Bp=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},lR=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function uR(o){return o.version,o.version==null&&(o.version=xR(o)),o=Gt("23.0.0",o,cR),o=Gt("24.0.0",o,dR),o=Gt("25.1.0",o,hR),o=Gt("26.0.0",o,fR),o=Gt("26.1.0",o,pR),o=Gt("26.2.0",o,vR),o=Gt("28.0.0",o,gR),o=Gt("28.2.0",o,yR),o=Gt("29.0.0",o,mR),o=Gt("29.1.0",o,Py),o=Gt("29.2.0",o,Ay),o=Gt("30.0.0",o,SR),o=CR(o),o=Gt(gs,o,function(t){return t}),o}function cR(o){return o=Hr("chartOptions.legend.item.marker.type","shape",o),o=Hr("chartOptions.seriesDefaults.marker.type","shape",o),o=Hr("chartOptions.legend.padding","spacing",o),o}function dR(o){var t;o=bt("chartOptions.seriesDefaults.marker.minSize",o);var e=o,r=e.chartType,n=e.chartPalette,i=e.chartOptions,a=i.xAxis,s=i.yAxis,l=Nn(i,["xAxis","yAxis"]),u=Nn(e,["chartType","chartPalette","chartOptions"]),c=VA(r),d=c==null?void 0:c.map(function(h,f){return Ne({type:h},f===0?a:s)});return Ne({chartType:r,chartThemeName:(t=bR[n])!==null&&t!==void 0?t:"ag-default",chartOptions:Ne(Ne({},l),{axes:d,xAxis:a,yAxis:s})},u)}function hR(o){return o=Hr("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",o),o}function fR(o){var t=function(e){var r=e.dimOpacity,n=Nn(e,["dimOpacity"]);return Ne(Ne({},n),r!=null?{series:{dimOpacity:r}}:{})};return o=fn("chartOptions.seriesDefaults.highlightStyle",o,t),o=bt("chart",o),o=bt("chartOptions.seriesDefaults.tooltipClass",o),o=bt("chartOptions.seriesDefaults.tooltipTracking",o),o=zp("chartOptions.axes[].label.rotation",0,o),o=zp("chartOptions.axes[].label.rotation",335,o),o}function pR(o){var t=function(e){var r=e.item,n=e.series,i=Nn(e,["item","series"]);return Ne({item:Ne(Ne({},i),r)},n?{series:n}:{})};return o=fn("chartOptions.seriesDefaults.highlightStyle",o,t),o=fn("chartOptions.series[].highlightStyle",o,t),o}function vR(o){o=bl("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",o),o=bl("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",o),o=bl("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",o),o=bt("chartOptions.seriesDefaults.fill",o),o=bt("chartOptions.seriesDefaults.stroke",o),o=bt("chartOptions.seriesDefaults.callout.colors",o),o=bt("chartOptions.xAxis",o),o=bt("chartOptions.yAxis",o);var t=o,e=t.chartType,r=t.chartOptions,n=r.axes;r.series;var i=r.seriesDefaults,a=Nn(r,["axes","series","seriesDefaults"]),s=Nn(t,["chartType","chartOptions"]),l=[sr(e)],u={};if(!l.includes("pie")){var c={top:{},bottom:{},left:{},right:{}},d=n.map(function(f){var p,v=f.type,g=Nn(f,["type"]);return p={},p[v]=Ne(Ne({},c),g),p}).reduce(Wp,{});my.filter(function(f){return d[f]==null}).forEach(function(f){d[f]=Ne({},c)}),u.axes=d}var h=l.map(function(f){var p;return p={},p[f]=Ne(Ne(Ne({},u),{series:i}),a),p}).reduce(Wp,{});return o=Ne(Ne({},s),{chartType:e,chartOptions:h}),o}function gR(o){return o=bt("chartOptions.*.title.padding",o),o=bt("chartOptions.*.subtitle.padding",o),o=bt("chartOptions.*.axes.*.title.padding",o),o=ph("chartOptions.*.axes.*.title.enabled",!1,o),o}function yR(o){return o=Hr("chartOptions.pie.series.callout","calloutLine",o),o=Hr("chartOptions.pie.series.label","calloutLabel",o),o=Hr("chartOptions.pie.series.labelKey","sectorLabelKey",o),o=Hr("chartOptions.pie.series.labelName","sectorLabelName",o),o}function mR(o){return o=ka("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",o),o=ka("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",o),o=ka("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",o),o=ka("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",o),o=ka("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",o),o=bl("chartOptions.scatter.series.paired","chartOptions.scatter.paired",o),o}function Py(o){return o=bt("chartOptions.axes[].tick.count",o),o}function Ay(o){var t=function(e){var r,n,i,a,s=e.tracking,l=Nn(e,["tracking"]),u=Ne({},l);return s===!1?((r=u.position)!==null&&r!==void 0||(u.position={type:"pointer"}),(n=u.range)!==null&&n!==void 0||(u.range="nearest")):s===!0&&((i=u.position)!==null&&i!==void 0||(u.position={type:"node"}),(a=u.range)!==null&&a!==void 0||(u.range="nearest")),u};return o=fn("chartOptions.*.tooltip",o,t),o}function SR(o){return o=Hr("chartOptions.pie.series.labelKey","sectorLabelKey",o),o=Hr("chartOptions.pie.series.labelName","sectorLabelName",o),o=Py(o),o=Ay(o),o=bt("chartOptions.*.series.flipXY",o),o=Dy("chartOptions.common.legend.enabled",!0,o),o=ph("chartOptions.common.legend.position","right",o),o}function CR(o){return o=bt("chartOptions.*.width",o),o=bt("chartOptions.*.height",o),o=ph("chartOptions.*.axes.category.label.autoRotate",!0,o),o}function xR(o){var t,e,r=o;if(o.version!=null)return o.version;var n=function(f){for(var p=[],v=1;v<arguments.length;v++)p[v-1]=arguments[v];return Object.keys(f||{}).some(function(g){return p.includes(g)})},i=r.chartOptions,a=n(i,"seriesDefaults")?i==null?void 0:i.seriesDefaults:i==null?void 0:i[Object.keys(i)[0]],s={"27.0.0":n(r,"seriesChartTypes"),"26.2.0":!n(i,"seriesDefaults"),"26.1.0":n(a==null?void 0:a.highlightStyle,"item"),"26.0.0":n(a==null?void 0:a.highlightStyle,"series"),"25.1.0":n(a==null?void 0:a.label,"minAngle"),"25.0.0":n(r,"modelType","aggFunc","unlinkChart","suppressChartRanges")||n(a,"lineDash","lineDashOffset"),"24.0.0":n(r,"chartThemeName","chart")||n(i,"series"),"23.2.0":n(i,"navigator"),"23.0.0":n((e=(t=i==null?void 0:i.legend)===null||t===void 0?void 0:t.item)===null||e===void 0?void 0:e.marker,"shape"),"22.1.0":n(r,"chartPalette","chartType")},l="27.1.0",u=Object.entries(s).filter(function(f){var p=Bp(f,2);p[0];var v=p[1];return v}),c=Bp(u[0],1),d=c[0],h=d===void 0?l:d;return h}function Gt(o,t,e){if(Hp(o)>Hp(t.version)){var r=e(t);return r.version=o,r}return t}function wR(o){var t=typeof o=="string"?o.split(".").map(function(e){return Number(e)}):[];if(t.length!==3||t.some(function(e){return isNaN(e)}))throw new Error("AG Grid - Illegal version string: "+o);return{major:t[0],minor:t[1],patch:t[2]}}function Hp(o){var t=wR(o),e=t.major,r=t.minor,n=t.patch;return e*1e4+r*100+n}function zp(o,t,e){return Hn(o,!0,e,function(r,n){r[n]===t&&delete r[n]})}function ph(o,t,e){return Hn(o,!1,e,function(r,n){r[n]==null&&(r[n]=t)})}function Dy(o,t,e){var r;typeof o=="string"&&(o=o.split("."));var n=o[0];o.length>1&&(e[n]=Dy(o.slice(1),t,(r=e[n])!==null&&r!==void 0?r:{}));var i=Object.keys(e).includes(n);return i||(e[n]=t),e}function bl(o,t,e){var r=void 0,n=!1;return e=Hn(o,!0,e,function(i,a){n=!0,r=i[a],delete i[a]}),n?Hn(t,!1,e,function(i,a){i[a]=r}):e}function ka(o,t,e){var r=void 0,n=!1;return e=Hn(o,!0,e,function(i,a){n=!0,r=i[a],delete i[a]}),n?Hn(t,!1,e,function(i,a){i[a]===void 0&&(i[a]=r)}):e}function Hr(o,t,e){return Hn(o,!0,e,function(r,n){r[t]=r[n],delete r[n]})}function bt(o,t){return Hn(o,!0,t,function(e,r){return delete e[r]})}function Hn(o,t,e,r){var n=o instanceof Array?o:o.split("."),i=n.slice(0,n.length-1),a=n[n.length-1];return fn(i,e,function(s){var l=Object.keys(s).includes(a);if(t&&!l)return s;var u=Ne({},s);return r(u,a),u})}function fn(o,t,e){var r,n,i=o instanceof Array?o:o.split(".");if(t=Ne({},t),i.length===0)return e(t);if(i[0].startsWith("{")){var a=i[0].substring(1,i[0].lastIndexOf("}")).split(",");try{for(var s=lR(a),l=s.next();!l.done;l=s.next()){var u=l.value;t[u]!=null&&(t[u]=fn(i.slice(1),t[u],e))}}catch(h){r={error:h}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}}else if(i[0].endsWith("[]")){var c=i[0].substring(0,o[0].indexOf("["));t[c]instanceof Array&&(t[c]=t[c].map(function(h){return fn(i.slice(1),h,e)}))}else if(i[0]==="*")for(var d in t)t[d]=fn(i.slice(1),t[d],e);else t[i[0]]!=null&&(t[i[0]]=fn(i.slice(1),t[i[0]],e));return t}var Wp=function(o,t){return Ne(Ne({},o),t)},bR={borneo:"ag-default",material:"ag-material",pastel:"ag-pastel",bright:"ag-vivid",flat:"ag-solar"},_R=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),lu=function(){return lu=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},lu.apply(this,arguments)},hl=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},OR=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},ER=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Up=function(o){_R(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.activeCharts=new Set,e.activeChartComps=new Set,e.crossFilteringContext={lastSelectedChartId:""},e}return t.prototype.updateChart=function(e){if(this.activeChartComps.size===0){console.warn("AG Grid - No active charts to update.");return}var r=ER([],OR(this.activeChartComps)).find(function(n){return n.getChartId()===e.chartId});if(!r){console.warn("AG Grid - Unable to update chart. No active chart found with ID: "+e.chartId+".");return}r.update(e)},t.prototype.getChartModels=function(){var e=[],r=function(n){return lu(lu({},n),{version:gs})};return this.activeChartComps.forEach(function(n){return e.push(r(n.getChartModel()))}),e},t.prototype.getChartRef=function(e){var r;return this.activeCharts.forEach(function(n){n.chartId===e&&(r=n)}),r},t.prototype.getChartComp=function(e){var r;return this.activeChartComps.forEach(function(n){n.getChartId()===e&&(r=n)}),r},t.prototype.getChartImageDataURL=function(e){var r;return this.activeChartComps.forEach(function(n){n.getChartId()===e.chartId&&(r=n.getChartImageDataURL(e.fileFormat))}),r},t.prototype.downloadChart=function(e){var r=Array.from(this.activeChartComps).find(function(n){return n.getChartId()===e.chartId});r==null||r.downloadChart(e.dimensions,e.fileName,e.fileFormat)},t.prototype.openChartToolPanel=function(e){var r=Array.from(this.activeChartComps).find(function(n){return n.getChartId()===e.chartId});r==null||r.openChartToolPanel(e.panel)},t.prototype.closeChartToolPanel=function(e){var r=Array.from(this.activeChartComps).find(function(n){return n.getChartId()===e});r==null||r.closeChartToolPanel()},t.prototype.createChartFromCurrentRange=function(e){e===void 0&&(e="groupedColumn");var r=this.getSelectedRange();return this.createChart(r,e)},t.prototype.restoreChart=function(e,r){var n=this;if(!e){console.warn("AG Grid - unable to restore chart as no chart model is provided");return}e.version!==gs&&(e=uR(e));var i={cellRange:e.cellRange,chartType:e.chartType,chartThemeName:e.chartThemeName,chartContainer:r,suppressChartRanges:e.suppressChartRanges,aggFunc:e.aggFunc,unlinkChart:e.unlinkChart,seriesChartTypes:e.seriesChartTypes},a=function(d){return n.rangeService?n.rangeService.createCellRangeFromCellRangeParams(d):void 0};if(e.modelType==="pivot"){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");var s=this.columnModel.getAllDisplayedColumns().map(function(d){return d.getColId()}),l={rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:s},u=a(l);if(!u){console.warn("AG Grid - unable to create chart as there are no columns in the grid.");return}return this.createChart(u,i.chartType,i.chartThemeName,!0,!0,i.chartContainer,void 0,void 0,i.unlinkChart,!1,e.chartOptions)}var c=a(i.cellRange);if(!c){console.warn("AG Grid - unable to create chart as no range is selected");return}return this.createChart(c,i.chartType,i.chartThemeName,!1,i.suppressChartRanges,i.chartContainer,i.aggFunc,void 0,i.unlinkChart,!1,e.chartOptions,e.chartPalette,i.seriesChartTypes)},t.prototype.createRangeChart=function(e){var r,n=(r=this.rangeService)===null||r===void 0?void 0:r.createCellRangeFromCellRangeParams(e.cellRange);if(!n){console.warn("AG Grid - unable to create chart as no range is selected");return}return this.createChart(n,e.chartType,e.chartThemeName,!1,e.suppressChartRanges,e.chartContainer,e.aggFunc,e.chartThemeOverrides,e.unlinkChart,void 0,void 0,void 0,e.seriesChartTypes)},t.prototype.createPivotChart=function(e){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");var r={rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map(function(i){return i.getColId()})},n=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(r):void 0;if(!n){console.warn("AG Grid - unable to create chart as there are no columns in the grid.");return}return this.createChart(n,e.chartType,e.chartThemeName,!0,!0,e.chartContainer,void 0,e.chartThemeOverrides,e.unlinkChart)},t.prototype.createCrossFilterChart=function(e){var r,n=(r=this.rangeService)===null||r===void 0?void 0:r.createCellRangeFromCellRangeParams(e.cellRange);if(!n){console.warn("AG Grid - unable to create chart as no range is selected");return}var i=!0,a=typeof e.suppressChartRanges<"u"&&e.suppressChartRanges!==null,s=a?e.suppressChartRanges:!0;return this.createChart(n,e.chartType,e.chartThemeName,!1,s,e.chartContainer,e.aggFunc,e.chartThemeOverrides,e.unlinkChart,i)},t.prototype.createChart=function(e,r,n,i,a,s,l,u,c,d,h,f,p){var v=this;i===void 0&&(i=!1),a===void 0&&(a=!1),c===void 0&&(c=!1),d===void 0&&(d=!1);var g=this.gridOptionsService.getCallback("createChartContainer"),m={chartId:this.generateId(),pivotChart:i,cellRange:e,chartType:r,chartThemeName:n,insideDialog:!(s||g),suppressChartRanges:a,aggFunc:l,chartThemeOverrides:u,unlinkChart:c,crossFiltering:d,crossFilteringContext:this.crossFilteringContext,chartOptionsToRestore:h,chartPaletteToRestore:f,seriesChartTypes:p,crossFilteringResetCallback:function(){return v.activeChartComps.forEach(function(w){return w.crossFilteringReset()})}},y=new jp(m);this.context.createBean(y);var S=this.createChartRef(y);if(s){s.appendChild(y.getGui());var C=this.environment.getTheme();C.el&&!C.el.contains(s)&&s.classList.add(C.theme)}else g?g(S):y.addEventListener(jp.EVENT_DESTROYED,function(){v.activeChartComps.delete(y),v.activeCharts.delete(S)});return S},t.prototype.createChartRef=function(e){var r=this,n={destroyChart:function(){r.activeCharts.has(n)&&(r.context.destroyBean(e),r.activeChartComps.delete(e),r.activeCharts.delete(n))},chartElement:e.getGui(),chart:e.getUnderlyingChart(),chartId:e.getChartModel().chartId};return this.activeCharts.add(n),this.activeChartComps.add(e),n},t.prototype.getSelectedRange=function(){var e=this.rangeService.getCellRanges();return e.length>0?e[0]:{}},t.prototype.generateId=function(){return"id-"+Math.random().toString(36).substring(2,18)},t.prototype.destroyAllActiveCharts=function(){this.activeCharts.forEach(function(e){return e.destroyChart()})},t.CHARTS_VERSION=IA,hl([zr("rangeService")],t.prototype,"rangeService",void 0),hl([D("columnModel")],t.prototype,"columnModel",void 0),hl([br],t.prototype,"destroyAllActiveCharts",null),t=hl([be("chartService")],t),t}(pe),TR=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),PR=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},AR=function(o){TR(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}e=t,t.prototype.translate=function(r,n){var i=this.localeService.getLocaleTextFunc(),a=e.DEFAULT_TRANSLATIONS[r]||n;return i(r,a)};var e;return t.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Settings",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",navigator:"Navigator",color:"Color",thickness:"Thickness",xType:"X Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",autoRotate:"Auto Rotate",xRotation:"X Rotation",yRotation:"Y Rotation",ticks:"Ticks",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeOpacity:"Line Opacity",histogramBinCount:"Bin count",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",histogramGroup:"Histogram",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",doughnutTooltip:"Doughnut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis"},t=e=PR([be("chartTranslationService")],t),t}(pe),DR=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),fl=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},MR=function(o){DR(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}e=t,t.prototype.filter=function(r,n){n===void 0&&(n=!1);var i=this.gridApi.getFilterModel();if(n){this.resetFilters(i);return}var a=e.extractFilterColId(r);this.isValidColumnFilter(a)?this.updateFilters(i,r,a):console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: '"+a+"'")},t.prototype.resetFilters=function(r){var n=Object.keys(r).length>0;n&&(this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged())},t.prototype.updateFilters=function(r,n,i){var a,s=e.extractFilterColId(n),l=n.datum[s];if(l!==void 0){var u=l.toString();if(n.event.metaKey||n.event.ctrlKey){var c=this.getCurrentGridValuesForCategory(i),d=E.includes(c,u),h=void 0;d?h=c.filter(function(f){return f!==u}):(h=c,h.push(u)),r[i]=this.getUpdatedFilterModel(i,h)}else{var h=[u];r=(a={},a[i]=this.getUpdatedFilterModel(i,h),a)}this.gridApi.setFilterModel(r)}},t.prototype.getUpdatedFilterModel=function(r,n){var i=this.getColumnFilterType(r);return i==="agMultiColumnFilter"?{filterType:"multi",filterModels:[null,{filterType:"set",values:n}]}:{filterType:"set",values:n}},t.prototype.getCurrentGridValuesForCategory=function(r){var n=this,i=[],a=this.getColumnById(r);return this.gridApi.forEachNodeAfterFilter(function(s){if(a&&!s.group){var l=n.valueService.getValue(a,s)+"";i.includes(l)||i.push(l)}}),i},t.extractFilterColId=function(r){return r.xKey||r.calloutLabelKey},t.prototype.isValidColumnFilter=function(r){r.indexOf("-filtered-out")&&(r=r.replace("-filtered-out",""));var n=this.getColumnFilterType(r);return typeof n=="boolean"?n:E.includes(["agSetColumnFilter","agMultiColumnFilter"],n)},t.prototype.getColumnFilterType=function(r){var n=this.getColumnById(r);if(n){var i=n.getColDef();return i.filter}},t.prototype.getColumnById=function(r){return this.columnModel.getGridColumn(r)};var e;return fl([D("gridApi")],t.prototype,"gridApi",void 0),fl([D("columnModel")],t.prototype,"columnModel",void 0),fl([D("valueService")],t.prototype,"valueService",void 0),t=e=fl([be("chartCrossFilterService")],t),t}(pe),RR=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Mn=function(){return Mn=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Mn.apply(this,arguments)},Lr=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Na=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},So=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},IR=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},LR=function(o){RR(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.cellRanges=[],e.bodyScrollListener=e.onBodyScroll.bind(e),e.dragging=!1,e.intersectionRange=!1,e}return t.prototype.init=function(){var e=this;this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,function(){return e.onColumnsChanged()}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VISIBLE,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VALUE_CHANGED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){return e.removeAllCellRanges()}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return e.removeAllCellRanges()}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_CHANGED,function(){return e.removeAllCellRanges()}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_GROUP_OPENED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_MOVED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PINNED,this.refreshLastRangeStart.bind(this)),this.ctrlsService.whenReady(function(){var r=e.ctrlsService.getGridBodyCtrl();e.autoScrollService=new Md({scrollContainer:r.getBodyViewportElement(),scrollAxis:"xy",getVerticalPosition:function(){return r.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(n){return r.getScrollFeature().setVerticalScrollPosition(n)},getHorizontalPosition:function(){return r.getScrollFeature().getHScrollPosition().left},setHorizontalPosition:function(n){return r.getScrollFeature().setHorizontalScrollPosition(n)},shouldSkipVerticalScroll:function(){return!e.gridOptionsService.isDomLayout("normal")},shouldSkipHorizontalScroll:function(){return!r.getScrollFeature().isHorizontalScrollShowing()}})})},t.prototype.onColumnsChanged=function(){var e=this;this.refreshLastRangeStart();var r=this.columnModel.getAllDisplayedColumns();this.cellRanges.forEach(function(i){var a=i.columns;i.columns=i.columns.filter(function(l){return l.isVisible()&&r.indexOf(l)!==-1});var s=!E.areEqual(a,i.columns);s&&e.dispatchChangedEvent(!1,!0,i.id)});var n=this.cellRanges.length;this.cellRanges=this.cellRanges.filter(function(i){return i.columns.length>0}),n>this.cellRanges.length&&this.dispatchChangedEvent(!1,!0)},t.prototype.refreshLastRangeStart=function(){var e=E.last(this.cellRanges);e&&this.refreshRangeStart(e)},t.prototype.isContiguousRange=function(e){var r=e.columns;if(!r.length)return!1;var n=this.columnModel.getAllDisplayedColumns(),i=r.map(function(a){return n.indexOf(a)}).sort(function(a,s){return a-s});return E.last(i)-i[0]+1===r.length},t.prototype.getRangeStartRow=function(e){if(e.startRow&&e.endRow)return this.rowPositionUtils.before(e.startRow,e.endRow)?e.startRow:e.endRow;var r=this.pinnedRowModel.getPinnedTopRowCount()>0?"top":null;return{rowIndex:0,rowPinned:r}},t.prototype.getRangeEndRow=function(e){if(e.startRow&&e.endRow)return this.rowPositionUtils.before(e.startRow,e.endRow)?e.endRow:e.startRow;var r=this.pinnedRowModel.getPinnedBottomRowCount(),n=r>0;return n?{rowIndex:r-1,rowPinned:"bottom"}:{rowIndex:this.rowModel.getRowCount()-1,rowPinned:null}},t.prototype.setRangeToCell=function(e,r){if(r===void 0&&(r=!1),!!this.gridOptionsService.isEnableRangeSelection()){var n=this.calculateColumnsBetween(e.column,e.column);if(n){var i=this.gridOptionsService.is("suppressMultiRangeSelection");(i||!r||E.missing(this.cellRanges))&&this.removeAllCellRanges(!0);var a={rowIndex:e.rowIndex,rowPinned:e.rowPinned},s={startRow:a,endRow:a,columns:n,startColumn:e.column};this.cellRanges.push(s),this.setNewestRangeStartCell(e),this.onDragStop(),this.dispatchChangedEvent(!0,!0)}}},t.prototype.extendLatestRangeToCell=function(e){if(!(this.isEmpty()||!this.newestRangeStartCell)){var r=E.last(this.cellRanges);this.updateRangeEnd(r,e)}},t.prototype.updateRangeEnd=function(e,r,n){n===void 0&&(n=!1);var i=r.column,a=this.calculateColumnsBetween(e.startColumn,i);!a||this.isLastCellOfRange(e,r)||(e.columns=a,e.endRow={rowIndex:r.rowIndex,rowPinned:r.rowPinned},n||this.dispatchChangedEvent(!0,!0,e.id))},t.prototype.refreshRangeStart=function(e){var r=e.startColumn,n=e.columns,i=function(d,h){var f=e.columns.filter(function(p){return p!==d});d?(e.startColumn=d,e.columns=h?So([d],Na(f)):So(So([],Na(f)),[d])):e.columns=f},a=this.getRangeEdgeColumns(e),s=a.left,l=a.right,u=r===n[0]&&r!==s;if(u){i(s,!0);return}var c=r===E.last(n)&&r===l;if(c){i(l,!1);return}},t.prototype.getRangeEdgeColumns=function(e){var r=this.columnModel.getAllDisplayedColumns(),n=e.columns.map(function(i){return r.indexOf(i)}).filter(function(i){return i>-1}).sort(function(i,a){return i-a});return{left:r[n[0]],right:r[E.last(n)]}},t.prototype.extendLatestRangeInDirection=function(e){if(!(this.isEmpty()||!this.newestRangeStartCell)){var r=e.key,n=e.ctrlKey||e.metaKey,i=E.last(this.cellRanges),a=this.newestRangeStartCell,s=i.columns[0],l=E.last(i.columns),u=i.endRow.rowIndex,c=i.endRow.rowPinned,d=a.column===s?l:s,h={column:d,rowIndex:u,rowPinned:c},f=this.cellNavigationService.getNextCellToFocus(r,h,n);if(f)return this.setCellRange({rowStartIndex:a.rowIndex,rowStartPinned:a.rowPinned,rowEndIndex:f.rowIndex,rowEndPinned:f.rowPinned,columnStart:a.column,columnEnd:f.column}),f}},t.prototype.setCellRange=function(e){this.gridOptionsService.isEnableRangeSelection()&&(this.removeAllCellRanges(!0),this.addCellRange(e))},t.prototype.setCellRanges=function(e){var r=this;E.shallowCompare(this.cellRanges,e)||(this.removeAllCellRanges(!0),e.forEach(function(n){n.columns&&n.startRow&&r.setNewestRangeStartCell({rowIndex:n.startRow.rowIndex,rowPinned:n.startRow.rowPinned,column:n.columns[0]}),r.cellRanges.push(n)}),this.dispatchChangedEvent(!1,!0))},t.prototype.setNewestRangeStartCell=function(e){this.newestRangeStartCell=e},t.prototype.clearCellRangeCellValues=function(e){var r=this,n=e.cellRanges,i=e.cellEventSource,a=i===void 0?"rangeService":i,s=e.dispatchWrapperEvents,l=e.wrapperEventSource,u=l===void 0?"deleteKey":l;if(s){var c={type:V.EVENT_RANGE_DELETE_START,source:u};this.eventService.dispatchEvent(c)}if(n||(n=this.cellRanges),n.forEach(function(h){r.forEachRowInRange(h,function(f){var p=r.rowPositionUtils.getRowNode(f);if(p)for(var v=0;v<h.columns.length;v++){var g=r.columnModel.getGridColumn(h.columns[v]);if(!g||!g.isCellEditable(p))return;p.setDataValue(g,null,a)}})}),s){var d={type:V.EVENT_RANGE_DELETE_END,source:u};this.eventService.dispatchEvent(d)}},t.prototype.createCellRangeFromCellRangeParams=function(e){var r=this,n,i=!1;if(e.columns)n=e.columns.map(function(c){return r.columnModel.getColumnWithValidation(c)}).filter(function(c){return c});else{var a=this.columnModel.getColumnWithValidation(e.columnStart),s=this.columnModel.getColumnWithValidation(e.columnEnd);if(!a||!s)return;n=this.calculateColumnsBetween(a,s),n&&n.length&&(i=n[0]!==a)}if(n){var l=e.rowStartIndex!=null?{rowIndex:e.rowStartIndex,rowPinned:e.rowStartPinned||null}:void 0,u=e.rowEndIndex!=null?{rowIndex:e.rowEndIndex,rowPinned:e.rowEndPinned||null}:void 0;return{startRow:l,endRow:u,columns:n,startColumn:i?E.last(n):n[0]}}},t.prototype.addCellRange=function(e){if(this.gridOptionsService.isEnableRangeSelection()){var r=this.createCellRangeFromCellRangeParams(e);r&&(r.startRow&&this.setNewestRangeStartCell({rowIndex:r.startRow.rowIndex,rowPinned:r.startRow.rowPinned,column:r.startColumn}),this.cellRanges.push(r),this.dispatchChangedEvent(!1,!0,r.id))}},t.prototype.getCellRanges=function(){return this.cellRanges},t.prototype.isEmpty=function(){return this.cellRanges.length===0},t.prototype.isMoreThanOneCell=function(){var e=this.cellRanges.length;if(e===0)return!1;if(e>1)return!0;var r=this.cellRanges[0],n=this.getRangeStartRow(r),i=this.getRangeEndRow(r);return n.rowPinned!==i.rowPinned||n.rowIndex!==i.rowIndex||r.columns.length!==1},t.prototype.areAllRangesAbleToMerge=function(){var e,r,n=this,i=new Map,a=this.cellRanges.length;if(a<=1)return!0;this.cellRanges.forEach(function(h){n.forEachRowInRange(h,function(f){var p=(f.rowPinned||"normal")+"_"+f.rowIndex,v=i.get(p),g=h.columns.map(function(y){return y.getId()});if(v){var m=g.filter(function(y){return v.indexOf(y)===-1});v.push.apply(v,So([],Na(m)))}else i.set(p,g)})});var s;try{for(var l=IR(i.values()),u=l.next();!u.done;u=l.next()){var c=u.value,d=c.sort().join();if(s===void 0){s=d;continue}if(s!==d)return!1}}catch(h){e={error:h}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return!0},t.prototype.forEachRowInRange=function(e,r){for(var n=this.getRangeStartRow(e),i=this.getRangeEndRow(e),a=n;a&&(r(a),!this.rowPositionUtils.sameRow(a,i));)a=this.cellNavigationService.getRowBelow(a)},t.prototype.removeAllCellRanges=function(e){this.isEmpty()||(this.onDragStop(),this.cellRanges.length=0,e||this.dispatchChangedEvent(!1,!0))},t.prototype.onBodyScroll=function(){this.dragging&&this.lastMouseEvent&&this.onDragging(this.lastMouseEvent)},t.prototype.isCellInAnyRange=function(e){return this.getCellRangeCount(e)>0},t.prototype.isCellInSpecificRange=function(e,r){var n=r.columns!==null&&E.includes(r.columns,e.column),i=this.isRowInRange(e.rowIndex,e.rowPinned,r);return n&&i},t.prototype.isLastCellOfRange=function(e,r){var n=e.startRow,i=e.endRow,a=this.rowPositionUtils.before(n,i)?i:n,s=r.rowIndex===a.rowIndex&&r.rowPinned===a.rowPinned,l=e.columns[0],u=E.last(e.columns),c=e.startColumn===l?u:l,d=r.column===c;return d&&s},t.prototype.isBottomRightCell=function(e,r){var n=this.columnModel.getAllDisplayedColumns(),i=e.columns.map(function(d){return n.indexOf(d)}).sort(function(d,h){return d-h}),a=e.startRow,s=e.endRow,l=this.rowPositionUtils.before(a,s)?s:a,u=n.indexOf(r.column)===E.last(i),c=r.rowIndex===l.rowIndex&&E.makeNull(r.rowPinned)===E.makeNull(l.rowPinned);return u&&c},t.prototype.getCellRangeCount=function(e){var r=this;return this.isEmpty()?0:this.cellRanges.filter(function(n){return r.isCellInSpecificRange(e,n)}).length},t.prototype.isRowInRange=function(e,r,n){var i=this.getRangeStartRow(n),a=this.getRangeEndRow(n),s={rowIndex:e,rowPinned:r||null},l=s.rowIndex===i.rowIndex&&s.rowPinned==i.rowPinned,u=s.rowIndex===a.rowIndex&&s.rowPinned==a.rowPinned;if(l||u)return!0;var c=!this.rowPositionUtils.before(s,i),d=this.rowPositionUtils.before(s,a);return c&&d},t.prototype.getDraggingRange=function(){return this.draggingRange},t.prototype.onDragStart=function(e){if(this.gridOptionsService.isEnableRangeSelection()){var r=e.ctrlKey,n=e.metaKey,i=e.shiftKey,a=r||n,s=!this.gridOptionsService.is("suppressMultiRangeSelection"),l=s?a:!1,u=i&&E.existsAndNotEmpty(this.cellRanges);!l&&(!u||E.exists(E.last(this.cellRanges).type))&&this.removeAllCellRanges(!0);var c=this.dragService.getStartTarget();if(c&&this.updateValuesOnMove(c),!!this.lastCellHovered){if(this.dragging=!0,this.lastMouseEvent=e,this.intersectionRange=l&&this.getCellRangeCount(this.lastCellHovered)>1,u||this.setNewestRangeStartCell(this.lastCellHovered),this.cellRanges.length>0)this.draggingRange=E.last(this.cellRanges);else{var d={rowIndex:this.lastCellHovered.rowIndex,rowPinned:this.lastCellHovered.rowPinned};this.draggingRange={startRow:d,endRow:d,columns:[this.lastCellHovered.column],startColumn:this.newestRangeStartCell.column},this.cellRanges.push(this.draggingRange)}this.ctrlsService.getGridBodyCtrl().addScrollEventListener(this.bodyScrollListener),this.dispatchChangedEvent(!0,!1,this.draggingRange.id)}}},t.prototype.intersectLastRange=function(e){var r=this;if(!(e&&this.dragging)&&!this.gridOptionsService.is("suppressMultiRangeSelection")&&!this.isEmpty()){var n=E.last(this.cellRanges),i=this.getRangeStartRow(n),a=this.getRangeEndRow(n),s=[];this.cellRanges.slice(0,-1).forEach(function(l){var u=r.getRangeStartRow(l),c=r.getRangeEndRow(l),d=l.columns,h=d.filter(function(g){return n.columns.indexOf(g)===-1});if(h.length===d.length){s.push(l);return}if(r.rowPositionUtils.before(a,u)||r.rowPositionUtils.before(c,i)){s.push(l);return}var f=s.length;if(r.rowPositionUtils.before(u,i)){var p={columns:So([],Na(d)),startColumn:n.startColumn,startRow:Mn({},u),endRow:r.cellNavigationService.getRowAbove(i)};s.push(p)}if(h.length>0){var v={columns:h,startColumn:E.includes(h,n.startColumn)?n.startColumn:h[0],startRow:r.rowPositionUtils.rowMax([Mn({},i),Mn({},u)]),endRow:r.rowPositionUtils.rowMin([Mn({},a),Mn({},c)])};s.push(v)}r.rowPositionUtils.before(a,c)&&s.push({columns:So([],Na(d)),startColumn:n.startColumn,startRow:r.cellNavigationService.getRowBelow(a),endRow:Mn({},c)}),s.length-f===1&&(s[s.length-1].id=l.id)}),this.cellRanges=s,e&&this.dispatchChangedEvent(!1,!0)}},t.prototype.updateValuesOnMove=function(e){var r=E.getCtrlForEventTarget(this.gridOptionsService,e,am.DOM_DATA_KEY_CELL_CTRL),n=r==null?void 0:r.getCellPosition();this.cellHasChanged=!1,!(!n||this.lastCellHovered&&this.cellPositionUtils.equals(n,this.lastCellHovered))&&(this.lastCellHovered&&(this.cellHasChanged=!0),this.lastCellHovered=n)},t.prototype.onDragging=function(e){var r=this;if(!(!this.dragging||!e)){this.updateValuesOnMove(e.target),this.lastMouseEvent=e;var n=this.lastCellHovered,i=function(l){return n&&n.rowPinned===l&&r.newestRangeStartCell.rowPinned===l},a=i("top")||i("bottom");if(this.autoScrollService.check(e,a),!!this.cellHasChanged){var s=this.calculateColumnsBetween(this.newestRangeStartCell.column,n.column);s&&(this.draggingRange.endRow={rowIndex:n.rowIndex,rowPinned:n.rowPinned},this.draggingRange.columns=s,this.dispatchChangedEvent(!1,!1,this.draggingRange.id))}}},t.prototype.onDragStop=function(){if(this.dragging){var e=this.draggingRange.id;this.autoScrollService.ensureCleared(),this.ctrlsService.getGridBodyCtrl().removeScrollEventListener(this.bodyScrollListener),this.lastMouseEvent=null,this.dragging=!1,this.draggingRange=void 0,this.lastCellHovered=void 0,this.intersectionRange&&(this.intersectionRange=!1,this.intersectLastRange()),this.dispatchChangedEvent(!1,!0,e)}},t.prototype.dispatchChangedEvent=function(e,r,n){var i={type:V.EVENT_RANGE_SELECTION_CHANGED,started:e,finished:r,id:n};this.eventService.dispatchEvent(i)},t.prototype.calculateColumnsBetween=function(e,r){var n=this.columnModel.getAllDisplayedColumns(),i=e===r,a=n.indexOf(e);if(a<0){console.warn("AG Grid: column "+e.getId()+" is not visible");return}var s=i?a:n.indexOf(r);if(s<0){console.warn("AG Grid: column "+r.getId()+" is not visible");return}if(i)return[e];for(var l=Math.min(a,s),u=l===a?s:a,c=[],d=l;d<=u;d++)c.push(n[d]);return c},Lr([D("rowModel")],t.prototype,"rowModel",void 0),Lr([D("dragService")],t.prototype,"dragService",void 0),Lr([D("columnModel")],t.prototype,"columnModel",void 0),Lr([D("cellNavigationService")],t.prototype,"cellNavigationService",void 0),Lr([D("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Lr([D("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),Lr([D("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),Lr([D("ctrlsService")],t.prototype,"ctrlsService",void 0),Lr([te],t.prototype,"init",null),t=Lr([be("rangeService")],t),t}(pe),FR=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),vr=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},My=function(o){FR(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.changedCalculatedValues=!1,e.dragging=!1,e.shouldDestroyOnEndDragging=!1,e}return t.prototype.init=function(){var e=this;this.dragService.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragStart:this.onDragStart.bind(this),onDragging:function(r){e.dragging=!0,e.rangeService.autoScrollService.check(r),e.changedCalculatedValues&&(e.onDrag(r),e.changedCalculatedValues=!1)},onDragStop:function(r){e.dragging=!1,e.onDragEnd(r),e.clearValues(),e.rangeService.autoScrollService.ensureCleared(),document.body.classList.remove(e.getDraggingCssClass()),e.shouldDestroyOnEndDragging&&e.destroy()}}),this.addManagedListener(this.getGui(),"mousedown",this.preventRangeExtension.bind(this))},t.prototype.isDragging=function(){return this.dragging},t.prototype.getCellCtrl=function(){return this.cellCtrl},t.prototype.setCellCtrl=function(e){this.cellCtrl=e},t.prototype.getCellRange=function(){return this.cellRange},t.prototype.setCellRange=function(e){this.cellRange=e},t.prototype.getRangeStartRow=function(){return this.rangeStartRow},t.prototype.setRangeStartRow=function(e){this.rangeStartRow=e},t.prototype.getRangeEndRow=function(){return this.rangeEndRow},t.prototype.setRangeEndRow=function(e){this.rangeEndRow=e},t.prototype.getLastCellHovered=function(){return this.lastCellHovered},t.prototype.preventRangeExtension=function(e){e.stopPropagation()},t.prototype.onDragStart=function(e){this.cellHoverListener=this.addManagedListener(this.ctrlsService.getGridCtrl().getGui(),"mousemove",this.updateValuesOnMove.bind(this)),document.body.classList.add(this.getDraggingCssClass())},t.prototype.getDraggingCssClass=function(){return"ag-dragging-"+(this.type===vu.FILL?"fill":"range")+"-handle"},t.prototype.updateValuesOnMove=function(e){var r=this.mouseEventService.getCellPositionForEvent(e);!r||this.lastCellHovered&&this.cellPositionUtils.equals(r,this.lastCellHovered)||(this.lastCellHovered=r,this.changedCalculatedValues=!0)},t.prototype.getType=function(){return this.type},t.prototype.refresh=function(e){var r=this.getCellCtrl(),n=this.getGui(),i=E.last(this.rangeService.getCellRanges()),a=i.startRow,s=i.endRow;if(a&&s){var l=this.rowPositionUtils.before(s,a);l?(this.setRangeStartRow(s),this.setRangeEndRow(a)):(this.setRangeStartRow(a),this.setRangeEndRow(s))}if(r!==e||!E.isVisible(n)){this.setCellCtrl(e);var u=e.getComp().getParentOfValue();u&&u.appendChild(n)}this.setCellRange(i)},t.prototype.clearValues=function(){this.lastCellHovered=void 0,this.removeListeners()},t.prototype.removeListeners=function(){this.cellHoverListener&&(this.cellHoverListener(),this.cellHoverListener=void 0)},t.prototype.destroy=function(){if(!this.shouldDestroyOnEndDragging&&this.isDragging()){E.setDisplayed(this.getGui(),!1),this.shouldDestroyOnEndDragging=!0;return}this.shouldDestroyOnEndDragging=!1,o.prototype.destroy.call(this),this.removeListeners();var e=this.getGui();e.parentElement&&e.parentElement.removeChild(e)},vr([D("rowRenderer")],t.prototype,"rowRenderer",void 0),vr([D("dragService")],t.prototype,"dragService",void 0),vr([D("rangeService")],t.prototype,"rangeService",void 0),vr([D("mouseEventService")],t.prototype,"mouseEventService",void 0),vr([D("columnModel")],t.prototype,"columnModel",void 0),vr([D("cellNavigationService")],t.prototype,"cellNavigationService",void 0),vr([D("navigationService")],t.prototype,"navigationService",void 0),vr([D("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),vr([D("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),vr([D("ctrlsService")],t.prototype,"ctrlsService",void 0),vr([te],t.prototype,"init",null),t}(oe);function kR(o){var t=o.length,e=0;if(t<=1)return o;for(var r=0;r<o.length;r++){var n=o[r],i=n.toString().split("e-");if(i.length>1){e=Math.max(e,parseInt(i[1],10));continue}Math.floor(n)!==n&&(e=Math.max(e,n.toString().split(".")[1].length))}for(var a=0,s=0,l=0,u=0,c=0,d=0;d<t;d++)c=o[d],a+=d,s+=c,u+=d*d,l+=d*c;for(var h=(t*l-a*s)/(t*u-a*a),f=s/t-h*a/t,p=[],d=0;d<=t;d++)p.push(parseFloat((d*h+f).toFixed(e)));return p}var NR=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Go=function(){return Go=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Go.apply(this,arguments)},Ec=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},GR=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},VR=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Ry=function(o){NR(t,o);function t(){var e=o.call(this,t.TEMPLATE)||this;return e.markedCells=[],e.cellValues=[],e.isUp=!1,e.isLeft=!1,e.isReduce=!1,e.type=vu.FILL,e}return t.prototype.updateValuesOnMove=function(e){o.prototype.updateValuesOnMove.call(this,e),this.initialXY||(this.initialXY=this.mouseEventService.getNormalisedPosition(e));var r=this.initialXY,n=r.x,i=r.y,a=this.mouseEventService.getNormalisedPosition(e),s=a.x,l=a.y,u=Math.abs(n-s),c=Math.abs(i-l),d=this.getFillHandleDirection(),h;d==="xy"?h=u>c?"x":"y":h=d,h!==this.dragAxis&&(this.dragAxis=h,this.changedCalculatedValues=!0)},t.prototype.onDrag=function(e){if(!this.initialPosition){var r=this.getCellCtrl();if(!r)return;this.initialPosition=r.getCellPosition()}var n=this.getLastCellHovered();n&&this.markPathFrom(this.initialPosition,n)},t.prototype.onDragEnd=function(e){if(this.initialXY=null,!!this.markedCells.length){var r=this.dragAxis==="x",n=this.getCellRange(),i=n.columns.length,a=this.getRangeStartRow(),s=this.getRangeEndRow(),l;if(!this.isUp&&!this.isLeft)l=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:a.rowIndex,rowStartPinned:a.rowPinned,columnStart:n.columns[0],rowEndIndex:r?s.rowIndex:this.lastCellMarked.rowIndex,rowEndPinned:r?s.rowPinned:this.lastCellMarked.rowPinned,columnEnd:r?this.lastCellMarked.column:n.columns[i-1]});else{var u=r?a:this.lastCellMarked;l=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:u.rowIndex,rowStartPinned:u.rowPinned,columnStart:r?this.lastCellMarked.column:n.columns[0],rowEndIndex:s.rowIndex,rowEndPinned:s.rowPinned,columnEnd:n.columns[i-1]})}l&&(this.raiseFillStartEvent(),this.handleValueChanged(n,l,e),this.rangeService.setCellRanges([l]),this.raiseFillEndEvent(n,l))}},t.prototype.getFillHandleDirection=function(){var e=this.gridOptionsService.get("fillHandleDirection");return e?e!=="x"&&e!=="y"&&e!=="xy"?(E.doOnce(function(){return console.warn("AG Grid: valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'.")},"warn invalid fill direction"),"xy"):e:"xy"},t.prototype.raiseFillStartEvent=function(){var e={type:V.EVENT_FILL_START};this.eventService.dispatchEvent(e)},t.prototype.raiseFillEndEvent=function(e,r){var n={type:V.EVENT_FILL_END,initialRange:e,finalRange:r};this.eventService.dispatchEvent(n)},t.prototype.handleValueChanged=function(e,r,n){var i=this,a=this.rangeService.getRangeEndRow(e),s=this.rangeService.getRangeStartRow(e),l=this.rangeService.getRangeEndRow(r),u=this.rangeService.getRangeStartRow(r),c=this.dragAxis==="y";if(this.isReduce&&!this.gridOptionsService.is("suppressClearOnFillReduction")){var d=c?e.columns:e.columns.filter(function(C){return r.columns.indexOf(C)<0}),h=c?this.cellNavigationService.getRowBelow(l):u;h&&this.clearCellsInRange(h,a,d);return}var f=!0,p=[],v=[],g=0,m=function(){p.length=0,v.length=0,g=0},y=function(C,w){var x=i.isUp?a:s,b=!1;c&&(f=!0,m());for(var _=function(){var O=i.rowPositionUtils.getRowNode(x);if(!O)return"break";c&&C?S(p,C,O,function(){return!i.rowPositionUtils.sameRow(x,i.isUp?s:a)}):w&&(f=!0,m(),w.forEach(function(P){return S(p,P,O,function(){return P!==(i.isLeft?e.columns[0]:E.last(e.columns))})})),b=i.rowPositionUtils.sameRow(x,i.isUp?u:l),x=i.isUp?i.cellNavigationService.getRowAbove(x):i.cellNavigationService.getRowBelow(x)};!b&&x;){var T=_();if(T==="break")break}},S=function(C,w,x,b){var _,T,O,P=!1;if(f)O=i.valueService.getValue(w,x),v.push(O),f=b();else{var M=i.processValues(n,C,v,w,x,g++),I=M.value,R=M.fromUserFunction,L=M.sourceCol,F=M.sourceRowNode;if(O=I,w.isCellEditable(x)){var k=i.valueService.getValue(w,x);R||(!((_=L==null?void 0:L.getColDef())===null||_===void 0)&&_.useValueFormatterForExport&&(O=(T=i.valueFormatterService.formatValue(L,F,O))!==null&&T!==void 0?T:O),w.getColDef().useValueParserForImport&&(O=i.valueParserService.parseValue(w,x,L?O:E.toStringOrNull(O),k))),!R||k!==O?x.setDataValue(w,O,"rangeService"):P=!0}}P||C.push({value:O,column:w,rowNode:x})};if(c)e.columns.forEach(function(C){y(C)});else{var d=this.isLeft?VR([],GR(r.columns)).reverse():r.columns;y(void 0,d)}},t.prototype.clearCellsInRange=function(e,r,n){var i={startRow:e,endRow:r,columns:n,startColumn:n[0]};this.rangeService.clearCellRangeCellValues({cellRanges:[i]})},t.prototype.processValues=function(e,r,n,i,a,s){var l=this.gridOptionsService.getCallback("fillOperation"),u=this.dragAxis==="y",c;if(u?c=this.isUp?"up":"down":c=this.isLeft?"left":"right",l){var d={event:e,values:r.map(function(S){var C=S.value;return C}),initialValues:n,currentIndex:s,currentCellValue:this.valueService.getValue(i,a),direction:c,column:i,rowNode:a},h=l(d);if(h!==!1)return{value:h,fromUserFunction:!0}}var f=!r.some(function(S){var C=S.value,w=parseFloat(C);return isNaN(w)||w.toString()!==C.toString()});if(e.altKey||!f){if(f&&n.length===1){var p=this.isUp||this.isLeft?-1:1;return{value:parseFloat(E.last(r).value)+1*p,fromUserFunction:!1}}var v=r[s%r.length],g=v.value,m=v.column,y=v.rowNode;return{value:g,fromUserFunction:!1,sourceCol:m,sourceRowNode:y}}return{value:E.last(kR(r.map(function(S){var C=S.value;return Number(C)}))),fromUserFunction:!1}},t.prototype.clearValues=function(){this.clearMarkedPath(),this.clearCellValues(),this.lastCellMarked=void 0,o.prototype.clearValues.call(this)},t.prototype.clearMarkedPath=function(){this.markedCells.forEach(function(e){if(e.isAlive()){var r=e.getComp();r.addOrRemoveCssClass("ag-selection-fill-top",!1),r.addOrRemoveCssClass("ag-selection-fill-right",!1),r.addOrRemoveCssClass("ag-selection-fill-bottom",!1),r.addOrRemoveCssClass("ag-selection-fill-left",!1)}}),this.markedCells.length=0,this.isUp=!1,this.isLeft=!1,this.isReduce=!1},t.prototype.clearCellValues=function(){this.cellValues.length=0},t.prototype.markPathFrom=function(e,r){if(this.clearMarkedPath(),this.clearCellValues(),this.dragAxis==="y"){if(this.rowPositionUtils.sameRow(r,e))return;var n=this.rowPositionUtils.before(r,e),i=this.getRangeStartRow(),a=this.getRangeEndRow();n&&(r.rowPinned==i.rowPinned&&r.rowIndex>=i.rowIndex||i.rowPinned!=a.rowPinned&&r.rowPinned==a.rowPinned&&r.rowIndex<=a.rowIndex)?(this.reduceVertical(e,r),this.isReduce=!0):(this.extendVertical(e,r,n),this.isReduce=!1)}else{var s=e.column,l=r.column;if(s===l)return;var u=this.columnModel.getAllDisplayedColumns(),c=u.indexOf(s),d=u.indexOf(l);d<=c&&d>=u.indexOf(this.getCellRange().columns[0])?(this.reduceHorizontal(e,r),this.isReduce=!0):(this.extendHorizontal(e,r,d<c),this.isReduce=!1)}this.lastCellMarked=r},t.prototype.extendVertical=function(e,r,n){var i=this,a=i.navigationService,s=i.rangeService,l=e;do{for(var u=this.getCellRange(),c=u.columns.length,d=0;d<c;d++){var h=u.columns[d],f={rowIndex:l.rowIndex,rowPinned:l.rowPinned},p=Go(Go({},f),{column:h}),v=s.isCellInSpecificRange(p,u),g=this.rowPositionUtils.sameRow(l,e);if(n&&(this.isUp=!0),!g){var m=a.getCellByPosition(p);if(m){this.markedCells.push(m);var y=m.getComp();v||(y.addOrRemoveCssClass("ag-selection-fill-left",d===0),y.addOrRemoveCssClass("ag-selection-fill-right",d===c-1)),y.addOrRemoveCssClass(n?"ag-selection-fill-top":"ag-selection-fill-bottom",this.rowPositionUtils.sameRow(l,r))}}}if(this.rowPositionUtils.sameRow(l,r))break}while(l=n?this.cellNavigationService.getRowAbove(l):this.cellNavigationService.getRowBelow(l))},t.prototype.reduceVertical=function(e,r){var n=e;do{for(var i=this.getCellRange(),a=i.columns.length,s=this.rowPositionUtils.sameRow(n,r),l=0;l<a;l++){var u={rowIndex:n.rowIndex,rowPinned:n.rowPinned},c=Go(Go({},u),{column:i.columns[l]}),d=this.navigationService.getCellByPosition(c);if(d){this.markedCells.push(d);var h=d.getComp();h.addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(n,r))}}if(s)break}while(n=this.cellNavigationService.getRowAbove(n))},t.prototype.extendHorizontal=function(e,r,n){var i=this,a=this.columnModel.getAllDisplayedColumns(),s=a.indexOf(n?r.column:e.column),l=a.indexOf(n?this.getCellRange().columns[0]:r.column),u=n?0:1,c=a.slice(s+u,l+u),d=this.getRangeStartRow(),h=this.getRangeEndRow();c.forEach(function(f){var p=d,v=!1;do{v=i.rowPositionUtils.sameRow(p,h);var g=i.navigationService.getCellByPosition({rowIndex:p.rowIndex,rowPinned:p.rowPinned,column:f});if(g){i.markedCells.push(g);var m=g.getComp();m.addOrRemoveCssClass("ag-selection-fill-top",i.rowPositionUtils.sameRow(p,d)),m.addOrRemoveCssClass("ag-selection-fill-bottom",i.rowPositionUtils.sameRow(p,h)),n?(i.isLeft=!0,m.addOrRemoveCssClass("ag-selection-fill-left",f===c[0])):m.addOrRemoveCssClass("ag-selection-fill-right",f===E.last(c))}p=i.cellNavigationService.getRowBelow(p)}while(!v)})},t.prototype.reduceHorizontal=function(e,r){var n=this,i=this.columnModel.getAllDisplayedColumns(),a=i.indexOf(r.column),s=i.indexOf(e.column),l=i.slice(a,s),u=this.getRangeStartRow(),c=this.getRangeEndRow();l.forEach(function(d){var h=u,f=!1;do{f=n.rowPositionUtils.sameRow(h,c);var p=n.navigationService.getCellByPosition({rowIndex:h.rowIndex,rowPinned:h.rowPinned,column:d});if(p){n.markedCells.push(p);var v=p.getComp();v.addOrRemoveCssClass("ag-selection-fill-right",d===l[0])}h=n.cellNavigationService.getRowBelow(h)}while(!f)})},t.prototype.refresh=function(e){var r=this.rangeService.getCellRanges()[0],n=!r.startRow||!r.endRow;if(n){this.destroy();return}o.prototype.refresh.call(this,e)},t.TEMPLATE='<div class="ag-fill-handle"></div>',Ec([D("valueService")],t.prototype,"valueService",void 0),Ec([D("valueParserService")],t.prototype,"valueParserService",void 0),Ec([D("valueFormatterService")],t.prototype,"valueFormatterService",void 0),t}(My),jR=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),uu=function(){return uu=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},uu.apply(this,arguments)},Iy=function(o){jR(t,o);function t(){var e=o.call(this,t.TEMPLATE)||this;return e.type=vu.RANGE,e.rangeFixed=!1,e}return t.prototype.onDrag=function(e){var r=this.getLastCellHovered();if(r){var n=this.rangeService.getCellRanges(),i=E.last(n);if(this.rangeFixed||(this.fixRangeStartEnd(i),this.rangeFixed=!0),this.endPosition={rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:r.column},n.length===2&&n[0].type===pi.DIMENSION&&i.type===pi.VALUE){var a=!this.rowPositionUtils.sameRow(this.endPosition,this.rangeService.getRangeEndRow(i));a&&this.rangeService.updateRangeEnd(n[0],uu(uu({},this.endPosition),{column:n[0].columns[0]}),!0)}this.rangeService.extendLatestRangeToCell(this.endPosition)}},t.prototype.onDragEnd=function(e){var r=E.last(this.rangeService.getCellRanges());this.fixRangeStartEnd(r),this.rangeFixed=!1},t.prototype.fixRangeStartEnd=function(e){var r=this.rangeService.getRangeStartRow(e),n=this.rangeService.getRangeEndRow(e),i=e.columns[0];e.startRow=r,e.endRow=n,e.startColumn=i},t.TEMPLATE='<div class="ag-range-handle"></div>',t}(My),BR=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),HR=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},zR=function(o){BR(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.createSelectionHandle=function(e){return this.createBean(e===vu.RANGE?new Iy:new Ry)},t=HR([be("selectionHandleFactory")],t),t}(pe),WR="30.1.0",Ly={version:WR,moduleName:Ce.RangeSelectionModule,beans:[LR,zR],agStackComponents:[{componentName:"AgFillHandle",componentClass:Ry},{componentName:"AgRangeHandle",componentClass:Iy}],dependantModules:[lt]},UR=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),on=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},KR=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},$R=function(o){UR(t,o);function t(e){var r=o.call(this,t.TEMPLATE)||this;return r.H=1,r.S=1,r.B=1,r.A=1,r.isSpectrumDragging=!1,r.isSpectrumHueDragging=!1,r.isSpectrumAlphaDragging=!1,r.colorChanged=!1,r.picker=e.picker,r}return t.prototype.postConstruct=function(){var e=this;this.initTabIndex(),this.initRecentColors(),this.addGuiEventListener("focus",function(){return e.spectrumColor.focus()}),this.addGuiEventListener("keydown",function(r){r.key===ve.ENTER&&!r.defaultPrevented&&e.destroy()}),this.addManagedListener(this.spectrumColor,"keydown",function(r){return e.moveDragger(r)}),this.addManagedListener(this.spectrumAlphaSlider,"keydown",function(r){return e.moveAlphaSlider(r)}),this.addManagedListener(this.spectrumHueSlider,"keydown",function(r){return e.moveHueSlider(r)}),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addGuiEventListener("mousemove",function(r){e.onSpectrumDraggerMove(r),e.onSpectrumHueMove(r),e.onSpectrumAlphaMove(r)}),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this)),this.addManagedListener(this.recentColors,"keydown",function(r){(r.key===ve.ENTER||r.key===ve.SPACE)&&(r.preventDefault(),e.onRecentColorClick(r))})},t.prototype.initTabIndex=function(){var e=this.tabIndex=(this.gridOptionsService.getNum("tabIndex")||0).toString();this.spectrumColor.setAttribute("tabindex",e),this.spectrumHueSlider.setAttribute("tabindex",e),this.spectrumAlphaSlider.setAttribute("tabindex",e)},t.prototype.refreshSpectrumRect=function(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()},t.prototype.refreshHueRect=function(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()},t.prototype.refreshAlphaRect=function(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()},t.prototype.onSpectrumDraggerDown=function(e){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(e)},t.prototype.onSpectrumDraggerMove=function(e){this.isSpectrumDragging&&this.moveDragger(e)},t.prototype.onSpectrumHueDown=function(e){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(e)},t.prototype.onSpectrumHueMove=function(e){this.isSpectrumHueDragging&&this.moveHueSlider(e)},t.prototype.onSpectrumAlphaDown=function(e){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(e)},t.prototype.onSpectrumAlphaMove=function(e){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(e)},t.prototype.onMouseUp=function(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1},t.prototype.moveDragger=function(e){var r=this.spectrumValRect;if(r){var n,i;if(e instanceof MouseEvent)n=e.clientX-r.left,i=e.clientY-r.top;else{var a=e.key===ve.LEFT,s=e.key===ve.RIGHT,l=e.key===ve.UP,u=e.key===ve.DOWN,c=l||u,d=a||s;if(!c&&!d)return;e.preventDefault();var h=this.getSpectrumValue(),f=h.x,p=h.y;n=f+(d?a?-5:5:0),i=p+(c?l?-5:5:0)}n=Math.max(n,0),n=Math.min(n,r.width),i=Math.max(i,0),i=Math.min(i,r.height),this.setSpectrumValue(n/r.width,1-i/r.height)}},t.prototype.moveHueSlider=function(e){var r=this.spectrumHueRect;if(r){var n=this.moveSlider(this.spectrumHueSlider,e);n!=null&&(this.H=1-n/r.width,this.update())}},t.prototype.moveAlphaSlider=function(e){var r=this.spectrumAlphaRect;if(r){var n=this.moveSlider(this.spectrumAlphaSlider,e);n!=null&&(this.A=n/r.width,this.update())}},t.prototype.moveSlider=function(e,r){var n,i=e.getBoundingClientRect(),a=(n=e.parentElement)===null||n===void 0?void 0:n.getBoundingClientRect();if(!e||!a)return null;var s;if(r instanceof MouseEvent)s=r.clientX-a.left;else{var l=r.key===ve.LEFT,u=r.key===ve.RIGHT;if(!l&&!u)return null;r.preventDefault();var c=l?-5:5;s=parseFloat(e.style.left)-i.width/2+c}return s=Math.max(s,0),s=Math.min(s,a.width),e.style.left=s+i.width/2+"px",s},t.prototype.update=function(){var e=rt.fromHSB(this.H*360,this.S,this.B,this.A),r=rt.fromHSB(this.H*360,1,1),n=e.toRgbaString(),i=this.picker,a=rt.fromString(i.getValue());a.toRgbaString()!==n&&(this.colorChanged=!0),i.setValue(n),this.spectrumColor.style.backgroundColor=r.toRgbaString(),this.spectrumDragger.style.backgroundColor=n},t.prototype.setSpectrumValue=function(e,r){var n=this.spectrumValRect||this.refreshSpectrumRect();if(n!=null){var i=this.spectrumDragger,a=i.getBoundingClientRect();e=Math.max(0,e),e=Math.min(1,e),r=Math.max(0,r),r=Math.min(1,r),this.S=e,this.B=r,i.style.left=e*n.width-a.width/2+"px",i.style.top=(1-r)*n.height-a.height/2+"px",this.update()}},t.prototype.getSpectrumValue=function(){var e=this.spectrumDragger,r=e.getBoundingClientRect(),n=parseFloat(e.style.left)+r.width/2,i=parseFloat(e.style.top)+r.height/2;return{x:n,y:i}},t.prototype.initRecentColors=function(){var e=this,r=t.recentColors,n=r.map(function(i,a){return'<div class="ag-recent-color" id='+a+' style="background-color: '+i+'; width: 15px; height: 15px;" recent-color="'+i+'" tabIndex="'+e.tabIndex+'"></div>'});this.recentColors.innerHTML=n.join("")},t.prototype.setValue=function(e){var r=rt.fromString(e),n=KR(r.toHSB(),3),i=n[0],a=n[1],s=n[2];this.H=(isNaN(i)?0:i)/360,this.A=r.a;var l=this.spectrumHueRect||this.refreshHueRect(),u=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=(this.H-1)*-l.width+"px",this.spectrumAlphaSlider.style.left=this.A*u.width+"px",this.setSpectrumValue(a,s)},t.prototype.onRecentColorClick=function(e){var r=e.target;if(E.exists(r.id)){var n=parseInt(r.id,10);this.setValue(t.recentColors[n]),this.destroy()}},t.prototype.addRecentColor=function(){var e=rt.fromHSB(this.H*360,this.S,this.B,this.A),r=e.toRgbaString(),n=t.recentColors;!this.colorChanged||n[0]===r||(n=n.filter(function(i){return i!=r}),n=[r].concat(n),n.length>t.maxRecentColors&&(n=n.slice(0,t.maxRecentColors)),t.recentColors=n)},t.prototype.destroy=function(){this.addRecentColor(),o.prototype.destroy.call(this)},t.maxRecentColors=8,t.recentColors=[],t.TEMPLATE=`<div class="ag-color-panel" tabindex="-1">
            <div ref="spectrumColor" class="ag-spectrum-color">
                <div class="ag-spectrum-sat ag-spectrum-fill">
                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">
                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>
                    </div>
                </div>
            </div>
            <div class="ag-spectrum-tools">
                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">
                    <div class="ag-spectrum-hue-background"></div>
                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>
                </div>
                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">
                    <div class="ag-spectrum-alpha-background"></div>
                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>
                </div>
                <div ref="recentColors" class="ag-recent-colors"></div>
            </div>
        </div>`,on([B("spectrumColor")],t.prototype,"spectrumColor",void 0),on([B("spectrumVal")],t.prototype,"spectrumVal",void 0),on([B("spectrumDragger")],t.prototype,"spectrumDragger",void 0),on([B("spectrumHue")],t.prototype,"spectrumHue",void 0),on([B("spectrumHueSlider")],t.prototype,"spectrumHueSlider",void 0),on([B("spectrumAlpha")],t.prototype,"spectrumAlpha",void 0),on([B("spectrumAlphaSlider")],t.prototype,"spectrumAlphaSlider",void 0),on([B("recentColors")],t.prototype,"recentColors",void 0),on([te],t.prototype,"postConstruct",null),t}(oe),XR=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Sd=function(){return Sd=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Sd.apply(this,arguments)},YR=function(o){XR(t,o);function t(e){var r=o.call(this,Sd({pickerAriaLabelKey:"ariaLabelColorPicker",pickerAriaLabelValue:"Color Picker",pickerType:"ag-list"},e),"ag-color-picker","colorPicker")||this;return e&&e.color&&(r.value=e.color),r}return t.prototype.postConstruct=function(){o.prototype.postConstruct.call(this),this.value&&this.setValue(this.value)},t.prototype.createPickerComponent=function(){var e=this.getGui().getBoundingClientRect(),r=this.createBean(new Bc({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:e.right-190,y:e.top-250}));return r},t.prototype.renderAndPositionPicker=function(){var e=this,r=this.pickerComponent,n=this.createBean(new $R({picker:this}));return r.addCssClass("ag-color-dialog"),n.addDestroyFunc(function(){r.isAlive()&&e.destroyBean(r)}),r.setParentComponent(this),r.setBodyComponent(n),n.setValue(this.getValue()),n.getGui().focus(),r.addDestroyFunc(function(){e.isDestroyingPicker?e.isDestroyingPicker=!1:(e.beforeHidePicker(),e.isDestroyingPicker=!0,n.isAlive()&&e.destroyBean(n),e.isAlive()&&e.getFocusableElement().focus())}),function(){var i;return(i=e.pickerComponent)===null||i===void 0?void 0:i.close()}},t.prototype.setValue=function(e){return this.value===e?this:(this.eDisplayField.style.backgroundColor=e,o.prototype.setValue.call(this,e))},t.prototype.getValue=function(){return this.value},t}(sm),Cd=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Fy=28,ky=6;function xd(o){return o&&o.match(/\d+\.\d+\.\d+/)}function qR(o){var t=o.gridMajorVersion,e=o.chartsMajorVersion,r=parseInt(t,10),n=parseInt(e,10),i=r-Fy,a=n-ky,s=i>=0;return i===a&&s}function ZR(o){if(!(!o||!xd(o))){var t=Cd(o.split(".")||[],2),e=t[0],r=t[1],n=e+"."+r+".x",i=parseInt(e,10),a=i-Fy+ky;if(!(a<0)){var s=r,l=a+"."+s+".x";return{gridMajorMinor:n,chartsMajorMinor:l}}}}function pl(o){var t=o.type,e=o.gridVersion,r=o.chartsVersion,n="AG Grid: AG Grid version is incompatible. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.";if(!e)return n;var i=ZR(e);if(!i)return n;var a=i.gridMajorMinor,s=i.chartsMajorMinor;return t==="incompatible"?"AG Grid version "+e+" and AG Charts version "+r+" is not supported. AG Grid version "+a+" should be used with AG Chart "+s+". Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.":t==="invalidCharts"?"AG Grid version "+a+" should be used with AG Chart "+s+". Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.":n}function JR(o){var t=o.gridVersion,e=o.chartsVersion;if(!xd(e))return{isValid:!1,message:pl({type:"invalidCharts",gridVersion:t,chartsVersion:e})};if(!xd(t))return{isValid:!1,message:pl({type:"invalidGrid",gridVersion:t,chartsVersion:e})};var r=Cd(t.split(".")||[],2),n=r[0],i=r[1],a=Cd(e.split(".")||[],2),s=a[0],l=a[1],u=qR({gridMajorVersion:n,chartsMajorVersion:s});return u&&i===l?{isValid:!0}:!u||i!==l?{isValid:!1,message:pl({type:"incompatible",gridVersion:t,chartsVersion:e})}:{isValid:!1,message:pl({type:"invalid",gridVersion:t,chartsVersion:e})}}var QR={version:gs,validate:function(){return JR({gridVersion:gs,chartsVersion:Up.CHARTS_VERSION})},moduleName:Ce.GridChartsModule,beans:[Up,AR,MR],agStackComponents:[{componentName:"AgColorPicker",componentClass:YR},{componentName:"AgAngleSelect",componentClass:wy}],dependantModules:[Ly,lt]},eI=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),wd=function(){return wd=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},wd.apply(this,arguments)},Kp=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ny=function(o){eI(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.loadRowDataVersion=0,e}return t.prototype.init=function(e,r){this.params=r,this.comp=e;var n=r.pinned!=null;n||(this.setAutoHeightClasses(),this.setupRefreshStrategy(),this.addThemeToDetailGrid(),this.createDetailGrid(),this.loadRowData(),this.addManagedListener(this.eventService,V.EVENT_FULL_WIDTH_ROW_FOCUSED,this.onFullWidthRowFocused.bind(this)))},t.prototype.onFullWidthRowFocused=function(e){var r=this.params,n={rowIndex:r.node.rowIndex,rowPinned:r.node.rowPinned},i={rowIndex:e.rowIndex,rowPinned:e.rowPinned},a=this.rowPositionUtils.sameRow(n,i);a&&this.focusService.focusInto(this.comp.getGui(),e.fromBelow)},t.prototype.setAutoHeightClasses=function(){var e=this.gridOptionsService.is("detailRowAutoHeight"),r=e?"ag-details-row-auto-height":"ag-details-row-fixed-height",n=e?"ag-details-grid-auto-height":"ag-details-grid-fixed-height";this.comp.addOrRemoveCssClass(r,!0),this.comp.addOrRemoveDetailGridCssClass(n,!0)},t.prototype.setupRefreshStrategy=function(){var e=this.params.refreshStrategy,r=e=="everything"||e=="nothing"||e=="rows";if(r){this.refreshStrategy=e;return}e!=null&&console.warn("AG Grid: invalid cellRendererParams.refreshStrategy = '"+e+"' supplied, defaulting to refreshStrategy = 'rows'."),this.refreshStrategy="rows"},t.prototype.addThemeToDetailGrid=function(){var e=this.environment.getTheme().theme;e&&this.comp.addOrRemoveDetailGridCssClass(e,!0)},t.prototype.createDetailGrid=function(){if(E.missing(this.params.detailGridOptions)){console.warn("AG Grid: could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions");return}var e=this.gridOptionsService.is("detailRowAutoHeight"),r=wd({},this.params.detailGridOptions);e&&(r.domLayout="autoHeight"),this.comp.setDetailGrid(r)},t.prototype.registerDetailWithMaster=function(e,r){var n=this.params.node.id,i=this.params.api,a={id:n,api:e,columnApi:r},s=this.params.node;i.addDetailGridInfo(n,a),s.detailGridInfo=a,this.addDestroyFunc(function(){s.detailGridInfo===a&&(i.removeDetailGridInfo(n),s.detailGridInfo=null)})},t.prototype.loadRowData=function(){var e=this;this.loadRowDataVersion++;var r=this.loadRowDataVersion,n=this.params.getDetailRowData;if(!n){console.warn("AG Grid: could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData");return}var i=function(s){var l=e.loadRowDataVersion===r;l&&e.comp.setRowData(s)},a={node:this.params.node,data:this.params.node.data,successCallback:i,context:this.gridOptionsService.context};n(a)},t.prototype.refresh=function(){var e=!1,r=!0;switch(this.refreshStrategy){case"nothing":return r;case"everything":return e}return this.loadRowData(),r},Kp([D("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),Kp([D("focusService")],t.prototype,"focusService",void 0),t}(pe),tI=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),rI=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},nI=function(o){tI(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.init=function(e){var r=this;this.params=e,this.selectAndSetTemplate();var n={addOrRemoveCssClass:function(i,a){return r.addOrRemoveCssClass(i,a)},addOrRemoveDetailGridCssClass:function(i,a){return r.eDetailGrid.classList.toggle(i,a)},setDetailGrid:function(i){return r.setDetailGrid(i)},setRowData:function(i){return r.setRowData(i)},getGui:function(){return r.eDetailGrid}};this.ctrl=this.createManagedBean(new Ny),this.ctrl.init(n,e)},t.prototype.refresh=function(){return this.ctrl&&this.ctrl.refresh()},t.prototype.destroy=function(){o.prototype.destroy.call(this)},t.prototype.selectAndSetTemplate=function(){var e=this;if(this.params.pinned){this.setTemplate('<div class="ag-details-row"></div>');return}var r=function(){e.setTemplate(t.TEMPLATE)};if(E.missing(this.params.template))r();else if(typeof this.params.template=="string")this.setTemplate(this.params.template);else if(typeof this.params.template=="function"){var n=this.params.template,i=n(this.params);this.setTemplate(i)}else console.warn("AG Grid: detailCellRendererParams.template should be function or string"),r();this.eDetailGrid==null&&console.warn('AG Grid: reference to eDetailGrid was missing from the details template. Please add ref="eDetailGrid" to the template.')},t.prototype.setDetailGrid=function(e){if(this.eDetailGrid){var r=this.context.getBean("agGridReact"),n=r?E.cloneObject(r):void 0,i=this.context.getBean("frameworkComponentWrapper"),a=this.getFrameworkOverrides();new lm(this.eDetailGrid,e,{frameworkOverrides:a,providedBeanInstances:{agGridReact:n,frameworkComponentWrapper:i},modules:Ke.__getGridRegisteredModules(this.params.api.getGridId())}),this.detailApi=e.api,this.ctrl.registerDetailWithMaster(e.api,e.columnApi),this.addDestroyFunc(function(){e.api&&e.api.destroy()})}},t.prototype.setRowData=function(e){this.detailApi&&this.detailApi.setRowData(e)},t.TEMPLATE=`<div class="ag-details-row" role="gridcell">
            <div ref="eDetailGrid" class="ag-details-grid" role="presentation"></div>
        </div>`,rI([B("eDetailGrid")],t.prototype,"eDetailGrid",void 0),t}(oe),iI="30.1.0",oI={version:iI,moduleName:Ce.MasterDetailModule,beans:[],userComponents:[{componentName:"agDetailCellRenderer",componentClass:nI}],controllers:[{controllerName:"detailCellRenderer",controllerClass:Ny}],dependantModules:[lt]},Gy=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ft=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},aI=function(o){Gy(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},t.prototype.showMenuAfterMouseEvent=function(e,r,n){var i=this;this.showMenu(e,function(a){var s=a.getGui();i.popupService.positionPopupUnderMouseEvent({type:"columnMenu",column:e,mouseEvent:r,ePopup:s}),n&&a.showTab(n)},"columnMenu",n,void 0,r.target)},t.prototype.showMenuAfterButtonClick=function(e,r,n,i,a){var s=this,l=-1,u="left";this.gridOptionsService.is("enableRtl")&&(l=1,u="right"),this.showMenu(e,function(c){var d=c.getGui();s.popupService.positionPopupByComponent({type:n,column:e,eventSource:r,ePopup:d,alignSide:u,nudgeX:9*l,nudgeY:-23,position:"under",keepWithinBounds:!0}),i&&c.showTab(i)},n,i,a,r)},t.prototype.showMenu=function(e,r,n,i,a,s){var l=this,u=this.getMenuParams(e,a,s),c=u.menu,d=u.eMenuGui,h=u.currentHeaderPosition,f=u.currentColumnIndex,p=u.anchorToElement,v=[];v.push(this.getClosedCallback(e,c,h,f,s));var g=this.localeService.getLocaleTextFunc();this.popupService.addPopup({modal:!0,eChild:d,closeOnEsc:!0,closedCallback:function(y){v.forEach(function(S){return S(y)})},afterGuiAttached:function(y){return c.afterGuiAttached(Object.assign({},{container:n},y))},positionCallback:i?function(){return r(c)}:void 0,ariaLabel:g("ariaLabelColumnMenu","Column Menu")}),i||(c.showTabBasedOnPreviousSelection(),r(c));var m=this.popupService.setPopupPositionRelatedToElement(d,p);m&&this.addStopAnchoring(m,e,v),c.addEventListener(Tc.EVENT_TAB_SELECTED,function(y){l.lastSelectedTab=y.key}),e.setMenuVisible(!0,"contextMenu"),this.activeMenu=c,c.addEventListener(pe.EVENT_DESTROYED,function(){l.activeMenu===c&&(l.activeMenu=null)})},t.prototype.addStopAnchoring=function(e,r,n){e.then(function(i){r.addEventListener("leftChanged",i),r.addEventListener("visibleChanged",i),n.push(function(){r.removeEventListener("leftChanged",i),r.removeEventListener("visibleChanged",i)})})},t.prototype.getClosedCallback=function(e,r,n,i,a){var s=this;return function(l){s.destroyBean(r),e.setMenuVisible(!1,"contextMenu");var u=l instanceof KeyboardEvent;if(!(!u||!a)){var c=s.columnModel.getAllDisplayedColumns().some(function(p){return p===e});if(c&&E.isVisible(a)){var d=s.focusService.findTabbableParent(a);d&&(e&&s.headerNavigationService.scrollToColumn(e),d.focus())}else if(n&&i!==-1){var h=s.columnModel.getAllDisplayedColumns(),f=h[i]||E.last(h);f&&s.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:n.headerRowIndex,column:f}})}}}},t.prototype.getMenuParams=function(e,r,n){var i=this.createBean(new Tc(e,this.lastSelectedTab,r));return{menu:i,eMenuGui:i.getGui(),currentHeaderPosition:this.focusService.getFocusedHeader(),currentColumnIndex:this.columnModel.getAllDisplayedColumns().indexOf(e),anchorToElement:n||this.ctrlsService.getGridBodyCtrl().getGui()}},t.prototype.isMenuEnabled=function(e){return e.getMenuTabs(Tc.TABS_DEFAULT).length>0},Ft([D("popupService")],t.prototype,"popupService",void 0),Ft([D("focusService")],t.prototype,"focusService",void 0),Ft([D("headerNavigationService")],t.prototype,"headerNavigationService",void 0),Ft([D("ctrlsService")],t.prototype,"ctrlsService",void 0),Ft([D("columnModel")],t.prototype,"columnModel",void 0),t=Ft([be("menuFactory")],t),t}(pe),Tc=function(o){Gy(t,o);function t(e,r,n){var i=o.call(this)||this;return i.tabFactories={},i.includeChecks={},i.column=e,i.initialSelection=r,i.tabFactories[t.TAB_GENERAL]=i.createMainPanel.bind(i),i.tabFactories[t.TAB_FILTER]=i.createFilterPanel.bind(i),i.tabFactories[t.TAB_COLUMNS]=i.createColumnsPanel.bind(i),i.includeChecks[t.TAB_GENERAL]=function(){return!0},i.includeChecks[t.TAB_FILTER]=function(){return i.filterManager.isFilterAllowed(e)},i.includeChecks[t.TAB_COLUMNS]=function(){return!0},i.restrictTo=n,i}return t.prototype.init=function(){var e=this,r=this.getTabsToCreate().map(function(n){return e.createTab(n)});this.tabbedLayout=new _v({items:r,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout),this.addDestroyFunc(function(){return e.destroyBean(e.tabbedLayout)})},t.prototype.getTabsToCreate=function(){var e=this;return this.restrictTo?this.restrictTo:this.column.getMenuTabs(t.TABS_DEFAULT).filter(function(r){return e.isValidMenuTabItem(r)}).filter(function(r){return e.isNotSuppressed(r)}).filter(function(r){return e.isModuleLoaded(r)})},t.prototype.isModuleLoaded=function(e){return e===t.TAB_COLUMNS?Ke.__isRegistered(Ce.ColumnsToolPanelModule,this.context.getGridId()):!0},t.prototype.isValidMenuTabItem=function(e){var r=!0,n=t.TABS_DEFAULT;return this.restrictTo!=null&&(r=this.restrictTo.indexOf(e)>-1,n=this.restrictTo),r=r&&t.TABS_DEFAULT.indexOf(e)>-1,r||console.warn("AG Grid: Trying to render an invalid menu item '"+e+"'. Check that your 'menuTabs' contains one of ["+n+"]"),r},t.prototype.isNotSuppressed=function(e){return this.includeChecks[e]()},t.prototype.createTab=function(e){return this.tabFactories[e]()},t.prototype.showTabBasedOnPreviousSelection=function(){this.showTab(this.initialSelection)},t.prototype.showTab=function(e){this.tabItemColumns&&e===t.TAB_COLUMNS?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&e===t.TAB_FILTER?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&e===t.TAB_GENERAL?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()},t.prototype.onTabItemClicked=function(e){var r=null;switch(e.item){case this.tabItemColumns:r=t.TAB_COLUMNS;break;case this.tabItemFilter:r=t.TAB_FILTER;break;case this.tabItemGeneral:r=t.TAB_GENERAL;break}r&&this.activateTab(r)},t.prototype.activateTab=function(e){var r={type:t.EVENT_TAB_SELECTED,key:e};this.dispatchEvent(r)},t.prototype.getMenuItems=function(){var e=this.getDefaultMenuOptions(),r,n=this.gridOptionsService.getCallback("getMainMenuItems");return n?r=n({column:this.column,defaultItems:e}):r=e,E.removeRepeatsFromArray(r,t.MENU_ITEM_SEPARATOR),r},t.prototype.getDefaultMenuOptions=function(){var e=[],r=!this.column.getColDef().lockPinned,n=this.columnModel.getRowGroupColumns().length,i=n>0,a=this.columnModel.getRowGroupColumns().indexOf(this.column)>=0,s=this.column.isAllowValue(),l=this.column.isAllowRowGroup(),u=this.column.isPrimary(),c=this.columnModel.isPivotMode(),d=this.rowModel.getType()==="clientSide",h=this.gridOptionsService.isTreeData(),f=u&&i&&s||!u;r&&e.push("pinSubMenu"),f&&e.push("valueAggSubMenu"),(r||f)&&e.push(t.MENU_ITEM_SEPARATOR),e.push("autoSizeThis"),e.push("autoSizeAll"),e.push(t.MENU_ITEM_SEPARATOR),this.column.getColDef().showRowGroup&&e.push("rowUnGroup"),l&&this.column.isPrimary()&&(a?e.push("rowUnGroup"):e.push("rowGroup")),e.push(t.MENU_ITEM_SEPARATOR),e.push("resetColumns");var p=d&&(h||n>(c?1:0));return p&&(e.push("expandAll"),e.push("contractAll")),e},t.prototype.createMainPanel=function(){this.mainMenuList=this.createManagedBean(new Ad);var e=this.getMenuItems(),r=this.menuItemMapper.mapWithStockItems(e,this.column);return this.mainMenuList.addMenuItems(r),this.mainMenuList.addEventListener(Wo.EVENT_MENU_ITEM_SELECTED,this.onHidePopup.bind(this)),this.tabItemGeneral={title:E.createIconNoSpan("menu",this.gridOptionsService,this.column),titleLabel:t.TAB_GENERAL.replace("MenuTab",""),bodyPromise:$e.resolve(this.mainMenuList.getGui()),name:t.TAB_GENERAL},this.tabItemGeneral},t.prototype.onHidePopup=function(e){var r;e&&e.event&&e.event instanceof KeyboardEvent&&(r=e.event),this.hidePopupFunc(r&&{keyboardEvent:r});var n=this.focusService.getFocusedCell(),i=this.gridOptionsService.getDocument();if(i.activeElement===i.body&&n){var a=n.rowIndex,s=n.rowPinned,l=n.column;this.focusService.setFocusedCell({rowIndex:a,column:l,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}},t.prototype.createFilterPanel=function(){var e=this.filterManager.getOrCreateFilterWrapper(this.column,"COLUMN_MENU");if(!e)throw new Error("AG Grid - Unable to instantiate filter");var r=function(i){e!=null&&e.filterPromise&&e.filterPromise.then(function(a){a&&a.afterGuiAttached&&a.afterGuiAttached(i)})},n=function(){var i;return(i=e==null?void 0:e.filterPromise)===null||i===void 0?void 0:i.then(function(a){var s;return(s=a==null?void 0:a.afterGuiDetached)===null||s===void 0?void 0:s.call(a)})};return this.tabItemFilter={title:E.createIconNoSpan("filter",this.gridOptionsService,this.column),titleLabel:t.TAB_FILTER.replace("MenuTab",""),bodyPromise:e==null?void 0:e.guiPromise,afterAttachedCallback:r,afterDetachedCallback:n,name:t.TAB_FILTER},this.tabItemFilter},t.prototype.createColumnsPanel=function(){var e=document.createElement("div");e.classList.add("ag-menu-column-select-wrapper");var r=this.createManagedBean(new Gd),n=this.column.getColDef().columnsMenuParams;n||(n={});var i=n.contractColumnSelection,a=n.suppressColumnExpandAll,s=n.suppressColumnFilter,l=n.suppressColumnSelectAll,u=n.suppressSyncLayoutWithGrid,c=n.columnLayout;r.init(!1,{suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!i,suppressColumnExpandAll:!!a,suppressColumnFilter:!!s,suppressColumnSelectAll:!!l,suppressSyncLayoutWithGrid:!!c||!!u,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context},"columnMenu"),c&&r.setColumnLayout(c);var d=r.getGui();return d.classList.add("ag-menu-column-select"),e.appendChild(d),this.tabItemColumns={title:E.createIconNoSpan("columns",this.gridOptionsService,this.column),titleLabel:t.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:$e.resolve(e),name:t.TAB_COLUMNS},this.tabItemColumns},t.prototype.afterGuiAttached=function(e){var r=e.container,n=e.hidePopup;this.tabbedLayout.setAfterAttachedParams({container:r,hidePopup:n}),n&&(this.hidePopupFunc=n,this.addDestroyFunc(n))},t.prototype.getGui=function(){return this.tabbedLayout.getGui()},t.EVENT_TAB_SELECTED="tabSelected",t.TAB_FILTER="filterMenuTab",t.TAB_GENERAL="generalMenuTab",t.TAB_COLUMNS="columnsMenuTab",t.TABS_DEFAULT=[t.TAB_GENERAL,t.TAB_FILTER,t.TAB_COLUMNS],t.MENU_ITEM_SEPARATOR="separator",Ft([D("columnModel")],t.prototype,"columnModel",void 0),Ft([D("filterManager")],t.prototype,"filterManager",void 0),Ft([D("gridApi")],t.prototype,"gridApi",void 0),Ft([D("columnApi")],t.prototype,"columnApi",void 0),Ft([D("menuItemMapper")],t.prototype,"menuItemMapper",void 0),Ft([D("rowModel")],t.prototype,"rowModel",void 0),Ft([D("focusService")],t.prototype,"focusService",void 0),Ft([te],t.prototype,"init",null),t}(pe),Vy=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),cu=function(){return cu=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},cu.apply(this,arguments)},dn=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},sI="ag-menu",$p="ag-context-menu-open",lI=function(o){Vy(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},t.prototype.getMenuItems=function(e,r,n){var i=[];if(E.exists(e)&&Ke.__isRegistered(Ce.ClipboardModule,this.context.getGridId())&&r&&(this.gridOptionsService.is("suppressCutToClipboard")||i.push("cut"),i.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),this.gridOptionsService.is("enableCharts")&&Ke.__isRegistered(Ce.GridChartsModule,this.context.getGridId())&&(this.columnModel.isPivotMode()&&i.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&i.push("chartRange")),E.exists(e)){var a=!Ke.__isRegistered(Ce.CsvExportModule,this.context.getGridId()),s=!Ke.__isRegistered(Ce.ExcelExportModule,this.context.getGridId()),l=this.gridOptionsService.is("suppressExcelExport")||s,u=this.gridOptionsService.is("suppressCsvExport")||a,c=E.isIOSUserAgent(),d=!c&&(!l||!u);d&&i.push("export")}var h=this.gridOptionsService.getCallback("getContextMenuItems");if(h){var f={node:e,column:r,value:n,defaultItems:i.length?i:void 0};return h(f)}return i},t.prototype.onContextMenu=function(e,r,n,i,a,s){if(!(!this.gridOptionsService.is("allowContextMenuWithControlKey")&&e&&(e.ctrlKey||e.metaKey))&&(e&&this.blockMiddleClickScrollsIfNeeded(e),!this.gridOptionsService.is("suppressContextMenu"))){var l=e||r.touches[0];if(this.showMenu(n,i,a,l,s)){var u=e||r;u.preventDefault()}}},t.prototype.blockMiddleClickScrollsIfNeeded=function(e){var r=this.gridOptionsService,n=e.which;r.is("suppressMiddleClickScrolls")&&n===2&&e.preventDefault()},t.prototype.showMenu=function(e,r,n,i,a){var s=this,l=this.getMenuItems(e,r,n),u=this.ctrlsService.getGridBodyCtrl().getGui();if(l===void 0||E.missingOrEmpty(l))return!1;var c=new uI(l);this.createBean(c);var d=c.getGui(),h={column:r,rowNode:e,type:"contextMenu",mouseEvent:i,ePopup:d,nudgeY:1},f=this.localeService.getLocaleTextFunc(),p=this.popupService.addPopup({modal:!0,eChild:d,closeOnEsc:!0,closedCallback:function(){u.classList.remove($p),s.destroyBean(c)},click:i,positionCallback:function(){var v=s.gridOptionsService.is("enableRtl");s.popupService.positionPopupUnderMouseEvent(cu(cu({},h),{nudgeX:v?(d.offsetWidth+1)*-1:1}))},anchorToElement:a,ariaLabel:f("ariaLabelContextMenu","Context Menu")});return p&&(u.classList.add($p),c.afterGuiAttached({container:"contextMenu",hidePopup:p.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=c,c.addEventListener(pe.EVENT_DESTROYED,function(){s.activeMenu===c&&(s.activeMenu=null)}),p&&c.addEventListener(Wo.EVENT_MENU_ITEM_SELECTED,p.hideFunc),!0},dn([D("popupService")],t.prototype,"popupService",void 0),dn([zr("rangeService")],t.prototype,"rangeService",void 0),dn([D("ctrlsService")],t.prototype,"ctrlsService",void 0),dn([D("columnModel")],t.prototype,"columnModel",void 0),t=dn([be("contextMenuFactory")],t),t}(pe),uI=function(o){Vy(t,o);function t(e){var r=o.call(this,'<div class="'+sI+'" role="presentation"></div>')||this;return r.menuList=null,r.focusedCell=null,r.menuItems=e,r}return t.prototype.addMenuItems=function(){var e=this,r=this.createManagedBean(new Ad),n=this.menuItemMapper.mapWithStockItems(this.menuItems,null);r.addMenuItems(n),this.appendChild(r),this.menuList=r,r.addEventListener(Wo.EVENT_MENU_ITEM_SELECTED,function(i){return e.dispatchEvent(i)})},t.prototype.afterGuiAttached=function(e){e.hidePopup&&this.addDestroyFunc(e.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())},t.prototype.restoreFocusedCell=function(){var e=this.focusService.getFocusedCell();if(e&&this.focusedCell&&this.cellPositionUtils.equals(e,this.focusedCell)){var r=this.focusedCell,n=r.rowIndex,i=r.rowPinned,a=r.column,s=this.gridOptionsService.getDocument();s.activeElement===s.body&&this.focusService.setFocusedCell({rowIndex:n,column:a,rowPinned:i,forceBrowserFocus:!0})}},t.prototype.destroy=function(){this.restoreFocusedCell(),o.prototype.destroy.call(this)},dn([D("menuItemMapper")],t.prototype,"menuItemMapper",void 0),dn([D("focusService")],t.prototype,"focusService",void 0),dn([D("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),dn([te],t.prototype,"addMenuItems",null),t}(oe),cI=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),bd=function(){return bd=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},bd.apply(this,arguments)},En=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},dI=function(o){cI(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.mapWithStockItems=function(e,r){var n=this;if(!e)return[];var i=[];return e.forEach(function(a){var s;if(typeof a=="string"?s=n.getStockMenuItem(a,r):s=bd({},a),!!s){var l=s,u=l.subMenu;u&&u instanceof Array&&(l.subMenu=n.mapWithStockItems(u,r)),s!=null&&i.push(s)}}),i},t.prototype.getStockMenuItem=function(e,r){var n=this,i,a,s=this.localeService.getLocaleTextFunc(),l=this.gridOptionsService.is("skipHeaderOnAutoSize");switch(e){case"pinSubMenu":return{name:s("pinColumn","Pin Column"),icon:E.createIconNoSpan("menuPin",this.gridOptionsService,null),subMenu:["clearPinned","pinLeft","pinRight"]};case"pinLeft":return{name:s("pinLeft","Pin Left"),action:function(){return n.columnModel.setColumnPinned(r,"left","contextMenu")},checked:!!r&&r.isPinnedLeft()};case"pinRight":return{name:s("pinRight","Pin Right"),action:function(){return n.columnModel.setColumnPinned(r,"right","contextMenu")},checked:!!r&&r.isPinnedRight()};case"clearPinned":return{name:s("noPin","No Pin"),action:function(){return n.columnModel.setColumnPinned(r,null,"contextMenu")},checked:!!r&&!r.isPinned()};case"valueAggSubMenu":return Ke.__assertRegistered(Ce.RowGroupingModule,"Aggregation from Menu",this.context.getGridId())?!(r!=null&&r.isPrimary())&&!(r!=null&&r.getColDef().pivotValueColumn)?null:{name:s("valueAggregation","Value Aggregation"),icon:E.createIconNoSpan("menuValue",this.gridOptionsService,null),subMenu:this.createAggregationSubMenu(r)}:null;case"autoSizeThis":return{name:s("autosizeThiscolumn","Autosize This Column"),action:function(){return n.columnModel.autoSizeColumn(r,l,"contextMenu")}};case"autoSizeAll":return{name:s("autosizeAllColumns","Autosize All Columns"),action:function(){return n.columnModel.autoSizeAllColumns(l,"contextMenu")}};case"rowGroup":return{name:s("groupBy","Group by")+" "+E.escapeString(this.columnModel.getDisplayNameForColumn(r,"header")),disabled:(r==null?void 0:r.isRowGroupActive())||!(r!=null&&r.getColDef().enableRowGroup),action:function(){return n.columnModel.addRowGroupColumn(r,"contextMenu")},icon:E.createIconNoSpan("menuAddRowGroup",this.gridOptionsService,null)};case"rowUnGroup":var u=E.createIconNoSpan("menuRemoveRowGroup",this.gridOptionsService,null),c=r==null?void 0:r.getColDef().showRowGroup;if(c===!0)return{name:s("ungroupAll","Un-Group All"),disabled:!(r!=null&&r.getColDef().showRowGroup),action:function(){return n.columnModel.setRowGroupColumns([],"contextMenu")},icon:u};if(typeof c=="string"){var d=(i=this.columnModel.getSourceColumnsForGroupColumn(r))===null||i===void 0?void 0:i[0],h=d!=null?E.escapeString(this.columnModel.getDisplayNameForColumn(d,"header")):c;return{name:s("ungroupBy","Un-Group by")+" "+h,disabled:!(r!=null&&r.getColDef().showRowGroup),action:function(){return n.columnModel.removeRowGroupColumn(c,"contextMenu")},icon:u}}return{name:s("ungroupBy","Un-Group by")+" "+E.escapeString(this.columnModel.getDisplayNameForColumn(r,"header")),disabled:!(r!=null&&r.isRowGroupActive())||!(r!=null&&r.getColDef().enableRowGroup),action:function(){return n.columnModel.removeRowGroupColumn(r,"contextMenu")},icon:u};case"resetColumns":return{name:s("resetColumns","Reset Columns"),action:function(){return n.columnModel.resetColumnState("contextMenu")}};case"expandAll":return{name:s("expandAll","Expand All Row Groups"),action:function(){return n.gridApi.expandAll()}};case"contractAll":return{name:s("collapseAll","Collapse All Row Groups"),action:function(){return n.gridApi.collapseAll()}};case"copy":return Ke.__assertRegistered(Ce.ClipboardModule,"Copy from Menu",this.context.getGridId())?{name:s("copy","Copy"),shortcut:s("ctrlC","Ctrl+C"),icon:E.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return n.clipboardService.copyToClipboard()}}:null;case"copyWithHeaders":return Ke.__assertRegistered(Ce.ClipboardModule,"Copy with Headers from Menu",this.context.getGridId())?{name:s("copyWithHeaders","Copy with Headers"),icon:E.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return n.clipboardService.copyToClipboard({includeHeaders:!0})}}:null;case"copyWithGroupHeaders":return Ke.__assertRegistered(Ce.ClipboardModule,"Copy with Group Headers from Menu",this.context.getGridId())?{name:s("copyWithGroupHeaders","Copy with Group Headers"),icon:E.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return n.clipboardService.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}}:null;case"cut":if(Ke.__assertRegistered(Ce.ClipboardModule,"Cut from Menu",this.context.getGridId())){var f=this.focusService.getFocusedCell(),p=f?this.rowPositionUtils.getRowNode(f):null,v=p?f==null?void 0:f.column.isCellEditable(p):!1;return{name:s("cut","Cut"),shortcut:s("ctrlX","Ctrl+X"),icon:E.createIconNoSpan("clipboardCut",this.gridOptionsService,null),disabled:!v||this.gridOptionsService.is("suppressCutToClipboard"),action:function(){return n.clipboardService.cutToClipboard(void 0,"contextMenu")}}}else return null;case"paste":return Ke.__assertRegistered(Ce.ClipboardModule,"Paste from Clipboard",this.context.getGridId())?{name:s("paste","Paste"),shortcut:s("ctrlV","Ctrl+V"),disabled:!0,icon:E.createIconNoSpan("clipboardPaste",this.gridOptionsService,null),action:function(){return n.clipboardService.pasteFromClipboard()}}:null;case"export":var g=[],m=Ke.__isRegistered(Ce.CsvExportModule,this.context.getGridId()),y=Ke.__isRegistered(Ce.ExcelExportModule,this.context.getGridId());return!this.gridOptionsService.is("suppressCsvExport")&&m&&g.push("csvExport"),!this.gridOptionsService.is("suppressExcelExport")&&y&&g.push("excelExport"),{name:s("export","Export"),subMenu:g,icon:E.createIconNoSpan("save",this.gridOptionsService,null)};case"csvExport":return{name:s("csvExport","CSV Export"),icon:E.createIconNoSpan("csvExport",this.gridOptionsService,null),action:function(){return n.gridApi.exportDataAsCsv({})}};case"excelExport":return{name:s("excelExport","Excel Export"),icon:E.createIconNoSpan("excelExport",this.gridOptionsService,null),action:function(){return n.gridApi.exportDataAsExcel()}};case"separator":return"separator";case"pivotChart":case"chartRange":return(a=this.chartMenuItemMapper.getChartItems(e))!==null&&a!==void 0?a:null;default:return console.warn("AG Grid: unknown menu item type "+e),null}},t.prototype.createAggregationSubMenu=function(e){var r=this,n=this.localeService.getLocaleTextFunc(),i;if(e.isPrimary())i=e;else{var a=e.getColDef().pivotValueColumn;i=E.exists(a)?a:void 0}var s=[];if(i){var l=i.isValueActive(),u=this.aggFuncService.getFuncNames(i);s.push({name:n("noAggregation","None"),action:function(){r.columnModel.removeValueColumn(i,"contextMenu"),r.columnModel.setColumnAggFunc(i,void 0,"contextMenu")},checked:!l}),u.forEach(function(c){s.push({name:n(c,E.capitalise(c)),action:function(){r.columnModel.setColumnAggFunc(i,c,"contextMenu"),r.columnModel.addValueColumn(i,"contextMenu")},checked:l&&i.getAggFunc()===c})})}return s},En([D("columnModel")],t.prototype,"columnModel",void 0),En([D("gridApi")],t.prototype,"gridApi",void 0),En([zr("clipboardService")],t.prototype,"clipboardService",void 0),En([zr("aggFuncService")],t.prototype,"aggFuncService",void 0),En([D("focusService")],t.prototype,"focusService",void 0),En([D("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),En([D("chartMenuItemMapper")],t.prototype,"chartMenuItemMapper",void 0),t=En([be("menuItemMapper")],t),t}(pe),hI="30.1.0",fI=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),du=function(){return du=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},du.apply(this,arguments)},Xp=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},pI=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},vI=function(o){fI(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}e=t,t.prototype.getChartItems=function(r){var n,i;if(!this.chartService){Ke.__assertRegistered(Ce.GridChartsModule,'the Context Menu key "'+r+'"',this.context.getGridId());return}var a=r==="pivotChart"?new gI(this.gridOptionsService,this.chartService,this.localeService):new yI(this.gridOptionsService,this.chartService,this.localeService),s=a.getMenuItem(),l=(i=(n=this.gridOptionsService.get("chartToolPanelsDef"))===null||n===void 0?void 0:n.settingsPanel)===null||i===void 0?void 0:i.chartGroupsDef;return l&&(s=e.filterAndOrderChartMenu(s,l,a.getConfigLookup())),this.cleanInternals(s)},t.prototype.cleanInternals=function(r){if(!r)return r;var n=function(i){var a;return i==null||delete i._key,(a=i==null?void 0:i.subMenu)===null||a===void 0||a.forEach(function(s){return n(s)}),i};return n(r)},t.buildLookup=function(r){var n={},i=function(a){n[a._key]=a,a.subMenu&&a.subMenu.forEach(function(s){return i(s)})};return i(r),n},t.filterAndOrderChartMenu=function(r,n,i){var a,s=this.buildLookup(r),l=du(du({},r),{subMenu:[]});if(Object.entries(n).forEach(function(u){var c,d,h=pI(u,2),f=h[0],p=h[1],v=i[f];if(v==null){E.doOnce(function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+f+"'")},"invalid_chartGroupsDef"+f);return}var g=s[v._key];if(g)if(g.subMenu){var m=p.map(function(y){var S=v[y];if(S==null){E.doOnce(function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+f+"."+y+"'")},"invalid_chartGroupsDef"+y+"_"+f);return}return s[S]}).filter(function(y){return y!==void 0});m.length>0&&(g.subMenu=m,(c=l.subMenu)===null||c===void 0||c.push(g))}else(d=l.subMenu)===null||d===void 0||d.push(g)}),((a=l.subMenu)===null||a===void 0?void 0:a.length)!=0)return l};var e;return Xp([zr("chartService")],t.prototype,"chartService",void 0),t=e=Xp([be("chartMenuItemMapper")],t),t}(pe),gI=function(){function o(t,e,r){this.gridOptionsService=t,this.chartService=e,this.localeService=r}return o.prototype.getMenuItem=function(){var t=this,e=this.localeService.getLocaleTextFunc(),r=function(n,i,a,s){return{name:e(n,i),action:function(){return t.chartService.createPivotChart({chartType:a})},_key:s}};return{name:e("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:e("columnChart","Column"),subMenu:[r("groupedColumn","Grouped&lrm;","groupedColumn","pivotGroupedColumn"),r("stackedColumn","Stacked&lrm;","stackedColumn","pivotStackedColumn"),r("normalizedColumn","100% Stacked&lrm;","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:e("barChart","Bar"),subMenu:[r("groupedBar","Grouped&lrm;","groupedBar","pivotGroupedBar"),r("stackedBar","Stacked&lrm;","stackedBar","pivotStackedBar"),r("normalizedBar","100% Stacked&lrm;","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:e("pieChart","Pie"),subMenu:[r("pie","Pie&lrm;","pie","pivotPie"),r("doughnut","Doughnut&lrm;","doughnut","pivotDoughnut")]},r("line","Line&lrm;","line","pivotLineChart"),{_key:"pivotXYChart",name:e("xyChart","X Y (Scatter)"),subMenu:[r("scatter","Scatter&lrm;","scatter","pivotScatter"),r("bubble","Bubble&lrm;","bubble","pivotBubble")]},{_key:"pivotAreaChart",name:e("areaChart","Area"),subMenu:[r("area","Area&lrm;","area","pivotArea"),r("stackedArea","Stacked&lrm;","stackedArea","pivotStackedArea"),r("normalizedArea","100% Stacked&lrm;","normalizedArea","pivotNormalizedArea")]},r("histogramChart","Histogram&lrm;","histogram","pivotHistogramChart"),{_key:"pivotCombinationChart",name:e("combinationChart","Combination"),subMenu:[r("columnLineCombo","Column & Line&lrm;","columnLineCombo","pivotColumnLineCombo"),r("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","pivotAreaColumnCombo")]}],icon:E.createIconNoSpan("chart",this.gridOptionsService,void 0)}},o.prototype.getConfigLookup=function(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",doughnut:"pivotDoughnut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},histogramGroup:{_key:"pivotHistogramChart",histogram:"pivotHistogramChart"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:""}}},o}(),yI=function(){function o(t,e,r){this.gridOptionsService=t,this.chartService=e,this.localeService=r}return o.prototype.getMenuItem=function(){var t=this,e=this.localeService.getLocaleTextFunc(),r=function(n,i,a,s){return{name:e(n,i),action:function(){return t.chartService.createChartFromCurrentRange(a)},_key:s}};return{name:e("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:e("columnChart","Column"),subMenu:[r("groupedColumn","Grouped&lrm;","groupedColumn","rangeGroupedColumn"),r("stackedColumn","Stacked&lrm;","stackedColumn","rangeStackedColumn"),r("normalizedColumn","100% Stacked&lrm;","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:e("barChart","Bar"),subMenu:[r("groupedBar","Grouped&lrm;","groupedBar","rangeGroupedBar"),r("stackedBar","Stacked&lrm;","stackedBar","rangeStackedBar"),r("normalizedBar","100% Stacked&lrm;","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:e("pieChart","Pie"),subMenu:[r("pie","Pie&lrm;","pie","rangePie"),r("doughnut","Doughnut&lrm;","doughnut","rangeDoughnut")],_key:"rangePieChart"},r("line","Line&lrm;","line","rangeLineChart"),{name:e("xyChart","X Y (Scatter)"),subMenu:[r("scatter","Scatter&lrm;","scatter","rangeScatter"),r("bubble","Bubble&lrm;","bubble","rangeBubble")],_key:"rangeXYChart"},{name:e("areaChart","Area"),subMenu:[r("area","Area&lrm;","area","rangeArea"),r("stackedArea","Stacked&lrm;","stackedArea","rangeStackedArea"),r("normalizedArea","100% Stacked&lrm;","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},r("histogramChart","Histogram&lrm;","histogram","rangeHistogramChart"),{name:e("combinationChart","Combination"),subMenu:[r("columnLineCombo","Column & Line&lrm;","columnLineCombo","rangeColumnLineCombo"),r("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:E.createIconNoSpan("chart",this.gridOptionsService,void 0)}},o.prototype.getConfigLookup=function(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",doughnut:"rangeDoughnut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},histogramGroup:{_key:"rangeHistogramChart",histogram:"rangeHistogramChart"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:""}}},o}(),mI={version:hI,moduleName:Ce.MenuModule,beans:[aI,lI,dI,vI],dependantModules:[lt]},SI=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vo=function(){return Vo=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Vo.apply(this,arguments)},Pc=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},_d=function(o){SI(t,o);function t(){var e=o.call(this,'<div class="ag-multi-filter ag-menu-list-compact"></div>')||this;return e.filterDefs=[],e.filters=[],e.guiDestroyFuncs=[],e.activeFilterIndices=[],e.lastActivatedMenuItem=null,e.afterFiltersReadyFuncs=[],e}return t.prototype.postConstruct=function(){var e=this;this.initialiseTabGuard({onFocusIn:function(r){return e.onFocusIn(r)}})},t.getFilterDefs=function(e){var r=e.filters;return r&&r.length>0?r:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter"}]},t.prototype.init=function(e){var r=this;this.params=e,this.filterDefs=t.getFilterDefs(e);var n=e.column,i=e.filterChangedCallback;this.column=n,this.filterChangedCallback=i;var a=[];return this.filterDefs.forEach(function(s,l){var u=r.createFilter(s,l);u!=null&&a.push(u)}),$e.all(a).then(function(s){r.filters=s,r.refreshGui("columnMenu"),r.afterFiltersReadyFuncs.forEach(function(l){return l()}),r.afterFiltersReadyFuncs.length=0})},t.prototype.refreshGui=function(e){var r=this;e!==this.lastOpenedInContainer&&(this.removeAllChildrenExceptTabGuards(),this.destroyChildren(),this.filters.forEach(function(n,i){i>0&&r.appendChild(E.loadTemplate('<div class="ag-filter-separator"></div>'));var a=r.filterDefs[i],s=r.getFilterTitle(n,a),l;if(a.display==="subMenu"&&e!=="toolPanel"){var u=r.insertFilterMenu(n,s);l=u.getGui()}else if(a.display==="subMenu"||a.display==="accordion"){var c=r.insertFilterGroup(n,s);l=c.getGui()}else l=n.getGui();r.appendChild(l)}),this.lastOpenedInContainer=e)},t.prototype.getFilterTitle=function(e,r){if(r.title!=null)return r.title;var n=e;return typeof n.getFilterTitle=="function"?n.getFilterTitle():"Filter"},t.prototype.destroyChildren=function(){this.guiDestroyFuncs.forEach(function(e){return e()}),this.guiDestroyFuncs.length=0},t.prototype.insertFilterMenu=function(e,r){var n=this,i=this.createBean(new Wo({name:r,subMenu:e,cssClasses:["ag-multi-filter-menu-item"],isCompact:!0,isAnotherSubMenuOpen:function(){return!1}}));return i.setParentComponent(this),this.guiDestroyFuncs.push(function(){return n.destroyBean(i)}),this.addManagedListener(i,Wo.EVENT_MENU_ITEM_ACTIVATED,function(a){n.lastActivatedMenuItem&&n.lastActivatedMenuItem!==a.menuItem&&n.lastActivatedMenuItem.deactivate(),n.lastActivatedMenuItem=a.menuItem}),i.addGuiEventListener("focusin",function(){return i.activate()}),i.addGuiEventListener("focusout",function(){i.isSubMenuOpen()||i.deactivate()}),i},t.prototype.insertFilterGroup=function(e,r){var n=this,i=this.createBean(new hn({title:r,cssIdentifier:"multi-filter"}));return this.guiDestroyFuncs.push(function(){return n.destroyBean(i)}),i.addItem(e.getGui()),i.toggleGroupExpand(!1),e.afterGuiAttached&&i.addManagedListener(i,hn.EVENT_EXPANDED,function(){return e.afterGuiAttached({container:n.lastOpenedInContainer,suppressFocus:!0,hidePopup:n.hidePopup})}),i},t.prototype.isFilterActive=function(){return this.filters.some(function(e){return e.isFilterActive()})},t.prototype.getLastActiveFilterIndex=function(){return this.activeFilterIndices.length>0?this.activeFilterIndices[this.activeFilterIndices.length-1]:null},t.prototype.doesFilterPass=function(e,r){var n=!0;return this.filters.forEach(function(i){!n||i===r||!i.isFilterActive()||(n=i.doesFilterPass(e))}),n},t.prototype.getFilterType=function(){return"multi"},t.prototype.getModelFromUi=function(){var e={filterType:this.getFilterType(),filterModels:this.filters.map(function(r){var n=r;return typeof n.getModelFromUi=="function"?n.getModelFromUi():null})};return e},t.prototype.getModel=function(){if(!this.isFilterActive())return null;var e={filterType:this.getFilterType(),filterModels:this.filters.map(function(r){return r.isFilterActive()?r.getModel():null})};return e},t.prototype.setModel=function(e){var r=this,n=function(a,s){return new $e(function(l){var u=a.setModel(s);u?u.then(function(){return l()}):l()})},i=[];return e==null?i=this.filters.map(function(a,s){var l=n(a,null).then(function(){r.updateActiveList(s)});return l}):this.filters.forEach(function(a,s){var l=e.filterModels.length>s?e.filterModels[s]:null,u=n(a,l).then(function(){r.updateActiveList(s)});i.push(u)}),$e.all(i).then(function(){})},t.prototype.applyModel=function(e){e===void 0&&(e="api");var r=!1;return this.filters.forEach(function(n){n instanceof Ov&&(r=n.applyModel(e)||r)}),r},t.prototype.getChildFilterInstance=function(e){return this.filters[e]},t.prototype.afterGuiAttached=function(e){e?(this.hidePopup=e.hidePopup,this.refreshGui(e.container)):this.hidePopup=void 0;var r=this.params.filters,n=r&&r.some(function(s){return s.display&&s.display!=="inline"});this.executeFunctionIfExists("afterGuiAttached",Vo(Vo({},e||{}),{suppressFocus:n}));var i=this.gridOptionsService.getDocument(),a=i.activeElement;n&&(a===i.body||this.getGui().contains(a))&&this.forceFocusOutOfContainer(!0)},t.prototype.afterGuiDetached=function(){this.executeFunctionIfExists("afterGuiDetached")},t.prototype.onAnyFilterChanged=function(){this.executeFunctionIfExists("onAnyFilterChanged")},t.prototype.onNewRowsLoaded=function(){this.executeFunctionIfExists("onNewRowsLoaded")},t.prototype.destroy=function(){var e=this;this.filters.forEach(function(r){r.setModel(null),e.destroyBean(r)}),this.filters.length=0,this.destroyChildren(),this.hidePopup=void 0,o.prototype.destroy.call(this)},t.prototype.executeFunctionIfExists=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];E.forEachReverse(this.filters,function(i){var a=i[e];typeof a=="function"&&a.apply(i,r)})},t.prototype.createFilter=function(e,r){var n=this,i=this.params,a=i.filterModifiedCallback,s=i.doesRowPassOtherFilter,l,u=Vo(Vo({},this.filterManager.createFilterParams(this.column,this.column.getColDef())),{filterModifiedCallback:a,filterChangedCallback:function(h){n.executeWhenAllFiltersReady(function(){return n.filterChanged(r,h)})},doesRowPassOtherFilter:function(h){return s(h)&&n.doesFilterPass({node:h,data:h.data},l)}}),c=this.userComponentFactory.getFilterDetails(e,u,"agTextColumnFilter");if(!c)return null;var d=c.newAgStackInstance();return d&&d.then(function(h){return l=h}),d},t.prototype.executeWhenAllFiltersReady=function(e){this.filters&&this.filters.length>0?e():this.afterFiltersReadyFuncs.push(e)},t.prototype.updateActiveList=function(e){var r=this.filters[e];E.removeFromArray(this.activeFilterIndices,e),r.isFilterActive()&&this.activeFilterIndices.push(e)},t.prototype.filterChanged=function(e,r){this.updateActiveList(e),this.filterChangedCallback(r);var n=this.filters[e];this.filters.forEach(function(i){i!==n&&typeof i.onAnyFilterChanged=="function"&&i.onAnyFilterChanged()})},t.prototype.onFocusIn=function(e){return this.lastActivatedMenuItem!=null&&!this.lastActivatedMenuItem.getGui().contains(e.target)&&(this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=null),!0},t.prototype.getModelAsString=function(e){var r,n,i,a;if(!this.filters||!(!((r=e==null?void 0:e.filterModels)===null||r===void 0)&&r.length))return"";var s=(n=this.getLastActiveFilterIndex())!==null&&n!==void 0?n:0,l=this.filters[s];return(a=(i=l.getModelAsString)===null||i===void 0?void 0:i.call(l,e.filterModels[s]))!==null&&a!==void 0?a:""},Pc([D("filterManager")],t.prototype,"filterManager",void 0),Pc([D("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Pc([te],t.prototype,"postConstruct",null),t}(xv),CI=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),hu=function(){return hu=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},hu.apply(this,arguments)},Yp=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},xI=function(o){CI(t,o);function t(){var e=o.call(this,'<div class="ag-multi-floating-filter ag-floating-filter-input"></div>')||this;return e.floatingFilters=[],e.compDetailsList=[],e}return t.prototype.init=function(e){this.params=e;var r=this.getCompDetailsList(e).compDetailsList;return this.setParams(r)},t.prototype.setParams=function(e){var r=this,n=[];return e.forEach(function(i){var a=i==null?void 0:i.newAgStackInstance();a!=null&&(r.compDetailsList.push(i),n.push(a))}),$e.all(n).then(function(i){i.forEach(function(a,s){r.floatingFilters.push(a);var l=a.getGui();r.appendChild(l),s>0&&E.setDisplayed(l,!1)})})},t.prototype.onParamsUpdated=function(e){var r=this;this.params=e;var n=this.getCompDetailsList(e),i=n.compDetailsList,a=n.floatingFilterParamsList,s=i.length===this.compDetailsList.length&&i.every(function(l,u){return!r.filterManager.areFilterCompsDifferent(r.compDetailsList[u],l)});s?a.forEach(function(l,u){var c,d=r.floatingFilters[u];(c=d.onParamsUpdated)===null||c===void 0||c.call(d,l)}):(E.clearElement(this.getGui()),this.destroyBeans(this.floatingFilters),this.floatingFilters=[],this.compDetailsList=[],this.setParams(i))},t.prototype.getCompDetailsList=function(e){var r=this,n=[],i=[],a=e.filterParams;return _d.getFilterDefs(a).forEach(function(s,l){var u=hu(hu({},e),{parentFilterInstance:function(d){r.parentMultiFilterInstance(function(h){var f=h.getChildFilterInstance(l);f!=null&&d(f)})}});E.mergeDeep(u.filterParams,s.filterParams);var c=r.getCompDetails(s,u);c&&(n.push(c),i.push(u))}),{compDetailsList:n,floatingFilterParamsList:i}},t.prototype.onParentModelChanged=function(e,r){var n=this;r&&r.afterFloatingFilter||this.parentMultiFilterInstance(function(i){if(e==null)n.floatingFilters.forEach(function(s,l){s.onParentModelChanged(null,r),E.setDisplayed(s.getGui(),l===0)});else{var a=i.getLastActiveFilterIndex();n.floatingFilters.forEach(function(s,l){var u=e.filterModels.length>l?e.filterModels[l]:null;s.onParentModelChanged(u,r);var c=a==null?l===0:l===a;E.setDisplayed(s.getGui(),c)})}})},t.prototype.destroy=function(){this.destroyBeans(this.floatingFilters),this.floatingFilters.length=0,o.prototype.destroy.call(this)},t.prototype.getCompDetails=function(e,r){var n=this,i,a=(i=this.userComponentFactory.getDefaultFloatingFilterType(e,function(){return n.filterManager.getDefaultFloatingFilter(n.params.column)}))!==null&&i!==void 0?i:"agReadOnlyFloatingFilter";return this.userComponentFactory.getFloatingFilterCompDetails(e,r,a)},t.prototype.parentMultiFilterInstance=function(e){this.params.parentFilterInstance(function(r){if(!(r instanceof _d))throw new Error("AG Grid - MultiFloatingFilterComp expects MultiFilter as its parent");e(r)})},Yp([D("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Yp([D("filterManager")],t.prototype,"filterManager",void 0),t}(oe),wI="30.1.0",bI={version:wI,moduleName:Ce.MultiFilterModule,beans:[],userComponents:[{componentName:"agMultiColumnFilter",componentClass:_d},{componentName:"agMultiColumnFloatingFilter",componentClass:xI}],dependantModules:[lt]},_I=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),qp=function(o){_I(t,o);function t(){return o.call(this,'<div class="ag-cell-edit-wrapper"></div>')||this}return t.prototype.init=function(e){this.params=e;var r=e.cellStartedEdit,n=e.values,i=e.cellHeight;if(E.missing(n)){console.warn("AG Grid: richSelectCellEditor requires values for it to work");return}var a=this.buildRichSelectParams();this.richSelect=this.createManagedBean(new um(a)),this.appendChild(this.richSelect),this.addManagedListener(this.richSelect,V.EVENT_FIELD_PICKER_VALUE_SELECTED,this.onEditorPickerValueSelected.bind(this)),this.addManagedListener(this.richSelect.getGui(),"focusout",this.onEditorFocusOut.bind(this)),this.focusAfterAttached=r,E.exists(i)&&this.richSelect.setRowHeight(i)},t.prototype.onEditorPickerValueSelected=function(e){this.params.stopEditing(!e.fromEnterKey)},t.prototype.onEditorFocusOut=function(e){this.richSelect.getGui().contains(e.relatedTarget)||this.params.stopEditing(!0)},t.prototype.buildRichSelectParams=function(){var e=this,r=this.params,n=r.cellRenderer,i=r.value,a=r.values,s=r.colDef,l=r.formatValue,u=r.searchDebounceDelay,c=r.valueListGap,d={value:i,valueList:a,cellRenderer:n,searchDebounceDelay:u,valueFormatter:l,pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"virtual-list"};return c!=null&&(d.pickerGap=c),typeof a[0]=="object"&&s.keyCreator&&(d.searchStringCreator=function(h){return h.map(function(f){var p={value:f,colDef:e.params.colDef,column:e.params.column,node:e.params.node,data:e.params.data,api:e.gridOptionsService.api,columnApi:e.gridOptionsService.columnApi,context:e.gridOptionsService.context};return s.keyCreator(p)})}),d},t.prototype.afterGuiAttached=function(){var e=this,r=this,n=r.focusAfterAttached,i=r.params;setTimeout(function(){if(e.isAlive()){n&&e.richSelect.getFocusableElement().focus(),e.richSelect.showPicker();var a=i.eventKey;a&&(a==null?void 0:a.length)===1&&e.richSelect.searchText(a)}})},t.prototype.getValue=function(){return this.richSelect.getValue()},t.prototype.isPopup=function(){return!1},t}(cm),OI="30.1.0",EI={version:OI,moduleName:Ce.RichSelectModule,beans:[],userComponents:[{componentName:"agRichSelect",componentClass:qp},{componentName:"agRichSelectCellEditor",componentClass:qp}],dependantModules:[lt]},TI=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vt=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},jy=function(o){TI(t,o);function t(e,r,n){var i=o.call(this,0)||this;return i.nodeIdSequence=new xr,i.info={},i.ssrmParams=e,i.parentRowNode=n,i.level=n.level+1,i.groupLevel=e.rowGroupCols?i.level<e.rowGroupCols.length:void 0,i.leafGroup=e.rowGroupCols?i.level===e.rowGroupCols.length-1:!1,i}return t.prototype.postConstruct=function(){var e=this;if(this.usingTreeData=this.gridOptionsService.isTreeData(),this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode),!this.usingTreeData&&this.groupLevel){var r=this.ssrmParams.rowGroupCols[this.level];this.groupField=r.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}var n=1,i=this.parentRowNode.level===-1,a=this.storeUtils.getServerSideInitialRowCount();i&&a!==void 0&&(n=a),this.initialiseRowNodes(n),this.rowNodeBlockLoader.addBlock(this),this.addDestroyFunc(function(){return e.rowNodeBlockLoader.removeBlock(e)}),this.postSortFunc=this.gridOptionsService.getCallback("postSortRows")},t.prototype.destroyRowNodes=function(){this.blockUtils.destroyRowNodes(this.allRowNodes),this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={}},t.prototype.initialiseRowNodes=function(e,r){r===void 0&&(r=!1),this.destroyRowNodes();for(var n=0;n<e;n++){var i=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});r&&(i.failedLoad=!0),this.allRowNodes.push(i),this.nodesAfterFilter.push(i),this.nodesAfterSort.push(i)}},t.prototype.getBlockStateJson=function(){return{id:this.nodeIdPrefix?this.nodeIdPrefix:"",state:this.getState()}},t.prototype.loadFromDatasource=function(){this.storeUtils.loadFromDatasource({startRow:void 0,endRow:void 0,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,successCallback:this.pageLoaded.bind(this,this.getVersion()),success:this.success.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})},t.prototype.getStartRow=function(){return 0},t.prototype.getEndRow=function(){return this.nodesAfterSort.length},t.prototype.createDataNode=function(e,r){var n=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});r!=null?E.insertIntoArray(this.allRowNodes,n,r):this.allRowNodes.push(n);var i=this.prefixId(this.nodeIdSequence.next());return this.blockUtils.setDataIntoRowNode(n,e,i,void 0),this.nodeManager.addRowNode(n),this.blockUtils.checkOpenByDefault(n),this.allNodesMap[n.id]=n,n},t.prototype.prefixId=function(e){return this.nodeIdPrefix?this.nodeIdPrefix+"-"+e:e.toString()},t.prototype.processServerFail=function(){this.initialiseRowNodes(1,!0),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()},t.prototype.processServerResult=function(e){if(this.isAlive()){var r=e.storeInfo||e.groupLevelInfo;r&&Object.assign(this.info,r),e.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(e.pivotResultFields);var n=this.allRowNodes.length>0?this.allNodesMap:void 0;if(this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={},!e.rowData){var i='AG Grid: "params.data" is missing from Server-Side Row Model success() callback. Please use the "data" attribute. If no data is returned, set an empty list.';E.doOnce(function(){return console.warn(i,e)},"FullStore.noData")}this.createOrRecycleNodes(n,e.rowData),n&&this.blockUtils.destroyRowNodes(E.getAllValuesInObject(n)),this.filterAndSortNodes(),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}},t.prototype.createOrRecycleNodes=function(e,r){var n=this;if(r){var i=function(s){if(e){var l=n.gridOptionsService.getCallback("getRowId");if(l){var u=n.parentRowNode.getGroupKeys(),c=n.level,d=l({data:s,parentKeys:u.length>0?u:void 0,level:c}),h=e[d];if(h)return delete e[d],h}}},a=function(s,l){n.allNodesMap[s.id]=s,n.blockUtils.updateDataIntoRowNode(s,l),n.allRowNodes.push(s)};r.forEach(function(s){var l=i(s);l?a(l,s):n.createDataNode(s)})}},t.prototype.flushAsyncTransactions=function(){var e=this;window.setTimeout(function(){return e.transactionManager.flushAsyncTransactions()},0)},t.prototype.filterAndSortNodes=function(){this.filterRowNodes(),this.sortRowNodes()},t.prototype.sortRowNodes=function(){var e=this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerSideSortOnServer(),r=this.sortController.getSortOptions(),n=!r||r.length==0;if(e||n){this.nodesAfterSort=this.nodesAfterFilter;return}if(this.nodesAfterSort=this.rowNodeSorter.doFullSort(this.nodesAfterFilter,r),this.postSortFunc){var i={nodes:this.nodesAfterSort};this.postSortFunc(i)}},t.prototype.filterRowNodes=function(){var e=this,r=!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerSideFilterOnServer(),n=this.groupLevel;if(r||n){this.nodesAfterFilter=this.allRowNodes;return}this.nodesAfterFilter=this.allRowNodes.filter(function(i){return e.filterManager.doesRowPassFilter({rowNode:i})})},t.prototype.clearDisplayIndexes=function(){var e=this;this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.allRowNodes.forEach(function(r){return e.blockUtils.clearDisplayIndex(r)})},t.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},t.prototype.isDisplayIndexInStore=function(e){return this.getRowCount()===0?!1:e>=this.displayIndexStart&&e<this.displayIndexEnd},t.prototype.setDisplayIndexes=function(e,r){var n=this;this.displayIndexStart=e.peek(),this.topPx=r.value;var i={};this.nodesAfterSort.forEach(function(a){n.blockUtils.setDisplayIndex(a,e,r),i[a.id]=!0}),this.allRowNodes.forEach(function(a){i[a.id]||n.blockUtils.clearDisplayIndex(a)}),this.displayIndexEnd=e.peek(),this.heightPx=r.value-this.topPx},t.prototype.forEachStoreDeep=function(e,r){r===void 0&&(r=new xr),e(this,r.next()),this.allRowNodes.forEach(function(n){var i=n.childStore;i&&i.forEachStoreDeep(e,r)})},t.prototype.forEachNodeDeep=function(e,r){r===void 0&&(r=new xr),this.allRowNodes.forEach(function(n){e(n,r.next());var i=n.childStore;i&&i.forEachNodeDeep(e,r)})},t.prototype.forEachNodeDeepAfterFilterAndSort=function(e,r){r===void 0&&(r=new xr),this.nodesAfterSort.forEach(function(n){e(n,r.next());var i=n.childStore;i&&i.forEachNodeDeepAfterFilterAndSort(e,r)})},t.prototype.getRowUsingDisplayIndex=function(e){if(this.isDisplayIndexInStore(e)){var r=this.blockUtils.binarySearchForDisplayIndex(e,this.nodesAfterSort);return r}},t.prototype.getRowBounds=function(e){for(var r=0;r<this.nodesAfterSort.length;r++){var n=this.nodesAfterSort[r],i=this.blockUtils.extractRowBounds(n,e);if(i)return i}return null},t.prototype.isPixelInRange=function(e){return e>=this.topPx&&e<this.topPx+this.heightPx},t.prototype.getRowIndexAtPixel=function(e){var r=this,n=e<=this.topPx;if(n){var i=this.nodesAfterSort[0];return i.rowIndex}var a=e>=this.topPx+this.heightPx;if(a){var s=this.nodesAfterSort[this.nodesAfterSort.length-1],l=s.rowTop+s.rowHeight;if(e>=l&&s.expanded){if(s.childStore&&s.childStore.getRowCount()>0)return s.childStore.getRowIndexAtPixel(e);if(s.detailNode)return s.detailNode.rowIndex}return s.rowIndex}var u=null;this.nodesAfterSort.forEach(function(d){var h=r.blockUtils.getIndexAtPixel(d,e);h!=null&&(u=h)});var c=u==null;return c?this.displayIndexEnd-1:u},t.prototype.getChildStore=function(e){var r=this;return this.storeUtils.getChildStore(e,this,function(n){var i=r.allRowNodes.find(function(a){return a.key==n});return i})},t.prototype.forEachChildStoreShallow=function(e){this.allRowNodes.forEach(function(r){var n=r.childStore;n&&e(n)})},t.prototype.refreshAfterFilter=function(e){var r=this.storeUtils.isServerSideFilterOnServer(),n=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e),i=!this.storeUtils.isServerSideOnlyRefreshFilteredGroups();if(i||r&&n){this.refreshStore(!0),this.sortRowNodes();return}this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow(function(a){return a.refreshAfterFilter(e)})},t.prototype.refreshAfterSort=function(e){var r=this.storeUtils.isServerSideSortOnServer(),n=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e),i=this.storeUtils.isServerSideSortAllLevels();if(i||r&&n){this.refreshStore(!0),this.filterRowNodes();return}this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow(function(a){return a.refreshAfterSort(e)})},t.prototype.applyTransaction=function(e){switch(this.getState()){case Gi.STATE_FAILED:return{status:ir.StoreLoadingFailed};case Gi.STATE_LOADING:return{status:ir.StoreLoading};case Gi.STATE_WAITING_TO_LOAD:return{status:ir.StoreWaitingToLoad}}var r=this.gridOptionsService.getCallback("isApplyServerSideTransaction");if(r){var n={transaction:e,parentNode:this.parentRowNode,storeInfo:this.info,groupLevelInfo:this.info},i=r(n);if(!i)return{status:ir.Cancelled}}var a={status:ir.Applied,remove:[],update:[],add:[]},s=[];return this.executeAdd(e,a),this.executeRemove(e,a,s),this.executeUpdate(e,a,s),this.filterAndSortNodes(),this.updateSelection(s),a},t.prototype.updateSelection=function(e){var r=e.length>0;if(r){this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,clearSelection:!1,source:"rowDataChanged"});var n={type:V.EVENT_SELECTION_CHANGED,source:"rowDataChanged"};this.eventService.dispatchEvent(n)}},t.prototype.executeAdd=function(e,r){var n=this,i=e.add,a=e.addIndex;if(!E.missingOrEmpty(i)){var s=typeof a=="number"&&a>=0;s?i.reverse().forEach(function(l){var u=n.createDataNode(l,a);r.add.push(u)}):i.forEach(function(l){var u=n.createDataNode(l);r.add.push(u)})}},t.prototype.executeRemove=function(e,r,n){var i=this,a=e.remove;if(a!=null){var s={};a.forEach(function(l){var u=i.lookupRowNode(l);u&&(u.isSelected()&&n.push(u),u.clearRowTopAndRowIndex(),s[u.id]=!0,delete i.allNodesMap[u.id],r.remove.push(u),i.nodeManager.removeNode(u))}),this.allRowNodes=this.allRowNodes.filter(function(l){return!s[l.id]})}},t.prototype.executeUpdate=function(e,r,n){var i=this,a=e.update;a!=null&&a.forEach(function(s){var l=i.lookupRowNode(s);l&&(i.blockUtils.updateDataIntoRowNode(l,s),!l.selectable&&l.isSelected()&&n.push(l),r.update.push(l))})},t.prototype.lookupRowNode=function(e){var r=this.gridOptionsService.getCallback("getRowId"),n;if(r!=null){var i=this.level,a=this.parentRowNode.getGroupKeys(),s=r({data:e,parentKeys:a.length>0?a:void 0,level:i});if(n=this.allNodesMap[s],!n)return console.error("AG Grid: could not find row id="+s+", data item was not found for this id"),null}else if(n=this.allRowNodes.find(function(l){return l.data===e}),!n)return console.error("AG Grid: could not find data item as object was not found",e),null;return n},t.prototype.addStoreStates=function(e){e.push({suppressInfiniteScroll:!0,route:this.parentRowNode.getGroupKeys(),rowCount:this.allRowNodes.length,info:this.info}),this.forEachChildStoreShallow(function(r){return r.addStoreStates(e)})},t.prototype.refreshStore=function(e){if(e){var r=this.nodesAfterSort?this.nodesAfterSort.length:1;this.initialiseRowNodes(r)}this.scheduleLoad(),this.fireStoreUpdatedEvent()},t.prototype.retryLoads=function(){this.getState()===Gi.STATE_FAILED&&(this.initialiseRowNodes(1),this.scheduleLoad()),this.forEachChildStoreShallow(function(e){return e.retryLoads()})},t.prototype.scheduleLoad=function(){this.setStateWaitingToLoad(),this.rowNodeBlockLoader.checkBlockToLoad()},t.prototype.fireStoreUpdatedEvent=function(){var e={type:V.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)},t.prototype.getRowCount=function(){return this.nodesAfterSort.length},t.prototype.getTopLevelRowDisplayedIndex=function(e){var r=this.nodesAfterSort[e];return r.rowIndex},t.prototype.isLastRowIndexKnown=function(){return this.getState()==Gi.STATE_LOADED},t.prototype.getRowNodesInRange=function(e,r){var n=[],i=!1;E.missing(e)&&(i=!0),this.nodesAfterSort.forEach(function(s){var l=s===e||s===r;(i||l)&&n.push(s),l&&(i=!i)});var a=i;return a?[]:n},t.prototype.getStoreBounds=function(){return{topPx:this.topPx,heightPx:this.heightPx}},Vt([D("ssrmStoreUtils")],t.prototype,"storeUtils",void 0),Vt([D("ssrmBlockUtils")],t.prototype,"blockUtils",void 0),Vt([D("columnModel")],t.prototype,"columnModel",void 0),Vt([D("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),Vt([D("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0),Vt([D("sortController")],t.prototype,"sortController",void 0),Vt([D("selectionService")],t.prototype,"selectionService",void 0),Vt([D("ssrmNodeManager")],t.prototype,"nodeManager",void 0),Vt([D("filterManager")],t.prototype,"filterManager",void 0),Vt([D("ssrmTransactionManager")],t.prototype,"transactionManager",void 0),Vt([D("rowModel")],t.prototype,"serverSideRowModel",void 0),Vt([te],t.prototype,"postConstruct",null),Vt([br],t.prototype,"destroyRowNodes",null),t}(Gi),PI=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),vl=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},AI=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},DI=function(o){PI(t,o);function t(e,r,n){var i=o.call(this)||this;return i.loadingNodes=new Set,i.checkForLoadQueued=!1,i.loaderTimeout=void 0,i.nextBlockToLoad=void 0,i.parentNode=r,i.cache=e,i.storeParams=n,i}return t.prototype.init=function(){var e=this;this.addManagedListener(this.rowNodeBlockLoader,dm.BLOCK_LOADED_EVENT,function(){return e.queueLoadAction()})},t.prototype.isRowLoading=function(e){return this.loadingNodes.has(e)},t.prototype.getBlockToLoad=function(){for(var e=this,r,n=this.api.getFirstDisplayedRow(),i=this.api.getLastDisplayedRow(),a=n;a<=i;a++){var s=this.cache.getNodeCachedByDisplayIndex(a);if(s){var l=this.cache.getNodes().getBy("node",s);if(l&&!this.isRowLoading(l.index)&&(s.__needsRefreshWhenVisible||s.stub&&!s.failedLoad))return this.getBlockStartIndexForIndex(l.index)}}var u=this.cache.getNodesToRefresh(),c=null,d=Number.MAX_SAFE_INTEGER;u.forEach(function(f){if(f.rowIndex==null){c=f;return}if(!e.isRowLoading(f.rowIndex)){var p=Math.abs(n-f.rowIndex),v=Math.abs(f.rowIndex-i);p<d&&(c=f,d=p),v<d&&(c=f,d=v)}});var h=(r=this.cache.getNodes().getBy("node",c))===null||r===void 0?void 0:r.index;return h==null?void 0:this.getBlockStartIndexForIndex(h)},t.prototype.reset=function(){this.loadingNodes.clear(),clearTimeout(this.loaderTimeout),this.loaderTimeout=void 0},t.prototype.executeLoad=function(e,r){var n=this,i,a=this.cache.getSsrmParams(),s={startRow:e,endRow:r,rowGroupCols:a.rowGroupCols,valueCols:a.valueCols,pivotCols:a.pivotCols,pivotMode:a.pivotMode,groupKeys:this.parentNode.getGroupKeys(),filterModel:a.filterModel,sortModel:a.sortModel},l=function(){for(var f=0;f<r-e;f++)n.loadingNodes.delete(e+f)},u=function(){for(var f=0;f<r-e;f++)n.loadingNodes.add(e+f)},c=function(f){n.rowNodeBlockLoader.loadComplete(),n.cache.onLoadSuccess(e,r-e,f),l(),n.queueLoadAction()},d=function(){n.rowNodeBlockLoader.loadComplete(),n.cache.onLoadFailed(e,r-e),l(),n.queueLoadAction()},h={request:s,successCallback:function(f,p){return c({rowData:f,rowCount:p})},success:c,failCallback:d,fail:d,parentNode:this.parentNode,api:this.api,columnApi:this.columnApi,context:this.gridOptionsService.context};u(),(i=this.cache.getSsrmParams().datasource)===null||i===void 0||i.getRows(h)},t.prototype.getNextBlockToLoad=function(){var e=this.getBlockToLoad();return e!=null?[String(e),e+this.getBlockSize()]:null},t.prototype.queueLoadCheck=function(){var e=this;this.checkForLoadQueued||(this.checkForLoadQueued=!0,window.queueMicrotask(function(){e.checkForLoadQueued=!1,e.queueLoadAction()}))},t.prototype.queueLoadAction=function(){var e=this,r,n=this.getNextBlockToLoad();if(!n){window.clearTimeout(this.loaderTimeout),this.loaderTimeout=void 0,this.nextBlockToLoad=void 0;return}if(!this.nextBlockToLoad||this.nextBlockToLoad[0]!==n[0]&&this.nextBlockToLoad[1]!==n[1]){this.nextBlockToLoad=n,window.clearTimeout(this.loaderTimeout);var i=AI(this.nextBlockToLoad,2),a=i[0],s=i[1],l=Number(a);this.loaderTimeout=window.setTimeout(function(){e.cache.isAlive()&&(e.loaderTimeout=void 0,e.attemptLoad(l,s),e.nextBlockToLoad=void 0)},(r=this.gridOptionsService.getNum("blockLoadDebounceMillis"))!==null&&r!==void 0?r:0)}},t.prototype.attemptLoad=function(e,r){var n=this.rowNodeBlockLoader.getAvailableLoadingCount();n!=null&&n===0||(this.rowNodeBlockLoader.registerLoads(1),this.executeLoad(e,r),this.queueLoadAction())},t.prototype.getBlockSize=function(){return this.storeParams.cacheBlockSize||t.DEFAULT_BLOCK_SIZE},t.prototype.getBlockStartIndexForIndex=function(e){var r=this.getBlockSize();return e-e%r},t.prototype.getBlockBoundsForIndex=function(e){var r=this.getBlockStartIndexForIndex(e),n=this.getBlockSize();return[r,r+n]},t.DEFAULT_BLOCK_SIZE=100,vl([D("gridApi")],t.prototype,"api",void 0),vl([D("columnApi")],t.prototype,"columnApi",void 0),vl([D("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),vl([te],t.prototype,"init",null),t}(pe),MI=function(){function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length<1)throw new Error("AG Grid: At least one index must be provided.");this.indexes=t,this.maps=new Map(this.indexes.map(function(r){return[r,new Map]}))}return o.prototype.getBy=function(t,e){var r=this.maps.get(t);if(!r)throw new Error("AG Grid: "+String(t)+" not found");return r.get(e)},o.prototype.set=function(t){var e=this;this.indexes.forEach(function(r){var n=e.maps.get(r);if(!n)throw new Error("AG Grid: "+String(r)+" not found");n.set(t[r],t)})},o.prototype.delete=function(t){var e=this;this.indexes.forEach(function(r){var n=e.maps.get(r);if(!n)throw new Error("AG Grid: "+String(r)+" not found");n.delete(t[r])})},o.prototype.clear=function(){this.maps.forEach(function(t){return t.clear()})},o.prototype.getIterator=function(t){var e=this.maps.get(t);if(!e)throw new Error("AG Grid: "+String(t)+" not found");return e.values()},o.prototype.forEach=function(t){for(var e=this.getIterator(this.indexes[0]),r;(r=e.next())&&!r.done;)t(r.value)},o.prototype.find=function(t){for(var e=this.getIterator(this.indexes[0]),r;(r=e.next())&&!r.done;)if(t(r.value))return r.value},o.prototype.filter=function(t){for(var e=this.getIterator(this.indexes[0]),r,n=[];(r=e.next())&&!r.done;)t(r.value)&&n.push(r.value);return n},o}(),RI=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),li=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ui=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Ac=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Dc=function(o){RI(t,o);function t(e,r,n){var i=o.call(this)||this;return i.live=!0,i.removedNodeCache=new Map,i.store=e,i.numberOfRows=r,i.isLastRowKnown=!1,i.storeParams=n,i}return t.prototype.init=function(){this.nodeMap=new MI("index","id","node"),this.nodeDisplayIndexMap=new Map,this.nodesToRefresh=new Set,this.defaultNodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),this.rowLoader=this.createManagedBean(new DI(this,this.store.getParentNode(),this.storeParams)),this.getRowIdFunc=this.gridOptionsService.getCallback("getRowId"),this.isMasterDetail=this.gridOptionsService.isMasterDetail()},t.prototype.destroyRowNodes=function(){var e=this;this.numberOfRows=0,this.nodeMap.forEach(function(r){return e.blockUtils.destroyRowNode(r.node)}),this.nodeMap.clear(),this.nodeDisplayIndexMap.clear(),this.nodesToRefresh.clear(),this.live=!1},t.prototype.getRowByDisplayIndex=function(e){var r,n,i,a;if(this.store.isDisplayIndexInStore(e)){var s=this.nodeDisplayIndexMap.get(e);if(s)return(s.stub||s.__needsRefreshWhenVisible)&&this.rowLoader.queueLoadCheck(),s;if(e===this.store.getDisplayIndexStart())return this.createStubNode(0,e);var l=this.nodeDisplayIndexMap.get(e-1);if(l){if(this.isMasterDetail&&l.master&&l.expanded)return l.detailNode;if(l.expanded&&(!((r=l.childStore)===null||r===void 0)&&r.isDisplayIndexInStore(e)))return(n=l.childStore)===null||n===void 0?void 0:n.getRowUsingDisplayIndex(e);var u=this.nodeMap.getBy("node",l);return this.createStubNode(u.index+1,e)}var c=this.getSurroundingNodesByDisplayIndex(e);if(c==null){var d=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-e);return this.createStubNode(d,e)}var h=c.previousNode,f=c.nextNode;if(h&&h.node.expanded&&(!((i=h.node.childStore)===null||i===void 0)&&i.isDisplayIndexInStore(e)))return(a=h.node.childStore)===null||a===void 0?void 0:a.getRowUsingDisplayIndex(e);if(f){var p=f.node.rowIndex-e,v=f.index-p;return this.createStubNode(v,e)}var g=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-e);return this.createStubNode(g,e)}},t.prototype.createStubNode=function(e,r){var n=this,i=this.store.getRowBounds(r),a=this.createRowAtIndex(e,null,function(s){s.setRowIndex(r),s.setRowTop(i.rowTop),n.nodeDisplayIndexMap.set(r,s)});return this.rowLoader.queueLoadCheck(),a},t.prototype.getRowByStoreIndex=function(e){var r;return(r=this.nodeMap.getBy("index",e))===null||r===void 0?void 0:r.node},t.prototype.skipDisplayIndexes=function(e,r,n){if(e!==0){var i=this.gridOptionsService.getRowHeightAsNumber();r.skip(e),n.value+=e*i}},t.prototype.setDisplayIndexes=function(e,r){this.nodeDisplayIndexMap.clear();var n={};this.nodeMap.forEach(function(d){n[d.index]=d.node});var i=-1;for(var a in n){var s=n[a],l=Number(a),u=l-1-i;this.skipDisplayIndexes(u,e,r),this.blockUtils.setDisplayIndex(s,e,r),this.nodeDisplayIndexMap.set(s.rowIndex,s),i=l}var c=this.numberOfRows-1-i;this.skipDisplayIndexes(c,e,r),this.purgeExcessRows()},t.prototype.getRowCount=function(){return this.numberOfRows},t.prototype.setRowCount=function(e,r){if(e<0)throw new Error("AG Grid: setRowCount can only accept a positive row count.");this.numberOfRows=e,r!=null&&(this.isLastRowKnown=r,r===!1&&(this.numberOfRows+=1)),this.fireStoreUpdatedEvent()},t.prototype.getNodes=function(){return this.nodeMap},t.prototype.getNodeCachedByDisplayIndex=function(e){var r;return(r=this.nodeDisplayIndexMap.get(e))!==null&&r!==void 0?r:null},t.prototype.getNodesToRefresh=function(){return this.nodesToRefresh},t.prototype.getSurroundingNodesByDisplayIndex=function(e){var r,n;return this.nodeMap.forEach(function(i){if(e>i.node.rowIndex){(n==null||n.node.rowIndex<i.node.rowIndex)&&(n=i);return}if(r==null||r.node.rowIndex>i.node.rowIndex){r=i;return}}),!n&&!r?null:{previousNode:n,nextNode:r}},t.prototype.getDisplayIndexFromStoreIndex=function(e){var r,n,i=this.nodeMap.getBy("index",e);if(i)return i.node.rowIndex;var a,s;if(this.nodeMap.forEach(function(c){if(e>c.index){(s==null||s.index<c.index)&&(s=c);return}if(a==null||a.index>c.index){a=c;return}}),!a)return this.store.getDisplayIndexEnd()-(this.numberOfRows-e);if(!s)return this.store.getDisplayIndexStart()+e;var l=e-s.index,u=(n=(r=s.node.childStore)===null||r===void 0?void 0:r.getDisplayIndexEnd())!==null&&n!==void 0?n:s.node.rowIndex;return u+l},t.prototype.createRowAtIndex=function(e,r,n){var i,a,s=this.nodeMap.getBy("index",e);if(s){var l=s.node;if(this.nodesToRefresh.delete(l),l.__needsRefreshWhenVisible=!1,this.doesNodeMatch(r,l))return this.blockUtils.updateDataIntoRowNode(l,r),l;if(this.getRowIdFunc==null&&l.group&&l.expanded)return l;this.destroyRowAtIndex(e)}if(r&&this.getRowIdFunc!=null){var u=this.getRowId(r),c=u&&((i=this.removedNodeCache)===null||i===void 0?void 0:i.get(u));if(c)return(a=this.removedNodeCache)===null||a===void 0||a.delete(u),this.blockUtils.updateDataIntoRowNode(c,r),this.nodeMap.set({id:c.id,node:c,index:e}),c;var d=this.nodeMap.getBy("id",u);if(d){this.nodeMap.delete(d);var l=d.node,h=d.index;return this.blockUtils.updateDataIntoRowNode(l,r),this.nodeMap.set({id:l.id,node:l,index:e}),this.nodesToRefresh.delete(l),this.rowLoader.getBlockStartIndexForIndex(h)===this.rowLoader.getBlockStartIndexForIndex(e)||this.markBlockForVerify(h),l}}var f=this.blockUtils.createRowNode(this.store.getRowDetails());if(r!=null){var p=this.getPrefixedId(this.store.getIdSequence().next());this.blockUtils.setDataIntoRowNode(f,r,p,void 0),this.blockUtils.checkOpenByDefault(f),this.nodeManager.addRowNode(f)}return this.nodeMap.set({id:f.id,node:f,index:e}),n&&n(f),f},t.prototype.getBlockStates=function(){var e=this,r={},n={};this.nodeMap.forEach(function(l){var u,c=l.node,d=l.index,h=e.rowLoader.getBlockStartIndexForIndex(d);!c.stub&&!c.failedLoad&&(r[h]=((u=r[h])!==null&&u!==void 0?u:0)+1);var f="loaded";c.failedLoad?f="failed":e.rowLoader.isRowLoading(h)?f="loading":(e.nodesToRefresh.has(c)||c.stub)&&(f="needsLoading"),n[h]||(n[h]=new Set),n[h].add(f)});var i={loading:4,failed:3,needsLoading:2,loaded:1},a=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),s={};return Object.entries(n).forEach(function(l){var u,c=ui(l,2),d=c[0],h=c[1],f=Ac([],ui(h)).sort(function(m,y){var S,C;return((S=i[m])!==null&&S!==void 0?S:0)-((C=i[y])!==null&&C!==void 0?C:0)}),p=f[0],v=Number(d)/e.rowLoader.getBlockSize(),g=a?a+"-"+v:String(v);s[g]={blockNumber:v,startRow:Number(d),endRow:Number(d)+e.rowLoader.getBlockSize(),pageStatus:p,loadedRowCount:(u=r[d])!==null&&u!==void 0?u:0}}),s},t.prototype.destroyRowAtIndex=function(e){var r=this.nodeMap.getBy("index",e);r&&(this.nodeMap.delete(r),this.nodeDisplayIndexMap.delete(r.node.rowIndex),this.nodesToRefresh.delete(r.node),r.node.group&&this.nodesToRefresh.size>0?this.removedNodeCache.set(r.node.id,r.node):this.blockUtils.destroyRowNode(r.node))},t.prototype.getSsrmParams=function(){return this.store.getSsrmParams()},t.prototype.getPrefixedId=function(e){return this.defaultNodeIdPrefix?this.defaultNodeIdPrefix+"-"+e:e.toString()},t.prototype.markBlockForVerify=function(e){var r=ui(this.rowLoader.getBlockBoundsForIndex(e),2),n=r[0],i=r[1],a=this.nodeMap.filter(function(s){return s.index>=n&&s.index<i});a.forEach(function(s){var l=s.node;l.__needsRefreshWhenVisible=!0})},t.prototype.doesNodeMatch=function(e,r){if(r.stub)return!1;if(this.getRowIdFunc!=null){var n=this.getRowId(e);return r.id===n}return r.data===e},t.prototype.purgeStubsOutsideOfViewport=function(){var e=this,r=this.api.getFirstDisplayedRow(),n=this.api.getLastDisplayedRow(),i=this.rowLoader.getBlockStartIndexForIndex(r),a=ui(this.rowLoader.getBlockBoundsForIndex(n),2);a[0];var s=a[1];this.nodeMap.forEach(function(l){e.rowLoader.isRowLoading(l.index)||l.node.failedLoad||l.node.stub&&(l.index<i||l.index>s)&&e.destroyRowAtIndex(l.index)})},t.prototype.getBlocksDistanceFromRow=function(e,r){var n=this,i={};return e.forEach(function(a){var s=a.node,l=a.index,u=ui(n.rowLoader.getBlockBoundsForIndex(l),2),c=u[0],d=u[1];if(!(c in i)){var h=Math.abs(s.rowIndex-r),f,p=n.nodeMap.getBy("index",[d-1]);p&&(f=Math.abs(p.node.rowIndex-r));var v=f==null||h<f?h:f;i[c]=v}}),Object.entries(i)},t.prototype.purgeExcessRows=function(){var e=this,r;if(this.purgeStubsOutsideOfViewport(),!(this.store.getDisplayIndexEnd()==null||this.storeParams.maxBlocksInCache==null)){var n=this.api.getFirstDisplayedRow(),i=this.api.getLastDisplayedRow(),a=new Set,s=new Set;this.nodeMap.forEach(function(w){var x=w.index,b=w.node,_=e.rowLoader.getBlockStartIndexForIndex(x);a.add(_);var T=b.rowIndex>=n&&b.rowIndex<=i;T&&s.add(_)});var l=Math.max(s.size,(r=this.storeParams.maxBlocksInCache)!==null&&r!==void 0?r:0),u=a.size,c=u-l;if(!(c<=0)){var d=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;s.forEach(function(w){d>w&&(d=w),h<w&&(h=w)});var f=this.nodeMap.filter(function(w){var x=w.node,b=w.index,_=e.rowLoader.getBlockStartIndexForIndex(b),T=_>=d&&_<=h;return!T&&!e.isNodeCached(x)});if(f.length!==0){var p=n+(i-n)/2,v=this.getBlocksDistanceFromRow(f,p),g=this.rowLoader.getBlockSize();v.sort(function(w,x){return Math.sign(x[1]-w[1])});for(var m=0;m<Math.min(c,v.length);m++)for(var y=Number(v[m][0]),S=y;S<y+g;S++){var C=this.nodeMap.getBy("index",S);!C||this.isNodeCached(C.node)||this.destroyRowAtIndex(S)}}}}},t.prototype.isNodeFocused=function(e){var r=this.focusService.getFocusCellToUseAfterRefresh();if(!r||r.rowPinned!=null)return!1;var n=r.rowIndex===e.rowIndex;return n},t.prototype.isNodeCached=function(e){return e.isExpandable()&&e.expanded||this.isNodeFocused(e)},t.prototype.extractDuplicateIds=function(e){var r=this;if(this.getRowIdFunc!=null)return[];var n=new Set,i=new Set;return e.forEach(function(a){var s=r.getRowId(a);if(n.has(s)){i.add(s);return}n.add(s)}),Ac([],ui(i))},t.prototype.onLoadSuccess=function(e,r,n){var i=this,a;if(this.live){var s=(a=n.groupLevelInfo)!==null&&a!==void 0?a:n.storeInfo;if(this.store.setStoreInfo(s),this.getRowIdFunc!=null){var l=this.extractDuplicateIds(n.rowData);if(l.length>0){var u=l.join(", ");console.warn("AG Grid: Unable to display rows as duplicate row ids ("+u+") were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids."),this.onLoadFailed(e,r);return}}n.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(n.pivotResultFields);var c=this.nodesToRefresh.size>0;n.rowData.forEach(function(p,v){var g,m=e+v,y=i.nodeMap.getBy("index",m);if(!((g=y==null?void 0:y.node)===null||g===void 0)&&g.stub){i.createRowAtIndex(m,p);return}if(y&&i.doesNodeMatch(p,y.node)){i.blockUtils.updateDataIntoRowNode(y.node,p),i.nodesToRefresh.delete(y.node),y.node.__needsRefreshWhenVisible=!1;return}i.createRowAtIndex(m,p)});var d=this.nodesToRefresh.size===0;if(c&&d&&this.fireRefreshFinishedEvent(),n.rowCount!=null&&n.rowCount!==-1)this.numberOfRows=n.rowCount,this.isLastRowKnown=!0;else if(r>n.rowData.length)this.numberOfRows=e+n.rowData.length,this.isLastRowKnown=!0;else if(!this.isLastRowKnown){var h=e+n.rowData.length+1;h>this.numberOfRows&&(this.numberOfRows=h)}if(this.isLastRowKnown){var f=this.nodeMap.filter(function(p){return p.index>=i.numberOfRows});f.forEach(function(p){return i.destroyRowAtIndex(p.index)})}this.fireStoreUpdatedEvent()}},t.prototype.fireRefreshFinishedEvent=function(){var e=this,r=this.nodesToRefresh.size===0;r&&(this.removedNodeCache.forEach(function(n){e.blockUtils.destroyRowNode(n)}),this.removedNodeCache=new Map,this.store.fireRefreshFinishedEvent())},t.prototype.isLastRowIndexKnown=function(){return this.isLastRowKnown},t.prototype.onLoadFailed=function(e,r){var n;if(this.live){for(var i=this.nodesToRefresh.size>0,a=e;a<e+r&&a<this.getRowCount();a++){var s=((n=this.nodeMap.getBy("index",a))!==null&&n!==void 0?n:{}).node;s&&this.nodesToRefresh.delete(s),(!s||!s.stub)&&(s&&!s.stub&&this.destroyRowAtIndex(a),s=this.createRowAtIndex(a)),s.__needsRefreshWhenVisible=!1,s.failedLoad=!0}var l=this.nodesToRefresh.size===0;i&&l&&this.fireRefreshFinishedEvent(),this.fireStoreUpdatedEvent()}},t.prototype.markNodesForRefresh=function(){var e=this;this.nodeMap.forEach(function(r){r.node.stub&&!r.node.failedLoad||e.nodesToRefresh.add(r.node)}),this.rowLoader.queueLoadCheck(),this.isLastRowKnown&&this.numberOfRows===0&&(this.numberOfRows=1,this.isLastRowKnown=!1,this.fireStoreUpdatedEvent())},t.prototype.isNodeInCache=function(e){return!!this.nodeMap.getBy("id",e)},t.prototype.fireStoreUpdatedEvent=function(){this.live&&this.store.fireStoreUpdatedEvent()},t.prototype.getRowId=function(e){if(this.getRowIdFunc==null)return null;var r=this.store.getRowDetails().level,n=this.store.getParentNode().getGroupKeys(),i=this.getRowIdFunc({data:e,parentKeys:n.length>0?n:void 0,level:r});return String(i)},t.prototype.updateRowNodes=function(e){var r=this;if(this.getRowIdFunc==null)throw new Error("AG Grid: Insert transactions can only be applied when row ids are supplied.");var n=[];return e.forEach(function(i){var a=r.getRowId(i),s=r.nodeMap.getBy("id",a);s&&(r.blockUtils.updateDataIntoRowNode(s.node,i),n.push(s.node))}),n},t.prototype.insertRowNodes=function(e,r){var n=this,i=r==null&&this.isLastRowKnown?this.store.getRowCount():r;if(i==null||this.store.getRowCount()<i)return[];if(this.getRowIdFunc==null)throw new Error("AG Grid: Insert transactions can only be applied when row ids are supplied.");var a={};e.forEach(function(c){var d=n.getRowId(c);d&&n.isNodeInCache(d)||(a[d]=c)});var s=Object.values(a),l=s.length;if(l===0)return[];var u=this.nodeMap.filter(function(c){return c.index>=i});return u.forEach(function(c){return n.nodeMap.delete(c)}),u.forEach(function(c){n.nodeMap.set({node:c.node,index:c.index+l,id:c.id})}),this.numberOfRows+=l,s.map(function(c,d){return n.createRowAtIndex(i+d,c)})},t.prototype.getOrderedNodeMap=function(){var e={};return this.nodeMap.forEach(function(r){return e[r.index]=r}),e},t.prototype.clearDisplayIndexes=function(){this.nodeDisplayIndexMap.clear()},t.prototype.removeRowNodes=function(e){if(this.getRowIdFunc==null)throw new Error("AG Grid: Insert transactions can only be applied when row ids are supplied.");var r=[],n=[],i=0,a=Ac([],ui(e)),s=this.getOrderedNodeMap(),l=-1,u=function(h){l+=1;var f=s[h],p=a.findIndex(function(g){return g===f.id});if(p!==-1)return a.splice(p,1),c.destroyRowAtIndex(Number(h)),r.push(f.node),i+=1,"continue";if(i===0)return"continue";var v=Number(h);l!==v&&n.push(f.node),c.nodeMap.delete(s[h]),c.nodeMap.set({id:f.id,node:f.node,index:v-i})},c=this;for(var d in s)u(d);return this.numberOfRows-=this.isLastRowIndexKnown()?e.length:i,a.length>0&&n.length>0&&(n.forEach(function(h){return h.__needsRefreshWhenVisible=!0}),this.rowLoader.queueLoadCheck()),r},li([D("gridApi")],t.prototype,"api",void 0),li([D("ssrmBlockUtils")],t.prototype,"blockUtils",void 0),li([D("focusService")],t.prototype,"focusService",void 0),li([D("ssrmNodeManager")],t.prototype,"nodeManager",void 0),li([D("rowModel")],t.prototype,"serverSideRowModel",void 0),li([te],t.prototype,"init",null),li([br],t.prototype,"destroyRowNodes",null),t}(pe),II=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Co=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},LI=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},FI=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Od=function(o){II(t,o);function t(e,r,n){var i=o.call(this)||this;return i.idSequence=new xr,i.ssrmParams=e,i.parentRowNode=n,i.storeParams=r,i.level=n.level+1,i.group=e.rowGroupCols?i.level<e.rowGroupCols.length:!1,i.leafGroup=e.rowGroupCols?i.level===e.rowGroupCols.length-1:!1,i.info={},i}return t.prototype.init=function(){var e=1;this.level===0&&(e=this.storeUtils.getServerSideInitialRowCount()),this.cache=this.createManagedBean(new Dc(this,e,this.storeParams));var r=this.gridOptionsService.isTreeData();if(!r&&this.group){var n=this.ssrmParams.rowGroupCols[this.level];this.groupField=n.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}},t.prototype.destroyRowNodes=function(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.destroyBean(this.cache)},t.prototype.applyTransaction=function(e){var r=this,n,i,a,s=this.gridOptionsService.getCallback("getRowId");if(!s)return console.warn("AG Grid: getRowId callback must be implemented for transactions to work. Transaction was ignored."),{status:ir.Cancelled};var l=this.gridOptionsService.getCallback("isApplyServerSideTransaction");if(l){var u={transaction:e,parentNode:this.parentRowNode,storeInfo:this.info,groupLevelInfo:this.info},c=l(u);if(!c)return{status:ir.Cancelled}}var d=void 0;!((n=e.update)===null||n===void 0)&&n.length&&(d=this.cache.updateRowNodes(e.update));var h=void 0;if(!((i=e.add)===null||i===void 0)&&i.length){var f=e.addIndex;f!=null&&f<0&&(f=void 0),h=this.cache.insertRowNodes(e.add,f)}var p=void 0;if(!((a=e.remove)===null||a===void 0)&&a.length){var v=e.remove.map(function(m){return s({level:r.level,parentKeys:r.parentRowNode.getGroupKeys(),data:m})}),g=FI([],LI(new Set(v)));p=this.cache.removeRowNodes(g)}return this.updateSelectionAfterTransaction(d,p),{status:ir.Applied,update:d,add:h,remove:p}},t.prototype.updateSelectionAfterTransaction=function(e,r){var n=[];e==null||e.forEach(function(i){i.isSelected()&&!i.selectable&&n.push(i)}),r==null||r.forEach(function(i){i.isSelected()&&n.push(i)}),n.length&&this.selectionService.setNodesSelected({newValue:!1,clearSelection:!1,nodes:n,source:"rowDataChanged"})},t.prototype.clearDisplayIndexes=function(){var e=this;this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.cache.getNodes().forEach(function(r){return e.blockUtils.clearDisplayIndex(r.node)}),this.parentRowNode.sibling&&this.blockUtils.clearDisplayIndex(this.parentRowNode.sibling),this.cache.clearDisplayIndexes()},t.prototype.getDisplayIndexStart=function(){return this.displayIndexStart},t.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},t.prototype.getRowCount=function(){return this.parentRowNode.sibling?this.cache.getRowCount()+1:this.cache.getRowCount()},t.prototype.setRowCount=function(e,r){this.cache.setRowCount(e,r)},t.prototype.isDisplayIndexInStore=function(e){return this.cache.getRowCount()===0?!1:this.displayIndexStart<=e&&e<this.getDisplayIndexEnd()},t.prototype.setDisplayIndexes=function(e,r){this.displayIndexStart=e.peek(),this.topPx=r.value,this.cache.setDisplayIndexes(e,r),this.parentRowNode.sibling&&this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,e,r),this.displayIndexEnd=e.peek(),this.heightPx=r.value-this.topPx},t.prototype.forEachStoreDeep=function(e,r){r===void 0&&(r=new xr),e(this,r.next()),this.cache.getNodes().forEach(function(n){var i=n.node.childStore;i&&i.forEachStoreDeep(e,r)})},t.prototype.forEachNodeDeep=function(e,r){r===void 0&&(r=new xr),this.cache.getNodes().forEach(function(n){e(n.node,r.next());var i=n.node.childStore;i&&i.forEachNodeDeep(e,r)})},t.prototype.forEachNodeDeepAfterFilterAndSort=function(e,r){r===void 0&&(r=new xr);var n=this.cache.getOrderedNodeMap();for(var i in n){var a=n[i];e(a.node,r.next());var s=a.node.childStore;s&&s.forEachNodeDeepAfterFilterAndSort(e,r)}},t.prototype.retryLoads=function(){this.cache.getNodes().forEach(function(e){var r=e.node;r.failedLoad&&(r.failedLoad=!1,r.__needsRefreshWhenVisible=!0,r.stub=!0)}),this.forEachChildStoreShallow(function(e){return e.retryLoads()}),this.fireStoreUpdatedEvent()},t.prototype.getRowUsingDisplayIndex=function(e){return this.parentRowNode.sibling&&e===this.parentRowNode.sibling.rowIndex?this.parentRowNode.sibling:this.cache.getRowByDisplayIndex(e)},t.prototype.getRowBounds=function(e){var r;if(!this.isDisplayIndexInStore(e))return null;var n=this.cache.getNodeCachedByDisplayIndex(e);if(n){var i=this.blockUtils.extractRowBounds(n,e);if(i)return i}var a=(r=this.cache.getSurroundingNodesByDisplayIndex(e))!==null&&r!==void 0?r:{},s=a.previousNode,l=a.nextNode;if(s){var i=this.blockUtils.extractRowBounds(s.node,e);if(i!=null)return i}var u=this.gridOptionsService.getRowHeightAsNumber();if(l){var c=(l.node.rowIndex-e)*u;return{rowTop:l.node.rowTop-c,rowHeight:u}}var d=this.topPx+this.heightPx,h=(this.getDisplayIndexEnd()-e)*u;return{rowTop:d-h,rowHeight:u}},t.prototype.isPixelInRange=function(e){return e>=this.topPx&&e<this.topPx+this.heightPx},t.prototype.getRowIndexAtPixel=function(e){if(e<this.topPx)return this.getDisplayIndexStart();if(e>=this.topPx+this.heightPx)return this.getDisplayIndexEnd()-1;var r=Number.MAX_SAFE_INTEGER,n=null,i=Number.MAX_SAFE_INTEGER,a=null;if(this.cache.getNodes().forEach(function(f){var p=f.node,v=Math.abs(e-p.rowTop);if(p.rowTop<e){v<r&&(r=v,n=p);return}v<i&&(i=v,a=p)}),n=n,a=a,n){var s=this.blockUtils.getIndexAtPixel(n,e);if(s!=null)return s}var l=this.gridOptionsService.getRowHeightAsNumber();if(a){var u=a.rowTop,c=Math.ceil((u-e)/l);return a.rowIndex-c}var d=this.topPx+this.heightPx,h=Math.floor((d-e)/l);return this.getDisplayIndexEnd()-h},t.prototype.getChildStore=function(e){var r=this;return this.storeUtils.getChildStore(e,this,function(n){var i=r.cache.getNodes().find(function(a){return a.node.key==n});return i?i.node:null})},t.prototype.forEachChildStoreShallow=function(e){this.cache.getNodes().forEach(function(r){var n=r.node;n.childStore&&e(n.childStore)})},t.prototype.refreshAfterSort=function(e){var r=this.storeUtils.isServerSideSortAllLevels();if(r||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)){var n=this.cache.getRowCount();this.destroyBean(this.cache),this.cache=this.createManagedBean(new Dc(this,n,this.storeParams)),this.fireStoreUpdatedEvent();return}this.forEachChildStoreShallow(function(i){return i.refreshAfterSort(e)})},t.prototype.refreshAfterFilter=function(e){var r=!this.storeUtils.isServerSideOnlyRefreshFilteredGroups();if(r||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)){this.refreshStore(!0);return}this.forEachChildStoreShallow(function(n){return n.refreshAfterFilter(e)})},t.prototype.refreshStore=function(e){if(e){this.destroyBean(this.cache),this.cache=this.createManagedBean(new Dc(this,1,this.storeParams)),this.fireStoreUpdatedEvent();return}this.cache.markNodesForRefresh()},t.prototype.getTopLevelRowDisplayedIndex=function(e){var r=this.cache.getDisplayIndexFromStoreIndex(e);return r??e},t.prototype.isLastRowIndexKnown=function(){return this.cache.isLastRowIndexKnown()},t.prototype.getRowNodesInRange=function(e,r){return E.missing(e),this.cache.getNodes().filter(function(n){var i=n.node;return i.rowIndex>=e.rowIndex&&i.rowIndex<=r.rowIndex}).map(function(n){var i=n.node;return i})},t.prototype.addStoreStates=function(e){e.push({suppressInfiniteScroll:!1,route:this.parentRowNode.getGroupKeys(),rowCount:this.getRowCount(),lastRowIndexKnown:this.isLastRowIndexKnown(),info:this.info,maxBlocksInCache:this.storeParams.maxBlocksInCache,cacheBlockSize:this.storeParams.cacheBlockSize}),this.forEachChildStoreShallow(function(r){return r.addStoreStates(e)})},t.prototype.getIdSequence=function(){return this.idSequence},t.prototype.getParentNode=function(){return this.parentRowNode},t.prototype.getRowDetails=function(){return{field:this.groupField,group:this.group,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn}},t.prototype.getSsrmParams=function(){return this.ssrmParams},t.prototype.setStoreInfo=function(e){e&&Object.assign(this.info,e)},t.prototype.fireStoreUpdatedEvent=function(){var e={type:V.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)},t.prototype.fireRefreshFinishedEvent=function(){var e={type:V.EVENT_STORE_REFRESHED,route:this.parentRowNode.getRoute()};this.eventService.dispatchEvent(e)},t.prototype.getBlockStates=function(){return this.cache.getBlockStates()},t.prototype.getStoreBounds=function(){return{topPx:this.topPx,heightPx:this.heightPx}},Co([D("ssrmBlockUtils")],t.prototype,"blockUtils",void 0),Co([D("ssrmStoreUtils")],t.prototype,"storeUtils",void 0),Co([D("columnModel")],t.prototype,"columnModel",void 0),Co([D("selectionService")],t.prototype,"selectionService",void 0),Co([te],t.prototype,"init",null),Co([br],t.prototype,"destroyRowNodes",null),t}(pe),kI=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),tr=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Zp=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},NI=function(o){kI(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.onRowHeightChanged_debounced=E.debounce(e.onRowHeightChanged.bind(e),100),e.pauseStoreUpdateListening=!1,e.started=!1,e.managingPivotResultColumns=!1,e}return t.prototype.ensureRowHeightsValid=function(){return!1},t.prototype.start=function(){this.started=!0;var e=this.gridOptionsService.get("serverSideDatasource");e&&this.setDatasource(e)},t.prototype.destroyDatasource=function(){this.datasource&&(this.datasource.destroy&&this.datasource.destroy(),this.rowRenderer.datasourceChanged(),this.datasource=void 0)},t.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,V.EVENT_STORE_UPDATED,this.onStoreUpdated.bind(this));var e=this.resetRootStore.bind(this);this.addManagedListener(this.eventService,V.EVENT_COLUMN_VALUE_CHANGED,e),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_CHANGED,e),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.verifyProps()},t.prototype.verifyProps=function(){if(this.gridOptionsService.exists("initialGroupOrderComparator")){var e="AG Grid: initialGroupOrderComparator cannot be used with Server Side Row Model. If using Full Store, then provide the rows to the grid in the desired sort order. If using Infinite Scroll, then sorting is done on the server side, nothing to do with the client.";E.doOnce(function(){return console.warn(e)},"SSRM.InitialGroupOrderComparator")}if(this.gridOptionsService.isRowSelection()&&!this.gridOptionsService.exists("getRowId")){var r="AG Grid: getRowId callback must be provided for Server Side Row Model selection to work correctly.";E.doOnce(function(){return console.warn(r)},"SSRM.SelectionNeedsRowNodeIdFunc")}},t.prototype.setDatasource=function(e){this.started&&(this.destroyDatasource(),this.datasource=e,this.resetRootStore())},t.prototype.isLastRowIndexKnown=function(){var e=this.getRootStore();return e?e.isLastRowIndexKnown():!1},t.prototype.onColumnEverything=function(){if(!this.storeParams){this.resetRootStore();return}var e=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),r=this.columnsToValueObjects(this.columnModel.getValueColumns()),n=this.columnsToValueObjects(this.columnModel.getPivotColumns()),i=function(h){var f={};h.oldCols.forEach(function(g){return f[g.id]=g});var p=h.newCols.every(function(g){var m=f[g.id];return m&&delete f[g.id],m&&m.field===g.field&&m.aggFunc===g.aggFunc}),v=!h.allowRemovedColumns&&!!Object.values(f).length;return p&&!v},a=!E.jsonEquals(this.storeParams.sortModel,this.sortListener.extractSortModel()),s=!i({oldCols:this.storeParams.rowGroupCols,newCols:e}),l=!i({oldCols:this.storeParams.pivotCols,newCols:n}),u=!!(e!=null&&e.length)&&!i({oldCols:this.storeParams.valueCols,newCols:r,allowRemovedColumns:!0}),c=a||s||l||u;if(c)this.resetRootStore();else{var d=this.createStoreParams();this.storeParams.rowGroupCols=d.rowGroupCols,this.storeParams.pivotCols=d.pivotCols,this.storeParams.valueCols=d.valueCols}},t.prototype.destroyRootStore=function(){!this.rootNode||!this.rootNode.childStore||(this.rootNode.childStore=this.destroyBean(this.rootNode.childStore),this.nodeManager.clear())},t.prototype.refreshAfterSort=function(e,r){this.storeParams&&(this.storeParams.sortModel=e);var n=this.getRootStore();n&&(n.refreshAfterSort(r),this.onStoreUpdated())},t.prototype.generateSecondaryColumns=function(e){var r=this.pivotColDefService.createColDefsFromFields(e);this.managingPivotResultColumns=!0,this.columnModel.setSecondaryColumns(r,"rowModelUpdated")},t.prototype.resetRootStore=function(){this.destroyRootStore(),this.rootNode=new Uo(this.beans),this.rootNode.group=!0,this.rootNode.level=-1,this.datasource&&(this.storeParams=this.createStoreParams(),this.rootNode.childStore=this.createBean(this.storeFactory.createStore(this.storeParams,this.rootNode)),this.updateRowIndexesAndBounds()),this.managingPivotResultColumns&&(this.columnModel.setSecondaryColumns(null),this.managingPivotResultColumns=!1);var e={type:V.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(e),this.dispatchModelUpdated(!0)},t.prototype.columnsToValueObjects=function(e){var r=this;return e.map(function(n){return{id:n.getId(),aggFunc:n.getAggFunc(),displayName:r.columnModel.getDisplayNameForColumn(n,"model"),field:n.getColDef().field}})},t.prototype.createStoreParams=function(){var e=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),r=this.columnsToValueObjects(this.columnModel.getValueColumns()),n=this.columnsToValueObjects(this.columnModel.getPivotColumns()),i=this.gridOptionsService.isGetRowHeightFunction(),a={valueCols:r,rowGroupCols:e,pivotCols:n,pivotMode:this.columnModel.isPivotMode(),filterModel:this.filterManager.getFilterModel(),sortModel:this.sortListener.extractSortModel(),datasource:this.datasource,lastAccessedSequence:new xr,dynamicRowHeight:i};return a},t.prototype.getParams=function(){return this.storeParams},t.prototype.dispatchModelUpdated=function(e){e===void 0&&(e=!1);var r={type:V.EVENT_MODEL_UPDATED,animate:!e,keepRenderedRows:!e,newPage:!1,newData:!1};this.eventService.dispatchEvent(r)},t.prototype.onStoreUpdated=function(){this.pauseStoreUpdateListening||(this.updateRowIndexesAndBounds(),this.dispatchModelUpdated())},t.prototype.onRowHeightChangedDebounced=function(){this.onRowHeightChanged_debounced()},t.prototype.onRowHeightChanged=function(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()},t.prototype.updateRowIndexesAndBounds=function(){var e=this.getRootStore();e&&e.setDisplayIndexes(new xr,{value:0})},t.prototype.retryLoads=function(){var e=this.getRootStore();e&&(e.retryLoads(),this.onStoreUpdated())},t.prototype.getRow=function(e){var r=this.getRootStore();if(r)return r.getRowUsingDisplayIndex(e)},t.prototype.expandAll=function(e){this.pauseStoreUpdateListening=!0,this.forEachNode(function(r){r.stub||r.hasChildren()&&r.setExpanded(e)}),this.pauseStoreUpdateListening=!1,this.onStoreUpdated()},t.prototype.refreshAfterFilter=function(e,r){this.storeParams&&(this.storeParams.filterModel=e);var n=this.getRootStore();n&&(n.refreshAfterFilter(r),this.onStoreUpdated())},t.prototype.getRootStore=function(){if(this.rootNode&&this.rootNode.childStore)return this.rootNode.childStore},t.prototype.getRowCount=function(){var e=this.getRootStore();return e?e.getDisplayIndexEnd():0},t.prototype.getTopLevelRowCount=function(){var e=this.getRootStore();return e?e.getRowCount():1},t.prototype.getTopLevelRowDisplayedIndex=function(e){var r=this.getRootStore();return r?r.getTopLevelRowDisplayedIndex(e):e},t.prototype.getRowBounds=function(e){var r=this.getRootStore();if(!r){var n=this.gridOptionsService.getRowHeightAsNumber();return{rowTop:0,rowHeight:n}}return r.getRowBounds(e)},t.prototype.getBlockStates=function(){var e=this.getRootStore();if(e){var r={};return e.forEachStoreDeep(function(n){if(n instanceof jy){var i=n.getBlockStateJson(),a=i.id,s=i.state;r[a]=s}else if(n instanceof Od)Object.entries(n.getBlockStates()).forEach(function(l){var u=Zp(l,2),c=u[0],d=u[1];r[c]=d});else throw new Error("AG Grid: Unsupported store type")}),r}},t.prototype.getRowIndexAtPixel=function(e){var r=this.getRootStore();return e<=0||!r?0:r.getRowIndexAtPixel(e)},t.prototype.isEmpty=function(){return!1},t.prototype.isRowsToRender=function(){return this.getRootStore()!=null&&this.getRowCount()>0},t.prototype.getType=function(){return"serverSide"},t.prototype.forEachNode=function(e){var r=this.getRootStore();r&&r.forEachNodeDeep(e)},t.prototype.forEachNodeAfterFilterAndSort=function(e){var r=this.getRootStore();r&&r.forEachNodeDeepAfterFilterAndSort(e)},t.prototype.executeOnStore=function(e,r){var n=this.getRootStore();if(n){var i=n.getChildStore(e);i&&r(i)}},t.prototype.refreshStore=function(e){e===void 0&&(e={});var r=e.route?e.route:[];this.executeOnStore(r,function(n){return n.refreshStore(e.purge==!0)})},t.prototype.getStoreState=function(){var e=[],r=this.getRootStore();return r&&r.addStoreStates(e),e},t.prototype.getNodesInRangeForSelection=function(e,r){if(!E.exists(e))return[];if(!r)return[e];var n=e.rowIndex,i=r.rowIndex;if(n===null||i===null)return[e];var a=[],s=Zp([n,i].sort(function(c,d){return c-d}),2),l=s[0],u=s[1];return this.forEachNode(function(c){var d=c.rowIndex;d==null||c.stub||d>=l&&d<=u&&a.push(c)}),a.length!==u-l+1?[e]:a},t.prototype.getRowNode=function(e){var r;return this.forEachNode(function(n){n.id===e&&(r=n),n.detailNode&&n.detailNode.id===e&&(r=n.detailNode)}),r},t.prototype.isRowPresent=function(e){var r=this.getRowNode(e.id);return!!r},t.prototype.setRowCount=function(e,r){var n=this.getRootStore();if(n){if(n instanceof Od){n.setRowCount(e,r);return}console.error("AG Grid: Infinite scrolling must be enabled in order to set the row count.")}},tr([D("columnModel")],t.prototype,"columnModel",void 0),tr([D("filterManager")],t.prototype,"filterManager",void 0),tr([D("rowRenderer")],t.prototype,"rowRenderer",void 0),tr([D("ssrmSortService")],t.prototype,"sortListener",void 0),tr([D("ssrmNodeManager")],t.prototype,"nodeManager",void 0),tr([D("ssrmStoreFactory")],t.prototype,"storeFactory",void 0),tr([D("beans")],t.prototype,"beans",void 0),tr([zr("pivotColDefService")],t.prototype,"pivotColDefService",void 0),tr([br],t.prototype,"destroyDatasource",null),tr([te],t.prototype,"addEventListeners",null),tr([br],t.prototype,"destroyRootStore",null),t=tr([be("rowModel")],t),t}(pe),GI=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),gl=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},VI=function(o){GI(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.loadFromDatasource=function(e){var r=e.storeParams,n=e.parentBlock,i=e.parentNode,a=i.getGroupKeys();if(r.datasource){var s={startRow:e.startRow,endRow:e.endRow,rowGroupCols:r.rowGroupCols,valueCols:r.valueCols,pivotCols:r.pivotCols,pivotMode:r.pivotMode,groupKeys:a,filterModel:r.filterModel,sortModel:r.sortModel},l={successCallback:e.successCallback,success:e.success,failCallback:e.failCallback,fail:e.fail,request:s,parentNode:e.parentNode,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};window.setTimeout(function(){if(!r.datasource||!n.isAlive()){e.failCallback();return}r.datasource.getRows(l)},0)}},t.prototype.getChildStore=function(e,r,n){if(E.missingOrEmpty(e))return r;var i=e[0],a=n(i);if(a){var s=e.slice(1,e.length),l=a.childStore;return l?l.getChildStore(s):null}return null},t.prototype.isServerRefreshNeeded=function(e,r,n){if(n.valueColChanged||n.secondaryColChanged)return!0;var i=e.level+1,a=i<r.length,s=!a;if(s)return!0;var l=r[i].id,u=n.changedColumns.indexOf(l)>-1;if(u)return!0;var c=this.columnModel.getAllGridColumns(),d=c.filter(function(h){return h.getColDef().showRowGroup&&n.changedColumns.includes(h.getId())}).map(function(h){return h.getColDef().showRowGroup}).some(function(h){return h===!0||h===l});return d},t.prototype.getServerSideInitialRowCount=function(){var e=this.gridOptionsService.getNum("serverSideInitialRowCount");return typeof e=="number"&&e>0?e:1},t.prototype.assertRowModelIsServerSide=function(e){return this.gridOptionsService.isRowModelType("serverSide")?!0:(E.doOnce(function(){return console.warn("AG Grid: The '"+e+"' property can only be used with the Server Side Row Model.")},e),!1)},t.prototype.assertNotTreeData=function(e){return this.gridOptionsService.is("treeData")?(E.doOnce(function(){return console.warn("AG Grid: The '"+e+"' property cannot be used while using tree data.")},e+"_TreeData"),!1):!0},t.prototype.isServerSideSortAllLevels=function(){return this.gridOptionsService.is("serverSideSortAllLevels")&&this.assertRowModelIsServerSide("serverSideSortAllLevels")},t.prototype.isServerSideOnlyRefreshFilteredGroups=function(){return this.gridOptionsService.is("serverSideOnlyRefreshFilteredGroups")&&this.assertRowModelIsServerSide("serverSideOnlyRefreshFilteredGroups")},t.prototype.isServerSideSortOnServer=function(){return this.gridOptionsService.is("serverSideSortOnServer")&&this.assertRowModelIsServerSide("serverSideSortOnServer")&&this.assertNotTreeData("serverSideSortOnServer")},t.prototype.isServerSideFilterOnServer=function(){return this.gridOptionsService.is("serverSideFilterOnServer")&&this.assertRowModelIsServerSide("serverSideFilterOnServer")&&this.assertNotTreeData("serverSideFilterOnServer")},gl([D("columnApi")],t.prototype,"columnApi",void 0),gl([D("columnModel")],t.prototype,"columnModel",void 0),gl([D("gridApi")],t.prototype,"gridApi",void 0),t=gl([be("ssrmStoreUtils")],t),t}(pe),jI=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),xo=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},BI="ag-Grid-MissingKey",HI=function(o){jI(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.usingTreeData=this.gridOptionsService.isTreeData(),this.usingMasterDetail=this.gridOptionsService.isMasterDetail()},t.prototype.createRowNode=function(e){var r=new Uo(this.beans),n=e.rowHeight!=null?e.rowHeight:this.rowHeight;return r.setRowHeight(n),r.group=e.group,r.leafGroup=e.leafGroup,r.level=e.level,r.uiLevel=e.level,r.parent=e.parent,r.stub=!0,r.__needsRefreshWhenVisible=!1,r.group&&(r.expanded=!1,r.field=e.field,r.rowGroupColumn=e.rowGroupColumn),r},t.prototype.destroyRowNodes=function(e){var r=this;e&&e.forEach(function(n){return r.destroyRowNode(n)})},t.prototype.destroyRowNode=function(e,r){r===void 0&&(r=!1),e.childStore&&!r&&(this.destroyBean(e.childStore),e.childStore=null),e.sibling&&this.destroyRowNode(e.sibling,!1),e.clearRowTopAndRowIndex(),e.id!=null&&this.nodeManager.removeNode(e)},t.prototype.setTreeGroupInfo=function(e){e.updateHasChildren();var r=this.gridOptionsService.get("getServerSideGroupKey");e.hasChildren()&&r!=null&&(e.key=r(e.data)),!e.hasChildren()&&e.childStore!=null&&(this.destroyBean(e.childStore),e.childStore=null,e.expanded=!1)},t.prototype.setRowGroupInfo=function(e){e.key=this.valueService.getValue(e.rowGroupColumn,e),(e.key===null||e.key===void 0)&&E.doOnce(function(){console.warn("AG Grid: null and undefined values are not allowed for server side row model keys"),e.rowGroupColumn&&console.warn("column = "+e.rowGroupColumn.getId()),console.warn("data is ",e.data)},"ServerSideBlock-CannotHaveNullOrUndefinedForKey"),this.beans.gridOptionsService.is("groupIncludeFooter")&&(e.createFooter(),e.sibling&&(e.sibling.uiLevel=e.uiLevel+1))},t.prototype.setMasterDetailInfo=function(e){var r=this.gridOptionsService.get("isRowMaster");r!=null?e.master=r(e.data):e.master=!0},t.prototype.updateDataIntoRowNode=function(e,r){e.updateData(r),this.usingTreeData?(this.setTreeGroupInfo(e),this.setChildCountIntoRowNode(e)):e.group?this.setChildCountIntoRowNode(e):this.usingMasterDetail},t.prototype.setDataIntoRowNode=function(e,r,n,i){var a;e.stub=!1,E.exists(r)?(e.setDataAndId(r,n),this.usingTreeData?this.setTreeGroupInfo(e):e.group?this.setRowGroupInfo(e):this.usingMasterDetail&&this.setMasterDetailInfo(e)):(e.setDataAndId(void 0,void 0),e.key=null),(this.usingTreeData||e.group)&&(this.setGroupDataIntoRowNode(e),this.setChildCountIntoRowNode(e)),E.exists(r)&&(e.setRowHeight(this.gridOptionsService.getRowHeightForNode(e,!1,i).height),(a=e.sibling)===null||a===void 0||a.setRowHeight(this.gridOptionsService.getRowHeightForNode(e.sibling,!1,i).height))},t.prototype.setChildCountIntoRowNode=function(e){var r=this.gridOptionsService.get("getChildCount");r&&e.setAllChildrenCount(r(e.data))},t.prototype.setGroupDataIntoRowNode=function(e){var r=this,n=this.columnModel.getGroupDisplayColumns(),i=this.gridOptionsService.isTreeData();n.forEach(function(a){if(e.groupData==null&&(e.groupData={}),i)e.groupData[a.getColId()]=e.key;else if(a.isRowGroupDisplayed(e.rowGroupColumn.getId())){var s=r.valueService.getValue(e.rowGroupColumn,e);e.groupData[a.getColId()]=s}})},t.prototype.clearDisplayIndex=function(e){e.clearRowTopAndRowIndex();var r=e.hasChildren()&&E.exists(e.childStore);if(r){var n=e.childStore;n.clearDisplayIndexes()}var i=e.master&&e.detailNode;i&&e.detailNode.clearRowTopAndRowIndex()},t.prototype.setDisplayIndex=function(e,r,n){e.setRowIndex(r.next()),e.setRowTop(n.value),n.value+=e.rowHeight;var i=e.master;i&&(e.expanded&&e.detailNode?(e.detailNode.setRowIndex(r.next()),e.detailNode.setRowTop(n.value),n.value+=e.detailNode.rowHeight):e.detailNode&&e.detailNode.clearRowTopAndRowIndex());var a=e.hasChildren()&&E.exists(e.childStore);if(a){var s=e.childStore;e.expanded?s.setDisplayIndexes(r,n):s.clearDisplayIndexes()}},t.prototype.binarySearchForDisplayIndex=function(e,r){var n=0,i=r.length-1;if(E.missing(i)||E.missing(n)){console.warn("AG Grid: error: topPointer = "+i+", bottomPointer = "+n);return}for(;;){var a=Math.floor((n+i)/2),s=r[a];if(s.rowIndex===e)return s;var l=s.master&&s.expanded,u=s.detailNode;if(l&&u&&u.rowIndex===e)return s.detailNode;var c=s.childStore;if(s.expanded&&c&&c.isDisplayIndexInStore(e))return c.getRowUsingDisplayIndex(e);if(s.rowIndex<e)n=a+1;else if(s.rowIndex>e)i=a-1;else{console.warn("AG Grid: error: unable to locate rowIndex = "+e+" in cache");return}}},t.prototype.extractRowBounds=function(e,r){var n=function(a){return{rowHeight:a.rowHeight,rowTop:a.rowTop}};if(e.rowIndex===r)return n(e);if(e.hasChildren()&&e.expanded&&E.exists(e.childStore)){var i=e.childStore;if(i.isDisplayIndexInStore(r))return i.getRowBounds(r)}else if(e.master&&e.expanded&&E.exists(e.detailNode)&&e.detailNode.rowIndex===r)return n(e.detailNode)},t.prototype.getIndexAtPixel=function(e,r){if(e.isPixelInRange(r))return e.rowIndex;var n=e.master&&e.expanded,i=e.detailNode;if(n&&i&&i.isPixelInRange(r))return e.detailNode.rowIndex;if(e.hasChildren()&&e.expanded&&E.exists(e.childStore)){var a=e.childStore;if(a.isPixelInRange(r))return a.getRowIndexAtPixel(r)}return null},t.prototype.createNodeIdPrefix=function(e){for(var r=[],n=e;n&&n.level>=0;)n.key===""?r.push(BI):r.push(n.key),n=n.parent;if(r.length>0)return r.reverse().join("-")},t.prototype.checkOpenByDefault=function(e){if(e.isExpandable()){var r=this.gridOptionsService.getCallback("isServerSideGroupOpenByDefault");if(r){var n={data:e.data,rowNode:e},i=r(n);i&&window.setTimeout(function(){return e.setExpanded(!0)},0)}}},xo([D("valueService")],t.prototype,"valueService",void 0),xo([D("columnModel")],t.prototype,"columnModel",void 0),xo([D("ssrmNodeManager")],t.prototype,"nodeManager",void 0),xo([D("beans")],t.prototype,"beans",void 0),xo([te],t.prototype,"postConstruct",null),t=xo([be("ssrmBlockUtils")],t),t}(pe),Jp=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},zI=function(){function o(){this.rowNodes={}}return o.prototype.addRowNode=function(t){var e=t.id;this.rowNodes[e]&&(console.warn("AG Grid: Duplicate node id "+t.id+". Row ID's are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values."),console.warn("first instance",this.rowNodes[e].data),console.warn("second instance",t.data)),this.rowNodes[e]=t},o.prototype.removeNode=function(t){var e=t.id;this.rowNodes[e]&&(this.rowNodes[e]=void 0)},o.prototype.clear=function(){this.rowNodes={}},Jp([br],o.prototype,"clear",null),o=Jp([be("ssrmNodeManager")],o),o}(),WI=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ci=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},UI=function(o){WI(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.asyncTransactions=[],e}return t.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")},t.prototype.applyTransactionAsync=function(e,r){this.asyncTransactionsTimeout==null&&this.scheduleExecuteAsync(),this.asyncTransactions.push({transaction:e,callback:r})},t.prototype.scheduleExecuteAsync=function(){var e=this,r=this.gridOptionsService.getAsyncTransactionWaitMillis();this.asyncTransactionsTimeout=window.setTimeout(function(){e.executeAsyncTransactions()},r)},t.prototype.executeAsyncTransactions=function(){var e=this;if(this.asyncTransactions){var r=[],n=[],i=[],a=!1;if(this.asyncTransactions.forEach(function(l){var u;e.serverSideRowModel.executeOnStore(l.transaction.route,function(d){u=d.applyTransaction(l.transaction)}),u==null&&(u={status:ir.StoreNotFound}),n.push(u);var c=u.status==ir.StoreLoading;if(c){i.push(l);return}l.callback&&r.push(function(){return l.callback(u)}),u.status===ir.Applied&&(a=!0)}),r.length>0&&window.setTimeout(function(){r.forEach(function(l){return l()})},0),this.asyncTransactionsTimeout=void 0,this.asyncTransactions=i,a&&(this.valueCache.onDataChanged(),this.eventService.dispatchEvent({type:V.EVENT_STORE_UPDATED})),n.length>0){var s={type:V.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:n};this.eventService.dispatchEvent(s)}}},t.prototype.flushAsyncTransactions=function(){this.asyncTransactionsTimeout!=null&&clearTimeout(this.asyncTransactionsTimeout),this.executeAsyncTransactions()},t.prototype.applyTransaction=function(e){var r;if(this.serverSideRowModel.executeOnStore(e.route,function(i){r=i.applyTransaction(e)}),r){if(this.valueCache.onDataChanged(),r.remove){var n=r.remove.map(function(i){return i.id});this.selectionService.deleteSelectionStateFromParent(e.route||[],n)}return this.eventService.dispatchEvent({type:V.EVENT_STORE_UPDATED}),r}else return{status:ir.StoreNotFound}},ci([D("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),ci([D("valueCache")],t.prototype,"valueCache",void 0),ci([D("rowModel")],t.prototype,"serverSideRowModel",void 0),ci([D("rowRenderer")],t.prototype,"rowRenderer",void 0),ci([D("selectionService")],t.prototype,"selectionService",void 0),ci([te],t.prototype,"postConstruct",null),t=ci([be("ssrmTransactionManager")],t),t}(pe),KI=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ga=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},$I=function(o){KI(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,V.EVENT_ROW_GROUP_OPENED,this.onRowGroupOpened.bind(this))},t.prototype.onRowGroupOpened=function(e){var r=e.node;if(r.expanded){if(r.master)this.createDetailNode(r);else if(E.missing(r.childStore)){var n=this.serverSideRowModel.getParams();r.childStore=this.createBean(this.storeFactory.createStore(n,r))}}else this.gridOptionsService.is("purgeClosedRowNodes")&&E.exists(r.childStore)&&(r.childStore=this.destroyBean(r.childStore));var i={type:V.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(i)},t.prototype.createDetailNode=function(e){if(E.exists(e.detailNode))return e.detailNode;var r=new Uo(this.beans);r.detail=!0,r.selectable=!1,r.parent=e,E.exists(e.id)&&(r.id="detail_"+e.id),r.data=e.data,r.level=e.level+1;var n=200,i=this.gridOptionsService.getRowHeightForNode(r).height;return r.rowHeight=i||n,e.detailNode=r,r},Ga([D("rowModel")],t.prototype,"serverSideRowModel",void 0),Ga([D("ssrmStoreFactory")],t.prototype,"storeFactory",void 0),Ga([D("beans")],t.prototype,"beans",void 0),Ga([te],t.prototype,"postConstruct",null),t=Ga([be("ssrmExpandListener")],t),t}(pe),XI=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),wo=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},YI=function(o){XI(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,V.EVENT_SORT_CHANGED,this.onSortChanged.bind(this))},t.prototype.extractSortModel=function(){var e=this.sortController.getSortModel();return this.gridOptionsService.isTreeData()||(this.replaceAutoGroupColumnWithActualRowGroupColumns(e),this.removeMultiColumnPrefixOnColumnIds(e)),e},t.prototype.removeMultiColumnPrefixOnColumnIds=function(e){if(this.gridOptionsService.isGroupMultiAutoColumn())for(var r=Hc+"-",n=0;n<e.length;++n)e[n].colId.indexOf(r)>-1&&(e[n].colId=e[n].colId.substr(r.length))},t.prototype.replaceAutoGroupColumnWithActualRowGroupColumns=function(e){var r=e.find(function(l){return l.colId==Hc});if(r){var n=e.indexOf(r);E.removeFromArray(e,r);var i=function(l){return e.filter(function(u){return u.colId===l.getColId()}).length==0},a=function(l){return{colId:l.getId(),sort:r.sort}},s=this.columnModel.getRowGroupColumns().filter(i).map(a);E.insertArrayIntoArray(e,s,n)}},t.prototype.onSortChanged=function(){var e=this.serverSideRowModel.getParams();if(e){var r=this.extractSortModel(),n=e.sortModel,i=this.findChangedColumnsInSort(r,n),a=this.listenerUtils.isSortingWithValueColumn(i),s=this.listenerUtils.isSortingWithSecondaryColumn(i),l={valueColChanged:a,secondaryColChanged:s,changedColumns:i};this.serverSideRowModel.refreshAfterSort(r,l)}},t.prototype.findChangedColumnsInSort=function(e,r){var n=[];[e,r].forEach(function(s){if(s){var l=s.map(function(u){return u.colId});n=n.concat(l)}});var i=function(s,l){var u=s?s.sort:null,c=l?l.sort:null;return u!==c},a=function(s,l){var u=s?r.indexOf(s):-1,c=l?e.indexOf(l):-1;return u!==c};return n.filter(function(s){var l=r.find(function(c){return c.colId===s}),u=e.find(function(c){return c.colId===s});return i(l,u)||a(l,u)})},wo([D("sortController")],t.prototype,"sortController",void 0),wo([D("columnModel")],t.prototype,"columnModel",void 0),wo([D("rowModel")],t.prototype,"serverSideRowModel",void 0),wo([D("ssrmListenerUtils")],t.prototype,"listenerUtils",void 0),wo([te],t.prototype,"postConstruct",null),t=wo([be("ssrmSortService")],t),t}(pe),qI=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Va=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ZI=function(o){qI(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,V.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this))},t.prototype.onFilterChanged=function(){var e=this.serverSideRowModel.getParams();if(e){var r=this.filterManager.getFilterModel(),n=e?e.filterModel:{},i=this.findChangedColumns(r,n),a=this.listenerUtils.isSortingWithValueColumn(i),s=this.listenerUtils.isSortingWithSecondaryColumn(i),l={valueColChanged:a,secondaryColChanged:s,changedColumns:i};this.serverSideRowModel.refreshAfterFilter(r,l)}},t.prototype.findChangedColumns=function(e,r){var n={};Object.keys(e).forEach(function(a){return n[a]=!0}),Object.keys(r).forEach(function(a){return n[a]=!0});var i=[];return Object.keys(n).forEach(function(a){var s=JSON.stringify(e[a]),l=JSON.stringify(r[a]),u=s!=l;u&&i.push(a)}),i},Va([D("rowModel")],t.prototype,"serverSideRowModel",void 0),Va([D("filterManager")],t.prototype,"filterManager",void 0),Va([D("ssrmListenerUtils")],t.prototype,"listenerUtils",void 0),Va([te],t.prototype,"postConstruct",null),t=Va([be("ssrmFilterListener")],t),t}(pe),Mc=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},JI=function(){function o(){}return o.prototype.createStore=function(t,e){var r=this.getStoreParams(t,e),n=r.suppressInfiniteScroll?jy:Od;return new n(t,r,e)},o.prototype.getStoreParams=function(t,e){var r=this.getLevelSpecificParams(e),n=this.isInfiniteScroll(r),i=this.getBlockSize(n,r),a=this.getMaxBlocksInCache(n,t,r),s={suppressInfiniteScroll:!n,cacheBlockSize:i,maxBlocksInCache:a};return s},o.prototype.getMaxBlocksInCache=function(t,e,r){if(t){var n=r&&r.maxBlocksInCache!=null?r.maxBlocksInCache:this.gridOptionsService.getNum("maxBlocksInCache"),i=n!=null&&n>=0;if(i){if(e.dynamicRowHeight){var a="AG Grid: Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.";E.doOnce(function(){return console.warn(a)},"storeFactory.maxBlocksInCache.dynamicRowHeight");return}if(this.columnModel.isAutoRowHeightActive()){var s="AG Grid: Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.";E.doOnce(function(){return console.warn(s)},"storeFactory.maxBlocksInCache.autoRowHeightActive");return}return n}}},o.prototype.getBlockSize=function(t,e){if(t){var r=e&&e.cacheBlockSize!=null?e.cacheBlockSize:this.gridOptionsService.getNum("cacheBlockSize");return r!=null&&r>0?r:100}},o.prototype.getLevelSpecificParams=function(t){var e=this.gridOptionsService.getCallback("getServerSideGroupLevelParams");if(e){var r={level:t.level+1,parentRowNode:t.level>=0?t:void 0,rowGroupColumns:this.columnModel.getRowGroupColumns(),pivotColumns:this.columnModel.getPivotColumns(),pivotMode:this.columnModel.isPivotMode()},n=e(r);return n.storeType!=null&&(n.suppressInfiniteScroll=n.storeType!=="partial"),n}},o.prototype.isInfiniteScroll=function(t){var e=t&&t.suppressInfiniteScroll!=null?t.suppressInfiniteScroll:this.isSuppressServerSideInfiniteScroll();return!e},o.prototype.isSuppressServerSideInfiniteScroll=function(){return this.gridOptionsService.is("suppressServerSideInfiniteScroll")},Mc([D("gridOptionsService")],o.prototype,"gridOptionsService",void 0),Mc([D("columnModel")],o.prototype,"columnModel",void 0),o=Mc([be("ssrmStoreFactory")],o),o}(),Qp=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},QI=function(){function o(){}return o.prototype.isSortingWithValueColumn=function(t){for(var e=this.columnModel.getValueColumns().map(function(n){return n.getColId()}),r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return!0;return!1},o.prototype.isSortingWithSecondaryColumn=function(t){if(!this.columnModel.getSecondaryColumns())return!1;for(var e=this.columnModel.getSecondaryColumns().map(function(n){return n.getColId()}),r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return!0;return!1},Qp([D("columnModel")],o.prototype,"columnModel",void 0),o=Qp([be("ssrmListenerUtils")],o),o}(),eL=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ev=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},tL=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},rL=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},tv=function(o){eL(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.selectedState={selectAll:!1,toggledNodes:new Set},e.lastSelected=null,e.selectAllUsed=!1,e.selectedNodes={},e}return t.prototype.init=function(){var e=this;this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",function(r){e.rowSelection=r.currentValue})},t.prototype.getSelectedState=function(){return{selectAll:this.selectedState.selectAll,toggledNodes:rL([],tL(this.selectedState.toggledNodes))}},t.prototype.setSelectedState=function(e){var r={selectAll:!1,toggledNodes:new Set};if(typeof e!="object"){console.error("AG Grid: The provided selection state should be an object.");return}if("selectAll"in e&&typeof e.selectAll=="boolean")r.selectAll=e.selectAll;else{console.error("AG Grid: Select all status should be of boolean type.");return}if("toggledNodes"in e&&Array.isArray(e.toggledNodes))e.toggledNodes.forEach(function(n){typeof n=="string"?r.toggledNodes.add(n):console.warn("AG Grid: Provided ids must be of string type. Invalid id provided: "+n)});else{console.error("AG Grid: `toggledNodes` must be an array of string ids.");return}this.selectedState=r},t.prototype.deleteSelectionStateFromParent=function(e,r){var n=this;if(this.selectedState.toggledNodes.size===0)return!1;var i=!1;return r.forEach(function(a){n.selectedState.toggledNodes.delete(a)&&(i=!0)}),i},t.prototype.setNodesSelected=function(e){var r,n=this;if(e.nodes.length===0)return 0;var i=e.clearSelection&&e.newValue&&!e.rangeSelect;if(this.rowSelection!=="multiple"||i){if(e.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when rowSelection is set to 'single'");var a=e.nodes[0];return e.newValue?(this.selectedNodes=(r={},r[a.id]=a,r),this.selectedState={selectAll:!1,toggledNodes:new Set([a.id])}):(this.selectedNodes={},this.selectedState={selectAll:!1,toggledNodes:new Set}),this.lastSelected=a.id,1}var s=function(u){e.newValue?n.selectedNodes[u.id]=u:delete n.selectedNodes[u.id];var c=u.selectable,d=e.newValue===n.selectedState.selectAll;if(d||!c){n.selectedState.toggledNodes.delete(u.id);return}n.selectedState.toggledNodes.add(u.id)};if(e.rangeSelect&&this.lastSelected){if(e.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");var a=e.nodes[0],l=this.rowModel.getRowNode(this.lastSelected);return this.rowModel.getNodesInRangeForSelection(a,l??null).forEach(s),this.lastSelected=a.id,1}return e.nodes.forEach(s),this.lastSelected=e.nodes[e.nodes.length-1].id,1},t.prototype.processNewRow=function(e){this.selectedNodes[e.id]&&(this.selectedNodes[e.id]=e)},t.prototype.isNodeSelected=function(e){var r=this.selectedState.toggledNodes.has(e.id);return this.selectedState.selectAll?!r:r},t.prototype.getSelectedNodes=function(){return this.selectAllUsed&&console.warn("AG Grid: getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model.\n                Use `api.getServerSideSelectionState()` instead."),Object.values(this.selectedNodes)},t.prototype.getSelectedRows=function(){return this.getSelectedNodes().map(function(e){return e.data})},t.prototype.getSelectionCount=function(){return this.selectedState.selectAll?-1:this.selectedState.toggledNodes.size},t.prototype.clearOtherNodes=function(e,r){var n=this.selectedState.selectAll?1:this.selectedState.toggledNodes.size-1;this.selectedState={selectAll:!1,toggledNodes:new Set([e.id])},this.rowModel.forEachNode(function(a){a!==e&&a.selectThisNode(!1,void 0,r)});var i={type:V.EVENT_SELECTION_CHANGED,source:r};return this.eventService.dispatchEvent(i),n},t.prototype.isEmpty=function(){var e;return!this.selectedState.selectAll&&!(!((e=this.selectedState.toggledNodes)===null||e===void 0)&&e.size)},t.prototype.selectAllRowNodes=function(e){this.selectedState={selectAll:!0,toggledNodes:new Set},this.selectedNodes={},this.selectAllUsed=!0},t.prototype.deselectAllRowNodes=function(e){this.selectedState={selectAll:!1,toggledNodes:new Set},this.selectedNodes={}},t.prototype.getSelectAllState=function(e,r){return this.selectedState.selectAll?this.selectedState.toggledNodes.size>0?null:!0:this.selectedState.toggledNodes.size>0?null:!1},ev([D("rowModel")],t.prototype,"rowModel",void 0),ev([te],t.prototype,"init",null),t}(pe),nL=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),os=function(){return os=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},os.apply(this,arguments)},bo=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},iL=function(o,t){var e={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&t.indexOf(r)<0&&(e[r]=o[r]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(o);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(o,r[n])&&(e[r[n]]=o[r[n]]);return e},yl=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},oL=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},rv=function(o){nL(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.selectedState={selectAllChildren:!1,toggledNodes:new Map},e.lastSelected=null,e}return t.prototype.init=function(){var e=this;this.addManagedListener(this.eventService,V.EVENT_MODEL_UPDATED,function(){return e.removeRedundantState()}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return e.selectionService.reset()})},t.prototype.getSelectedState=function(){var e=this,r=function(n,i,a){var s={nodeId:a};if(i<=e.columnModel.getRowGroupColumns().length&&(s.selectAllChildren=n.selectAllChildren),n.toggledNodes.size){var l=[];n.toggledNodes.forEach(function(u,c){var d=r(u,i+1,c);l.push(d)}),s.toggledNodes=l}return s};return r(this.selectedState,0)},t.prototype.setSelectedState=function(e){var r=function(n,i){var a,s;if(typeof n!="object")throw new Error("AG Grid: Each provided state object must be an object.");if("selectAllChildren"in n&&typeof n.selectAllChildren!="boolean")throw new Error("AG Grid: `selectAllChildren` must be a boolean value or undefined.");if("toggledNodes"in n){if(!Array.isArray(n.toggledNodes))throw new Error("AG Grid: `toggledNodes` must be an array.");var l=n.toggledNodes.every(function(h){return typeof h=="object"&&"nodeId"in h&&typeof h.nodeId=="string"});if(!l)throw new Error("AG Grid: Every `toggledNode` requires an associated string id.")}var u=(a=n.selectAllChildren)!==null&&a!==void 0?a:!i,c=(s=n.toggledNodes)===null||s===void 0?void 0:s.map(function(h){return[h.nodeId,r(h,u)]}),d=c==null?void 0:c.some(function(h){var f=yl(h,2);f[0];var p=f[1];return u===p.selectAllChildren&&p.toggledNodes.size===0});if(d)throw new Error(`
                    AG Grid: AG Grid: Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule.
                    Please rebuild the selection state and reapply it.
                `);return{selectAllChildren:u,toggledNodes:new Map(c)}};try{this.selectedState=r(e,!!e.selectAllChildren)}catch(n){console.error(n.message)}},t.prototype.deleteSelectionStateFromParent=function(e,r){for(var n=this.selectedState,i=oL([],yl(e));n&&i.length;)n=n.toggledNodes.get(i.pop());if(!n)return!1;var a=!1;return r.forEach(function(s){n!=null&&n.toggledNodes.delete(s)&&(a=!0)}),a&&this.removeRedundantState(),a},t.prototype.setNodesSelected=function(e){var r=this,n=e.nodes,i=iL(e,["nodes"]);if(n.length===0)return 0;if(e.rangeSelect){if(n.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");var a=n[0],s=this.rowModel.getNodesInRangeForSelection(a,this.lastSelected),l=s.map(this.getRouteToNode).sort(function(c,d){return d.length-c.length}),u=new Set;return l.forEach(function(c){u.has(c[c.length-1])||(c.forEach(function(d){return u.add(d)}),r.recursivelySelectNode(c,r.selectedState,os({node:a},i)))}),this.removeRedundantState(),this.lastSelected=a,1}return e.nodes.forEach(function(c){var d=r.getRouteToNode(c);r.recursivelySelectNode(d,r.selectedState,os(os({},i),{node:c}))}),this.removeRedundantState(),this.lastSelected=e.nodes[e.nodes.length-1],1},t.prototype.isNodeSelected=function(e){var r=this.getRouteToNode(e);return this.isNodePathSelected(r,this.selectedState)},t.prototype.isNodePathSelected=function(e,r){var n=yl(e),i=n[0],a=n.slice(1);if(a.length===0){var s=r.toggledNodes.has(i.id);if(i.hasChildren()){var l=r.toggledNodes.get(i.id);if(l&&l.toggledNodes.size)return}return r.selectAllChildren?!s:s}if(r.toggledNodes.has(i.id)){var u=r.toggledNodes.get(i.id);if(u)return this.isNodePathSelected(a,u)}return!!r.selectAllChildren},t.prototype.getRouteToNode=function(e){for(var r=[],n=e;n.parent;)r.push(n),n=n.parent;return r.reverse()},t.prototype.removeRedundantState=function(){var e=this;if(!this.filterManager.isAnyFilterPresent()){var r=function(n,i,a){n===void 0&&(n=e.selectedState),i===void 0&&(i=e.serverSideRowModel.getRootStore());var s=!0,l=!0;return n.toggledNodes.forEach(function(u,c){var d=e.rowModel.getRowNode(c);d||(s=!1);var h=d==null?void 0:d.childStore;if(!h){u.toggledNodes.size>0&&(l=!1);return}r(u,h,d)&&n.selectAllChildren===u.selectAllChildren&&n.toggledNodes.delete(c),u.toggledNodes.size>0&&(l=!1)}),!i||!i.isLastRowIndexKnown()||i.getRowCount()!==n.toggledNodes.size?!1:l&&s?(n.toggledNodes.clear(),n.selectAllChildren=!n.selectAllChildren,a&&(a==null?void 0:a.isSelected())!==n.selectAllChildren&&a.selectThisNode(n.selectAllChildren,void 0,"api"),!0):!1};r()}},t.prototype.recursivelySelectNode=function(e,r,n){var i=yl(e),a=i[0],s=i.slice(1);if(a){var l=!s.length;if(l){var u=a.selectable,c=r.selectAllChildren===n.newValue;if(c||!u){r.toggledNodes.delete(a.id);return}var d={selectAllChildren:n.newValue,toggledNodes:new Map};r.toggledNodes.set(a.id,d);return}var h=r.toggledNodes.has(a.id),f=h?r.toggledNodes.get(a.id):{selectAllChildren:r.selectAllChildren,toggledNodes:new Map};h||r.toggledNodes.set(a.id,f),this.recursivelySelectNode(s,f,n),r.selectAllChildren===f.selectAllChildren&&f.toggledNodes.size===0&&r.toggledNodes.delete(a.id)}},t.prototype.getSelectedNodes=function(){console.warn("AG Grid: `getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model.\n            Use `api.getServerSideSelectionState()` instead.");var e=[];return this.rowModel.forEachNode(function(r){r.isSelected()&&e.push(r)}),e},t.prototype.processNewRow=function(e){},t.prototype.getSelectedRows=function(){return this.getSelectedNodes().map(function(e){return e.data})},t.prototype.getSelectionCount=function(){return-1},t.prototype.isEmpty=function(){var e;return!this.selectedState.selectAllChildren&&!(!((e=this.selectedState.toggledNodes)===null||e===void 0)&&e.size)},t.prototype.selectAllRowNodes=function(e){this.selectedState={selectAllChildren:!0,toggledNodes:new Map}},t.prototype.deselectAllRowNodes=function(e){this.selectedState={selectAllChildren:!1,toggledNodes:new Map}},t.prototype.getSelectAllState=function(e,r){return this.selectedState.selectAllChildren?this.selectedState.toggledNodes.size>0?null:!0:this.selectedState.toggledNodes.size>0?null:!1},bo([D("rowModel")],t.prototype,"rowModel",void 0),bo([D("columnModel")],t.prototype,"columnModel",void 0),bo([D("filterManager")],t.prototype,"filterManager",void 0),bo([D("rowModel")],t.prototype,"serverSideRowModel",void 0),bo([D("selectionService")],t.prototype,"selectionService",void 0),bo([te],t.prototype,"init",null),t}(pe),aL=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ed=function(){return Ed=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Ed.apply(this,arguments)},Rc=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},sL=function(o,t){var e={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&t.indexOf(r)<0&&(e[r]=o[r]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(o);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(o,r[n])&&(e[r[n]]=o[r[n]]);return e},lL=function(o){aL(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.init=function(){var e=this,r=this.gridOptionsService.is("groupSelectsChildren");this.addManagedPropertyListener("groupSelectsChildren",function(i){e.destroyBean(e.selectionStrategy);var a=i.currentValue?rv:tv;e.selectionStrategy=e.createManagedBean(new a),e.shotgunResetNodeSelectionState();var s={type:V.EVENT_SELECTION_CHANGED,source:"api"};e.eventService.dispatchEvent(s)}),this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",function(i){return e.rowSelection=i.currentValue});var n=r?rv:tv;this.selectionStrategy=this.createManagedBean(new n)},t.prototype.getServerSideSelectionState=function(){return this.selectionStrategy.getSelectedState()},t.prototype.setServerSideSelectionState=function(e){this.selectionStrategy.setSelectedState(e),this.shotgunResetNodeSelectionState();var r={type:V.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(r)},t.prototype.setNodesSelected=function(e){var r=e.nodes,n=sL(e,["nodes"]);if(r.length>1&&this.rowSelection!=="multiple")return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;if(r.length>1&&e.rangeSelect)return console.warn("AG Grid: cannot use range selection when multi selecting rows"),0;var i=Ed({nodes:r.filter(function(l){return l.selectable})},n);if(!i.nodes.length)return 0;var a=this.selectionStrategy.setNodesSelected(i);this.shotgunResetNodeSelectionState(i.source);var s={type:V.EVENT_SELECTION_CHANGED,source:i.source};return this.eventService.dispatchEvent(s),a},t.prototype.deleteSelectionStateFromParent=function(e,r){var n=this.selectionStrategy.deleteSelectionStateFromParent(e,r);if(n){this.shotgunResetNodeSelectionState();var i={type:V.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(i)}},t.prototype.shotgunResetNodeSelectionState=function(e){var r=this;this.rowModel.forEachNode(function(n){if(!n.stub){var i=r.selectionStrategy.isNodeSelected(n);i!==n.isSelected()&&n.selectThisNode(i,void 0,e)}})},t.prototype.getSelectedNodes=function(){return this.selectionStrategy.getSelectedNodes()},t.prototype.getSelectedRows=function(){return this.selectionStrategy.getSelectedRows()},t.prototype.getSelectionCount=function(){return this.selectionStrategy.getSelectionCount()},t.prototype.syncInRowNode=function(e,r){this.selectionStrategy.processNewRow(e);var n=this.selectionStrategy.isNodeSelected(e);if(n!=!1&&!e.selectable){this.selectionStrategy.setNodesSelected({nodes:[e],newValue:!1,source:"api"}),this.shotgunResetNodeSelectionState();var i={type:V.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(i);return}e.setSelectedInitialValue(n)},t.prototype.reset=function(){this.selectionStrategy.deselectAllRowNodes({source:"api"})},t.prototype.isEmpty=function(){return this.selectionStrategy.isEmpty()},t.prototype.selectAllRowNodes=function(e){(e.justCurrentPage||e.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.selectAllRowNodes(e),this.rowModel.forEachNode(function(n){n.stub||n.selectThisNode(!0,void 0,e.source)});var r={type:V.EVENT_SELECTION_CHANGED,source:e.source};this.eventService.dispatchEvent(r)},t.prototype.deselectAllRowNodes=function(e){(e.justCurrentPage||e.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.deselectAllRowNodes(e),this.rowModel.forEachNode(function(n){n.stub||n.selectThisNode(!1,void 0,e.source)});var r={type:V.EVENT_SELECTION_CHANGED,source:e.source};this.eventService.dispatchEvent(r)},t.prototype.getSelectAllState=function(e,r){return this.selectionStrategy.getSelectAllState(e,r)},t.prototype.updateGroupsFromChildrenSelections=function(e,r){return!1},t.prototype.getBestCostNodeSelection=function(){console.warn("AG Grid: calling gridApi.getBestCostNodeSelection() is only possible when using rowModelType=`clientSide`.")},t.prototype.filterFromSelection=function(){},Rc([D("rowModel")],t.prototype,"rowModel",void 0),Rc([te],t.prototype,"init",null),t=Rc([be("selectionService")],t),t}(pe),uL="30.1.0",cL={version:uL,moduleName:Ce.ServerSideRowModelModule,rowModel:"serverSide",beans:[NI,$I,YI,VI,HI,zI,UI,ZI,JI,QI,lL],dependantModules:[lt]},dL=function(){function o(t,e,r,n,i,a,s,l,u,c){this.rowModel=t,this.filterParams=e,this.createKey=r,this.caseFormat=n,this.columnModel=i,this.valueService=a,this.treeDataOrGrouping=s,this.treeData=l,this.getDataPath=u,this.groupAllowUnbalanced=c}return o.prototype.extractUniqueValues=function(t,e){var r=this,n=new Map,i=this.extractExistingFormattedKeys(e),a=new Set,s=this.treeData&&!!this.getDataPath,l=this.columnModel.getRowGroupColumns(),u=function(c,d){var h=r.caseFormat(c);if(!a.has(h)){a.add(h);var f=c,p=E.makeNull(d),v=i==null?void 0:i.get(h);v!=null&&(f=v,p=e.get(v)),n.set(f,p)}};return this.rowModel.forEachLeafNode(function(c){if(!(!c.data||!t(c))){if(r.treeDataOrGrouping){r.addValueForTreeDataOrGrouping(c,s,l,u);return}var d=r.getValue(c);if(r.filterParams.convertValuesToStrings){r.addValueForConvertValuesToString(c,d,u);return}d!=null&&Array.isArray(d)?(d.forEach(function(h){u(r.createKey(h,c),h)}),d.length===0&&u(null,null)):u(r.createKey(d,c),d)}}),n},o.prototype.addValueForConvertValuesToString=function(t,e,r){var n=this.createKey(e,t);n!=null&&Array.isArray(n)?(n.forEach(function(i){var a=E.toStringOrNull(E.makeNull(i));r(a,a)}),n.length===0&&r(null,null)):r(n,n)},o.prototype.addValueForTreeDataOrGrouping=function(t,e,r,n){var i=this,a,s;if(e){if(!((a=t.childrenAfterGroup)===null||a===void 0)&&a.length)return;s=this.getDataPath(t.data)}else s=r.map(function(l){return i.valueService.getKeyForNode(l,t)}),s.push(this.getValue(t));s&&(s=s.map(function(l){return E.toStringOrNull(E.makeNull(l))})),!e&&this.groupAllowUnbalanced&&(s!=null&&s.some(function(l){return l==null}))&&(s=s.filter(function(l){return l!=null})),n(this.createKey(s),s)},o.prototype.getValue=function(t){var e=this.filterParams,r=e.api,n=e.colDef,i=e.column,a=e.columnApi,s=e.context;return this.filterParams.valueGetter({api:r,colDef:n,column:i,columnApi:a,context:s,data:t.data,getValue:function(l){return t.data[l]},node:t})},o.prototype.extractExistingFormattedKeys=function(t){var e=this;if(!t)return null;var r=new Map;return t.forEach(function(n,i){r.set(e.caseFormat(i),i)}),r},o}(),Oi=function(){function o(){}return o.SELECT_ALL="__AG_SELECT_ALL__",o}(),hL=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},fL=function(){function o(t,e,r,n){this.valueFormatterService=t,this.valueFormatter=e,this.formatter=r,this.column=n,this.displayedKeys=[]}return o.prototype.updateDisplayedValuesToAllAvailable=function(t,e,r){this.displayedKeys=Array.from(r)},o.prototype.updateDisplayedValuesToMatchMiniFilter=function(t,e,r,n,i){var a,s;this.displayedKeys=[];try{for(var l=hL(r),u=l.next();!u.done;u=l.next()){var c=u.value;if(c==null)i&&this.displayedKeys.push(c);else{var d=t(c),h=this.valueFormatterService.formatValue(this.column,null,d,this.valueFormatter,!1),f=this.formatter(h);n(f)&&this.displayedKeys.push(c)}}}catch(p){a={error:p}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}},o.prototype.getDisplayedValueCount=function(){return this.displayedKeys.length},o.prototype.getDisplayedItem=function(t){return this.displayedKeys[t]},o.prototype.getSelectAllItem=function(){return Oi.SELECT_ALL},o.prototype.getDisplayedKeys=function(){return this.displayedKeys},o.prototype.forEachDisplayedKey=function(t){this.displayedKeys.forEach(t)},o.prototype.someDisplayedKey=function(t){return this.displayedKeys.some(t)},o.prototype.hasGroups=function(){return!1},o.prototype.refresh=function(){},o}(),pL=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},nv=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Ic=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},vL=function(){function o(t,e,r,n){this.formatter=t,this.treeListPathGetter=e,this.treeListFormatter=r,this.treeDataOrGrouping=n,this.allDisplayedItemsTree=[],this.activeDisplayedItemsFlat=[],this.selectAllItem={depth:0,filterPasses:!0,available:!0,treeKey:Oi.SELECT_ALL,children:this.allDisplayedItemsTree,expanded:!0,key:Oi.SELECT_ALL,parentTreeKeys:[]}}return o.prototype.updateDisplayedValuesToAllAvailable=function(t,e,r,n){n==="reload"?this.generateItemTree(t,e,r):n==="otherFilter"?(this.updateAvailable(r),this.updateExpandAll()):n==="miniFilter"&&(this.resetFilter(),this.updateExpandAll()),this.flattenItems()},o.prototype.updateDisplayedValuesToMatchMiniFilter=function(t,e,r,n,i,a){a==="reload"?this.generateItemTree(t,e,r):a==="otherFilter"&&this.updateAvailable(r),this.updateFilter(n,i),this.updateExpandAll(),this.flattenItems()},o.prototype.generateItemTree=function(t,e,r){var n,i,a;this.allDisplayedItemsTree=[],this.groupsExist=!1;var s=this.getTreeListPathGetter(t,r),l=function(f){var p=t(f),v=(a=s(p))!==null&&a!==void 0?a:[null];v.length>1&&(u.groupsExist=!0);var g=r.has(f),m=u.allDisplayedItemsTree,y,S=[];v.forEach(function(C,w){m||(m=[],y.children=m),y=m.find(function(x){var b;return((b=x.treeKey)===null||b===void 0?void 0:b.toUpperCase())===(C==null?void 0:C.toUpperCase())}),y||(y={treeKey:C,depth:w,filterPasses:!0,expanded:!1,available:g,parentTreeKeys:S},w===v.length-1&&(y.key=f),m.push(y)),m=y.children,S=nv(nv([],pL(S)),[C])})},u=this;try{for(var c=Ic(e),d=c.next();!d.done;d=c.next()){var h=d.value;l(h)}}catch(f){n={error:f}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}this.updateAvailable(r),this.selectAllItem.children=this.allDisplayedItemsTree,this.selectAllItem.expanded=!1},o.prototype.getTreeListPathGetter=function(t,e){var r,n;if(this.treeListPathGetter)return this.treeListPathGetter;if(this.treeDataOrGrouping)return function(c){return c};var i=!1;try{for(var a=Ic(e),s=a.next();!s.done;s=a.next()){var l=s.value,u=t(l);if(u instanceof Date){i=!0;break}else if(u!=null)break}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i?o.DATE_TREE_LIST_PATH_GETTER:(E.doOnce(function(){return console.warn("AG Grid: property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.")},"getTreeListPathGetter"),function(c){return[String(c)]})},o.prototype.flattenItems=function(){var t=this;this.activeDisplayedItemsFlat=[];var e=function(r){r.forEach(function(n){!n.filterPasses||!n.available||(t.activeDisplayedItemsFlat.push(n),n.children&&n.expanded&&e(n.children))})};e(this.allDisplayedItemsTree)},o.prototype.resetFilter=function(){var t=function(e){e.children&&e.children.forEach(function(r){t(r)}),e.filterPasses=!0};this.allDisplayedItemsTree.forEach(function(e){return t(e)})},o.prototype.updateFilter=function(t,e){var r=this,n=function(i){return i.available?i.treeKey==null?e:t(r.formatter(r.treeListFormatter?r.treeListFormatter(i.treeKey,i.depth,i.parentTreeKeys):i.treeKey)):!1};this.allDisplayedItemsTree.forEach(function(i){return r.recursiveItemCheck(i,!1,n,"filterPasses")})},o.prototype.getDisplayedValueCount=function(){return this.activeDisplayedItemsFlat.length},o.prototype.getDisplayedItem=function(t){return this.activeDisplayedItemsFlat[t]},o.prototype.getSelectAllItem=function(){return this.selectAllItem},o.prototype.getDisplayedKeys=function(){var t=[];return this.forEachDisplayedKey(function(e){return t.push(e)}),t},o.prototype.forEachDisplayedKey=function(t){var e=function(r,n){r.children?(!r.expanded||!n)&&r.children.forEach(function(i){i.filterPasses&&e(i,!1)}):t(r.key)};this.activeDisplayedItemsFlat.forEach(function(r){return e(r,!0)})},o.prototype.someDisplayedKey=function(t){var e=function(r,n){if(r.children){if(!r.expanded||!n)return r.children.some(function(i){return i.filterPasses?e(i,!1):!1})}else return t(r.key);return!1};return this.activeDisplayedItemsFlat.some(function(r){return e(r,!0)})},o.prototype.hasGroups=function(){return this.groupsExist},o.prototype.refresh=function(){this.updateExpandAll(),this.flattenItems()},o.prototype.updateExpandAll=function(){var t=function(r,n,i){var a,s;try{for(var l=Ic(r),u=l.next();!u.done;u=l.next()){var c=u.value;if(!(!c.filterPasses||!c.available||!c.children)){if(n=n||!!c.expanded,i=i||!c.expanded,n&&i)return;var d=t(c.children,n,i);if(d===void 0)return;d?n=!0:i=!0}}}catch(h){a={error:h}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}return n&&i?void 0:n},e=this.getSelectAllItem();e.expanded=t(e.children,!1,!1)},o.prototype.recursiveItemCheck=function(t,e,r,n){var i=this,a=!1;t.children&&t.children.forEach(function(l){var u=i.recursiveItemCheck(l,e||r(t),r,n);a=a||u});var s=e||a||r(t);return t[n]=s,s},o.prototype.updateAvailable=function(t){var e=this,r=function(n){return t.has(n.key)};this.allDisplayedItemsTree.forEach(function(n){return e.recursiveItemCheck(n,!1,r,"available")})},o.DATE_TREE_LIST_PATH_GETTER=function(t){return t?[String(t.getFullYear()),String(t.getMonth()+1),String(t.getDate())]:null},o}(),di=function(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Ht;(function(o){o[o.PROVIDED_LIST=0]="PROVIDED_LIST",o[o.PROVIDED_CALLBACK=1]="PROVIDED_CALLBACK",o[o.TAKEN_FROM_GRID_VALUES=2]="TAKEN_FROM_GRID_VALUES"})(Ht||(Ht={}));var By=function(){function o(t){var e=this,r;this.localEventService=new Ev,this.miniFilterText=null,this.providedValues=null,this.allValues=new Map,this.availableKeys=new Set,this.selectedKeys=new Set,this.initialised=!1;var n=t.usingComplexObjects,i=t.columnModel,a=t.valueService,s=t.treeDataTreeList,l=t.groupingTreeList,u=t.filterParams,c=t.gridOptionsService,d=t.valueFormatterService,h=t.valueFormatter,f=u.column,p=u.colDef,v=u.textFormatter,g=u.doesRowPassOtherFilter,m=u.suppressSorting,y=u.comparator,S=u.rowModel,C=u.values,w=u.caseSensitive,x=u.convertValuesToStrings,b=u.treeList,_=u.treeListPathGetter,T=u.treeListFormatter;this.filterParams=u,this.setIsLoading=t.setIsLoading,this.translate=t.translate,this.caseFormat=t.caseFormat,this.createKey=t.createKey,this.usingComplexObjects=!!t.usingComplexObjects,this.formatter=v||fm.DEFAULT_FORMATTER,this.doesRowPassOtherFilters=g,this.suppressSorting=m||!1,this.convertValuesToStrings=!!x;var O=y??p.comparator,P=!!s||!!l;this.compareByValue=!!(n&&O||P||b&&!_),P&&!O?this.entryComparator=this.createTreeDataOrGroupingComparator():b&&!_&&!O?this.entryComparator=function(R,L){var F=di(R,2);F[0];var k=F[1],N=di(L,2);N[0];var G=N[1];return E.defaultComparator(k,G)}:this.entryComparator=function(R,L){var F=di(R,2);F[0];var k=F[1],N=di(L,2);N[0];var G=N[1];return O(k,G)},this.keyComparator=(r=O)!==null&&r!==void 0?r:E.defaultComparator,this.caseSensitive=!!w;var M=c.get("getDataPath"),I=c.is("groupAllowUnbalanced");S.getType()==="clientSide"&&(this.clientSideValuesExtractor=new dL(S,this.filterParams,this.createKey,this.caseFormat,i,a,P,!!s,M,I)),C==null?this.valuesType=Ht.TAKEN_FROM_GRID_VALUES:(this.valuesType=Array.isArray(C)?Ht.PROVIDED_LIST:Ht.PROVIDED_CALLBACK,this.providedValues=C),this.displayValueModel=b?new vL(this.formatter,_,T,s||l):new fL(d,h,this.formatter,f),this.updateAllValues().then(function(R){return e.resetSelectionState(R||[])})}return o.prototype.addEventListener=function(t,e,r){this.localEventService.addEventListener(t,e,r)},o.prototype.removeEventListener=function(t,e,r){this.localEventService.removeEventListener(t,e,r)},o.prototype.refreshValues=function(){var t=this.getModel();return this.updateAllValues(),this.setModel(t)},o.prototype.overrideValues=function(t){var e=this;return new $e(function(r){e.allValuesPromise.then(function(){e.valuesType=Ht.PROVIDED_LIST,e.providedValues=t,e.refreshValues().then(function(){return r()})})})},o.prototype.refreshAfterAnyFilterChanged=function(){var t=this;return this.showAvailableOnly()?this.allValuesPromise.then(function(e){return t.updateAvailableKeys(e??[],"otherFilter"),!0}):$e.resolve(!1)},o.prototype.isInitialised=function(){return this.initialised},o.prototype.updateAllValues=function(){var t=this;return this.allValuesPromise=new $e(function(e){switch(t.valuesType){case Ht.TAKEN_FROM_GRID_VALUES:case Ht.PROVIDED_LIST:{e(t.processAllKeys(t.valuesType===Ht.TAKEN_FROM_GRID_VALUES,t.providedValues));break}case Ht.PROVIDED_CALLBACK:{t.setIsLoading(!0);var r=t.providedValues,n=t.filterParams,i=n.columnApi,a=n.api,s=n.context,l=n.column,u=n.colDef,c={success:function(d){t.setIsLoading(!1),e(t.processAllKeys(!1,d))},colDef:u,column:l,columnApi:i,api:a,context:s};window.setTimeout(function(){return r(c)},0);break}default:throw new Error("Unrecognised valuesType")}}),this.allValuesPromise.then(function(e){return t.updateAvailableKeys(e||[],"reload")}).then(function(){return t.initialised=!0}),this.allValuesPromise},o.prototype.processAllKeys=function(t,e){var r=t?this.getValuesFromRows(!1):this.uniqueValues(this.validateProvidedValues(e)),n=this.sortKeys(r);return this.allValues=r??new Map,n},o.prototype.validateProvidedValues=function(t){if(this.usingComplexObjects&&(t!=null&&t.length)){var e=t[0];if(e&&typeof e!="object"&&typeof e!="function"){var r=this.createKey(e);r==null?E.doOnce(function(){return console.warn("Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects or set convertValuesToStrings=true in the filterParams. See https://www.ag-grid.com/javascript-data-grid/filter-set-filter-list/#filter-value-types")},"setFilterComplexObjectsProvidedNull"):E.doOnce(function(){return console.warn("AG Grid: Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects or enable convertValuesToStrings?")},"setFilterComplexObjectsProvidedPrimitive")}}return t},o.prototype.setValuesType=function(t){this.valuesType=t},o.prototype.getValuesType=function(){return this.valuesType},o.prototype.isKeyAvailable=function(t){return this.availableKeys.has(t)},o.prototype.showAvailableOnly=function(){return this.valuesType===Ht.TAKEN_FROM_GRID_VALUES},o.prototype.updateAvailableKeys=function(t,e){var r=this.showAvailableOnly()?this.sortKeys(this.getValuesFromRows(!0)):t;this.availableKeys=new Set(r),this.localEventService.dispatchEvent({type:o.EVENT_AVAILABLE_VALUES_CHANGED}),this.updateDisplayedValues(e,t)},o.prototype.sortKeys=function(t){var e=t??new Map;if(this.suppressSorting)return Array.from(e.keys());var r;return this.compareByValue?r=Array.from(e.entries()).sort(this.entryComparator).map(function(n){var i=di(n,1),a=i[0];return a}):r=Array.from(e.keys()).sort(this.keyComparator),this.filterParams.excelMode&&e.has(null)&&(r=r.filter(function(n){return n!=null}),r.push(null)),r},o.prototype.getValuesFromRows=function(t){var e=this;if(t===void 0&&(t=!1),!this.clientSideValuesExtractor)return console.error("AG Grid: Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values"),null;var r=function(n){return!t||e.doesRowPassOtherFilters(n)};return this.clientSideValuesExtractor.extractUniqueValues(r,t&&!this.caseSensitive?this.allValues:void 0)},o.prototype.setMiniFilter=function(t){return t=E.makeNull(t),this.miniFilterText===t?!1:(this.miniFilterText=t,this.updateDisplayedValues("miniFilter"),!0)},o.prototype.getMiniFilter=function(){return this.miniFilterText},o.prototype.updateDisplayedValues=function(t,e){var r=this;if(t==="expansion"){this.displayValueModel.refresh();return}if(this.miniFilterText==null){this.displayValueModel.updateDisplayedValuesToAllAvailable(function(s){return r.getValue(s)},e,this.availableKeys,t);return}var n=this.caseFormat(this.formatter(this.miniFilterText)||""),i=function(s){return s!=null&&r.caseFormat(s).indexOf(n)>=0},a=!!this.filterParams.excelMode&&i(this.translate("blanks"));this.displayValueModel.updateDisplayedValuesToMatchMiniFilter(function(s){return r.getValue(s)},e,this.availableKeys,i,a,t)},o.prototype.getDisplayedValueCount=function(){return this.displayValueModel.getDisplayedValueCount()},o.prototype.getDisplayedItem=function(t){return this.displayValueModel.getDisplayedItem(t)},o.prototype.getSelectAllItem=function(){return this.displayValueModel.getSelectAllItem()},o.prototype.hasSelections=function(){return this.filterParams.defaultToNothingSelected?this.selectedKeys.size>0:this.allValues.size!==this.selectedKeys.size},o.prototype.getKeys=function(){return Array.from(this.allValues.keys())},o.prototype.getValues=function(){return Array.from(this.allValues.values())},o.prototype.getValue=function(t){return this.allValues.get(t)},o.prototype.selectAllMatchingMiniFilter=function(t){var e=this;t===void 0&&(t=!1),this.miniFilterText==null?this.selectedKeys=new Set(this.allValues.keys()):(t&&this.selectedKeys.clear(),this.displayValueModel.forEachDisplayedKey(function(r){return e.selectedKeys.add(r)}))},o.prototype.deselectAllMatchingMiniFilter=function(){var t=this;this.miniFilterText==null?this.selectedKeys.clear():this.displayValueModel.forEachDisplayedKey(function(e){return t.selectedKeys.delete(e)})},o.prototype.selectKey=function(t){this.selectedKeys.add(t)},o.prototype.deselectKey=function(t){this.filterParams.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayValueModel.getDisplayedKeys()),this.selectedKeys.delete(t)},o.prototype.isKeySelected=function(t){return this.selectedKeys.has(t)},o.prototype.isEverythingVisibleSelected=function(){var t=this;return!this.displayValueModel.someDisplayedKey(function(e){return!t.isKeySelected(e)})},o.prototype.isNothingVisibleSelected=function(){var t=this;return!this.displayValueModel.someDisplayedKey(function(e){return t.isKeySelected(e)})},o.prototype.getModel=function(){return this.hasSelections()?Array.from(this.selectedKeys):null},o.prototype.setModel=function(t){var e=this;return this.allValuesPromise.then(function(r){if(t==null)e.resetSelectionState(r??[]);else{e.selectedKeys.clear();var n=new Map;e.allValues.forEach(function(i,a){n.set(e.caseFormat(a),a)}),t.forEach(function(i){var a=e.caseFormat(E.makeNull(i)),s=n.get(a);s!==void 0&&e.selectKey(s)})}})},o.prototype.uniqueValues=function(t){var e=this,r=new Map,n=new Set;return(t??[]).forEach(function(i){var a=E.makeNull(i),s=e.convertAndGetKey(a),l=e.caseFormat(s);n.has(l)||(n.add(l),r.set(s,a))}),r},o.prototype.convertAndGetKey=function(t){return this.convertValuesToStrings?t:this.createKey(t)},o.prototype.resetSelectionState=function(t){this.filterParams.defaultToNothingSelected?this.selectedKeys.clear():this.selectedKeys=new Set(t)},o.prototype.hasGroups=function(){return this.displayValueModel.hasGroups()},o.prototype.createTreeDataOrGroupingComparator=function(){return function(t,e){var r=di(t,2);r[0];var n=r[1],i=di(e,2);i[0];var a=i[1];if(n==null)return a==null?0:-1;if(a==null)return 1;for(var s=0;s<n.length;s++){if(s>=a.length)return 1;var l=E.defaultComparator(n[s],a[s]);if(l!==0)return l}return 0}},o.EVENT_AVAILABLE_VALUES_CHANGED="availableValuesChanged",o}(),gL=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),hi=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Lc=function(o){gL(t,o);function t(e){var r,n=o.call(this,e.isGroup?t.GROUP_TEMPLATE:t.TEMPLATE)||this;return n.focusWrapper=e.focusWrapper,n.value=e.value,n.params=e.params,n.translate=e.translate,n.valueFormatter=e.valueFormatter,n.item=e.item,n.isSelected=e.isSelected,n.isTree=e.isTree,n.depth=(r=e.depth)!==null&&r!==void 0?r:0,n.isGroup=e.isGroup,n.groupsExist=e.groupsExist,n.isExpanded=e.isExpanded,n.hasIndeterminateExpandState=e.hasIndeterminateExpandState,n}return t.prototype.init=function(){var e=this;this.addDestroyFunc(function(){var r;return(r=e.destroyCellRendererComponent)===null||r===void 0?void 0:r.call(e)}),this.render(),this.eCheckbox.setLabelEllipsis(!0),this.eCheckbox.setValue(this.isSelected,!0),this.eCheckbox.setDisabled(!!this.params.readOnly),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.refreshVariableAriaLabels(),this.isTree&&(this.depth>0&&this.addCssClass("ag-set-filter-indent-"+this.depth),this.isGroup?this.setupExpansion():this.groupsExist&&this.addCssClass("ag-set-filter-add-group-indent"),E.setAriaLevel(this.focusWrapper,this.depth+1)),!this.params.readOnly&&this.eCheckbox.onValueChange(function(r){return e.onCheckboxChanged(!!r)})},t.prototype.setupExpansion=function(){this.eGroupClosedIcon.appendChild(E.createIcon("setFilterGroupClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(E.createIcon("setFilterGroupOpen",this.gridOptionsService,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.hasIndeterminateExpandState&&(this.eGroupIndeterminateIcon.appendChild(E.createIcon("setFilterGroupIndeterminate",this.gridOptionsService,null)),this.addManagedListener(this.eGroupIndeterminateIcon,"click",this.onExpandOrContractClicked.bind(this))),this.setExpandedIcons(),this.refreshAriaExpanded()},t.prototype.onExpandOrContractClicked=function(){this.setExpanded(!this.isExpanded)},t.prototype.setExpanded=function(e,r){if(this.isGroup&&e!==this.isExpanded){this.isExpanded=e;var n={type:t.EVENT_EXPANDED_CHANGED,isExpanded:!!e,item:this.item};r||this.dispatchEvent(n),this.setExpandedIcons(),this.refreshAriaExpanded()}},t.prototype.refreshAriaExpanded=function(){E.setAriaExpanded(this.focusWrapper,!!this.isExpanded)},t.prototype.setExpandedIcons=function(){E.setDisplayed(this.eGroupClosedIcon,this.hasIndeterminateExpandState?this.isExpanded===!1:!this.isExpanded),E.setDisplayed(this.eGroupOpenedIcon,this.isExpanded===!0),this.hasIndeterminateExpandState&&E.setDisplayed(this.eGroupIndeterminateIcon,this.isExpanded===void 0)},t.prototype.onCheckboxChanged=function(e){this.isSelected=e;var r={type:t.EVENT_SELECTION_CHANGED,isSelected:e,item:this.item};this.dispatchEvent(r),this.refreshVariableAriaLabels()},t.prototype.toggleSelected=function(){this.params.readOnly||this.setSelected(!this.isSelected)},t.prototype.setSelected=function(e,r){this.isSelected=e,this.eCheckbox.setValue(this.isSelected,r)},t.prototype.refreshVariableAriaLabels=function(){if(this.isTree){var e=this.localeService.getLocaleTextFunc(),r=this.eCheckbox.getValue(),n=r===void 0?e("ariaIndeterminate","indeterminate"):r?e("ariaVisible","visible"):e("ariaHidden","hidden"),i=e("ariaToggleVisibility","Press SPACE to toggle visibility");E.setAriaLabelledBy(this.eCheckbox.getInputElement(),void 0),this.eCheckbox.setInputAriaLabel(i+" ("+n+")")}},t.prototype.setupFixedAriaLabels=function(e){if(this.isTree){var r=this.localeService.getLocaleTextFunc(),n=r("ariaFilterValue","Filter Value");E.setAriaLabel(this.focusWrapper,e+" "+n),E.setAriaDescribedBy(this.focusWrapper,this.eCheckbox.getInputElement().id)}},t.prototype.refresh=function(e,r,n){var i,a;if(this.item=e,r!==this.isSelected&&this.setSelected(r,!0),this.setExpanded(n,!0),this.valueFunction){var s=this.valueFunction();this.setTooltipAndCellRendererParams(s,s),this.cellRendererComponent||this.renderCellWithoutCellRenderer()}if(this.cellRendererComponent){var l=(a=(i=this.cellRendererComponent).refresh)===null||a===void 0?void 0:a.call(i,this.cellRendererParams);if(!l){var u=this.cellRendererComponent;this.renderCell(),this.destroyBean(u)}}},t.prototype.render=function(){var e=this.params.column,r=this.value,n=null;typeof r=="function"?(this.valueFunction=r,n=this.valueFunction(),r=n):this.isTree?n=E.toStringOrNull(r):n=this.getFormattedValue(e,r),this.setTooltipAndCellRendererParams(r,n),this.renderCell()},t.prototype.setTooltipAndCellRendererParams=function(e,r){if(this.params.showTooltips){var n=r??E.toStringOrNull(e);this.setTooltip(n)}this.cellRendererParams={value:e,valueFormatted:r,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,colDef:this.params.colDef,column:this.params.column}},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="setFilterValue",e.colDef=this.getComponentHolder(),this.isTree&&(e.level=this.depth),e},t.prototype.getFormattedValue=function(e,r){return this.valueFormatterService.formatValue(e,null,r,this.valueFormatter,!1)},t.prototype.renderCell=function(){var e=this,r=this.userComponentFactory.getSetFilterCellRendererDetails(this.params,this.cellRendererParams),n=r?r.newAgStackInstance():void 0;if(n==null){this.renderCellWithoutCellRenderer();return}n.then(function(i){i&&(e.cellRendererComponent=i,e.eCheckbox.setLabel(i.getGui()),e.destroyCellRendererComponent=function(){return e.destroyBean(i)})})},t.prototype.renderCellWithoutCellRenderer=function(){var e,r=(e=this.cellRendererParams.valueFormatted==null?this.cellRendererParams.value:this.cellRendererParams.valueFormatted)!==null&&e!==void 0?e:this.translate("blanks");typeof r!="string"&&(E.doOnce(function(){return console.warn("AG Grid: Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects, or set convertValuesToStrings=true in the filterParams. See https://www.ag-grid.com/javascript-data-grid/filter-set-filter-list/#filter-value-types")},"setFilterComplexObjectsValueFormatter"),r=""),this.eCheckbox.setLabel(r),this.setupFixedAriaLabels(r)},t.prototype.getComponentHolder=function(){return this.params.column.getColDef()},t.EVENT_SELECTION_CHANGED="selectionChanged",t.EVENT_EXPANDED_CHANGED="expandedChanged",t.GROUP_TEMPLATE=`
        <div class="ag-set-filter-item" aria-hidden="true">
            <span class="ag-set-filter-group-icons">
                <span class="ag-set-filter-group-closed-icon" ref="eGroupClosedIcon"></span>
                <span class="ag-set-filter-group-opened-icon" ref="eGroupOpenedIcon"></span>
                <span class="ag-set-filter-group-indeterminate-icon" ref="eGroupIndeterminateIcon"></span>
            </span>
            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>
        </div>`,t.TEMPLATE=`
        <div class="ag-set-filter-item">
            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>
        </div>`,hi([D("valueFormatterService")],t.prototype,"valueFormatterService",void 0),hi([D("userComponentFactory")],t.prototype,"userComponentFactory",void 0),hi([B("eCheckbox")],t.prototype,"eCheckbox",void 0),hi([B("eGroupOpenedIcon")],t.prototype,"eGroupOpenedIcon",void 0),hi([B("eGroupClosedIcon")],t.prototype,"eGroupClosedIcon",void 0),hi([B("eGroupIndeterminateIcon")],t.prototype,"eGroupIndeterminateIcon",void 0),hi([te],t.prototype,"init",null),t}(oe),yL={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",noMatches:"No matches."},Hy=function(){function o(){}return o.prototype.getModelAsString=function(t,e){var r=(t||e.getModel()||{}).values,n=e.getValueModel();if(r==null||n==null)return"";var i=r.filter(function(l){return n.isKeyAvailable(l)}),a=i.length,s=i.slice(0,10).map(function(l){return e.getFormattedValue(l)});return"("+a+") "+s.join(",")+(a>10?",...":"")},o}(),mL=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),fi=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},zy=function(o){mL(t,o);function t(){var e=o.call(this,"setFilter")||this;return e.valueModel=null,e.setFilterParams=null,e.virtualList=null,e.caseSensitive=!1,e.convertValuesToStrings=!1,e.treeDataTreeList=!1,e.groupingTreeList=!1,e.hardRefreshVirtualList=!1,e.noValueFormatterSupplied=!1,e.appliedModelKeys=null,e.noAppliedModelKeys=!1,e.filterModelFormatter=new Hy,e}return t.prototype.postConstruct=function(){o.prototype.postConstruct.call(this)},t.prototype.updateUiVisibility=function(){},t.prototype.createBodyTemplate=function(){return`
            <div class="ag-set-filter">
                <div ref="eFilterLoading" class="ag-filter-loading ag-hidden">`+this.translateForSetFilter("loadingOoo")+`</div>
                <ag-input-text-field class="ag-mini-filter" ref="eMiniFilter"></ag-input-text-field>
                <div ref="eFilterNoMatches" class="ag-filter-no-matches ag-hidden">`+this.translateForSetFilter("noMatches")+`</div>
                <div ref="eSetFilterList" class="ag-set-filter-list" role="presentation"></div>
            </div>`},t.prototype.handleKeyDown=function(e){if(o.prototype.handleKeyDown.call(this,e),!e.defaultPrevented)switch(e.key){case ve.SPACE:this.handleKeySpace(e);break;case ve.ENTER:this.handleKeyEnter(e);break;case ve.LEFT:this.handleKeyLeft(e);break;case ve.RIGHT:this.handleKeyRight(e);break}},t.prototype.handleKeySpace=function(e){var r;(r=this.getComponentForKeyEvent(e))===null||r===void 0||r.toggleSelected()},t.prototype.handleKeyEnter=function(e){if(this.setFilterParams){var r=this.setFilterParams||{},n=r.excelMode,i=r.readOnly;!n||i||(e.preventDefault(),this.onBtApply(!1,!1,e),this.setFilterParams.excelMode==="mac"&&this.eMiniFilter.getInputElement().select())}},t.prototype.handleKeyLeft=function(e){var r;(r=this.getComponentForKeyEvent(e))===null||r===void 0||r.setExpanded(!1)},t.prototype.handleKeyRight=function(e){var r;(r=this.getComponentForKeyEvent(e))===null||r===void 0||r.setExpanded(!0)},t.prototype.getComponentForKeyEvent=function(e){var r,n=this.gridOptionsService.getDocument();if(!(!this.eSetFilterList.contains(n.activeElement)||!this.virtualList)){var i=this.virtualList.getLastFocusedRow();if(i!=null){var a=this.virtualList.getComponentAt(i);if(a!=null){e.preventDefault();var s=((r=this.setFilterParams)!==null&&r!==void 0?r:{}).readOnly;if(!s)return a}}}},t.prototype.getCssIdentifier=function(){return"set-filter"},t.prototype.setModel=function(e){var r;return e==null&&((r=this.valueModel)===null||r===void 0?void 0:r.getModel())==null?(this.setMiniFilter(null),$e.resolve()):o.prototype.setModel.call(this,e)},t.prototype.setModelAndRefresh=function(e){var r=this;return this.valueModel?this.valueModel.setModel(e).then(function(){return r.refresh()}):$e.resolve()},t.prototype.resetUiToDefaults=function(){return this.setMiniFilter(null),this.setModelAndRefresh(null)},t.prototype.setModelIntoUi=function(e){this.setMiniFilter(null);var r=e==null?null:e.values;return this.setModelAndRefresh(r)},t.prototype.getModelFromUi=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.valueModel.getModel();return e?{values:e,filterType:this.getFilterType()}:null},t.prototype.getFilterType=function(){return"set"},t.prototype.getValueModel=function(){return this.valueModel},t.prototype.areModelsEqual=function(e,r){return e==null&&r==null?!0:e!=null&&r!=null&&E.areEqual(e.values,r.values)},t.prototype.setParams=function(e){var r=this,n;this.applyExcelModeOptions(e),o.prototype.setParams.call(this,e),this.setFilterParams=e,this.convertValuesToStrings=!!e.convertValuesToStrings,this.caseSensitive=!!e.caseSensitive;var i=(n=e.keyCreator)!==null&&n!==void 0?n:e.colDef.keyCreator;this.setValueFormatter(e.valueFormatter,i,this.convertValuesToStrings,!!e.treeList,!!e.colDef.refData);var a=e.column.getId().startsWith(Hc);this.treeDataTreeList=this.gridOptionsService.is("treeData")&&!!e.treeList&&a,this.getDataPath=this.gridOptionsService.get("getDataPath"),this.groupingTreeList=!!this.columnModel.getRowGroupColumns().length&&!!e.treeList&&a,this.createKey=this.generateCreateKey(i,this.convertValuesToStrings,this.treeDataTreeList||this.groupingTreeList),this.valueModel=new By({filterParams:e,setIsLoading:function(s){return r.setIsLoading(s)},valueFormatterService:this.valueFormatterService,translate:function(s){return r.translateForSetFilter(s)},caseFormat:function(s){return r.caseFormat(s)},createKey:this.createKey,valueFormatter:this.valueFormatter,usingComplexObjects:!!i,gridOptionsService:this.gridOptionsService,columnModel:this.columnModel,valueService:this.valueService,treeDataTreeList:this.treeDataTreeList,groupingTreeList:this.groupingTreeList}),this.initialiseFilterBodyUi(),this.addEventListenersForDataChanges()},t.prototype.setValueFormatter=function(e,r,n,i,a){var s=e;if(!s){if(r&&!n&&!i)throw new Error("AG Grid: Must supply a Value Formatter in Set Filter params when using a Key Creator unless convertValuesToStrings is enabled");this.noValueFormatterSupplied=!0,a||(s=function(l){return E.toStringOrNull(l.value)})}this.valueFormatter=s},t.prototype.generateCreateKey=function(e,r,n){var i=this;if(n&&!e)throw new Error("AG Grid: Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.");return e?function(a,s){s===void 0&&(s=null);var l=i.getKeyCreatorParams(a,s);return E.makeNull(e(l))}:r?function(a){return Array.isArray(a)?a:E.makeNull(E.toStringOrNull(a))}:function(a){return E.makeNull(E.toStringOrNull(a))}},t.prototype.getFormattedValue=function(e){var r,n=this.valueModel.getValue(e);this.noValueFormatterSupplied&&(this.treeDataTreeList||this.groupingTreeList)&&Array.isArray(n)&&(n=E.last(n));var i=this.valueFormatterService.formatValue(this.setFilterParams.column,null,n,this.valueFormatter,!1);return(r=i??E.toStringOrNull(n))!==null&&r!==void 0?r:this.translateForSetFilter("blanks")},t.prototype.applyExcelModeOptions=function(e){e.excelMode==="windows"?(e.buttons||(e.buttons=["apply","cancel"]),e.closeOnApply==null&&(e.closeOnApply=!0)):e.excelMode==="mac"&&(e.buttons||(e.buttons=["reset"]),e.applyMiniFilterWhileTyping==null&&(e.applyMiniFilterWhileTyping=!0),e.debounceMs==null&&(e.debounceMs=500)),e.excelMode&&e.defaultToNothingSelected&&(e.defaultToNothingSelected=!1,E.doOnce(function(){return console.warn('AG Grid: The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.')},"setFilterExcelModeDefaultToNothingSelect"))},t.prototype.addEventListenersForDataChanges=function(){var e=this;this.isValuesTakenFromGrid()&&this.addManagedListener(this.eventService,V.EVENT_CELL_VALUE_CHANGED,function(r){e.setFilterParams&&r.column===e.setFilterParams.column&&e.syncAfterDataChange()})},t.prototype.syncAfterDataChange=function(){var e=this;if(!this.valueModel)throw new Error("Value model has not been created.");var r=this.valueModel.refreshValues();return r.then(function(){e.refresh(),e.onBtApply(!1,!0)})},t.prototype.setIsLoading=function(e){E.setDisplayed(this.eFilterLoading,e),e||(this.hardRefreshVirtualList=!0)},t.prototype.initialiseFilterBodyUi=function(){this.initVirtualList(),this.initMiniFilter()},t.prototype.initVirtualList=function(){var e=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var r=this.localeService.getLocaleTextFunc(),n=r("ariaFilterList","Filter List"),i=!!this.setFilterParams.treeList,a=this.virtualList=this.createBean(new Rd({cssIdentifier:"filter",ariaRole:i?"tree":"listbox",listName:n})),s=this.getRefElement("eSetFilterList");i&&s.classList.add("ag-set-filter-tree-list"),s&&s.appendChild(a.getGui());var l=this.setFilterParams.cellHeight;l!=null&&a.setRowHeight(l);var u=function(h,f){return e.createSetListItem(h,i,f)};a.setComponentCreator(u);var c=function(h,f){return e.updateSetListItem(h,f)};a.setComponentUpdater(c);var d;this.setFilterParams.suppressSelectAll?d=new SL(this.valueModel):d=new CL(this.valueModel,function(){return e.isSelectAllSelected()}),i&&(d=new xL(d)),a.setModel(d)},t.prototype.getSelectAllLabel=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.valueModel.getMiniFilter()==null||!this.setFilterParams.excelMode?"selectAll":"selectAllSearchResults";return this.translateForSetFilter(e)},t.prototype.createSetListItem=function(e,r,n){var i=this,a,s,l,u,c,d;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var h=this.valueModel.hasGroups(),f,p,v,g,m,y;this.isSetFilterModelTreeItem(e)?(p=e.depth,e.key===Oi.SELECT_ALL?(f=function(){return i.getSelectAllLabel()},v=h,g=!0,m=function(_){return i.onSelectAll(_.isSelected)},y=function(_){return i.onExpandAll(_.item,_.isExpanded)}):e.children?(f=(l=(s=(a=this.setFilterParams).treeListFormatter)===null||s===void 0?void 0:s.call(a,e.treeKey,e.depth,e.parentTreeKeys))!==null&&l!==void 0?l:e.treeKey,v=!0,m=function(_){return i.onGroupItemSelected(_.item,_.isSelected)},y=function(_){return i.onExpandedChanged(_.item,_.isExpanded)}):(f=(d=(c=(u=this.setFilterParams).treeListFormatter)===null||c===void 0?void 0:c.call(u,e.treeKey,e.depth,e.parentTreeKeys))!==null&&d!==void 0?d:e.treeKey,m=function(_){return i.onItemSelected(_.item.key,_.isSelected)})):e===Oi.SELECT_ALL?(f=function(){return i.getSelectAllLabel()},m=function(_){return i.onSelectAll(_.isSelected)}):(f=this.valueModel.getValue(e),m=function(_){return i.onItemSelected(_.item,_.isSelected)});var S=this.isSelectedExpanded(e),C=S.isSelected,w=S.isExpanded,x={focusWrapper:n,value:f,params:this.setFilterParams,translate:function(_){return i.translateForSetFilter(_)},valueFormatter:this.valueFormatter,item:e,isSelected:C,isTree:r,depth:p,groupsExist:h,isGroup:v,isExpanded:w,hasIndeterminateExpandState:g},b=this.createBean(new Lc(x));return b.addEventListener(Lc.EVENT_SELECTION_CHANGED,m),y&&b.addEventListener(Lc.EVENT_EXPANDED_CHANGED,y),b},t.prototype.updateSetListItem=function(e,r){var n=this.isSelectedExpanded(e),i=n.isSelected,a=n.isExpanded;r.refresh(e,i,a)},t.prototype.isSelectedExpanded=function(e){var r,n;return this.isSetFilterModelTreeItem(e)?(n=e.expanded,e.key===Oi.SELECT_ALL?r=this.isSelectAllSelected():e.children?r=this.areAllChildrenSelected(e):r=this.valueModel.isKeySelected(e.key)):e===Oi.SELECT_ALL?r=this.isSelectAllSelected():r=this.valueModel.isKeySelected(e),{isSelected:r,isExpanded:n}},t.prototype.isSetFilterModelTreeItem=function(e){return(e==null?void 0:e.treeKey)!==void 0},t.prototype.initMiniFilter=function(){var e=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var r=this,n=r.eMiniFilter,i=r.localeService,a=i.getLocaleTextFunc();n.setDisplayed(!this.setFilterParams.suppressMiniFilter),n.setValue(this.valueModel.getMiniFilter()),n.onValueChange(function(){return e.onMiniFilterInput()}),n.setInputAriaLabel(a("ariaSearchFilterValues","Search filter values")),this.addManagedListener(n.getInputElement(),"keydown",function(s){return e.onMiniFilterKeyDown(s)})},t.prototype.afterGuiAttached=function(e){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");o.prototype.afterGuiAttached.call(this,e),this.resetExpansion(),this.refreshVirtualList();var r=this.eMiniFilter;r.setInputPlaceholder(this.translateForSetFilter("searchOoo")),(!e||!e.suppressFocus)&&r.getFocusableElement().focus()},t.prototype.afterGuiDetached=function(){var e,r;o.prototype.afterGuiDetached.call(this),!((e=this.setFilterParams)===null||e===void 0)&&e.excelMode&&this.resetMiniFilter();var n=this.getModel();(!((r=this.setFilterParams)===null||r===void 0)&&r.excelMode||!this.areModelsEqual(n,this.getModelFromUi()))&&(this.resetUiToActiveModel(n),this.showOrHideResults())},t.prototype.applyModel=function(e){var r=this;if(e===void 0&&(e="api"),!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");this.setFilterParams.excelMode&&e!=="rowDataUpdated"&&this.valueModel.isEverythingVisibleSelected()&&this.valueModel.selectAllMatchingMiniFilter();var n=o.prototype.applyModel.call(this,e),i=this.getModel();return i?(this.appliedModelKeys=new Set,i.values.forEach(function(a){r.appliedModelKeys.add(r.caseFormat(a))})):this.appliedModelKeys=null,this.noAppliedModelKeys=(i==null?void 0:i.values.length)===0,n},t.prototype.isModelValid=function(e){return this.setFilterParams&&this.setFilterParams.excelMode?e==null||e.values.length>0:!0},t.prototype.doesFilterPass=function(e){var r=this;if(!this.setFilterParams||!this.valueModel||!this.appliedModelKeys)return!0;if(this.noAppliedModelKeys)return!1;var n=e.node,i=e.data;if(this.treeDataTreeList)return this.doesFilterPassForTreeData(n,i);if(this.groupingTreeList)return this.doesFilterPassForGrouping(n,i);var a=this.getValueFromNode(n,i);return this.convertValuesToStrings?this.doesFilterPassForConvertValuesToString(n,a):a!=null&&Array.isArray(a)?a.length===0?this.appliedModelKeys.has(null):a.some(function(s){return r.isInAppliedModel(r.createKey(s,n))}):this.isInAppliedModel(this.createKey(a,n))},t.prototype.doesFilterPassForConvertValuesToString=function(e,r){var n=this,i=this.createKey(r,e);return i!=null&&Array.isArray(i)?i.length===0?this.appliedModelKeys.has(null):i.some(function(a){return n.isInAppliedModel(a)}):this.isInAppliedModel(i)},t.prototype.doesFilterPassForTreeData=function(e,r){var n;return!((n=e.childrenAfterGroup)===null||n===void 0)&&n.length?!1:this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(this.getDataPath(r))))},t.prototype.doesFilterPassForGrouping=function(e,r){var n=this,i=this.columnModel.getRowGroupColumns().map(function(a){return n.valueService.getKeyForNode(a,e)});return i.push(this.getValueFromNode(e,r)),this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(i)))},t.prototype.checkMakeNullDataPath=function(e){return e&&(e=e.map(function(r){return E.toStringOrNull(E.makeNull(r))})),e!=null&&e.some(function(r){return r==null})?null:e},t.prototype.isInAppliedModel=function(e){return this.appliedModelKeys.has(this.caseFormat(e))},t.prototype.getValueFromNode=function(e,r){var n=this.setFilterParams,i=n.valueGetter,a=n.api,s=n.colDef,l=n.column,u=n.columnApi,c=n.context;return i({api:a,colDef:s,column:l,columnApi:u,context:c,data:r,getValue:function(d){return r[d]},node:e})},t.prototype.getKeyCreatorParams=function(e,r){return r===void 0&&(r=null),{value:e,colDef:this.setFilterParams.colDef,column:this.setFilterParams.column,node:r,data:r==null?void 0:r.data,api:this.setFilterParams.api,columnApi:this.setFilterParams.columnApi,context:this.setFilterParams.context}},t.prototype.onNewRowsLoaded=function(){this.isValuesTakenFromGrid()&&this.syncAfterDataChange()},t.prototype.isValuesTakenFromGrid=function(){if(!this.valueModel)return!1;var e=this.valueModel.getValuesType();return e===Ht.TAKEN_FROM_GRID_VALUES},t.prototype.setFilterValues=function(e){var r=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.overrideValues(e).then(function(){r.refresh(),r.onUiChanged()})},t.prototype.resetFilterValues=function(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setValuesType(Ht.TAKEN_FROM_GRID_VALUES),this.syncAfterDataChange()},t.prototype.refreshFilterValues=function(){var e=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.isInitialised()&&this.valueModel.refreshValues().then(function(){e.refresh(),e.onUiChanged()})},t.prototype.onAnyFilterChanged=function(){var e=this;setTimeout(function(){if(e.isAlive()){if(!e.valueModel)throw new Error("Value model has not been created.");e.valueModel.refreshAfterAnyFilterChanged().then(function(r){r&&(e.refresh(),e.showOrHideResults())})}},0)},t.prototype.onMiniFilterInput=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");if(this.valueModel.setMiniFilter(this.eMiniFilter.getValue())){var e=this.setFilterParams||{},r=e.applyMiniFilterWhileTyping,n=e.readOnly;!n&&r?this.filterOnAllVisibleValues(!1):this.updateUiAfterMiniFilterChange()}},t.prototype.updateUiAfterMiniFilterChange=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.setFilterParams||{},r=e.excelMode,n=e.readOnly;r==null||n?this.refresh():this.valueModel.getMiniFilter()==null?this.resetUiToActiveModel(this.getModel()):(this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged()),this.showOrHideResults()},t.prototype.showOrHideResults=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.valueModel.getMiniFilter()!=null&&this.valueModel.getDisplayedValueCount()<1;E.setDisplayed(this.eNoMatches,e),E.setDisplayed(this.eSetFilterList,!e)},t.prototype.resetMiniFilter=function(){var e;this.eMiniFilter.setValue(null,!0),(e=this.valueModel)===null||e===void 0||e.setMiniFilter(null)},t.prototype.resetUiToActiveModel=function(e,r){var n=this;this.setModelAndRefresh(e==null?null:e.values).then(function(){n.onUiChanged(!1,"prevent"),r==null||r()})},t.prototype.handleCancelEnd=function(e){this.setMiniFilter(null),o.prototype.handleCancelEnd.call(this,e)},t.prototype.onMiniFilterKeyDown=function(e){var r=this.setFilterParams||{},n=r.excelMode,i=r.readOnly;e.key===ve.ENTER&&!n&&!i&&this.filterOnAllVisibleValues()},t.prototype.filterOnAllVisibleValues=function(e){e===void 0&&(e=!0);var r=(this.setFilterParams||{}).readOnly;if(!this.valueModel)throw new Error("Value model has not been created.");if(r)throw new Error("Unable to filter in readOnly mode.");this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged(!1,e?"immediately":"debounce"),this.showOrHideResults()},t.prototype.focusRowIfAlive=function(e){var r=this;e!=null&&window.setTimeout(function(){if(!r.virtualList)throw new Error("Virtual list has not been created.");r.isAlive()&&r.virtualList.focusRow(e)},0)},t.prototype.onSelectAll=function(e){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");e?this.valueModel.selectAllMatchingMiniFilter():this.valueModel.deselectAllMatchingMiniFilter(),this.refreshAfterSelection()},t.prototype.onGroupItemSelected=function(e,r){var n=this,i=function(a){a.children?a.children.forEach(function(s){return i(s)}):n.selectItem(a.key,r)};i(e),this.refreshAfterSelection()},t.prototype.onItemSelected=function(e,r){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");this.selectItem(e,r),this.refreshAfterSelection()},t.prototype.selectItem=function(e,r){r?this.valueModel.selectKey(e):this.valueModel.deselectKey(e)},t.prototype.onExpandAll=function(e,r){var n=function(i){i.filterPasses&&i.available&&i.children&&(i.children.forEach(function(a){return n(a)}),i.expanded=r)};n(e),this.refreshAfterExpansion()},t.prototype.onExpandedChanged=function(e,r){e.expanded=r,this.refreshAfterExpansion()},t.prototype.refreshAfterExpansion=function(){var e=this.virtualList.getLastFocusedRow();this.valueModel.updateDisplayedValues("expansion"),this.refresh(),this.focusRowIfAlive(e)},t.prototype.refreshAfterSelection=function(){var e=this.virtualList.getLastFocusedRow();this.refresh(),this.onUiChanged(),this.focusRowIfAlive(e)},t.prototype.setMiniFilter=function(e){this.eMiniFilter.setValue(e),this.onMiniFilterInput()},t.prototype.getMiniFilter=function(){return this.valueModel?this.valueModel.getMiniFilter():null},t.prototype.refresh=function(){if(!this.virtualList)throw new Error("Virtual list has not been created.");this.virtualList.refresh(!this.hardRefreshVirtualList),this.hardRefreshVirtualList&&(this.hardRefreshVirtualList=!1)},t.prototype.getFilterKeys=function(){return this.valueModel?this.valueModel.getKeys():[]},t.prototype.getFilterValues=function(){return this.valueModel?this.valueModel.getValues():[]},t.prototype.getValues=function(){return this.getFilterKeys()},t.prototype.refreshVirtualList=function(){this.setFilterParams&&this.setFilterParams.refreshValuesOnOpen?this.refreshFilterValues():this.refresh()},t.prototype.translateForSetFilter=function(e){var r=this.localeService.getLocaleTextFunc();return r(e,yL[e])},t.prototype.isSelectAllSelected=function(){if(!this.setFilterParams||!this.valueModel)return!1;if(this.setFilterParams.defaultToNothingSelected){if(this.valueModel.hasSelections()&&this.valueModel.isEverythingVisibleSelected())return!0;if(this.valueModel.isNothingVisibleSelected())return!1}else{if(this.valueModel.hasSelections()&&this.valueModel.isNothingVisibleSelected())return!1;if(this.valueModel.isEverythingVisibleSelected())return!0}},t.prototype.areAllChildrenSelected=function(e){var r=this,n=function(i){if(i.children){var a=!1,s=!1,l=i.children.some(function(u){if(!u.filterPasses||!u.available)return!1;var c=n(u);return c===void 0?!0:(c?a=!0:s=!0,a&&s)});return l?void 0:a}else return r.valueModel.isKeySelected(i.key)};return this.setFilterParams.defaultToNothingSelected?this.valueModel.hasSelections()&&n(e):n(e)},t.prototype.destroy=function(){this.virtualList!=null&&(this.virtualList.destroy(),this.virtualList=null),o.prototype.destroy.call(this)},t.prototype.caseFormat=function(e){return e==null||typeof e!="string"||this.caseSensitive?e:e.toUpperCase()},t.prototype.resetExpansion=function(){var e,r;if(!((e=this.setFilterParams)===null||e===void 0)&&e.treeList){var n=(r=this.valueModel)===null||r===void 0?void 0:r.getSelectAllItem();if(this.isSetFilterModelTreeItem(n)){var i=function(a){a.children&&(a.children.forEach(function(s){return i(s)}),a.expanded=!1)};i(n),this.valueModel.updateDisplayedValues("expansion")}}},t.prototype.getModelAsString=function(e){return this.filterModelFormatter.getModelAsString(e,this)},t.prototype.getPositionableElement=function(){return this.eSetFilterList},fi([B("eMiniFilter")],t.prototype,"eMiniFilter",void 0),fi([B("eFilterLoading")],t.prototype,"eFilterLoading",void 0),fi([B("eSetFilterList")],t.prototype,"eSetFilterList",void 0),fi([B("eFilterNoMatches")],t.prototype,"eNoMatches",void 0),fi([D("valueFormatterService")],t.prototype,"valueFormatterService",void 0),fi([D("columnModel")],t.prototype,"columnModel",void 0),fi([D("valueService")],t.prototype,"valueService",void 0),t}(Ov),SL=function(){function o(t){this.model=t}return o.prototype.getRowCount=function(){return this.model.getDisplayedValueCount()},o.prototype.getRow=function(t){return this.model.getDisplayedItem(t)},o.prototype.isRowSelected=function(t){return this.model.isKeySelected(this.getRow(t))},o.prototype.areRowsEqual=function(t,e){return t===e},o}(),CL=function(){function o(t,e){this.model=t,this.isSelectAllSelected=e}return o.prototype.getRowCount=function(){return this.model.getDisplayedValueCount()+1},o.prototype.getRow=function(t){return t===0?this.model.getSelectAllItem():this.model.getDisplayedItem(t-1)},o.prototype.isRowSelected=function(t){return t===0?this.isSelectAllSelected():this.model.isKeySelected(this.getRow(t))},o.prototype.areRowsEqual=function(t,e){return t===e},o}(),xL=function(){function o(t){this.model=t}return o.prototype.getRowCount=function(){return this.model.getRowCount()},o.prototype.getRow=function(t){return this.model.getRow(t)},o.prototype.areRowsEqual=function(t,e){return t==null&&e==null?!0:t!=null&&e!=null&&t.treeKey===e.treeKey&&t.depth===e.depth},o}(),wL=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),iv=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},bL=function(o){wL(t,o);function t(){var e=o.call(this,`
            <div class="ag-floating-filter-input ag-set-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`)||this;return e.availableValuesListenerAdded=!1,e.filterModelFormatter=new Hy,e}return t.prototype.destroy=function(){o.prototype.destroy.call(this)},t.prototype.init=function(e){var r=this;this.params=e,this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",function(){return r.params.showParentFilter()}),this.setParams(e)},t.prototype.setParams=function(e){var r=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),n=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setInputAriaLabel(r+" "+n("ariaFilterInput","Filter Input"))},t.prototype.onParamsUpdated=function(e){this.params=e,this.setParams(e)},t.prototype.onParentModelChanged=function(e){this.updateFloatingFilterText(e)},t.prototype.parentSetFilterInstance=function(e){this.params.parentFilterInstance(function(r){if(!(r instanceof zy))throw new Error("AG Grid - SetFloatingFilter expects SetFilter as its parent");e(r)})},t.prototype.addAvailableValuesListener=function(){var e=this;this.parentSetFilterInstance(function(r){var n=r.getValueModel();n&&e.addManagedListener(n,By.EVENT_AVAILABLE_VALUES_CHANGED,function(){return e.updateFloatingFilterText()})}),this.availableValuesListenerAdded=!0},t.prototype.updateFloatingFilterText=function(e){var r=this;this.availableValuesListenerAdded||this.addAvailableValuesListener(),this.parentSetFilterInstance(function(n){r.eFloatingFilterText.setValue(r.filterModelFormatter.getModelAsString(e,n))})},iv([B("eFloatingFilterText")],t.prototype,"eFloatingFilterText",void 0),iv([D("columnModel")],t.prototype,"columnModel",void 0),t}(oe),_L="30.1.0",OL={version:_L,moduleName:Ce.SetFilterModule,beans:[],userComponents:[{componentName:"agSetColumnFilter",componentClass:zy},{componentName:"agSetColumnFloatingFilter",componentClass:bL}],dependantModules:[lt]},EL=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),TL=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},PL=function(o){EL(t,o);function t(){var e=o.call(this)||this;return e.allComponents={},e}return t.prototype.registerStatusPanel=function(e,r){this.allComponents[e]=r},t.prototype.getStatusPanel=function(e){return this.allComponents[e]},t=TL([be("statusBarService")],t),t}(pe),AL=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_o=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},DL=function(o){AL(t,o);function t(){return o.call(this,t.TEMPLATE)||this}return t.prototype.postConstruct=function(){var e,r=(e=this.gridOptionsService.get("statusBar"))===null||e===void 0?void 0:e.statusPanels;if(r){var n=r.filter(function(s){return s.align==="left"});this.createAndRenderComponents(n,this.eStatusBarLeft);var i=r.filter(function(s){return s.align==="center"});this.createAndRenderComponents(i,this.eStatusBarCenter);var a=r.filter(function(s){return!s.align||s.align==="right"});this.createAndRenderComponents(a,this.eStatusBarRight)}else this.setDisplayed(!1)},t.prototype.createAndRenderComponents=function(e,r){var n=this,i=[];e.forEach(function(a){var s={},l=n.userComponentFactory.getStatusPanelCompDetails(a,s),u=l.newAgStackInstance();u&&i.push({key:a.key||a.statusPanel,promise:u})}),$e.all(i.map(function(a){return a.promise})).then(function(){i.forEach(function(a){a.promise.then(function(s){var l=function(){n.getContext().destroyBean(s)};n.isAlive()?(n.statusBarService.registerStatusPanel(a.key,s),r.appendChild(s.getGui()),n.addDestroyFunc(l)):l()})})})},t.TEMPLATE=`<div class="ag-status-bar">
            <div ref="eStatusBarLeft" class="ag-status-bar-left" role="status"></div>
            <div ref="eStatusBarCenter" class="ag-status-bar-center" role="status"></div>
            <div ref="eStatusBarRight" class="ag-status-bar-right" role="status"></div>
        </div>`,_o([D("userComponentFactory")],t.prototype,"userComponentFactory",void 0),_o([D("statusBarService")],t.prototype,"statusBarService",void 0),_o([B("eStatusBarLeft")],t.prototype,"eStatusBarLeft",void 0),_o([B("eStatusBarCenter")],t.prototype,"eStatusBarCenter",void 0),_o([B("eStatusBarRight")],t.prototype,"eStatusBarRight",void 0),_o([te],t.prototype,"postConstruct",null),t}(oe),ML=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ov=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},_s=function(o){ML(t,o);function t(){return o.call(this,t.TEMPLATE)||this}return t.prototype.setLabel=function(e,r){this.setDisplayed(!1);var n=this.localeService.getLocaleTextFunc();this.eLabel.innerHTML=n(e,r)},t.prototype.setValue=function(e){this.eValue.innerHTML=e},t.TEMPLATE=`<div class="ag-status-name-value">
            <span ref="eLabel"></span>:&nbsp;
            <span ref="eValue" class="ag-status-name-value-value"></span>
        </div>`,ov([B("eLabel")],t.prototype,"eLabel",void 0),ov([B("eValue")],t.prototype,"eValue",void 0),t}(oe),RL=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),av=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},IL=function(o){RL(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.postConstruct=function(){if(this.gridApi.getModel().getType()!=="clientSide"){console.warn("AG Grid: agTotalAndFilteredRowCountComponent should only be used with the client side row model.");return}this.setLabel("totalAndFilteredRows","Rows"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-and-filtered-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,V.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()},t.prototype.onDataChanged=function(){var e=this.localeService.getLocaleTextFunc(),r=e("thousandSeparator",","),n=e("decimalSeparator","."),i=E.formatNumberCommas(this.getFilteredRowCountValue(),r,n),a=E.formatNumberCommas(this.getTotalRowCount(),r,n);if(i===a)this.setValue(i);else{var s=this.localeService.getLocaleTextFunc();this.setValue(i+" "+s("of","of")+" "+a)}},t.prototype.getFilteredRowCountValue=function(){var e=0;return this.gridApi.forEachNodeAfterFilter(function(r){r.group||e++}),e},t.prototype.getTotalRowCount=function(){var e=0;return this.gridApi.forEachNode(function(r){r.group||e++}),e},t.prototype.init=function(){},t.prototype.destroy=function(){o.prototype.destroy.call(this)},av([D("gridApi")],t.prototype,"gridApi",void 0),av([te],t.prototype,"postConstruct",null),t}(_s),LL=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),sv=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},FL=function(o){LL(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.postConstruct=function(){if(this.setLabel("filteredRows","Filtered"),this.gridApi.getModel().getType()!=="clientSide"){console.warn("AG Grid: agFilteredRowCountComponent should only be used with the client side row model.");return}this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-filtered-row-count"),this.setDisplayed(!0);var e=this.onDataChanged.bind(this);this.addManagedListener(this.eventService,V.EVENT_MODEL_UPDATED,e),e()},t.prototype.onDataChanged=function(){var e=this.getTotalRowCountValue(),r=this.getFilteredRowCountValue(),n=this.localeService.getLocaleTextFunc(),i=n("thousandSeparator",","),a=n("decimalSeparator",".");this.setValue(E.formatNumberCommas(r,i,a)),this.setDisplayed(e!==r)},t.prototype.getTotalRowCountValue=function(){var e=0;return this.gridApi.forEachNode(function(r){return e+=1}),e},t.prototype.getFilteredRowCountValue=function(){var e=0;return this.gridApi.forEachNodeAfterFilter(function(r){r.group||(e+=1)}),e},t.prototype.init=function(){},t.prototype.destroy=function(){o.prototype.destroy.call(this)},sv([D("gridApi")],t.prototype,"gridApi",void 0),sv([te],t.prototype,"postConstruct",null),t}(_s),kL=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),lv=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},NL=function(o){kL(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.postConstruct=function(){if(this.setLabel("totalRows","Total Rows"),this.gridApi.getModel().getType()!=="clientSide"){console.warn("AG Grid: agTotalRowCountComponent should only be used with the client side row model.");return}this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,V.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()},t.prototype.onDataChanged=function(){var e=this.localeService.getLocaleTextFunc(),r=e("thousandSeparator",","),n=e("decimalSeparator",".");this.setValue(E.formatNumberCommas(this.getRowCountValue(),r,n))},t.prototype.getRowCountValue=function(){var e=0;return this.gridApi.forEachLeafNode(function(r){return e+=1}),e},t.prototype.init=function(){},t.prototype.destroy=function(){o.prototype.destroy.call(this)},lv([D("gridApi")],t.prototype,"gridApi",void 0),lv([te],t.prototype,"postConstruct",null),t}(_s),GL=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fc=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},VL=function(o){GL(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.postConstruct=function(){if(!this.isValidRowModel()){console.warn("AG Grid: agSelectedRowCountComponent should only be used with the client and server side row model.");return}this.setLabel("selectedRows","Selected"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-selected-row-count"),this.onRowSelectionChanged();var e=this.onRowSelectionChanged.bind(this);this.addManagedListener(this.eventService,V.EVENT_MODEL_UPDATED,e),this.addManagedListener(this.eventService,V.EVENT_SELECTION_CHANGED,e)},t.prototype.isValidRowModel=function(){var e=this.gridApi.getModel().getType();return e==="clientSide"||e==="serverSide"},t.prototype.onRowSelectionChanged=function(){var e=this.selectionService.getSelectionCount();if(e<0){this.setValue("?"),this.setDisplayed(!0);return}var r=this.localeService.getLocaleTextFunc(),n=r("thousandSeparator",","),i=r("decimalSeparator",".");this.setValue(E.formatNumberCommas(e,n,i)),this.setDisplayed(e>0)},t.prototype.init=function(){},t.prototype.destroy=function(){o.prototype.destroy.call(this)},Fc([D("gridApi")],t.prototype,"gridApi",void 0),Fc([D("selectionService")],t.prototype,"selectionService",void 0),Fc([te],t.prototype,"postConstruct",null),t}(_s),jL=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),jt=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},BL=function(o){jL(t,o);function t(){return o.call(this,t.TEMPLATE)||this}return t.prototype.destroy=function(){o.prototype.destroy.call(this)},t.prototype.postConstruct=function(){if(!this.isValidRowModel()){console.warn("AG Grid: agAggregationComponent should only be used with the client and server side row model.");return}this.avgAggregationComp.setLabel("avg","Average"),this.countAggregationComp.setLabel("count","Count"),this.minAggregationComp.setLabel("min","Min"),this.maxAggregationComp.setLabel("max","Max"),this.sumAggregationComp.setLabel("sum","Sum"),this.addManagedListener(this.eventService,V.EVENT_RANGE_SELECTION_CHANGED,this.onRangeSelectionChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_MODEL_UPDATED,this.onRangeSelectionChanged.bind(this))},t.prototype.isValidRowModel=function(){var e=this.gridApi.getModel().getType();return e==="clientSide"||e==="serverSide"},t.prototype.init=function(){},t.prototype.setAggregationComponentValue=function(e,r,n){var i=this.getAggregationValueComponent(e);if(E.exists(i)&&i){var a=this.localeService.getLocaleTextFunc(),s=a("thousandSeparator",","),l=a("decimalSeparator",".");i.setValue(E.formatNumberTwoDecimalPlacesAndCommas(r,s,l)),i.setDisplayed(n)}},t.prototype.getAggregationValueComponent=function(e){var r=e+"AggregationComp",n=null,i=this.gridOptionsService.get("statusBar"),a=E.exists(i)&&i?i.statusPanels.find(function(s){return s.statusPanel==="agAggregationComponent"}):null;return E.exists(a)&&a?(!E.exists(a.statusPanelParams)||E.exists(a.statusPanelParams)&&E.exists(a.statusPanelParams.aggFuncs)&&E.exists(a.statusPanelParams.aggFuncs.find(function(s){return s===e})))&&(n=this[r]):n=this[r],n},t.prototype.onRangeSelectionChanged=function(){var e=this,r=this.rangeService?this.rangeService.getCellRanges():void 0,n=0,i=0,a=0,s=null,l=null,u={};r&&!E.missingOrEmpty(r)&&r.forEach(function(h){for(var f=e.rangeService.getRangeStartRow(h),p=e.rangeService.getRangeEndRow(h);;){var v=E.missing(f)||!f||e.rowPositionUtils.before(p,f);if(v||!f||!h.columns)break;h.columns.forEach(function(g){if(f!==null){var m=e.cellPositionUtils.createId({rowPinned:f.rowPinned,column:g,rowIndex:f.rowIndex});if(!u[m]){u[m]=!0;var y=e.rowRenderer.getRowNode(f);if(!E.missing(y)){var S=e.valueService.getValue(g,y);E.missing(S)||S===""||(i++,!(typeof S=="object"&&"value"in S&&(S=S.value,S===""))&&(typeof S=="string"&&(S=Number(S)),typeof S=="number"&&!isNaN(S)&&(n+=S,(l===null||S>l)&&(l=S),(s===null||S<s)&&(s=S),a++)))}}}}),f=e.cellNavigationService.getRowBelow(f)}});var c=i>1,d=a>1;this.setAggregationComponentValue("count",i,c),this.setAggregationComponentValue("sum",n,d),this.setAggregationComponentValue("min",s,d),this.setAggregationComponentValue("max",l,d),this.setAggregationComponentValue("avg",n/a,d)},t.TEMPLATE=`<div class="ag-status-panel ag-status-panel-aggregations">
            <ag-name-value ref="avgAggregationComp"></ag-name-value>
            <ag-name-value ref="countAggregationComp"></ag-name-value>
            <ag-name-value ref="minAggregationComp"></ag-name-value>
            <ag-name-value ref="maxAggregationComp"></ag-name-value>
            <ag-name-value ref="sumAggregationComp"></ag-name-value>
        </div>`,jt([zr("rangeService")],t.prototype,"rangeService",void 0),jt([D("valueService")],t.prototype,"valueService",void 0),jt([D("cellNavigationService")],t.prototype,"cellNavigationService",void 0),jt([D("rowRenderer")],t.prototype,"rowRenderer",void 0),jt([D("gridApi")],t.prototype,"gridApi",void 0),jt([D("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),jt([D("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),jt([B("sumAggregationComp")],t.prototype,"sumAggregationComp",void 0),jt([B("countAggregationComp")],t.prototype,"countAggregationComp",void 0),jt([B("minAggregationComp")],t.prototype,"minAggregationComp",void 0),jt([B("maxAggregationComp")],t.prototype,"maxAggregationComp",void 0),jt([B("avgAggregationComp")],t.prototype,"avgAggregationComp",void 0),jt([te],t.prototype,"postConstruct",null),t}(oe),HL="30.1.0",zL={version:HL,moduleName:Ce.StatusBarModule,beans:[PL],agStackComponents:[{componentName:"AgStatusBar",componentClass:DL},{componentName:"AgNameValue",componentClass:_s}],userComponents:[{componentName:"agAggregationComponent",componentClass:BL},{componentName:"agSelectedRowCountComponent",componentClass:VL},{componentName:"agTotalRowCountComponent",componentClass:NL},{componentName:"agFilteredRowCountComponent",componentClass:FL},{componentName:"agTotalAndFilteredRowCountComponent",componentClass:IL}],dependantModules:[lt]},WL="30.1.0",UL=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Oo=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},KL=5,$L=5,XL=function(o){UL(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.firstRow=-1,e.lastRow=-1,e.rowCount=-1,e.rowNodesByIndex={},e}return t.prototype.ensureRowHeightsValid=function(e,r,n,i){return!1},t.prototype.init=function(){this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addManagedListener(this.eventService,V.EVENT_VIEWPORT_CHANGED,this.onViewportChanged.bind(this))},t.prototype.start=function(){this.gridOptionsService.get("viewportDatasource")&&this.setViewportDatasource(this.gridOptionsService.get("viewportDatasource"))},t.prototype.isLastRowIndexKnown=function(){return!0},t.prototype.destroyDatasource=function(){this.viewportDatasource&&(this.viewportDatasource.destroy&&this.viewportDatasource.destroy(),this.rowRenderer.datasourceChanged(),this.firstRow=-1,this.lastRow=-1)},t.prototype.getViewportRowModelPageSize=function(){return E.oneOrGreater(this.gridOptionsService.getNum("viewportRowModelPageSize"),KL)},t.prototype.getViewportRowModelBufferSize=function(){return E.zeroOrGreater(this.gridOptionsService.getNum("viewportRowModelBufferSize"),$L)},t.prototype.calculateFirstRow=function(e){var r=this.getViewportRowModelBufferSize(),n=this.getViewportRowModelPageSize(),i=e-r;return i<0?0:Math.floor(i/n)*n},t.prototype.calculateLastRow=function(e){if(e===-1)return e;var r=this.getViewportRowModelBufferSize(),n=this.getViewportRowModelPageSize(),i=e+r,a=Math.ceil(i/n)*n,s=this.rowCount-1;return Math.min(a,s)},t.prototype.onViewportChanged=function(e){var r=this.calculateFirstRow(e.firstRow),n=this.calculateLastRow(e.lastRow);(this.firstRow!==r||this.lastRow!==n)&&(this.firstRow=r,this.lastRow=n,this.purgeRowsNotInViewport(),this.viewportDatasource&&this.viewportDatasource.setViewportRange(this.firstRow,this.lastRow))},t.prototype.purgeRowsNotInViewport=function(){var e=this;Object.keys(this.rowNodesByIndex).forEach(function(r){var n=parseInt(r,10);if(n<e.firstRow||n>e.lastRow){if(e.isRowFocused(n))return;delete e.rowNodesByIndex[n]}})},t.prototype.isRowFocused=function(e){var r=this.focusService.getFocusCellToUseAfterRefresh();if(!r||r.rowPinned!=null)return!1;var n=r.rowIndex===e;return n},t.prototype.setViewportDatasource=function(e){this.destroyDatasource(),this.viewportDatasource=e,this.rowCount=-1,e.init?e.init({setRowCount:this.setRowCount.bind(this),setRowData:this.setRowData.bind(this),getRow:this.getRow.bind(this)}):console.warn("AG Grid: viewport is missing init method.")},t.prototype.getType=function(){return"viewport"},t.prototype.getRow=function(e){return this.rowNodesByIndex[e]||(this.rowNodesByIndex[e]=this.createBlankRowNode(e)),this.rowNodesByIndex[e]},t.prototype.getRowNode=function(e){var r;return this.forEachNode(function(n){n.id===e&&(r=n)}),r},t.prototype.getRowCount=function(){return this.rowCount===-1?0:this.rowCount},t.prototype.getRowIndexAtPixel=function(e){return this.rowHeight!==0?Math.floor(e/this.rowHeight):0},t.prototype.getRowBounds=function(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}},t.prototype.getTopLevelRowCount=function(){return this.getRowCount()},t.prototype.getTopLevelRowDisplayedIndex=function(e){return e},t.prototype.isEmpty=function(){return this.rowCount>0},t.prototype.isRowsToRender=function(){return this.rowCount>0},t.prototype.getNodesInRangeForSelection=function(e,r){var n=E.missing(e)?0:e.rowIndex,i=r.rowIndex,a=n<this.firstRow||n>this.lastRow,s=i<this.firstRow||i>this.lastRow;if(a||s)return[];for(var l=[],u=n<=i?n:i,c=n<=i?i:n,d=u;d<=c;d++)l.push(this.rowNodesByIndex[d]);return l},t.prototype.forEachNode=function(e){var r=this,n=0;Object.keys(this.rowNodesByIndex).forEach(function(i){var a=parseInt(i,10),s=r.rowNodesByIndex[a];e(s,n),n++})},t.prototype.setRowData=function(e){var r=this;E.iterateObject(e,function(n,i){var a=parseInt(n,10);if(a>=r.firstRow&&a<=r.lastRow){var s=r.rowNodesByIndex[a];E.missing(s)&&(s=r.createBlankRowNode(a),r.rowNodesByIndex[a]=s),s.setDataAndId(i,a.toString())}})},t.prototype.createBlankRowNode=function(e){var r=new Uo(this.beans);return r.setRowHeight(this.rowHeight),r.setRowTop(this.rowHeight*e),r.setRowIndex(e),r},t.prototype.setRowCount=function(e,r){if(r===void 0&&(r=!1),e!==this.rowCount){this.rowCount=e;var n={type:V.EVENT_MODEL_UPDATED,newData:!1,newPage:!1,keepRenderedRows:r,animate:!1};this.eventService.dispatchEvent(n)}},t.prototype.isRowPresent=function(e){var r=this.getRowNode(e.id);return!!r},Oo([D("rowRenderer")],t.prototype,"rowRenderer",void 0),Oo([D("focusService")],t.prototype,"focusService",void 0),Oo([D("beans")],t.prototype,"beans",void 0),Oo([te],t.prototype,"init",null),Oo([br],t.prototype,"destroyDatasource",null),t=Oo([be("rowModel")],t),t}(pe),YL={version:WL,moduleName:Ce.ViewportRowModelModule,rowModel:"viewport",beans:[XL],dependantModules:[lt]},qL=`
.ag-sparkline-tooltip-wrapper {
    position: absolute;
    user-select: none;
    pointer-events: none;
}

.ag-sparkline-tooltip {
    position: relative;
    font: 12px arial,sans-serif;
    border-radius: 2px;
    box-shadow: 0 1px 3px rgb(0 0 0 / 20%), 0 1px 1px rgb(0 0 0 / 14%);
    line-height: 1.7em;
    overflow: hidden;
    white-space: nowrap;
    z-index: 99999;
    background-color: rgb(255, 255, 255);
    color: rgba(0,0,0, 0.67);
}

.ag-sparkline-tooltip-content {
    padding: 0 7px;
    opacity: 1;
}

.ag-sparkline-tooltip-title {
    padding-left: 7px;
    opacity: 1;
}

.ag-sparkline-tooltip-wrapper-hidden {
    top: -10000px !important;
}

.ag-sparkline-wrapper {
    box-sizing: border-box;
    overflow: hidden;
}
`,ZL=function(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},JL=Xt,ja=Ot,QL=Hd,eF=Zv,uv=Dw,tF=gn,rF=Vl,kc=it,nF=Lt,cv=eh,Dt;(function(o){o[o.SERIES_FILL_ZINDEX=50]="SERIES_FILL_ZINDEX",o[o.AXIS_LINE_ZINDEX=500]="AXIS_LINE_ZINDEX",o[o.SERIES_STROKE_ZINDEX=1e3]="SERIES_STROKE_ZINDEX",o[o.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",o[o.CROSSHAIR_ZINDEX=2e3]="CROSSHAIR_ZINDEX",o[o.SERIES_MARKERS_ZINDEX=2500]="SERIES_MARKERS_ZINDEX"})(Dt||(Dt={}));var iF=function(){function o(){this.type="category",this.stroke="rgb(204, 214, 235)",this.strokeWidth=1}return o}(),vh=function(){function o(){this.id=tF(this),this.seriesRect={x:0,y:0,width:0,height:0},this._context=void 0,this._container=void 0,this._data=void 0,this.padding=new rF(3),this.xKey="x",this.yKey="y",this.dataType=void 0,this.xData=[],this.yData=[],this.min=void 0,this.max=void 0,this.yScale=new kc,this.axis=new iF,this.highlightStyle={size:6,fill:"yellow",stroke:"silver",strokeWidth:1},this._width=100,this._height=100,this.smallestInterval=void 0,this.layoutId=0,this.defaultDateFormatter=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),this._onMouseMove=this.onMouseMove.bind(this),this._onMouseOut=this.onMouseOut.bind(this);var t=new le;this.rootGroup=t;var e=document.createElement("div");e.setAttribute("class","ag-sparkline-wrapper");var r=new Bd({document});if(this.scene=r,this.canvasElement=r.canvas.element,r.root=t,r.container=e,r.resize(this.width,this.height),this.seriesRect.width=this.width,this.seriesRect.height=this.height,o.tooltipDocuments.indexOf(document)===-1){var n=document.createElement("style");n.innerHTML=qL,document.head.insertBefore(n,document.head.querySelector("style")),o.tooltipDocuments.push(document)}this.setupDomEventListeners(this.scene.canvas.element)}return Object.defineProperty(o.prototype,"context",{get:function(){return this._context},set:function(t){this._context!==t&&(this._context=t)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"container",{get:function(){return this._container},set:function(t){if(this._container!==t){var e=this.canvasElement.parentNode;e!=null&&e.removeChild(this.canvasElement),t&&t.appendChild(this.canvasElement),this._container=t}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"data",{get:function(){return this._data},set:function(t){this._data!==t&&(this._data=t,this.processData(),this.mouseMoveEvent&&this.highlightedDatum&&this.updateHitPoint(this.mouseMoveEvent))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"width",{get:function(){return this._width},set:function(t){this._width!==t&&(this._width=t,this.scene.resize(t,this.height),this.scheduleLayout())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this._height},set:function(t){this._height!==t&&(this._height=t,this.scene.resize(this.width,t),this.scheduleLayout())},enumerable:!1,configurable:!0}),o.prototype.update=function(){},o.prototype.updateYScale=function(){this.updateYScaleRange(),this.updateYScaleDomain()},o.prototype.updateYScaleDomain=function(){},o.prototype.updateYScaleRange=function(){var t=this,e=t.yScale,r=t.seriesRect;e.range=[r.height,0]},o.prototype.updateXScale=function(){var t=this.axis.type;this.xScale=this.getXScale(t),this.updateXScaleRange(),this.updateXScaleDomain()},o.prototype.updateXScaleRange=function(){this.xScale.range=[0,this.seriesRect.width]},o.prototype.updateXScaleDomain=function(){var t=this,e=t.xData,r=t.xScale,n;(r instanceof kc||r instanceof cv)&&(n=JL(e)),this.xScale.domain=n?n.slice():e},o.prototype.getXScale=function(t){switch(t===void 0&&(t="category"),t){case"number":return new kc;case"time":return new cv;case"category":default:return new nF}},o.prototype.updateAxisLine=function(){},o.prototype.updateAxes=function(){this.updateYScale(),this.updateXScale(),this.updateAxisLine()},o.prototype.updateCrosshairs=function(){this.updateXCrosshairLine(),this.updateYCrosshairLine()},o.prototype.generateNodeData=function(){return[]},o.prototype.getNodeData=function(){return[]},o.prototype.updateNodes=function(){},o.prototype.updateXCrosshairLine=function(){},o.prototype.updateYCrosshairLine=function(){},o.prototype.highlightDatum=function(t){this.updateNodes()},o.prototype.dehighlightDatum=function(){this.highlightedDatum=void 0,this.updateNodes(),this.updateCrosshairs()},o.prototype.onMouseMove=function(t){this.mouseMoveEvent=t,this.updateHitPoint(t)},o.prototype.updateHitPoint=function(t){var e,r,n,i=this.pickClosestSeriesNodeDatum(t.offsetX,t.offsetY);if(i){var a=this.highlightedDatum;this.highlightedDatum=i,(this.highlightedDatum&&!a||this.highlightedDatum&&a&&this.highlightedDatum!==a)&&(this.highlightDatum(i),this.updateCrosshairs(),this.scene.render().catch(function(l){return console.error("AG Grid - chart rendering failed",l)}));var s=(n=(r=(e=this.processedOptions)===null||e===void 0?void 0:e.tooltip)===null||r===void 0?void 0:r.enabled)!==null&&n!==void 0?n:!0;s&&this.handleTooltip(t,i)}},o.prototype.onMouseOut=function(t){this.dehighlightDatum(),this.tooltip.toggle(!1),this.scene.render().catch(function(e){return console.error("AG Grid - chart rendering failed",e)})},o.prototype.processData=function(){var t=this,e=this,r=e.data,n=e.yData,i=e.xData;if(!(!r||this.invalidData(this.data))){n.length=0,i.length=0;var a=r.length,s=this.getDataType(r);this.dataType=s;var l=this.axis.type,u=l!=="number"&&l!=="time"?"category":l,c=u==="number"||u==="time",d=function(x,b){t.smallestInterval==null&&(t.smallestInterval={x:1/0,y:1/0});var _=t.smallestInterval.x,T=Math.abs(x-b);T>0&&T<_&&(t.smallestInterval.x=T)},h;if(s==="number")for(var f=0;f<a;f++){var p=f,v=r[f],g=this.getDatum(p,u),m=this.getDatum(v,"number");c&&d(g,h),i.push(g),n.push(m),h=g}else if(s==="array")for(var f=0;f<a;f++){var y=r[f];if(Array.isArray(y)){var p=y[0],v=y[1],g=this.getDatum(p,u),m=this.getDatum(v,"number");if(g==null)continue;c&&d(g,h),i.push(g),n.push(m),h=g}}else if(s==="object")for(var S=this,C=S.yKey,w=S.xKey,f=0;f<a;f++){var y=r[f];if(typeof y=="object"&&!Array.isArray(y)){var p=y[w],v=y[C],g=this.getDatum(p,u),m=this.getDatum(v,"number");if(g==null)continue;c&&d(g,h),i.push(g),n.push(m),h=g}}this.updateAxes(),this.immediateLayout()}},o.prototype.getDataType=function(t){var e,r;try{for(var n=ZL(t),i=n.next();!i.done;i=n.next()){var a=i.value;if(a!=null){if(ja(a))return"number";if(Array.isArray(a))return"array";if(typeof a=="object")return"object"}}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},o.prototype.getDatum=function(t,e){if(e==="number"&&ja(t)||e==="time"&&(ja(t)||uv(t)))return t;if(e==="category"){if(QL(t)||uv(t)||ja(t))return{toString:function(){return String(t)}};if(eF(t))return t}},Object.defineProperty(o.prototype,"layoutScheduled",{get:function(){return!!this.layoutId},enumerable:!1,configurable:!0}),o.prototype.scheduleLayout=function(){var t=this;this.layoutId&&cancelAnimationFrame(this.layoutId),this.layoutId=requestAnimationFrame(function(){t.immediateLayout(),t.layoutId=0})},o.prototype.immediateLayout=function(){this.setSparklineDimensions(),!this.invalidData(this.data)&&(this.updateXScaleRange(),this.updateYScaleRange(),this.updateAxisLine(),this.update(),this.scene.render().catch(function(t){return console.error("AG Grid - chart rendering failed",t)}))},o.prototype.setSparklineDimensions=function(){var t=this,e=t.width,r=t.height,n=t.padding,i=t.seriesRect,a=t.rootGroup,s=e-n.left-n.right,l=r-n.top-n.bottom;i.width=s,i.height=l,i.x=n.left,i.y=n.top,a.translationX=i.x,a.translationY=i.y},o.prototype.pickClosestSeriesNodeDatum=function(t,e){for(var r=1/0,n,i=this.rootGroup.transformPoint(t,e),a=this.getNodeData(),s=0;s<a.length;s++){var l=a[s];if(!l.point)return;var u=this.getDistance(i,l.point);u<=r&&(r=u,n=l)}return n},o.prototype.getDistance=function(t,e){return Math.abs(t.x-e.x)},o.prototype.handleTooltip=function(t,e){var r,n,i=e.seriesDatum,a=this.canvasElement,s=t.clientX,l=t.clientY,u=(r=this.processedOptions)===null||r===void 0?void 0:r.tooltip,c={pageX:s,pageY:l,position:{xOffset:u==null?void 0:u.xOffset,yOffset:u==null?void 0:u.yOffset},container:u==null?void 0:u.container};c.container==null&&(c.container=a);var d=i.y,h=i.x,f=(n=u==null?void 0:u.enabled)!==null&&n!==void 0?n:!0,p=u==null?void 0:u.renderer;if(p){var v=p({context:this.context,datum:i,yValue:d,xValue:h});f=typeof v!="string"&&v.enabled!==void 0?v.enabled:f}var g=f&&i.y!==void 0&&this.getTooltipHtml(e);g&&this.tooltip.show(c,g)},o.prototype.formatNumericDatum=function(t){return String(Math.round(t*10)/10)},o.prototype.formatDatum=function(t){var e=this.axis.type||"category";return e==="number"&&typeof t=="number"?this.formatNumericDatum(t):e==="time"&&(t instanceof Date||ja(t))?this.defaultDateFormatter.format(t):String(t)},o.prototype.setupDomEventListeners=function(t){t.addEventListener("mousemove",this._onMouseMove),t.addEventListener("mouseout",this._onMouseOut)},o.prototype.cleanupDomEventListeners=function(t){t.removeEventListener("mousemove",this._onMouseMove),t.removeEventListener("mouseout",this._onMouseOut)},o.prototype.invalidData=function(t){return!t||!Array.isArray(t)||t.length===0},o.prototype.destroy=function(){this.scene.container=void 0,this.container=void 0,this.cleanupDomEventListeners(this.scene.canvas.element)},o.tooltipDocuments=[],o}();function ea(o,t){var e,r,n;if(typeof o=="string")return o;t=t??{};var i=o.content,a=i===void 0?(e=t.content)!==null&&e!==void 0?e:"":i,s=o.title,l=s===void 0?(r=t.title)!==null&&r!==void 0?r:void 0:s,u=o.color,c=u===void 0?t.color:u,d=o.backgroundColor,h=d===void 0?t.backgroundColor:d,f=o.opacity,p=f===void 0?(n=t.opacity)!==null&&n!==void 0?n:1:f,v,g;c?(v=l?'<span class="'+Po.class+'-title"; style="color: '+c+'">'+l+"</span>":"",g='<span class="'+Po.class+'-content" style="color: '+c+'">'+a+"</span>"):(v=l?'<span class="'+Po.class+'-title">'+l+"</span>":"",g='<span class="'+Po.class+'-content">'+a+"</span>");var m="opacity: "+p;return h&&(m+="; background-color: "+h.toLowerCase()),'<div class="'+Po.class+'" style="'+m+`">
                `+v+`
                `+g+`
            </div>`}var Po=function(){function o(){this.element=document.createElement("div");var t=document.body;t.appendChild(this.element)}return o.prototype.isVisible=function(){var t=this.element;if(t.classList)return!t.classList.contains(o.class+"-wrapper-hidden");var e=t.getAttribute("class");return e?e.split(" ").indexOf(o.class+"-wrapper-hidden")<0:!1},o.prototype.updateClass=function(t){var e=[o.class+"-wrapper"];t!==!0&&e.push(o.class+"-wrapper-hidden"),this.element.setAttribute("class",e.join(" "))},o.prototype.show=function(t,e){var r,n,i,a;this.toggle(!1);var s=this.element;if(e!==void 0)s.innerHTML=e;else if(!s.innerHTML)return;var l=(n=(r=t.position)===null||r===void 0?void 0:r.xOffset)!==null&&n!==void 0?n:10,u=(a=(i=t.position)===null||i===void 0?void 0:i.yOffset)!==null&&a!==void 0?a:0,c=t.pageX+l,d=t.pageY+u,h=s.getBoundingClientRect(),f=window.innerWidth-h.width;if(t.container){var p=t.container.getBoundingClientRect();f=p.left+(p.width-h.width)}c>f&&(c=t.pageX-s.clientWidth-l),typeof scrollX<"u"&&(c+=scrollX),typeof scrollY<"u"&&(d+=scrollY),s.style.left=Math.round(c)+"px",s.style.top=Math.round(d)+"px",this.toggle(!0)},o.prototype.toggle=function(t){this.updateClass(t)},o.prototype.destroy=function(){var t=this.element.parentNode;t&&t.removeChild(this.element)},o.class="ag-sparkline-tooltip",o}();function Wy(o){switch(o){case"circle":return us;case"square":return Qa;case"diamond":return Sg;default:return us}}function fu(o,t){t===void 0&&(t="solid");var e={solid:[],dash:[4,3],dot:[1,3],dashDot:[4,3,1,3],dashDotDot:[4,3,1,3,1,3],shortDot:[1,1],shortDash:[3,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],longDash:[8,3],longDashDot:[8,3,1,3],longDashDotDot:[8,3,1,3,1,3]},r={solid:[],dash:[3,3],dot:[0,3],dashDot:[3,3,0,3],dashDotDot:[3,3,0,3,0,3],shortDot:[0,2],shortDash:[2,2],shortDashDot:[2,2,0,2],shortDashDotDot:[2,2,0,2,0,2],longDash:[7,3],longDashDot:[7,3,0,3],longDashDotDot:[7,3,0,3,0,3]};return o==="round"||o==="square"?r[t]==null?(console.warn("'"+t+"' is not a valid 'lineDash' option."),r.solid):r[t]:e[t]==null?(console.warn("'"+t+"' is not a valid 'lineDash' option."),e.solid):e[t]}var oF=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),aF=Xt,sF=Lt,lF=function(){function o(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0}return o}(),uF=function(){function o(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1}return o}(),cF=function(){function o(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}}return o}(),dF=function(o){oF(t,o);function t(){var e=o.call(this)||this;return e.fill="rgba(124, 181, 236, 0.25)",e.strokePath=new It,e.fillPath=new It,e.xCrosshairLine=new nt,e.yCrosshairLine=new nt,e.areaSparklineGroup=new le,e.xAxisLine=new nt,e.markers=new le,e.markerSelection=Ge.select(e.markers,function(){return e.markerFactory()}),e.markerSelectionData=[],e.marker=new lF,e.line=new uF,e.crosshairs=new cF,e.rootGroup.append(e.areaSparklineGroup),e.xAxisLine.zIndex=Dt.AXIS_LINE_ZINDEX,e.fillPath.zIndex=Dt.SERIES_FILL_ZINDEX,e.strokePath.zIndex=Dt.SERIES_STROKE_ZINDEX,e.xCrosshairLine.zIndex=Dt.CROSSHAIR_ZINDEX,e.yCrosshairLine.zIndex=Dt.CROSSHAIR_ZINDEX,e.markers.zIndex=Dt.SERIES_MARKERS_ZINDEX,e.areaSparklineGroup.append([e.fillPath,e.xAxisLine,e.strokePath,e.xCrosshairLine,e.yCrosshairLine,e.markers]),e}return t.prototype.markerFactory=function(){var e=this.marker.shape,r=Wy(e);return new r},t.prototype.getNodeData=function(){return this.markerSelectionData},t.prototype.update=function(){var e=this.generateNodeData();if(e){var r=e.nodeData,n=e.fillData,i=e.strokeData;this.markerSelectionData=r,this.updateSelection(r),this.updateNodes(),this.updateStroke(i),this.updateFill(n)}},t.prototype.updateYScaleDomain=function(){var e=this,r=e.yData,n=e.yScale,i=aF(r),a=0,s=1;i!==void 0&&(a=this.min=i[0],s=this.max=i[1]),a=a<0?a:0,s=s<0?0:s,n.domain=[a,s]},t.prototype.generateNodeData=function(){var e=this,r=e.data,n=e.yData,i=e.xData,a=e.xScale,s=e.yScale;if(r){for(var l=!(a instanceof sF),u=l?0:a.bandwidth/2,c=n.length,d=[],h=[],f=[],p,v,g,m,y=s.convert(0),S=0;S<c;S++){var C=n[S],w=i[S],x=a.convert(l?a.toDomain(w):w)+u,b=C===void 0?NaN:s.convert(C);S+1<c&&(m=a.convert(l?a.toDomain(i[S+1]):i[S+1])+u),f.push({seriesDatum:{x:w,y:C},point:{x,y:b}}),C===void 0&&g!==void 0?(h.push({seriesDatum:void 0,point:{x:g,y}}),m!==void 0&&h.push({seriesDatum:void 0,point:{x:m,y}})):C!==void 0&&(h.push({seriesDatum:{x:w,y:C},point:{x,y:b}}),d.push({seriesDatum:{x:w,y:C},point:{x,y:b}}),p=p!==void 0?p:x,v=x),g=x}return h.push({seriesDatum:void 0,point:{x:v,y}},{seriesDatum:void 0,point:{x:p,y}}),{nodeData:d,fillData:h,strokeData:f}}},t.prototype.updateAxisLine=function(){var e=this,r=e.xScale,n=e.yScale,i=e.axis,a=e.xAxisLine;a.x1=r.range[0],a.x2=r.range[1],a.y1=a.y2=0,a.stroke=i.stroke,a.strokeWidth=i.strokeWidth;var s=n.convert(0);a.translationY=s},t.prototype.updateSelection=function(e){this.markerSelection.update(e)},t.prototype.updateNodes=function(){var e=this,r=this,n=r.highlightedDatum,i=r.highlightStyle,a=r.marker,s=i.size,l=i.fill,u=i.stroke,c=i.strokeWidth,d=a.formatter;this.markerSelection.each(function(h,f,p){var v=f.point,g=f.seriesDatum;if(v){var m=f===n,y=m&&l!==void 0?l:a.fill,S=m&&u!==void 0?u:a.stroke,C=m&&c!==void 0?c:a.strokeWidth,w=m&&s!==void 0?s:a.size,x;if(d){var b=p===0,_=p===e.markerSelectionData.length-1,T=g.y===e.min,O=g.y===e.max;x=d({datum:f,xValue:g.x,yValue:g.y,min:T,max:O,first:b,last:_,fill:y,stroke:S,strokeWidth:C,size:w,highlighted:m})}h.size=x&&x.size!=null?x.size:w,h.fill=x&&x.fill!=null?x.fill:y,h.stroke=x&&x.stroke!=null?x.stroke:S,h.strokeWidth=x&&x.strokeWidth!=null?x.strokeWidth:C,h.translationX=v.x,h.translationY=v.y,h.visible=x&&x.enabled!=null?x.enabled:a.enabled&&h.size>0}})},t.prototype.updateStroke=function(e){var r=this,n=r.strokePath,i=r.yData,a=r.line;if(!(i.length<2)){var s=n.path,l=e.length,u=!0;s.clear();for(var c=0;c<l;c++){var d=e[c],h=d.point,f=d.seriesDatum,p=h.x,v=h.y;f.y==null?u=!0:u?(s.moveTo(p,v),u=!1):s.lineTo(p,v)}n.lineJoin=n.lineCap="round",n.fill=void 0,n.stroke=a.stroke,n.strokeWidth=a.strokeWidth}},t.prototype.updateFill=function(e){var r=this,n=r.fillPath,i=r.yData,a=r.fill,s=n.path,l=e.length;if(s.clear(),!(i.length<2)){for(var u=0;u<l;u++){var c=e[u].point,d=c.x,h=c.y;u>0?s.lineTo(d,h):s.moveTo(d,h)}s.closePath(),n.lineJoin="round",n.stroke=void 0,n.fill=a}},t.prototype.updateXCrosshairLine=function(){var e,r=this,n=r.yScale,i=r.xCrosshairLine,a=r.highlightedDatum,s=r.crosshairs.xLine;if(!s.enabled||a==null){i.strokeWidth=0;return}i.y1=n.range[0],i.y2=n.range[1],i.x1=i.x2=0,i.stroke=s.stroke,i.strokeWidth=(e=s.strokeWidth)!==null&&e!==void 0?e:1,i.lineCap=s.lineCap==="round"||s.lineCap==="square"?s.lineCap:void 0;var l=s.lineDash;i.lineDash=Array.isArray(l)?l:fu(i.lineCap,s.lineDash),i.translationX=a.point.x},t.prototype.updateYCrosshairLine=function(){var e,r=this,n=r.xScale,i=r.yCrosshairLine,a=r.highlightedDatum,s=r.crosshairs.yLine;if(!s.enabled||a==null){i.strokeWidth=0;return}i.x1=n.range[0],i.x2=n.range[1],i.y1=i.y2=0,i.stroke=s.stroke,i.strokeWidth=(e=s.strokeWidth)!==null&&e!==void 0?e:1,i.lineCap=s.lineCap==="round"||s.lineCap==="square"?s.lineCap:void 0;var l=s.lineDash;i.lineDash=Array.isArray(l)?l:fu(i.lineCap,s.lineDash),i.translationY=a.point.y},t.prototype.getTooltipHtml=function(e){var r,n,i=this.dataType,a=e.seriesDatum,s=a.y,l=a.x,u=this.formatNumericDatum(s),c=i==="array"||i==="object"?this.formatDatum(l):void 0,d={content:u,title:c},h=(n=(r=this.processedOptions)===null||r===void 0?void 0:r.tooltip)===null||n===void 0?void 0:n.renderer;return h?ea(h({context:this.context,datum:a,yValue:s,xValue:l}),d):ea(d)},t.className="AreaSparkline",t}(vh),hF=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),fF=Xt,dv=Lt,pF=function(){function o(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0}return o}(),vF=function(){function o(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1}return o}(),gF=function(){function o(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}}return o}(),yF=function(o){hF(t,o);function t(){var e=o.call(this)||this;return e.linePath=new It,e.xCrosshairLine=new nt,e.yCrosshairLine=new nt,e.lineSparklineGroup=new le,e.markers=new le,e.markerSelection=Ge.select(e.markers,function(){return e.markerFactory()}),e.markerSelectionData=[],e.marker=new pF,e.line=new vF,e.crosshairs=new gF,e.rootGroup.append(e.lineSparklineGroup),e.linePath.zIndex=Dt.SERIES_STROKE_ZINDEX,e.xCrosshairLine.zIndex=Dt.CROSSHAIR_ZINDEX,e.yCrosshairLine.zIndex=Dt.CROSSHAIR_ZINDEX,e.markers.zIndex=Dt.SERIES_MARKERS_ZINDEX,e.lineSparklineGroup.append([e.linePath,e.xCrosshairLine,e.yCrosshairLine,e.markers]),e}return t.prototype.getNodeData=function(){return this.markerSelectionData},t.prototype.markerFactory=function(){var e=this.marker.shape,r=Wy(e);return new r},t.prototype.onMarkerShapeChange=function(){this.markerSelection=this.markerSelection.clear(),this.scheduleLayout()},t.prototype.update=function(){var e=this.generateNodeData();e&&(this.markerSelectionData=e,this.updateSelection(e),this.updateNodes(),this.updateLine())},t.prototype.updateYScaleDomain=function(){var e=this,r=e.yData,n=e.yScale,i=fF(r),a=0,s=1;if(i!==void 0&&(a=this.min=i[0],s=this.max=i[1]),a===s){var l=Math.abs(a*.01);a-=l,s+=l}n.domain=[a,s]},t.prototype.generateNodeData=function(){var e=this,r=e.data,n=e.yData,i=e.xData,a=e.xScale,s=e.yScale;if(r){for(var l=!(a instanceof dv),u=l?0:a.bandwidth/2,c=[],d=0;d<n.length;d++){var h=n[d],f=i[d];if(h!=null){var p=a.convert(l?a.toDomain(f):f)+u,v=h===void 0?NaN:s.convert(h);c.push({seriesDatum:{x:f,y:h},point:{x:p,y:v}})}}return c}},t.prototype.updateSelection=function(e){this.markerSelection.update(e)},t.prototype.updateNodes=function(){var e=this,r=this,n=r.highlightedDatum,i=r.highlightStyle,a=r.marker,s=i.size,l=i.fill,u=i.stroke,c=i.strokeWidth,d=a.formatter;this.markerSelection.each(function(h,f,p){var v=f===n,g=v&&l!==void 0?l:a.fill,m=v&&u!==void 0?u:a.stroke,y=v&&c!==void 0?c:a.strokeWidth,S=v&&s!==void 0?s:a.size,C,w=f.seriesDatum,x=f.point;if(d){var b=p===0,_=p===e.markerSelectionData.length-1,T=w.y===e.min,O=w.y===e.max;C=d({datum:f,xValue:w.x,yValue:w.y,min:T,max:O,first:b,last:_,fill:g,stroke:m,strokeWidth:y,size:S,highlighted:v})}h.size=C&&C.size!=null?C.size:S,h.fill=C&&C.fill!=null?C.fill:g,h.stroke=C&&C.stroke!=null?C.stroke:m,h.strokeWidth=C&&C.strokeWidth!=null?C.strokeWidth:y,h.translationX=x.x,h.translationY=x.y,h.visible=C&&C.enabled!=null?C.enabled:a.enabled&&h.size>0})},t.prototype.updateLine=function(){var e=this,r=e.linePath,n=e.yData,i=e.xData,a=e.xScale,s=e.yScale,l=e.line;if(!(n.length<2)){var u=!(a instanceof dv),c=r.path,d=n.length,h=u?0:a.bandwidth/2,f=!0;c.clear();for(var p=0;p<d;p++){var v=i[p],g=n[p],m=a.convert(u?a.toDomain(v):v)+h,y=g===void 0?NaN:s.convert(g);g==null?f=!0:f?(c.moveTo(m,y),f=!1):c.lineTo(m,y)}r.fill=void 0,r.stroke=l.stroke,r.strokeWidth=l.strokeWidth}},t.prototype.updateXCrosshairLine=function(){var e,r=this,n=r.yScale,i=r.xCrosshairLine,a=r.highlightedDatum,s=r.crosshairs.xLine;if(!s.enabled||a==null){i.strokeWidth=0;return}i.y1=n.range[0],i.y2=n.range[1],i.x1=i.x2=0,i.stroke=s.stroke,i.strokeWidth=(e=s.strokeWidth)!==null&&e!==void 0?e:1,i.lineCap=s.lineCap==="round"||s.lineCap==="square"?s.lineCap:void 0;var l=s.lineDash;i.lineDash=Array.isArray(l)?l:fu(i.lineCap,s.lineDash),i.translationX=a.point.x},t.prototype.updateYCrosshairLine=function(){var e,r=this,n=r.xScale,i=r.yCrosshairLine,a=r.highlightedDatum,s=r.crosshairs.yLine;if(!s.enabled||a==null){i.strokeWidth=0;return}i.x1=n.range[0],i.x2=n.range[1],i.y1=i.y2=0,i.stroke=s.stroke,i.strokeWidth=(e=s.strokeWidth)!==null&&e!==void 0?e:1,i.lineCap=s.lineCap==="round"||s.lineCap==="square"?s.lineCap:void 0;var l=s.lineDash;i.lineDash=Array.isArray(l)?l:fu(i.lineCap,s.lineDash),i.translationY=a.point.y},t.prototype.getTooltipHtml=function(e){var r,n,i=this.dataType,a=e.seriesDatum,s=a.y,l=a.x,u=this.formatNumericDatum(s),c=i==="array"||i==="object"?this.formatDatum(l):void 0,d={content:u,title:c},h=(n=(r=this.processedOptions)===null||r===void 0?void 0:r.tooltip)===null||n===void 0?void 0:n.renderer;return h?ea(h({context:this.context,datum:a,yValue:s,xValue:l}),d):ea(d)},t.className="LineSparkline",t}(vh),mF=function(){function o(){this.enabled=!0,this.fontSize=8,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"}return o}(),Uy=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),SF=Xt,Td;(function(o){o[o.Rect=0]="Rect",o[o.Label=1]="Label"})(Td||(Td={}));var pn;(function(o){o.InsideBase="insideBase",o.InsideEnd="insideEnd",o.Center="center",o.OutsideEnd="outsideEnd"})(pn||(pn={}));var CF=function(o){Uy(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.formatter=void 0,e.placement=pn.InsideEnd,e}return t}(mF),Ky=function(o){Uy(t,o);function t(){var e=o.call(this)||this;return e.fill="rgb(124, 181, 236)",e.stroke="silver",e.strokeWidth=0,e.paddingInner=.1,e.paddingOuter=.2,e.valueAxisDomain=void 0,e.formatter=void 0,e.axisLine=new nt,e.bandWidth=0,e.sparklineGroup=new le,e.rectGroup=new le,e.labelGroup=new le,e.rectSelection=Ge.select(e.rectGroup,wr),e.labelSelection=Ge.select(e.labelGroup,Me),e.nodeSelectionData=[],e.label=new CF,e.rootGroup.append(e.sparklineGroup),e.rectGroup.zIndex=Dt.SERIES_FILL_ZINDEX,e.axisLine.zIndex=Dt.AXIS_LINE_ZINDEX,e.labelGroup.zIndex=Dt.SERIES_LABEL_ZINDEX,e.sparklineGroup.append([e.rectGroup,e.axisLine,e.labelGroup]),e.axisLine.lineCap="round",e.label.enabled=!1,e}return t.prototype.getNodeData=function(){return this.nodeSelectionData},t.prototype.update=function(){this.updateSelections(),this.updateNodes()},t.prototype.updateSelections=function(){var e=this.generateNodeData();e&&(this.nodeSelectionData=e,this.updateRectSelection(e),this.updateLabelSelection(e))},t.prototype.updateNodes=function(){this.updateRectNodes(),this.updateLabelNodes()},t.prototype.calculateStep=function(e){var r,n=this,i=n.xScale,a=n.paddingInner,s=n.paddingOuter,l=n.smallestInterval,u=i.domain[1]-i.domain[0],c=u/((r=l==null?void 0:l.x)!==null&&r!==void 0?r:1)+1,d=50,h=Math.min(c,d),f=h-1,p=e/Math.max(1,2*s+f*a+h);return p},t.prototype.updateYScaleDomain=function(){var e=this,r=e.yScale,n=e.yData,i=e.valueAxisDomain,a=SF(n),s=0,l=1;a!==void 0&&(s=this.min=a[0],l=this.max=a[1]),s=s<0?s:0,l=l<0?0:l,i&&(i[1]<l&&(i[1]=l),i[0]>s&&(i[0]=s)),r.domain=i||[s,l]},t.prototype.updateRectSelection=function(e){this.rectSelection.update(e)},t.prototype.updateRectNodes=function(){var e=this,r=this,n=r.highlightedDatum,i=r.formatter,a=r.fill,s=r.stroke,l=r.strokeWidth,u=this.highlightStyle,c=u.fill,d=u.stroke,h=u.strokeWidth;this.rectSelection.each(function(f,p,v){var g=p===n,m=g&&c!==void 0?c:a,y=g&&d!==void 0?d:s,S=g&&h!==void 0?h:l,C,w=p.x,x=p.y,b=p.width,_=p.height,T=p.seriesDatum;if(i){var O=v===0,P=v===e.nodeSelectionData.length-1,M=T.y===e.min,I=T.y===e.max;C=i({datum:p,xValue:T.x,yValue:T.y,width:b,height:_,min:M,max:I,first:O,last:P,fill:m,stroke:y,strokeWidth:S,highlighted:g})}f.fill=C&&C.fill||m,f.stroke=C&&C.stroke||y,f.strokeWidth=C&&C.strokeWidth||S,f.x=f.y=0,f.width=b,f.height=_,f.visible=f.height>0,f.translationX=w,f.translationY=x})},t.prototype.updateLabelSelection=function(e){this.labelSelection.update(e,function(r){r.tag=Td.Label,r.pointerEvents=_t.None})},t.prototype.updateLabelNodes=function(){var e=this.label,r=e.enabled,n=e.fontStyle,i=e.fontWeight,a=e.fontSize,s=e.fontFamily,l=e.color;this.labelSelection.each(function(u,c){var d=c.label;d&&r?(u.fontStyle=n,u.fontWeight=i,u.fontSize=a,u.fontFamily=s,u.textAlign=d.textAlign,u.textBaseline=d.textBaseline,u.text=d.text,u.x=d.x,u.y=d.y,u.fill=l,u.visible=!0):u.visible=!1})},t.prototype.getTooltipHtml=function(e){var r,n,i=this.dataType,a=e.seriesDatum,s=a.y,l=a.x,u=this.formatNumericDatum(s),c=i==="array"||i==="object"?this.formatDatum(l):void 0,d={content:u,title:c},h=(n=(r=this.processedOptions)===null||r===void 0?void 0:r.tooltip)===null||n===void 0?void 0:n.renderer;return h?ea(h({context:this.context,datum:a,yValue:s,xValue:l}),d):ea(d)},t.prototype.formatLabelValue=function(e){return e%1!==0?e.toFixed(1):e.toFixed(0)},t}(vh),xF=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),wF=Ot,hv=Lt,bF=function(o){xF(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.updateYScaleRange=function(){var e=this,r=e.seriesRect,n=e.yScale;n.range=[0,r.width]},t.prototype.updateXScaleRange=function(){var e=this,r=e.xScale,n=e.seriesRect,i=e.paddingOuter,a=e.paddingInner;if(r instanceof hv)r.range=[0,n.height],r.paddingInner=a,r.paddingOuter=i;else{var s=this.calculateStep(n.height),l=s*i;this.bandWidth=s*(1-a),r.range=[l,n.height-l-this.bandWidth]}},t.prototype.updateAxisLine=function(){var e=this,r=e.yScale,n=e.axis,i=e.axisLine,a=e.seriesRect,s=n.strokeWidth;i.x1=0,i.x2=0,i.y1=0,i.y2=a.height,i.stroke=n.stroke,i.strokeWidth=s+(s%2===1?1:0);var l=r.convert(0);i.translationX=l},t.prototype.generateNodeData=function(){var e=this,r=e.data,n=e.yData,i=e.xData,a=e.xScale,s=e.yScale,l=e.fill,u=e.stroke,c=e.strokeWidth,d=e.label;if(r){for(var h=d.fontStyle,f=d.fontWeight,p=d.fontSize,v=d.fontFamily,g=d.color,m=d.formatter,y=d.placement,S=[],C=s.convert(0),w=!(a instanceof hv),x=0,b=n.length;x<b;x++){var _=n[x],T=i[x],O=_===void 0;O&&(_=0);var P=a.convert(w?a.toDomain(T):T),M=Math.min(_===void 0?NaN:s.convert(_),C),I=Math.max(_===void 0?NaN:s.convert(_),C),R=w?this.bandWidth:a.bandwidth,L=I-M,F={x:C,y:P},k=void 0;m?k=m({value:_}):k=_!==void 0&&wF(_)?this.formatLabelValue(_):"";var N=P+R/2,G=void 0,$="middle",j=void 0,z=_!==void 0&&_>=0,W=4;if(y===pn.Center)G=M+L/2,j="center";else if(y===pn.OutsideEnd)G=M+(z?L+W:-W),j=z?"start":"end";else if(y===pn.InsideEnd){G=M+(z?L-W:W),j=z?"end":"start";var Y=We.getTextSize(k,v),H=Y.width||20,K=C+H,q=C-H,Q=z&&G<K||!z&&G>q;Q&&(G=C+W*(z?1:-1),j=z?"start":"end")}else G=C+W*(z?1:-1),j=z?"start":"end";S.push({x:M,y:P,width:L,height:R,fill:l,stroke:u,strokeWidth:c,seriesDatum:{x:T,y:O?void 0:_},point:F,label:{x:G,y:N,text:k,fontStyle:h,fontWeight:f,fontSize:p,fontFamily:v,textAlign:j,textBaseline:$,fill:g}})}return S}},t.prototype.getDistance=function(e,r){return Math.abs(e.y-r.y)},t.className="BarSparkline",t}(Ky),_F=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),OF=Ot,fv=Lt,EF=function(o){_F(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.updateYScaleRange=function(){var e=this,r=e.seriesRect,n=e.yScale;n.range=[r.height,0]},t.prototype.updateXScaleRange=function(){var e=this,r=e.xScale,n=e.seriesRect,i=e.paddingOuter,a=e.paddingInner;if(r instanceof fv)r.range=[0,n.width],r.paddingInner=a,r.paddingOuter=i;else{var s=this.calculateStep(n.width),l=s*i;this.bandWidth=s*(1-a),r.range=[l,n.width-l-this.bandWidth]}},t.prototype.updateAxisLine=function(){var e=this,r=e.yScale,n=e.axis,i=e.axisLine,a=e.seriesRect,s=n.strokeWidth;i.x1=0,i.x2=a.width,i.y1=0,i.y2=0,i.stroke=n.stroke,i.strokeWidth=s+(s%2===1?1:0);var l=r.convert(0);i.translationY=l},t.prototype.generateNodeData=function(){var e=this,r=e.data,n=e.yData,i=e.xData,a=e.xScale,s=e.yScale,l=e.fill,u=e.stroke,c=e.strokeWidth,d=e.label;if(r){for(var h=d.fontStyle,f=d.fontWeight,p=d.fontSize,v=d.fontFamily,g=d.color,m=d.formatter,y=d.placement,S=[],C=s.convert(0),w=!(a instanceof fv),x=0,b=n.length;x<b;x++){var _=n[x],T=i[x],O=_===void 0;O&&(_=0);var P=Math.min(_===void 0?NaN:s.convert(_),C),M=a.convert(w?a.toDomain(T):T),I=Math.max(_===void 0?NaN:s.convert(_),C),R=w?this.bandWidth:a.bandwidth,L=I-P,F={x:M+R/2,y:C},k=void 0;m?k=m({value:_}):k=_!==void 0&&OF(_)?this.formatLabelValue(_):"";var N=M+R/2,G=void 0,$="center",j=void 0,z=_!==void 0&&_>=0,W=2;if(y===pn.Center)G=P+L/2,j="middle";else if(y===pn.OutsideEnd)G=P+(z?-W:L+W),j=z?"bottom":"top";else if(y===pn.InsideEnd){G=P+(z?W:L-W),j=z?"top":"bottom";var Y=We.getTextSize(k,v),H=Y.height||10,K=C-H,q=C+H,Q=z&&G>K||!z&&G<q;Q&&(G=C+W*(z?-1:1),j=z?"bottom":"top")}else G=C+W*(z?-1:1),j=z?"bottom":"top";S.push({x:M,y:P,width:R,height:L,fill:l,stroke:u,strokeWidth:c,seriesDatum:{x:T,y:O?void 0:_},point:F,label:{x:N,y:G,text:k,fontStyle:h,fontWeight:f,fontSize:p,fontFamily:v,textAlign:$,textBaseline:j,fill:g}})}return S}},t.className="ColumnSparkline",t}(Ky),TF=Ot,PF=function(){function o(){}return o.create=function(t,e){t=Ye([t]);var r=AF(t.type);return e&&(r.tooltip=e),MF(r,t),DF(r,t),t.data&&(r.data=t.data),r.processedOptions=t,r},o}();function AF(o){switch(o===void 0&&(o="line"),o){case"column":return new EF;case"bar":return new bF;case"area":return new dF;case"line":default:return new yF}}function DF(o,t){switch(t.type){case"bar":pv(o,t);break;case"column":pv(o,t);break;case"area":IF(o,t);break;case"line":default:RF(o,t);break}}function MF(o,t){he(o,"context",t.context,t),he(o,"width",t.width,t),he(o,"height",t.height,t),he(o,"container",t.container,t),he(o,"xKey",t.xKey,t),he(o,"yKey",t.yKey,t),t.padding&&LF(o.padding,t.padding),t.axis&&kF(o.axis,t.axis),t.highlightStyle&&NF(o.highlightStyle,t.highlightStyle)}function RF(o,t){t.marker&&$y(o.marker,t.marker),t.line&&Xy(o.line,t.line),t.crosshairs&&Yy(o.crosshairs,t.crosshairs)}function IF(o,t){he(o,"fill",t.fill,t),t.marker&&$y(o.marker,t.marker),t.line&&Xy(o.line,t.line),t.crosshairs&&Yy(o.crosshairs,t.crosshairs)}function pv(o,t){he(o,"valueAxisDomain",t.valueAxisDomain,t),he(o,"fill",t.fill,t),he(o,"stroke",t.stroke,t),he(o,"strokeWidth",t.strokeWidth,t),he(o,"paddingInner",t.paddingInner,t),he(o,"paddingOuter",t.paddingOuter,t),he(o,"formatter",t.formatter,t),t.label&&FF(o.label,t.label)}function LF(o,t){he(o,"top",t.top,t),he(o,"right",t.right,t),he(o,"bottom",t.bottom,t),he(o,"left",t.left,t)}function $y(o,t){he(o,"enabled",t.enabled,t),he(o,"size",t.size,t),he(o,"shape",t.shape,t),he(o,"fill",t.fill,t),he(o,"stroke",t.stroke,t),he(o,"strokeWidth",t.strokeWidth,t),he(o,"formatter",t.formatter,t)}function FF(o,t){he(o,"enabled",t.enabled,t),he(o,"fontStyle",t.fontStyle,t),he(o,"fontWeight",t.fontWeight,t),he(o,"fontSize",t.fontSize,t),he(o,"fontFamily",t.fontFamily,t),he(o,"textAlign",t.textAlign,t),he(o,"textBaseline",t.textBaseline,t),he(o,"color",t.color,t),he(o,"formatter",t.formatter,t),he(o,"placement",t.placement,t)}function Xy(o,t){he(o,"stroke",t.stroke,t),he(o,"strokeWidth",t.strokeWidth,t)}function kF(o,t){he(o,"type",t.type,t),he(o,"stroke",t.stroke,t),he(o,"strokeWidth",t.strokeWidth,t)}function NF(o,t){he(o,"fill",t.fill,t),he(o,"size",t.size,t),he(o,"stroke",t.stroke,t),he(o,"strokeWidth",t.strokeWidth,t)}function Yy(o,t){o.xLine&&t.xLine&&vv(o.xLine,t.xLine),o.yLine&&t.yLine&&vv(o.yLine,t.yLine)}function vv(o,t){he(o,"enabled",t.enabled,t),he(o,"stroke",t.stroke,t),he(o,"strokeWidth",t.strokeWidth,t),he(o,"lineDash",t.lineDash,t),he(o,"lineCap",t.lineCap,t)}var gv={};function GF(o,t){gv[t]||(o(),gv[t]=!0)}var yv=function(o,t,e){if(TF(t))return!0;var r="AG Charts: "+o+" must be a number, the value you provided is not a valid number. Using the default of "+e+"px.";return GF(function(){return console.warn(r)},o+" not a number"),!1},VF={xOffset:yv,yOffset:yv};function he(o,t,e,r){if(t in r)if(t in o){var n=VF[t],i=n?n(t,e,o[t]):!0;i&&o[t]!==e&&(o[t]=e)}else console.warn("Property "+t+" does not exist on the target object.")}var jF=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pd=function(){return Pd=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Pd.apply(this,arguments)},Nc=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},BF=function(o){jF(t,o);function t(){return o.call(this,t.TEMPLATE)||this}return t.prototype.init=function(e){var r=this,n=!0,i=function(){var s=r.getGui(),l=s.clientWidth,u=s.clientHeight;if(!(l===0||u===0))if(n){var c=Pd({data:e.value,width:l,height:u,context:{data:e.data}},e.sparklineOptions);r.sparkline=PF.create(c,r.sparklineTooltipSingleton.getSparklineTooltip()),r.eSparkline.appendChild(r.sparkline.canvasElement),n=!1}else r.sparkline.width=l,r.sparkline.height=u},a=this.resizeObserverService.observeResize(this.getGui(),i);this.addDestroyFunc(function(){return a()})},t.prototype.refresh=function(e){return this.sparkline?(this.sparkline.data=e.value,!0):!1},t.prototype.destroy=function(){this.sparkline&&this.sparkline.destroy(),o.prototype.destroy.call(this)},t.TEMPLATE=`<div class="ag-sparkline-wrapper">
            <span ref="eSparkline"></span>
        </div>`,Nc([B("eSparkline")],t.prototype,"eSparkline",void 0),Nc([D("resizeObserverService")],t.prototype,"resizeObserverService",void 0),Nc([D("sparklineTooltipSingleton")],t.prototype,"sparklineTooltipSingleton",void 0),t}(oe),HF=function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Gc=function(o,t,e,r){var n=arguments.length,i=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},zF=function(o){HF(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.tooltip=new Po},t.prototype.getSparklineTooltip=function(){return this.tooltip},t.prototype.destroyTooltip=function(){this.tooltip&&this.tooltip.destroy()},Gc([te],t.prototype,"postConstruct",null),Gc([br],t.prototype,"destroyTooltip",null),t=Gc([be("sparklineTooltipSingleton")],t),t}(pe),WF="30.1.0",UF={version:WF,moduleName:Ce.SparklinesModule,beans:[zF],userComponents:[{componentName:"agSparklineCellRenderer",componentClass:BF}],dependantModules:[lt]};const KF=[zm,Ym,oS,mx,Px,QR,oI,mI,bI,Ly,EI,Dv,cL,OL,Vd,zL,YL,UF];Ke.registerModules(KF);
