import{d as f,o as i,c as u,b as y,h as x,F as I,m as d,P as p,q as _,v,a as l,s as $,u as w,e as b,x as z}from"./vendor-iSVuGEn8.js";import{I as k}from"./IconPlotly-T05ez2XE.js";import{_ as g}from"./index-d3rvFiR3.js";const C={components:{IconPlotly:k},props:["imageUrl"],setup(t){return{imageSrc:t.imageUrl,isEmpty:!t.imageUrl}}},U=["src"];function P(t,e,o,a,s,c){const r=f("IconPlotly");return i(),u(I,null,[a.isEmpty?y("",!0):(i(),u("img",{key:0,src:a.imageSrc},null,8,U)),a.isEmpty?(i(),x(r,{key:1,width:200})):y("",!0)],64)}const N=g(C,[["render",P],["__scopeId","data-v-c6634ad6"]]);function S(t,e){const o=localStorage.getItem(t)&&localStorage.getItem(t)!=="null"?JSON.parse(localStorage.getItem(t)):e;return o&&localStorage.setItem(t,JSON.stringify(o)),o}const h="chart-loaded-snapshot";let m=S(h,null);const B={props:["data","layout","options"],components:{ChartSkeleton:N},data(){return{resizeIntervalId:null,isLoading:!0,preloadImgStorageKey:h,imageUrl:m}},computed:{renderData(){return{data:this.data,layout:this.layout}},computedStyle(){return{filter:this.isLoading?"blur(5px) contrast(150%) brightness(90%) saturate(0%)":"none",transition:"filter 2s"}}},watch:{renderData:function(t,e){d.isNil(t)||(this.isLoading=!1,this.draw(!0)),d.isEqual(t,e)||this.draw()}},mounted:function(){this.draw();let t=this.$el.clientWidth;this.resizeIntervalId=setInterval(()=>{t!==this.$el.clientWidth&&(t=this.$el.clientWidth,this.resize())},100)},methods:{draw:function(t=!1){p.newPlot(this.$refs.plotlyAnchor,d.cloneDeep(this.data),Object.assign({font:{family:"Nunito Sans, sans-serif"}},d.cloneDeep(this.layout)),this.options).then(function(e){!m&&t&&p.toImage(e).then(function(o){m=S(h,o)})})},resize:function(){this.errorMessage||p.Plots.resize(this.$refs.plotlyAnchor)}},beforeUnmount:function(){clearInterval(this.resizeIntervalId),p.purge(this.$refs.plotlyAnchor)}},D={ref:"plotlyAnchor"};function E(t,e,o,a,s,c){const r=f("ChartSkeleton");return i(),u(I,null,[_(l("div",{class:"basic-plot-wrapper",style:$(c.computedStyle),onContextmenu:e[0]||(e[0]=w(()=>{},["prevent"]))},[l("div",D,null,512)],36),[[v,!s.isLoading]]),_(l("div",{class:"basic-plot-wrapper skeleton",onContextmenu:e[1]||(e[1]=w(()=>{},["prevent"]))},[b(r,{imageUrl:s.imageUrl},null,8,["imageUrl"])],544),[[v,s.isLoading]])],64)}const L=g(B,[["render",E],["__scopeId","data-v-1b002427"]]);function n(t,e){return t.map(function(o){return o[e]})}async function O(){const t=await z("https://raw.githubusercontent.com/plotly/datasets/master/3d-scatter.csv");return new Promise(e=>{const o={x:n(t,"x1"),y:n(t,"y1"),z:n(t,"z1"),mode:"markers",marker:{size:12,line:{color:"rgba(217, 217, 217, 0.14)",width:.5},opacity:.8},type:"scatter3d"},a={x:n(t,"x2"),y:n(t,"y2"),z:n(t,"z2"),mode:"markers",marker:{color:"rgb(127, 127, 127)",size:12,symbol:"circle",line:{color:"rgb(204, 204, 204)",width:1},opacity:.8},type:"scatter3d"};e({data:[o,a],layout:{showlegend:!1,paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",displayModeBar:!1,width:1024,height:500,margin:{l:0,r:0,b:0,t:0}},options:{displayModeBar:!1}})})}const A={name:"FiddleView",components:{Chart:L},data(){return{coors:null,layout:null,plotlyOptions:null,capturedImage:null}},mounted(){O().then(t=>{window.setTimeout(()=>{this.coors=t.data,this.layout=t.layout,this.plotlyOptions=t.options},1e3)})}},F={class:"scrollable"},M={class:"h-100 d-flex align-items-center justify-content-center"},V={ref:"captureArea"};function W(t,e,o,a,s,c){const r=f("Chart");return i(),u("div",F,[l("div",M,[l("div",V,[b(r,{data:s.coors,layout:s.layout,options:s.plotlyOptions},null,8,["data","layout","options"])],512)])])}const K=g(A,[["render",W],["__scopeId","data-v-fbaaff4e"]]);export{K as default};
