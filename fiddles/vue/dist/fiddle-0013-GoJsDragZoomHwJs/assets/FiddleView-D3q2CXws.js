import{T as v,P as M,S as c,a as h,R as p,G as k,D as B,b as C,N as f,B as d,c as x,L as T,d as _,e as z,f as w}from"./gojs-AUZ1epnr.js";import{_ as y}from"./index-DnIuJW-4.js";import{o as b,f as D,D as A,g as S,v as $,q as P}from"./@vue-DwCM0FGS.js";import"./pinia-DiDWQ6X7.js";import"./vue-router-51bbLfSa.js";/* empty css                   */class g extends v{constructor(){super(),this._delay=175,this._zoomedDiagram=null;const e=new M,t=new c;e.layerName="Tool",e.selectable=!1,t.name="SHAPE",t.figure="Rectangle",t.fill=null,t.stroke="magenta",t.position=new h(0,0),e.add(t),this._box=e,this.name="DragZooming"}get box(){return this._box}set box(e){this._box=e}get delay(){return this._delay}set delay(e){this._delay=e}get zoomedDiagram(){return this._zoomedDiagram}set zoomedDiagram(e){this._zoomedDiagram=e}canStart(){if(!this.isEnabled)return!1;const e=this.diagram,t=e.lastInput;return!(!t.left||e.currentTool!==this&&(!this.isBeyondDragSize()||t.timestamp-e.firstInput.timestamp<this.delay))}doActivate(){const e=this.diagram;this.isActive=!0,e.isMouseCaptured=!0,e.skipsUndoManager=!0,e.add(this.box),this.doMouseMove()}doDeactivate(){const e=this.diagram;e.remove(this.box),e.skipsUndoManager=!1,e.isMouseCaptured=!1,this.isActive=!1}doMouseMove(){if(this.isActive&&this.box!==null){const e=this.computeBoxBounds();let t=this.box.findObject("SHAPE");t===null&&(t=this.box.findMainElement()),t!==null&&(t.desiredSize=e.size),this.box.position=e.position}}doMouseUp(){if(this.isActive){const e=this.diagram;e.remove(this.box);try{e.currentCursor="wait",this.zoomToRect(this.computeBoxBounds())}finally{e.currentCursor=""}}this.stopTool()}computeBoxBounds(){const e=this.diagram,t=e.firstInput.documentPoint,o=e.lastInput.documentPoint,a=o.x-t.x,i=o.y-t.y;let n=this.zoomedDiagram;if(n===null&&(n=e),n===null)return new p(t,o);const s=n.viewportBounds;if(s.height===0||i===0)return new p(t,o);const r=s.width/s.height;let l,u;return Math.abs(a/i)<r?(l=t.x+a,u=t.y+Math.ceil(Math.abs(a)/r)*(i<0?-1:1)):(l=t.x+Math.ceil(Math.abs(i)*r)*(a<0?-1:1),u=t.y+i),new p(t,new h(l,u))}zoomToRect(e){if(e.width<.1)return;const t=this.diagram;let o=this.zoomedDiagram;o===null&&(o=t),o!==null&&(t.lastInput.shift?(o.scale=Math.max(o.scale*e.width/o.viewportBounds.width,o.minScale),o.centerRect(e)):(o.scale=Math.min(o.viewportBounds.width*o.scale/e.width,o.maxScale),o.position=new h(e.x,e.y)))}}const R={name:"DiagramComponent",components:{DragZoomingTool:g},mounted(){this.initDiagram()},setup(){return{initDiagram:()=>{const e=k.make,o=A().refs.gojsDiagram,a=new B(o,{initialViewportSpot:C.Center,nodeTemplate:e(f,"Auto",e(c,"RoundedRectangle",{strokeWidth:0},new d("fill","color")),e(x,{margin:2},new d("text","key"))),linkTemplate:e(T,e(c,{stroke:"black"})),layout:e(_,{angle:90,nodeSpacing:10,compaction:_.AlignmentCenterChildren}),model:new z({nodeKeyProperty:"k",nodeParentKeyProperty:"p"})});new g,a.toolManager.mouseMoveTools.insertAt(2,new g),a.delayInitialization(()=>{a.nodeTemplate=e(f,"Auto",e(c,"RoundedRectangle",{strokeWidth:0},new d("fill","color")),e(x,{margin:2},new d("text","color")));const i=45,n=[];for(let s=0;s<i;s++){const r=w.randomColor(),l={key:s,k:s,c:r,color:w.randomColor(),p:s>0?Math.floor(Math.random()*s/2):void 0};n.push(l)}a.model.nodeDataArray=n})}}}},I={ref:"gojsDiagram",style:{width:"100%",height:"100%",border:"1px solid black"}};function j(m,e,t,o,a,i){return b(),D("div",I,null,512)}const E=y(R,[["render",j]]),N={name:"FiddleView",components:{DiagramComponent:E}},V={class:"scrollable"},H={class:"h-100 d-flex align-items-center justify-content-center"};function L(m,e,t,o,a,i){const n=P("DiagramComponent");return b(),D("div",V,[S("div",H,[$(n)])])}const Z=y(N,[["render",L],["__scopeId","data-v-4debaf8b"]]);export{Z as default};
