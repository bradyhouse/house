import{S as g,c as x,H as N,D,W as P,d as S,Q as M,Y as I,M as G,a as K,g as Z,l as p}from"./vega-time-a8429f91.js";import{G as k,C as J,k as O,e as V}from"./vega-util-7f144c9d.js";import{f as E,p as X,a as _,b as v,d as tt,c as rt,e as at}from"./d3-format-927789ae.js";import{t as et}from"./d3-array-ee3dc224.js";import{t as ot,a as nt,u as ut,b as it,f as st}from"./d3-time-format-f8f728fb.js";function f(t){const a={};return r=>a[r]||(a[r]=t(r))}function mt(t,a){return r=>{const e=t(r),n=e.indexOf(a);if(n<0)return e;let i=ct(e,n);const u=i<e.length?e.slice(i):"";for(;--i>n;)if(e[i]!=="0"){++i;break}return e.slice(0,i)+u}}function ct(t,a){let r=t.lastIndexOf("e"),e;if(r>0)return r;for(r=t.length;--r>a;)if(e=t.charCodeAt(r),e>=48&&e<=57)return r+1}function d(t){const a=f(t.format),r=t.formatPrefix;return{format:a,formatPrefix:r,formatFloat(e){const n=E(e||",");if(n.precision==null){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1;break}return mt(a(n),a(".1f")(1)[1])}else return a(n)},formatSpan(e,n,i,u){u=E(u??",f");const m=et(e,n,i),c=Math.max(Math.abs(e),Math.abs(n));let s;if(u.precision==null)switch(u.type){case"s":return isNaN(s=v(m,c))||(u.precision=s),r(u,c);case"":case"e":case"g":case"p":case"r":{isNaN(s=_(m,c))||(u.precision=s-(u.type==="e"));break}case"f":case"%":{isNaN(s=X(m))||(u.precision=s-(u.type==="%")*2);break}}return a(u)}}}let l;w();function w(){return l=d({format:tt,formatPrefix:rt})}function T(t){return d(at(t))}function L(t){return arguments.length?l=T(t):l}function y(t,a,r){r=r||{},J(r)||O(`Invalid time multi-format specifier: ${r}`);const e=a(g),n=a(x),i=a(N),u=a(D),m=a(P),c=a(S),s=a(M),H=a(I),Y=t(r[G]||".%L"),U=t(r[g]||":%S"),q=t(r[x]||"%I:%M"),z=t(r[N]||"%I %p"),B=t(r[D]||r[K]||"%a %d"),Q=t(r[P]||"%b %d"),W=t(r[S]||"%B"),$=t(r[M]||"%B"),j=t(r[I]||"%Y");return o=>(e(o)<o?Y:n(o)<o?U:i(o)<o?q:u(o)<o?z:c(o)<o?m(o)<o?B:Q:H(o)<o?s(o)<o?W:$:j)(o)}function A(t){const a=f(t.format),r=f(t.utcFormat);return{timeFormat:e=>k(e)?a(e):y(a,Z,e),utcFormat:e=>k(e)?r(e):y(r,p,e),timeParse:f(t.parse),utcParse:f(t.utcParse)}}let h;R();function R(){return h=A({format:ot,parse:nt,utcFormat:ut,utcParse:it})}function C(t){return A(st(t))}function F(t){return arguments.length?h=C(t):h}const b=(t,a)=>V({},t,a);function gt(t,a){const r=t?T(t):L(),e=a?C(a):F();return b(r,e)}function ft(t,a){const r=arguments.length;return r&&r!==2&&O("defaultLocale expects either zero or two arguments."),r?b(L(t),F(a)):b(L(),F())}function xt(){return w(),R(),ft()}export{ft as d,gt as l,L as n,xt as r,F as t};
