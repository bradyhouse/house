import{d as Dn,t as un,r as zn,h as xn,a as Z,b as Pe,c as w,e as m,u as I,o as bn,i as Ie,w as ye,f as Ln,g as $n,n as re,s as Wn,j as qn,k as Te,l as Gn,p as Ge}from"./@vue-ClpcO8Zo.js";/**
  * vee-validate v4.15.0
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function G(e){return typeof e=="function"}function Vn(e){return e==null}const ge=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function Je(e){return Number(e)>=0}function Hn(e){const n=parseFloat(e);return isNaN(n)?e:n}function Kn(e){return typeof e=="object"&&e!==null}function Yn(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function on(e){if(!Kn(e)||Yn(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}function Ae(e,n){return Object.keys(n).forEach(t=>{if(on(n[t])&&on(e[t])){e[t]||(e[t]={}),Ae(e[t],n[t]);return}e[t]=n[t]}),e}function _e(e){const n=e.split(".");if(!n.length)return"";let t=String(n[0]);for(let l=1;l<n.length;l++){if(Je(n[l])){t+=`[${n[l]}]`;continue}t+=`.${n[l]}`}return t}const Xn={};function Jn(e){return Xn[e]}function sn(e,n,t){typeof t.value=="object"&&(t.value=A(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||n==="__proto__"?Object.defineProperty(e,n,t):e[n]=t.value}function A(e){if(typeof e!="object")return e;var n=0,t,l,a,u=Object.prototype.toString.call(e);if(u==="[object Object]"?a=Object.create(e.__proto__||null):u==="[object Array]"?a=Array(e.length):u==="[object Set]"?(a=new Set,e.forEach(function(f){a.add(A(f))})):u==="[object Map]"?(a=new Map,e.forEach(function(f,d){a.set(A(d),A(f))})):u==="[object Date]"?a=new Date(+e):u==="[object RegExp]"?a=new RegExp(e.source,e.flags):u==="[object DataView]"?a=new e.constructor(A(e.buffer)):u==="[object ArrayBuffer]"?a=e.slice(0):u.slice(-6)==="Array]"&&(a=new e.constructor(e)),a){for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)sn(a,l[n],Object.getOwnPropertyDescriptor(e,l[n]));for(n=0,l=Object.getOwnPropertyNames(e);n<l.length;n++)Object.hasOwnProperty.call(a,t=l[n])&&a[t]===e[t]||sn(a,t,Object.getOwnPropertyDescriptor(e,t))}return a||e}const Qe=Symbol("vee-validate-form"),Qn=Symbol("vee-validate-form-context"),Zn=Symbol("vee-validate-field-instance"),cn=Symbol("Default empty value"),et=typeof window<"u";function He(e){return G(e)&&!!e.__locatorRef}function ee(e){return!!e&&G(e.parse)&&e.__type==="VVTypedSchema"}function Ce(e){return!!e&&G(e.validate)}function On(e){return e==="checkbox"||e==="radio"}function nt(e){return ge(e)||Array.isArray(e)}function tt(e){return Array.isArray(e)?e.length===0:ge(e)&&Object.keys(e).length===0}function Ne(e){return/^\[.+\]$/i.test(e)}function rt(e){return pn(e)&&e.multiple}function pn(e){return e.tagName==="SELECT"}function Sn(e){return Ze(e)&&e.target&&"submit"in e.target}function Ze(e){return e?!!(typeof Event<"u"&&G(Event)&&e instanceof Event||e&&e.srcElement):!1}function $(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var t,l,a;if(Array.isArray(e)){if(t=e.length,t!=n.length)return!1;for(l=t;l--!==0;)if(!$(e[l],n[l]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(l of e.entries())if(!n.has(l[0]))return!1;for(l of e.entries())if(!$(l[1],n.get(l[0])))return!1;return!0}if(fn(e)&&fn(n))return!(e.size!==n.size||e.name!==n.name||e.lastModified!==n.lastModified||e.type!==n.type);if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(l of e.entries())if(!n.has(l[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(t=e.length,t!=n.length)return!1;for(l=t;l--!==0;)if(e[l]!==n[l])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(a=Object.keys(e),t=a.length-dn(e,a),t!==Object.keys(n).length-dn(n,Object.keys(n)))return!1;for(l=t;l--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[l]))return!1;for(l=t;l--!==0;){var u=a[l];if(!$(e[u],n[u]))return!1}return!0}return e!==e&&n!==n}function dn(e,n){let t=0;for(let a=n.length;a--!==0;){var l=n[a];e[l]===void 0&&t++}return t}function fn(e){return et?e instanceof File:!1}function en(e){return Ne(e)?e.replace(/\[|\]/gi,""):e}function H(e,n,t){return e?Ne(n)?e[en(n)]:(n||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((a,u)=>nt(a)&&u in a?a[u]:t,e):t}function de(e,n,t){if(Ne(n)){e[en(n)]=t;return}const l=n.split(/\.|\[(\d+)\]/).filter(Boolean);let a=e;for(let u=0;u<l.length;u++){if(u===l.length-1){a[l[u]]=t;return}(!(l[u]in a)||Vn(a[l[u]]))&&(a[l[u]]=Je(l[u+1])?[]:{}),a=a[l[u]]}}function We(e,n){if(Array.isArray(e)&&Je(n)){e.splice(Number(n),1);return}ge(e)&&delete e[n]}function vn(e,n){if(Ne(n)){delete e[en(n)];return}const t=n.split(/\.|\[(\d+)\]/).filter(Boolean);let l=e;for(let u=0;u<t.length;u++){if(u===t.length-1){We(l,t[u]);break}if(!(t[u]in l)||Vn(l[t[u]]))break;l=l[t[u]]}const a=t.map((u,f)=>H(e,t.slice(0,f).join(".")));for(let u=a.length-1;u>=0;u--)if(tt(a[u])){if(u===0){We(e,t[0]);continue}We(a[u-1],t[u-1])}}function K(e){return Object.keys(e)}function _n(e,n=void 0){const t=Te();return(t==null?void 0:t.provides[e])||Gn(e,n)}function hn(e,n,t){if(Array.isArray(e)){const l=[...e],a=l.findIndex(u=>$(u,n));return a>=0?l.splice(a,1):l.push(n),l}return $(e,n)?t:n}function mn(e,n=0){let t=null,l=[];return function(...a){return t&&clearTimeout(t),t=setTimeout(()=>{const u=e(...a);l.forEach(f=>f(u)),l=[]},n),new Promise(u=>l.push(u))}}function it(e,n){return ge(n)&&n.number?Hn(e):e}function Ke(e,n){let t;return async function(...a){const u=e(...a);t=u;const f=await u;return u!==t?f:(t=void 0,n(f,a))}}function Ye(e){return Array.isArray(e)?e:e?[e]:[]}function Fe(e,n){const t={};for(const l in e)n.includes(l)||(t[l]=e[l]);return t}function lt(e){let n=null,t=[];return function(...l){const a=re(()=>{if(n!==a)return;const u=e(...l);t.forEach(f=>f(u)),t=[],n=null});return n=a,new Promise(u=>t.push(u))}}function at(e,n,t){return n.slots.default?typeof e=="string"||!e?n.slots.default(t()):{default:()=>{var l,a;return(a=(l=n.slots).default)===null||a===void 0?void 0:a.call(l,t())}}:n.slots.default}function qe(e){if(jn(e))return e._value}function jn(e){return"_value"in e}function ut(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function Me(e){if(!Ze(e))return e;const n=e.target;if(On(n.type)&&jn(n))return qe(n);if(n.type==="file"&&n.files){const t=Array.from(n.files);return n.multiple?t:t[0]}if(rt(n))return Array.from(n.options).filter(t=>t.selected&&!t.disabled).map(qe);if(pn(n)){const t=Array.from(n.options).find(l=>l.selected);return t?qe(t):n.value}return ut(n)}function An(e){const n={};return Object.defineProperty(n,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?ge(e)&&e._$$isNormalized?e:ge(e)?Object.keys(e).reduce((t,l)=>{const a=ot(e[l]);return e[l]!==!1&&(t[l]=yn(a)),t},n):typeof e!="string"?n:e.split("|").reduce((t,l)=>{const a=st(l);return a.name&&(t[a.name]=yn(a.params)),t},n):n}function ot(e){return e===!0?[]:Array.isArray(e)||ge(e)?e:[e]}function yn(e){const n=t=>typeof t=="string"&&t[0]==="@"?ct(t.slice(1)):t;return Array.isArray(e)?e.map(n):e instanceof RegExp?[e]:Object.keys(e).reduce((t,l)=>(t[l]=n(e[l]),t),{})}const st=e=>{let n=[];const t=e.split(":")[0];return e.includes(":")&&(n=e.split(":").slice(1).join(":").split(",")),{name:t,params:n}};function ct(e){const n=t=>{var l;return(l=H(t,e))!==null&&l!==void 0?l:t[e]};return n.__locatorRef=e,n}function dt(e){return Array.isArray(e)?e.filter(He):K(e).filter(n=>He(e[n])).map(n=>e[n])}const ft={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let vt=Object.assign({},ft);const je=()=>vt;async function En(e,n,t={}){const l=t==null?void 0:t.bails,a={name:(t==null?void 0:t.name)||"{field}",rules:n,label:t==null?void 0:t.label,bails:l??!0,formData:(t==null?void 0:t.values)||{}},u=await ht(a,e);return Object.assign(Object.assign({},u),{valid:!u.errors.length})}async function ht(e,n){const t=e.rules;if(ee(t)||Ce(t))return yt(n,Object.assign(Object.assign({},e),{rules:t}));if(G(t)||Array.isArray(t)){const d={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:n},v=Array.isArray(t)?t:[t],s=v.length,g=[];for(let S=0;S<s;S++){const j=v[S],V=await j(n,d);if(!(typeof V!="string"&&!Array.isArray(V)&&V)){if(Array.isArray(V))g.push(...V);else{const z=typeof V=="string"?V:wn(d);g.push(z)}if(e.bails)return{errors:g}}}return{errors:g}}const l=Object.assign(Object.assign({},e),{rules:An(t)}),a=[],u=Object.keys(l.rules),f=u.length;for(let d=0;d<f;d++){const v=u[d],s=await gt(l,n,{name:v,params:l.rules[v]});if(s.error&&(a.push(s.error),e.bails))return{errors:a}}return{errors:a}}function mt(e){return!!e&&e.name==="ValidationError"}function Fn(e){return{__type:"VVTypedSchema",async parse(t,l){var a;try{return{output:await e.validate(t,{abortEarly:!1,context:(l==null?void 0:l.formData)||{}}),errors:[]}}catch(u){if(!mt(u))throw u;if(!(!((a=u.inner)===null||a===void 0)&&a.length)&&u.errors.length)return{errors:[{path:u.path,errors:u.errors}]};const f=u.inner.reduce((d,v)=>{const s=v.path||"";return d[s]||(d[s]={errors:[],path:s}),d[s].errors.push(...v.errors),d},{});return{errors:Object.values(f)}}}}}async function yt(e,n){const l=await(ee(n.rules)?n.rules:Fn(n.rules)).parse(e,{formData:n.formData}),a=[];for(const u of l.errors)u.errors.length&&a.push(...u.errors);return{value:l.value,errors:a}}async function gt(e,n,t){const l=Jn(t.name);if(!l)throw new Error(`No such validator '${t.name}' exists.`);const a=bt(t.params,e.formData),u={field:e.label||e.name,name:e.name,label:e.label,value:n,form:e.formData,rule:Object.assign(Object.assign({},t),{params:a})},f=await l(n,a,u);return typeof f=="string"?{error:f}:{error:f?void 0:wn(u)}}function wn(e){const n=je().generateMessage;return n?n(e):"Field is invalid"}function bt(e,n){const t=l=>He(l)?l(n):l;return Array.isArray(e)?e.map(t):Object.keys(e).reduce((l,a)=>(l[a]=t(e[a]),l),{})}async function Vt(e,n){const l=await(ee(e)?e:Fn(e)).parse(A(n),{formData:A(n)}),a={},u={};for(const f of l.errors){const d=f.errors,v=(f.path||"").replace(/\["(\d+)"\]/g,(s,g)=>`[${g}]`);a[v]={valid:!d.length,errors:d},d.length&&(u[v]=d[0])}return{valid:!l.errors.length,results:a,errors:u,values:l.value,source:"schema"}}async function Ot(e,n,t){const a=K(e).map(async s=>{var g,S,j;const V=(g=t==null?void 0:t.names)===null||g===void 0?void 0:g[s],M=await En(H(n,s),e[s],{name:(V==null?void 0:V.name)||s,label:V==null?void 0:V.label,values:n,bails:(j=(S=t==null?void 0:t.bailsMap)===null||S===void 0?void 0:S[s])!==null&&j!==void 0?j:!0});return Object.assign(Object.assign({},M),{path:s})});let u=!0;const f=await Promise.all(a),d={},v={};for(const s of f)d[s.path]={valid:s.valid,errors:s.errors},s.valid||(u=!1,v[s.path]=s.errors[0]);return{valid:u,results:d,errors:v,source:"schema"}}let gn=0;function pt(e,n){const{value:t,initialValue:l,setInitialValue:a}=St(e,n.modelValue,n.form);if(!n.form){let v=function(V){var M;"value"in V&&(t.value=V.value),"errors"in V&&g(V.errors),"touched"in V&&(j.touched=(M=V.touched)!==null&&M!==void 0?M:j.touched),"initialValue"in V&&a(V.initialValue)};const{errors:s,setErrors:g}=At(),S=gn>=Number.MAX_SAFE_INTEGER?0:++gn,j=jt(t,l,s,n.schema);return{id:S,path:e,value:t,initialValue:l,meta:j,flags:{pendingUnmount:{[S]:!1},pendingReset:!1},errors:s,setState:v}}const u=n.form.createPathState(e,{bails:n.bails,label:n.label,type:n.type,validate:n.validate,schema:n.schema}),f=w(()=>u.errors);function d(v){var s,g,S;"value"in v&&(t.value=v.value),"errors"in v&&((s=n.form)===null||s===void 0||s.setFieldError(I(e),v.errors)),"touched"in v&&((g=n.form)===null||g===void 0||g.setFieldTouched(I(e),(S=v.touched)!==null&&S!==void 0?S:!1)),"initialValue"in v&&a(v.initialValue)}return{id:Array.isArray(u.id)?u.id[u.id.length-1]:u.id,path:e,value:t,errors:f,meta:u,initialValue:l,flags:u.__flags,setState:d}}function St(e,n,t){const l=Z(I(n));function a(){return t?H(t.initialValues.value,I(e),I(l)):I(l)}function u(s){if(!t){l.value=s;return}t.setFieldInitialValue(I(e),s,!0)}const f=w(a);if(!t)return{value:Z(a()),initialValue:f,setInitialValue:u};const d=_t(n,t,f,e);return t.stageInitialValue(I(e),d,!0),{value:w({get(){return H(t.values,I(e))},set(s){t.setFieldValue(I(e),s,!1)}}),initialValue:f,setInitialValue:u}}function _t(e,n,t,l){return Ie(e)?I(e):e!==void 0?e:H(n.values,I(l),I(t))}function jt(e,n,t,l){const a=w(()=>{var f,d,v;return(v=(d=(f=m(l))===null||f===void 0?void 0:f.describe)===null||d===void 0?void 0:d.call(f).required)!==null&&v!==void 0?v:!1}),u=Pe({touched:!1,pending:!1,valid:!0,required:a,validated:!!I(t).length,initialValue:w(()=>I(n)),dirty:w(()=>!$(I(e),I(n)))});return ye(t,f=>{u.valid=!f.length},{immediate:!0,flush:"sync"}),u}function At(){const e=Z([]);return{errors:e,setErrors:n=>{e.value=Ye(n)}}}function Rt(e,n,t){return On(t==null?void 0:t.type)?Ft(e,n,t):Pn(e,n,t)}function Pn(e,n,t){const{initialValue:l,validateOnMount:a,bails:u,type:f,checkedValue:d,label:v,validateOnValueUpdate:s,uncheckedValue:g,controlled:S,keepValueOnUnmount:j,syncVModel:V,form:M}=Et(t),z=S?_n(Qe):void 0,_=M||z,x=w(()=>_e(m(e))),B=w(()=>{if(m(_==null?void 0:_.schema))return;const p=I(n);return Ce(p)||ee(p)||G(p)||Array.isArray(p)?p:An(p)}),be=!G(B.value)&&ee(m(n)),{id:ie,value:le,initialValue:ne,meta:N,setState:ae,errors:Ve,flags:ue}=pt(x,{modelValue:l,form:_,bails:u,label:v,type:f,validate:B.value?R:void 0,schema:be?n:void 0}),W=w(()=>Ve.value[0]);V&&wt({value:le,prop:V,handleChange:E,shouldValidate:()=>s&&!ue.pendingReset});const oe=(h,p=!1)=>{N.touched=!0,p&&J()};async function fe(h){var p,P;if(_!=null&&_.validateSchema){const{results:F}=await _.validateSchema(h);return(p=F[m(x)])!==null&&p!==void 0?p:{valid:!0,errors:[]}}return B.value?En(le.value,B.value,{name:m(x),label:m(v),values:(P=_==null?void 0:_.values)!==null&&P!==void 0?P:{},bails:u}):{valid:!0,errors:[]}}const J=Ke(async()=>(N.pending=!0,N.validated=!0,fe("validated-only")),h=>(ue.pendingUnmount[L.id]||(ae({errors:h.errors}),N.pending=!1,N.valid=h.valid),h)),Q=Ke(async()=>fe("silent"),h=>(N.valid=h.valid,h));function R(h){return(h==null?void 0:h.mode)==="silent"?Q():J()}function E(h,p=!0){const P=Me(h);pe(P,p)}bn(()=>{if(a)return J();(!_||!_.validateSchema)&&Q()});function ve(h){N.touched=h}function se(h){var p;const P=h&&"value"in h?h.value:ne.value;ae({value:A(P),initialValue:A(P),touched:(p=h==null?void 0:h.touched)!==null&&p!==void 0?p:!1,errors:(h==null?void 0:h.errors)||[]}),N.pending=!1,N.validated=!1,Q()}const he=Te();function pe(h,p=!0){le.value=he&&V?it(h,he.props.modelModifiers):h,(p?J:Q)()}function Ee(h){ae({errors:Array.isArray(h)?h:[h]})}const nn=w({get(){return le.value},set(h){pe(h,s)}}),L={id:ie,name:x,label:v,value:nn,meta:N,errors:Ve,errorMessage:W,type:f,checkedValue:d,uncheckedValue:g,bails:u,keepValueOnUnmount:j,resetField:se,handleReset:()=>se(),validate:R,handleChange:E,handleBlur:oe,setState:ae,setTouched:ve,setErrors:Ee,setValue:pe};if(Ge(Zn,L),Ie(n)&&typeof I(n)!="function"&&ye(n,(h,p)=>{$(h,p)||(N.validated?J():Q())},{deep:!0}),!_)return L;const ke=w(()=>{const h=B.value;return!h||G(h)||Ce(h)||ee(h)||Array.isArray(h)?{}:Object.keys(h).reduce((p,P)=>{const F=dt(h[P]).map(ce=>ce.__locatorRef).reduce((ce,te)=>{const Y=H(_.values,te)||_.values[te];return Y!==void 0&&(ce[te]=Y),ce},{});return Object.assign(p,F),p},{})});return ye(ke,(h,p)=>{if(!Object.keys(h).length)return;!$(h,p)&&(N.validated?J():Q())}),qn(()=>{var h;const p=(h=m(L.keepValueOnUnmount))!==null&&h!==void 0?h:m(_.keepValuesOnUnmount),P=m(x);if(p||!_||ue.pendingUnmount[L.id]){_==null||_.removePathState(P,ie);return}ue.pendingUnmount[L.id]=!0;const F=_.getPathState(P);if(Array.isArray(F==null?void 0:F.id)&&(F!=null&&F.multiple)?F!=null&&F.id.includes(L.id):(F==null?void 0:F.id)===L.id){if(F!=null&&F.multiple&&Array.isArray(F.value)){const te=F.value.findIndex(Y=>$(Y,m(L.checkedValue)));if(te>-1){const Y=[...F.value];Y.splice(te,1),_.setFieldValue(P,Y)}Array.isArray(F.id)&&F.id.splice(F.id.indexOf(L.id),1)}else _.unsetPathValue(m(x));_.removePathState(P,ie)}}),L}function Et(e){const n=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),t=!!(e!=null&&e.syncVModel),l=typeof(e==null?void 0:e.syncVModel)=="string"?e.syncVModel:(e==null?void 0:e.modelPropName)||"modelValue",a=t&&!("initialValue"in(e||{}))?Xe(Te(),l):e==null?void 0:e.initialValue;if(!e)return Object.assign(Object.assign({},n()),{initialValue:a});const u="valueProp"in e?e.valueProp:e.checkedValue,f="standalone"in e?!e.standalone:e.controlled,d=(e==null?void 0:e.modelPropName)||(e==null?void 0:e.syncVModel)||!1;return Object.assign(Object.assign(Object.assign({},n()),e||{}),{initialValue:a,controlled:f??!0,checkedValue:u,syncVModel:d})}function Ft(e,n,t){const l=t!=null&&t.standalone?void 0:_n(Qe),a=t==null?void 0:t.checkedValue,u=t==null?void 0:t.uncheckedValue;function f(d){const v=d.handleChange,s=w(()=>{const S=m(d.value),j=m(a);return Array.isArray(S)?S.findIndex(V=>$(V,j))>=0:$(j,S)});function g(S,j=!0){var V,M;if(s.value===((V=S==null?void 0:S.target)===null||V===void 0?void 0:V.checked)){j&&d.validate();return}const z=m(e),_=l==null?void 0:l.getPathState(z),x=Me(S);let B=(M=m(a))!==null&&M!==void 0?M:x;l&&(_!=null&&_.multiple)&&_.type==="checkbox"?B=hn(H(l.values,z)||[],B,void 0):(t==null?void 0:t.type)==="checkbox"&&(B=hn(m(d.value),B,m(u))),v(B,j)}return Object.assign(Object.assign({},d),{checked:s,checkedValue:a,uncheckedValue:u,handleChange:g})}return f(Pn(e,n,t))}function wt({prop:e,value:n,handleChange:t,shouldValidate:l}){const a=Te();if(!a||!e)return;const u=typeof e=="string"?e:"modelValue",f=`update:${u}`;u in a.props&&(ye(n,d=>{$(d,Xe(a,u))||a.emit(f,d)}),ye(()=>Xe(a,u),d=>{if(d===cn&&n.value===void 0)return;const v=d===cn?void 0:d;$(v,n.value)||t(v,l())}))}function Xe(e,n){if(e)return e.props[n]}let Pt=0;const we=["bails","fieldsCount","id","multiple","type","validate"];function In(e){const n=(e==null?void 0:e.initialValues)||{},t=Object.assign({},m(n)),l=I(e==null?void 0:e.validationSchema);return l&&ee(l)&&G(l.cast)?A(l.cast(t)||{}):A(t)}function It(e){var n;const t=Pt++,l=(e==null?void 0:e.name)||"Form";let a=0;const u=Z(!1),f=Z(!1),d=Z(0),v=[],s=Pe(In(e)),g=Z([]),S=Z({}),j=Z({}),V=lt(()=>{j.value=g.value.reduce((i,r)=>(i[_e(m(r.path))]=r,i),{})});function M(i,r){const o=E(i);if(!o){typeof i=="string"&&(S.value[_e(i)]=Ye(r));return}if(typeof i=="string"){const c=_e(i);S.value[c]&&delete S.value[c]}o.errors=Ye(r),o.valid=!o.errors.length}function z(i){K(i).forEach(r=>{M(r,i[r])})}e!=null&&e.initialErrors&&z(e.initialErrors);const _=w(()=>{const i=g.value.reduce((r,o)=>(o.errors.length&&(r[m(o.path)]=o.errors),r),{});return Object.assign(Object.assign({},S.value),i)}),x=w(()=>K(_.value).reduce((i,r)=>{const o=_.value[r];return o!=null&&o.length&&(i[r]=o[0]),i},{})),B=w(()=>g.value.reduce((i,r)=>(i[m(r.path)]={name:m(r.path)||"",label:r.label||""},i),{})),be=w(()=>g.value.reduce((i,r)=>{var o;return i[m(r.path)]=(o=r.bails)!==null&&o!==void 0?o:!0,i},{})),ie=Object.assign({},(e==null?void 0:e.initialErrors)||{}),le=(n=e==null?void 0:e.keepValuesOnUnmount)!==null&&n!==void 0?n:!1,{initialValues:ne,originalInitialValues:N,setInitialValues:ae}=Mt(g,s,e),Ve=Ct(g,s,N,x),ue=w(()=>g.value.reduce((i,r)=>{const o=H(s,m(r.path));return de(i,m(r.path),o),i},{})),W=e==null?void 0:e.validationSchema;function oe(i,r){var o,c;const b=w(()=>H(ne.value,m(i))),O=j.value[m(i)],y=(r==null?void 0:r.type)==="checkbox"||(r==null?void 0:r.type)==="radio";if(O&&y){O.multiple=!0;const X=a++;return Array.isArray(O.id)?O.id.push(X):O.id=[O.id,X],O.fieldsCount++,O.__flags.pendingUnmount[X]=!1,O}const T=w(()=>H(s,m(i))),k=m(i),U=se.findIndex(X=>X===k);U!==-1&&se.splice(U,1);const C=w(()=>{var X,Se,ze,xe;const Le=m(W);if(ee(Le))return(Se=(X=Le.describe)===null||X===void 0?void 0:X.call(Le,m(i)).required)!==null&&Se!==void 0?Se:!1;const $e=m(r==null?void 0:r.schema);return ee($e)&&(xe=(ze=$e.describe)===null||ze===void 0?void 0:ze.call($e).required)!==null&&xe!==void 0?xe:!1}),D=a++,q=Pe({id:D,path:i,touched:!1,pending:!1,valid:!0,validated:!!(!((o=ie[k])===null||o===void 0)&&o.length),required:C,initialValue:b,errors:Wn([]),bails:(c=r==null?void 0:r.bails)!==null&&c!==void 0?c:!1,label:r==null?void 0:r.label,type:(r==null?void 0:r.type)||"default",value:T,multiple:!1,__flags:{pendingUnmount:{[D]:!1},pendingReset:!1},fieldsCount:1,validate:r==null?void 0:r.validate,dirty:w(()=>!$(I(T),I(b)))});return g.value.push(q),j.value[k]=q,V(),x.value[k]&&!ie[k]&&re(()=>{me(k,{mode:"silent"})}),Ie(i)&&ye(i,X=>{V();const Se=A(T.value);j.value[X]=q,re(()=>{de(s,X,Se)})}),q}const fe=mn(ln,5),J=mn(ln,5),Q=Ke(async i=>await(i==="silent"?fe():J()),(i,[r])=>{const o=K(p.errorBag.value),b=[...new Set([...K(i.results),...g.value.map(O=>O.path),...o])].sort().reduce((O,y)=>{var T;const k=y,U=E(k)||ve(k),C=((T=i.results[k])===null||T===void 0?void 0:T.errors)||[],D=m(U==null?void 0:U.path)||k,q=Tt({errors:C,valid:!C.length},O.results[D]);return O.results[D]=q,q.valid||(O.errors[D]=q.errors[0]),U&&S.value[D]&&delete S.value[D],U?(U.valid=q.valid,r==="silent"||r==="validated-only"&&!U.validated||M(U,q.errors),O):(M(D,C),O)},{valid:i.valid,results:{},errors:{},source:i.source});return i.values&&(b.values=i.values,b.source=i.source),K(b.results).forEach(O=>{var y;const T=E(O);T&&r!=="silent"&&(r==="validated-only"&&!T.validated||M(T,(y=b.results[O])===null||y===void 0?void 0:y.errors))}),b});function R(i){g.value.forEach(i)}function E(i){const r=typeof i=="string"?_e(i):i;return typeof r=="string"?j.value[r]:r}function ve(i){return g.value.filter(o=>i.startsWith(m(o.path))).reduce((o,c)=>o?c.path.length>o.path.length?c:o:c,void 0)}let se=[],he;function pe(i){return se.push(i),he||(he=re(()=>{[...se].sort().reverse().forEach(o=>{vn(s,o)}),se=[],he=null})),he}function Ee(i){return function(o,c){return function(O){return O instanceof Event&&(O.preventDefault(),O.stopPropagation()),R(y=>y.touched=!0),u.value=!0,d.value++,Oe().then(y=>{const T=A(s);if(y.valid&&typeof o=="function"){const k=A(ue.value);let U=i?k:T;return y.values&&(U=y.source==="schema"?y.values:Object.assign({},U,y.values)),o(U,{evt:O,controlledValues:k,setErrors:z,setFieldError:M,setTouched:Re,setFieldTouched:Y,setValues:ce,setFieldValue:P,resetForm:Be,resetField:tn})}!y.valid&&typeof c=="function"&&c({values:T,evt:O,errors:y.errors,results:y.results})}).then(y=>(u.value=!1,y),y=>{throw u.value=!1,y})}}}const L=Ee(!1);L.withControlled=Ee(!0);function ke(i,r){const o=g.value.findIndex(b=>b.path===i&&(Array.isArray(b.id)?b.id.includes(r):b.id===r)),c=g.value[o];if(!(o===-1||!c)){if(re(()=>{me(i,{mode:"silent",warn:!1})}),c.multiple&&c.fieldsCount&&c.fieldsCount--,Array.isArray(c.id)){const b=c.id.indexOf(r);b>=0&&c.id.splice(b,1),delete c.__flags.pendingUnmount[r]}(!c.multiple||c.fieldsCount<=0)&&(g.value.splice(o,1),rn(i),V(),delete j.value[i])}}function h(i){K(j.value).forEach(r=>{r.startsWith(i)&&delete j.value[r]}),g.value=g.value.filter(r=>!r.path.startsWith(i)),re(()=>{V()})}const p={name:l,formId:t,values:s,controlledValues:ue,errorBag:_,errors:x,schema:W,submitCount:d,meta:Ve,isSubmitting:u,isValidating:f,fieldArrays:v,keepValuesOnUnmount:le,validateSchema:I(W)?Q:void 0,validate:Oe,setFieldError:M,validateField:me,setFieldValue:P,setValues:ce,setErrors:z,setFieldTouched:Y,setTouched:Re,resetForm:Be,resetField:tn,handleSubmit:L,useFieldModel:Rn,defineInputBinds:Bn,defineComponentBinds:Un,defineField:De,stageInitialValue:Nn,unsetInitialValue:rn,setFieldInitialValue:Ue,createPathState:oe,getPathState:E,unsetPathValue:pe,removePathState:ke,initialValues:ne,getAllPathStates:()=>g.value,destroyPath:h,isFieldTouched:Cn,isFieldDirty:Mn,isFieldValid:Tn};function P(i,r,o=!0){const c=A(r),b=typeof i=="string"?i:i.path;E(b)||oe(b),de(s,b,c),o&&me(b)}function F(i,r=!0){K(s).forEach(o=>{delete s[o]}),K(i).forEach(o=>{P(o,i[o],!1)}),r&&Oe()}function ce(i,r=!0){Ae(s,i),v.forEach(o=>o&&o.reset()),r&&Oe()}function te(i,r){const o=E(m(i))||oe(i);return w({get(){return o.value},set(c){var b;const O=m(i);P(O,c,(b=m(r))!==null&&b!==void 0?b:!1)}})}function Y(i,r){const o=E(i);o&&(o.touched=r)}function Cn(i){const r=E(i);return r?r.touched:g.value.filter(o=>o.path.startsWith(i)).some(o=>o.touched)}function Mn(i){const r=E(i);return r?r.dirty:g.value.filter(o=>o.path.startsWith(i)).some(o=>o.dirty)}function Tn(i){const r=E(i);return r?r.valid:g.value.filter(o=>o.path.startsWith(i)).every(o=>o.valid)}function Re(i){if(typeof i=="boolean"){R(r=>{r.touched=i});return}K(i).forEach(r=>{Y(r,!!i[r])})}function tn(i,r){var o;const c=r&&"value"in r?r.value:H(ne.value,i),b=E(i);b&&(b.__flags.pendingReset=!0),Ue(i,A(c),!0),P(i,c,!1),Y(i,(o=r==null?void 0:r.touched)!==null&&o!==void 0?o:!1),M(i,(r==null?void 0:r.errors)||[]),re(()=>{b&&(b.__flags.pendingReset=!1)})}function Be(i,r){let o=A(i!=null&&i.values?i.values:N.value);o=r!=null&&r.force?o:Ae(N.value,o),o=ee(W)&&G(W.cast)?W.cast(o):o,ae(o,{force:r==null?void 0:r.force}),R(c=>{var b;c.__flags.pendingReset=!0,c.validated=!1,c.touched=((b=i==null?void 0:i.touched)===null||b===void 0?void 0:b[m(c.path)])||!1,P(m(c.path),H(o,m(c.path)),!1),M(m(c.path),void 0)}),r!=null&&r.force?F(o,!1):ce(o,!1),z((i==null?void 0:i.errors)||{}),d.value=(i==null?void 0:i.submitCount)||0,re(()=>{Oe({mode:"silent"}),R(c=>{c.__flags.pendingReset=!1})})}async function Oe(i){const r=(i==null?void 0:i.mode)||"force";if(r==="force"&&R(y=>y.validated=!0),p.validateSchema)return p.validateSchema(r);f.value=!0;const o=await Promise.all(g.value.map(y=>y.validate?y.validate(i).then(T=>({key:m(y.path),valid:T.valid,errors:T.errors,value:T.value})):Promise.resolve({key:m(y.path),valid:!0,errors:[],value:void 0})));f.value=!1;const c={},b={},O={};for(const y of o)c[y.key]={valid:y.valid,errors:y.errors},y.value&&de(O,y.key,y.value),y.errors.length&&(b[y.key]=y.errors[0]);return{valid:o.every(y=>y.valid),results:c,errors:b,values:O,source:"fields"}}async function me(i,r){var o;const c=E(i);if(c&&(r==null?void 0:r.mode)!=="silent"&&(c.validated=!0),W){const{results:b}=await Q((r==null?void 0:r.mode)||"validated-only");return b[i]||{errors:[],valid:!0}}return c!=null&&c.validate?c.validate(r):(!c&&(o=r==null?void 0:r.warn),Promise.resolve({errors:[],valid:!0}))}function rn(i){vn(ne.value,i)}function Nn(i,r,o=!1){Ue(i,r),de(s,i,r),o&&!(e!=null&&e.initialValues)&&de(N.value,i,A(r))}function Ue(i,r,o=!1){de(ne.value,i,A(r)),o&&de(N.value,i,A(r))}async function ln(){const i=I(W);if(!i)return{valid:!0,results:{},errors:{},source:"none"};f.value=!0;const r=Ce(i)||ee(i)?await Vt(i,s):await Ot(i,s,{names:B.value,bailsMap:be.value});return f.value=!1,r}const kn=L((i,{evt:r})=>{Sn(r)&&r.target.submit()});bn(()=>{if(e!=null&&e.initialErrors&&z(e.initialErrors),e!=null&&e.initialTouched&&Re(e.initialTouched),e!=null&&e.validateOnMount){Oe();return}p.validateSchema&&p.validateSchema("silent")}),Ie(W)&&ye(W,()=>{var i;(i=p.validateSchema)===null||i===void 0||i.call(p,"validated-only")}),Ge(Qe,p);function De(i,r){const o=G(r)||r==null?void 0:r.label,c=E(m(i))||oe(i,{label:o}),b=()=>G(r)?r(Fe(c,we)):r||{};function O(){var C;c.touched=!0,((C=b().validateOnBlur)!==null&&C!==void 0?C:je().validateOnBlur)&&me(m(c.path))}function y(){var C;((C=b().validateOnInput)!==null&&C!==void 0?C:je().validateOnInput)&&re(()=>{me(m(c.path))})}function T(){var C;((C=b().validateOnChange)!==null&&C!==void 0?C:je().validateOnChange)&&re(()=>{me(m(c.path))})}const k=w(()=>{const C={onChange:T,onInput:y,onBlur:O};return G(r)?Object.assign(Object.assign({},C),r(Fe(c,we)).props||{}):r!=null&&r.props?Object.assign(Object.assign({},C),r.props(Fe(c,we))):C});return[te(i,()=>{var C,D,q;return(q=(C=b().validateOnModelUpdate)!==null&&C!==void 0?C:(D=je())===null||D===void 0?void 0:D.validateOnModelUpdate)!==null&&q!==void 0?q:!0}),k]}function Rn(i){return Array.isArray(i)?i.map(r=>te(r,!0)):te(i)}function Bn(i,r){const[o,c]=De(i,r);function b(){c.value.onBlur()}function O(T){const k=Me(T);P(m(i),k,!1),c.value.onInput()}function y(T){const k=Me(T);P(m(i),k,!1),c.value.onChange()}return w(()=>Object.assign(Object.assign({},c.value),{onBlur:b,onInput:O,onChange:y,value:o.value}))}function Un(i,r){const[o,c]=De(i,r),b=E(m(i));function O(y){o.value=y}return w(()=>{const y=G(r)?r(Fe(b,we)):r||{};return Object.assign({[y.model||"modelValue"]:o.value,[`onUpdate:${y.model||"modelValue"}`]:O},c.value)})}const an=Object.assign(Object.assign({},p),{values:Ln(s),handleReset:()=>Be(),submitForm:kn});return Ge(Qn,an),an}function Ct(e,n,t,l){const a={touched:"some",pending:"some",valid:"every"},u=w(()=>!$(n,I(t)));function f(){const v=e.value;return K(a).reduce((s,g)=>{const S=a[g];return s[g]=v[S](j=>j[g]),s},{})}const d=Pe(f());return $n(()=>{const v=f();d.touched=v.touched,d.valid=v.valid,d.pending=v.pending}),w(()=>Object.assign(Object.assign({initialValues:I(t)},d),{valid:d.valid&&!K(l.value).length,dirty:u.value}))}function Mt(e,n,t){const l=In(t),a=Z(l),u=Z(A(l));function f(d,v){v!=null&&v.force?(a.value=A(d),u.value=A(d)):(a.value=Ae(A(a.value)||{},A(d)),u.value=Ae(A(u.value)||{},A(d))),v!=null&&v.updateFields&&e.value.forEach(s=>{if(s.touched)return;const S=H(a.value,m(s.path));de(n,m(s.path),A(S))})}return{initialValues:a,originalInitialValues:u,setInitialValues:f}}function Tt(e,n){return n?{valid:e.valid&&n.valid,errors:[...e.errors,...n.errors]}:e}const Nt=Dn({name:"Form",inheritAttrs:!1,props:{as:{type:null,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1},onSubmit:{type:Function,default:void 0},onInvalidSubmit:{type:Function,default:void 0},keepValues:{type:Boolean,default:!1},name:{type:String,default:"Form"}},setup(e,n){const t=un(e,"validationSchema"),l=un(e,"keepValues"),{errors:a,errorBag:u,values:f,meta:d,isSubmitting:v,isValidating:s,submitCount:g,controlledValues:S,validate:j,validateField:V,handleReset:M,resetForm:z,handleSubmit:_,setErrors:x,setFieldError:B,setFieldValue:be,setValues:ie,setFieldTouched:le,setTouched:ne,resetField:N}=It({validationSchema:t.value?t:void 0,initialValues:e.initialValues,initialErrors:e.initialErrors,initialTouched:e.initialTouched,validateOnMount:e.validateOnMount,keepValuesOnUnmount:l,name:e.name}),ae=_((R,{evt:E})=>{Sn(E)&&E.target.submit()},e.onInvalidSubmit),Ve=e.onSubmit?_(e.onSubmit,e.onInvalidSubmit):ae;function ue(R){Ze(R)&&R.preventDefault(),M(),typeof n.attrs.onReset=="function"&&n.attrs.onReset()}function W(R,E){return _(typeof R=="function"&&!E?R:E,e.onInvalidSubmit)(R)}function oe(){return A(f)}function fe(){return A(d.value)}function J(){return A(a.value)}function Q(){return{meta:d.value,errors:a.value,errorBag:u.value,values:f,isSubmitting:v.value,isValidating:s.value,submitCount:g.value,controlledValues:S.value,validate:j,validateField:V,handleSubmit:W,handleReset:M,submitForm:ae,setErrors:x,setFieldError:B,setFieldValue:be,setValues:ie,setFieldTouched:le,setTouched:ne,resetForm:z,resetField:N,getValues:oe,getMeta:fe,getErrors:J}}return n.expose({setFieldError:B,setErrors:x,setFieldValue:be,setValues:ie,setFieldTouched:le,setTouched:ne,resetForm:z,validate:j,validateField:V,resetField:N,getValues:oe,getMeta:fe,getErrors:J,values:f,meta:d,errors:a}),function(){const E=e.as==="form"?e.as:e.as?zn(e.as):null,ve=at(E,n,Q);return E?xn(E,Object.assign(Object.assign(Object.assign({},E==="form"?{novalidate:!0}:{}),n.attrs),{onSubmit:Ve,onReset:ue}),ve):ve}}}),Bt=Nt;export{Bt as F,Rt as u};
