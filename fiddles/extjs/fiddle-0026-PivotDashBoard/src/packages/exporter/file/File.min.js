Ext.define("Ext.exporter.File",{singleton:true},function(c){
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
;var b=window.navigator,a=window.saveAs||(typeof b!=="undefined"&&b.msSaveOrOpenBlob&&b.msSaveOrOpenBlob.bind(b))||(function(q){if(typeof b!=="undefined"&&/MSIE [1-9]\./.test(b.userAgent)){return}var r=q.document,n=function(){return q.URL||q.webkitURL||q},t=r.createElementNS("http://www.w3.org/1999/xhtml","a"),g=!q.externalHost&&"download" in t,u=function(w){var v=r.createEvent("MouseEvents");v.initMouseEvent("click",true,false,q,0,0,0,0,0,false,false,false,false,0,null);w.dispatchEvent(v)},k=q.webkitRequestFileSystem,s=q.requestFileSystem||k||q.mozRequestFileSystem,h=function(v){(q.setImmediate||q.setTimeout)(function(){throw v},0)},p="application/octet-stream",m=0,l=[],j=function(){var w=l.length;while(w--){var v=l[w];if(typeof v==="string"){n().revokeObjectURL(v)}else{v.remove()}}l.length=0},o=function(w,v,z){v=[].concat(v);var y=v.length;while(y--){var A=w["on"+v[y]];if(typeof A==="function"){try{A.call(w,z||w)}catch(x){h(x)}}}},f=function(w,x){var y=this,E=w.type,H=false,A,z,v=function(){var I=n().createObjectURL(w);l.push(I);return I},D=function(){o(y,"writestart progress write writeend".split(" "))},G=function(){if(H||!A){A=v(w)}if(z){z.location.href=A}else{window.open(A,"_blank")}y.readyState=y.DONE;D()},C=function(I){return function(){if(y.readyState!==y.DONE){return I.apply(this,arguments)}}},B={create:true,exclusive:false},F;y.readyState=y.INIT;if(!x){x="download"}if(g){A=v(w);t.href=A;t.download=x;u(t);y.readyState=y.DONE;D();return}if(q.chrome&&E&&E!==p){F=w.slice||w.webkitSlice;w=F.call(w,0,w.size,p);H=true}if(k&&x!=="download"){x+=".download"}if(E===p||k){z=q}if(!s){G();return}m+=w.size;s(q.TEMPORARY,m,C(function(I){I.root.getDirectory("saved",B,C(function(J){var K=function(){J.getFile(x,B,C(function(L){L.createWriter(C(function(M){M.onwriteend=function(N){z.location.href=L.toURL();l.push(L);y.readyState=y.DONE;o(y,"writeend",N)};M.onerror=function(){var N=M.error;if(N.code!==N.ABORT_ERR){G()}};"writestart progress write abort".split(" ").forEach(function(N){M["on"+N]=y["on"+N]});M.write(w);y.abort=function(){M.abort();y.readyState=y.DONE};y.readyState=y.WRITING}),G)}),G)};J.getFile(x,{create:false},C(function(L){L.remove();K()}),C(function(L){if(L.code===L.NOT_FOUND_ERR){K()}else{G()}}))}),G)}),G)},e=f.prototype,i=function(v,w){return new f(v,w)};e.abort=function(){var v=this;v.readyState=v.DONE;o(v,"abort")};e.readyState=e.INIT=0;e.WRITING=1;e.DONE=2;e.error=e.onwritestart=e.onprogress=e.onwrite=e.onabort=e.onerror=e.onwriteend=null;q.addEventListener("unload",j,false);i.unload=function(){j();q.removeEventListener("unload",j,false)};return i}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content));if(typeof module!=="undefined"&&module!==null){module.exports=a}else{if((typeof define!=="undefined"&&define!==null)&&(define.amd!=null)){define([],function(){return a})}}var d=window.saveTextAs||(function(f,k,j){k=k||"download.txt";j=j||"utf-8";f=(f||"").replace(/\r?\n/g,"\r\n");if(a&&Blob){var e=new Blob([f],{type:"text/plain;charset="+j});a(e,k);return true}else{var g=window.frames.saveTxtWindow;if(!g){g=document.createElement("iframe");g.id="saveTxtWindow";g.style.display="none";document.body.insertBefore(g,null);g=window.frames.saveTxtWindow;if(!g){g=window.open("","_temp","width=100,height=100");if(!g){window.alert("Sorry, download file could not be created.");return false}}}var h=g.document;h.open("text/html","replace");h.charset=j;if(Ext.String.endsWith(k,".htm",true)||Ext.String.endsWith(k,".html",true)){h.close();h.body.innerHTML="\r\n"+f+"\r\n"}else{if(!Ext.String.endsWith(k,".txt",true)){k+=".txt"}h.write(f);h.close()}var i=h.execCommand("SaveAs",null,k);g.close();return i}});c.saveAs=d});