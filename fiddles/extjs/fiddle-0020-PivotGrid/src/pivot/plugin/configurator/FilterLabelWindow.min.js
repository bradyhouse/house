Ext.define("Ext.pivot.plugin.configurator.FilterLabelWindow",{extend:"Ext.window.Window",requires:["Ext.form.Panel","Ext.form.FieldContainer","Ext.form.field.Text","Ext.form.field.Hidden","Ext.form.field.ComboBox","Ext.layout.container.HBox"],modal:true,closeAction:"destroy",titleText:"Label filter ({0})",fieldText:"Show items for which the label",caseSensitiveText:"Case sensitive",initComponent:function(){var b=this,a=[];a=b.filterFields||[];a.push({xtype:"combo",editable:false,queryMode:"local",valueField:"value",store:b.store,name:"operator",listeners:{change:function(f,e){var c=this,d=c.isOperatorBetween(e);c.down("#fValue").setVisible(!d);c.down("#fValue").allowBlank=d;c.down("#fFrom").setVisible(d);c.down("#fFrom").allowBlank=!d;c.down("#fTo").setVisible(d);c.down("#fTo").allowBlank=!d},scope:b}},{itemId:"fValue",xtype:"textfield",margin:"0 0 0 5",name:"value"},{itemId:"fFrom",xtype:"textfield",margin:"0 0 0 5",name:"from"},{itemId:"fTo",xtype:"textfield",margin:"0 0 0 5",name:"to"});Ext.apply(b,{title:Ext.String.format(b.titleText,b.title),layout:"fit",items:[{xtype:"form",bodyPadding:5,items:[{xtype:"hidden",name:"type"},{xtype:"fieldcontainer",labelSeparator:"",fieldLabel:b.fieldText,labelAlign:"top",layout:{type:"hbox",align:"stretch"},defaults:{allowBlank:false,flex:1},items:a},{xtype:"checkbox",boxLabel:b.caseSensitiveText,name:"caseSensitive"}]}],buttons:[{text:Ext.Msg.buttonText.ok,handler:b.applyFilter,scope:b},{text:Ext.Msg.buttonText.cancel,handler:b.cancelFilter,scope:b}]});b.callParent(arguments)},applyFilter:function(){var b=this.down("form").getForm(),a;if(b.isValid()){a=b.getValues();if(this.isOperatorBetween(a.operator)){a.value=[a.from,a.to]}delete (a.from);delete (a.to);a.caseSensitive=(a.caseSensitive==="on");a.topSort=(a.topSort==="on");this.fireEvent("filter",this,a)}},cancelFilter:function(){this.close()},isOperatorBetween:function(a){return Ext.Array.indexOf(["between","not between"],a)>=0}});