Ext.define("Ext.pivot.matrix.Remote",{alternateClassName:["Mz.aggregate.matrix.Remote"],extend:"Ext.pivot.matrix.Base",alias:"pivotmatrix.remote",url:"",timeout:3000,onBeforeRequest:Ext.emptyFn,onRequestException:Ext.emptyFn,onInitialize:function(){var a=this;a.remoteDelayedTask=new Ext.util.DelayedTask(a.delayedProcess,a);a.callParent(arguments)},startProcess:function(){var a=this;if(Ext.isEmpty(a.url)){return}a.clearData();a.fireEvent("start",a);a.statusInProgress=false;a.remoteDelayedTask.delay(5)},delayedProcess:function(){var e=this,d=[],a=[],c=[],b,f;e.leftAxis.dimensions.each(function(g){d.push(g.serialize())});e.topAxis.dimensions.each(function(g){a.push(g.serialize())});e.aggregate.each(function(g){c.push(g.serialize())});f={keysSeparator:e.keysSeparator,grandTotalKey:e.grandTotalKey,leftAxis:d,topAxis:a,aggregate:c};b=e.fireEvent("beforerequest",e,f);if(b!==false){if(Ext.isFunction(e.onBeforeRequest)){b=e.onBeforeRequest(f)}}if(b===false){e.endProcess()}else{Ext.Ajax.request({url:e.url,timeout:e.timeout,jsonData:f,callback:e.processRemoteResults,scope:e})}},processRemoteResults:function(b,f,a){var d=this,c=!f,e=Ext.JSON.decode(a.responseText,true);if(f){c=(!e||!e.success)}if(c){d.fireEvent("requestexception",d,a);if(Ext.isFunction(d.onRequestException)){d.onRequestException(a)}d.endProcess();return}Ext.Array.each(Ext.Array.from(e.leftAxis||[]),function(g){if(Ext.isObject(g)){d.leftAxis.addItem(g)}});Ext.Array.each(Ext.Array.from(e.topAxis||[]),function(g){if(Ext.isObject(g)){d.topAxis.addItem(g)}});Ext.Array.each(Ext.Array.from(e.results||[]),function(h){if(Ext.isObject(h)){var g=d.results.add(h.leftKey||"",h.topKey||"");Ext.Object.each(h.values||{},g.addValue,g)}});d.endProcess()}});