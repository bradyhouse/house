Ext.define("Ext.pivot.dimension.Item",{alternateClassName:["Mz.aggregate.dimension.Item"],requires:["Ext.pivot.MixedCollection","Ext.pivot.filter.Label","Ext.pivot.filter.Value"],header:"",dataIndex:"",sortIndex:"",width:100,flex:0,align:"left",sortable:true,direction:"ASC",sorterFn:null,caseSensitiveSort:true,filter:null,renderer:null,grouperFn:null,blankText:"(blank)",showZeroAsBlank:false,aggregator:"sum",isAggregate:false,id:"",values:null,matrix:null,constructor:function(a){var c=this,b=Ext.pivot.Aggregators;c.initialConfig=a||{};if(a.isAggregate===true&&Ext.isEmpty(a.align)){a.align="left"}Ext.apply(c,a||{});if(Ext.isEmpty(c.id)){c.id=Ext.id()}if(c.isAggregate){if(Ext.isEmpty(c.dataIndex)&&Ext.isDefined(c.measure)){c.dataIndex=c.measure;delete c.measure}if(Ext.isEmpty(c.aggregator)){c.aggregator="sum"}if(Ext.isString(c.aggregator)&&Ext.isFunction(b[c.aggregator])){c.aggregatorFn=Ext.bind(b[c.aggregator],b)}else{if(Ext.isFunction(c.aggregator)){c.aggregatorFn=c.aggregator}}c.filter=false}else{if(Ext.isObject(c.filter)){Ext.applyIf(c.filter,{type:"label",parent:c});c.filter=Ext.Factory.pivotfilter(c.filter)}else{c.filter=false}}if(!Ext.isFunction(c.grouperFn)){c.grouperFn=c.defaultGrouperFn}if(c.sortable&&!c.sorterFn){c.sorterFn=c.defaultSorterFn}if(Ext.isEmpty(c.sortIndex)){c.sortIndex=c.dataIndex}if(!c.renderer){c.renderer=c.getDefaultFormatRenderer(c.isAggregate?"0,000.00":"")}else{if(Ext.isString(c.renderer)){c.renderer=c.getDefaultFormatRenderer(c.renderer)}}c.values=Ext.create("Ext.pivot.MixedCollection");c.values.getKey=function(d){return d.value};c.callParent(arguments)},destroy:function(){var a=this;Ext.destroyMembers(a,"values","filter");a.matrix=a.values=a.filter=null},serialize:function(){var a=this;return{id:a.id,header:a.header,dataIndex:a.dataIndex,sortIndex:a.sortIndex,width:a.width,flex:a.flex,align:a.align,sortable:a.sortable,direction:a.direction,caseSensitiveSort:a.caseSensitiveSort,filter:a.filter?a.filter.serialize():null,aggregator:Ext.isString(a.aggregator)?a.aggregator:"sum",showZeroAsBlank:a.showZeroAsBlank}},addValue:function(a,b){if(!this.values.getByKey(a)){this.values.add({value:a,display:b})}},getValues:function(){return this.values},getId:function(){return this.id},defaultSorterFn:function(f,e){var d=this,c=f.sortValue,b=e.sortValue,a;if(c instanceof Date){c=c.getTime()}if(b instanceof Date){b=b.getTime()}if(!d.caseSensitiveSort){c=String(c).toUpperCase();b=String(b).toUpperCase()}a=Ext.pivot.matrix.Base.prototype.naturalSort(c,b);if(a<0&&d.direction==="DESC"){return 1}if(a>0&&d.direction==="DESC"){return -1}return a},getDefaultFormatRenderer:function(b){var a=this;return function(d){var c;if(Ext.isEmpty(b)){return d}if(Ext.isFunction(b)){return b.apply(a,arguments)}if(!Ext.isNumber(d)){return d}if(a.isAggregate&&d===0&&a.showZeroAsBlank){return""}c=(d>=0);d=Math.abs(d);d=Ext.util.Format.number(d,b);return c?d:"-"+d}},defaultGrouperFn:function(a){return a.get(this.dataIndex)}});